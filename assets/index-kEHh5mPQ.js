function o0(d,s){for(var o=0;o<s.length;o++){const h=s[o];if(typeof h!="string"&&!Array.isArray(h)){for(const g in h)if(g!=="default"&&!(g in d)){const f=Object.getOwnPropertyDescriptor(h,g);f&&Object.defineProperty(d,g,f.get?f:{enumerable:!0,get:()=>h[g]})}}}return Object.freeze(Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))h(g);new MutationObserver(g=>{for(const f of g)if(f.type==="childList")for(const y of f.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&h(y)}).observe(document,{childList:!0,subtree:!0});function o(g){const f={};return g.integrity&&(f.integrity=g.integrity),g.referrerPolicy&&(f.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?f.credentials="include":g.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function h(g){if(g.ep)return;g.ep=!0;const f=o(g);fetch(g.href,f)}})();var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yl(d){return d&&d.__esModule&&Object.prototype.hasOwnProperty.call(d,"default")?d.default:d}function eg(d){if(Object.prototype.hasOwnProperty.call(d,"__esModule"))return d;var s=d.default;if(typeof s=="function"){var o=function h(){var g=!1;try{g=this instanceof h}catch{}return g?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(d).forEach(function(h){var g=Object.getOwnPropertyDescriptor(d,h);Object.defineProperty(o,h,g.get?g:{enumerable:!0,get:function(){return d[h]}})}),o}var xu={exports:{}},fa={},wu={exports:{}},et={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qh;function tg(){if(qh)return et;qh=1;var d=Symbol.for("react.element"),s=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),y=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),T=Symbol.iterator;function k(X){return X===null||typeof X!="object"?null:(X=T&&X[T]||X["@@iterator"],typeof X=="function"?X:null)}var B={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},z=Object.assign,j={};function F(X,se,ze){this.props=X,this.context=se,this.refs=j,this.updater=ze||B}F.prototype.isReactComponent={},F.prototype.setState=function(X,se){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,se,"setState")},F.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function ie(){}ie.prototype=F.prototype;function $(X,se,ze){this.props=X,this.context=se,this.refs=j,this.updater=ze||B}var W=$.prototype=new ie;W.constructor=$,z(W,F.prototype),W.isPureReactComponent=!0;var J=Array.isArray,Ce=Object.prototype.hasOwnProperty,he={current:null},K={key:!0,ref:!0,__self:!0,__source:!0};function Ee(X,se,ze){var Pe,ot={},xe=null,mt=null;if(se!=null)for(Pe in se.ref!==void 0&&(mt=se.ref),se.key!==void 0&&(xe=""+se.key),se)Ce.call(se,Pe)&&!K.hasOwnProperty(Pe)&&(ot[Pe]=se[Pe]);var He=arguments.length-2;if(He===1)ot.children=ze;else if(1<He){for(var xt=Array(He),an=0;an<He;an++)xt[an]=arguments[an+2];ot.children=xt}if(X&&X.defaultProps)for(Pe in He=X.defaultProps,He)ot[Pe]===void 0&&(ot[Pe]=He[Pe]);return{$$typeof:d,type:X,key:xe,ref:mt,props:ot,_owner:he.current}}function oe(X,se){return{$$typeof:d,type:X.type,key:se,ref:X.ref,props:X.props,_owner:X._owner}}function vt(X){return typeof X=="object"&&X!==null&&X.$$typeof===d}function ut(X){var se={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(ze){return se[ze]})}var ke=/\/+/g;function Ye(X,se){return typeof X=="object"&&X!==null&&X.key!=null?ut(""+X.key):se.toString(36)}function Ze(X,se,ze,Pe,ot){var xe=typeof X;(xe==="undefined"||xe==="boolean")&&(X=null);var mt=!1;if(X===null)mt=!0;else switch(xe){case"string":case"number":mt=!0;break;case"object":switch(X.$$typeof){case d:case s:mt=!0}}if(mt)return mt=X,ot=ot(mt),X=Pe===""?"."+Ye(mt,0):Pe,J(ot)?(ze="",X!=null&&(ze=X.replace(ke,"$&/")+"/"),Ze(ot,se,ze,"",function(an){return an})):ot!=null&&(vt(ot)&&(ot=oe(ot,ze+(!ot.key||mt&&mt.key===ot.key?"":(""+ot.key).replace(ke,"$&/")+"/")+X)),se.push(ot)),1;if(mt=0,Pe=Pe===""?".":Pe+":",J(X))for(var He=0;He<X.length;He++){xe=X[He];var xt=Pe+Ye(xe,He);mt+=Ze(xe,se,ze,xt,ot)}else if(xt=k(X),typeof xt=="function")for(X=xt.call(X),He=0;!(xe=X.next()).done;)xe=xe.value,xt=Pe+Ye(xe,He++),mt+=Ze(xe,se,ze,xt,ot);else if(xe==="object")throw se=String(X),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.");return mt}function re(X,se,ze){if(X==null)return X;var Pe=[],ot=0;return Ze(X,Pe,"","",function(xe){return se.call(ze,xe,ot++)}),Pe}function st(X){if(X._status===-1){var se=X._result;se=se(),se.then(function(ze){(X._status===0||X._status===-1)&&(X._status=1,X._result=ze)},function(ze){(X._status===0||X._status===-1)&&(X._status=2,X._result=ze)}),X._status===-1&&(X._status=0,X._result=se)}if(X._status===1)return X._result.default;throw X._result}var _e={current:null},ye={transition:null},Re={ReactCurrentDispatcher:_e,ReactCurrentBatchConfig:ye,ReactCurrentOwner:he};function ve(){throw Error("act(...) is not supported in production builds of React.")}return et.Children={map:re,forEach:function(X,se,ze){re(X,function(){se.apply(this,arguments)},ze)},count:function(X){var se=0;return re(X,function(){se++}),se},toArray:function(X){return re(X,function(se){return se})||[]},only:function(X){if(!vt(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},et.Component=F,et.Fragment=o,et.Profiler=g,et.PureComponent=$,et.StrictMode=h,et.Suspense=C,et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Re,et.act=ve,et.cloneElement=function(X,se,ze){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Pe=z({},X.props),ot=X.key,xe=X.ref,mt=X._owner;if(se!=null){if(se.ref!==void 0&&(xe=se.ref,mt=he.current),se.key!==void 0&&(ot=""+se.key),X.type&&X.type.defaultProps)var He=X.type.defaultProps;for(xt in se)Ce.call(se,xt)&&!K.hasOwnProperty(xt)&&(Pe[xt]=se[xt]===void 0&&He!==void 0?He[xt]:se[xt])}var xt=arguments.length-2;if(xt===1)Pe.children=ze;else if(1<xt){He=Array(xt);for(var an=0;an<xt;an++)He[an]=arguments[an+2];Pe.children=He}return{$$typeof:d,type:X.type,key:ot,ref:xe,props:Pe,_owner:mt}},et.createContext=function(X){return X={$$typeof:y,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:f,_context:X},X.Consumer=X},et.createElement=Ee,et.createFactory=function(X){var se=Ee.bind(null,X);return se.type=X,se},et.createRef=function(){return{current:null}},et.forwardRef=function(X){return{$$typeof:_,render:X}},et.isValidElement=vt,et.lazy=function(X){return{$$typeof:A,_payload:{_status:-1,_result:X},_init:st}},et.memo=function(X,se){return{$$typeof:w,type:X,compare:se===void 0?null:se}},et.startTransition=function(X){var se=ye.transition;ye.transition={};try{X()}finally{ye.transition=se}},et.unstable_act=ve,et.useCallback=function(X,se){return _e.current.useCallback(X,se)},et.useContext=function(X){return _e.current.useContext(X)},et.useDebugValue=function(){},et.useDeferredValue=function(X){return _e.current.useDeferredValue(X)},et.useEffect=function(X,se){return _e.current.useEffect(X,se)},et.useId=function(){return _e.current.useId()},et.useImperativeHandle=function(X,se,ze){return _e.current.useImperativeHandle(X,se,ze)},et.useInsertionEffect=function(X,se){return _e.current.useInsertionEffect(X,se)},et.useLayoutEffect=function(X,se){return _e.current.useLayoutEffect(X,se)},et.useMemo=function(X,se){return _e.current.useMemo(X,se)},et.useReducer=function(X,se,ze){return _e.current.useReducer(X,se,ze)},et.useRef=function(X){return _e.current.useRef(X)},et.useState=function(X){return _e.current.useState(X)},et.useSyncExternalStore=function(X,se,ze){return _e.current.useSyncExternalStore(X,se,ze)},et.useTransition=function(){return _e.current.useTransition()},et.version="18.3.1",et}var Kh;function Xu(){return Kh||(Kh=1,wu.exports=tg()),wu.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zh;function ng(){if(Zh)return fa;Zh=1;var d=Xu(),s=Symbol.for("react.element"),o=Symbol.for("react.fragment"),h=Object.prototype.hasOwnProperty,g=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function y(_,C,w){var A,T={},k=null,B=null;w!==void 0&&(k=""+w),C.key!==void 0&&(k=""+C.key),C.ref!==void 0&&(B=C.ref);for(A in C)h.call(C,A)&&!f.hasOwnProperty(A)&&(T[A]=C[A]);if(_&&_.defaultProps)for(A in C=_.defaultProps,C)T[A]===void 0&&(T[A]=C[A]);return{$$typeof:s,type:_,key:k,ref:B,props:T,_owner:g.current}}return fa.Fragment=o,fa.jsx=y,fa.jsxs=y,fa}var Jh;function rg(){return Jh||(Jh=1,xu.exports=ng()),xu.exports}var M=rg(),le=Xu();const rn=Yl(le),ig=o0({__proto__:null,default:rn},[le]);var Ll={},yu={exports:{}},qn={},vu={exports:{}},Eu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ef;function sg(){return ef||(ef=1,(function(d){function s(ye,Re){var ve=ye.length;ye.push(Re);e:for(;0<ve;){var X=ve-1>>>1,se=ye[X];if(0<g(se,Re))ye[X]=Re,ye[ve]=se,ve=X;else break e}}function o(ye){return ye.length===0?null:ye[0]}function h(ye){if(ye.length===0)return null;var Re=ye[0],ve=ye.pop();if(ve!==Re){ye[0]=ve;e:for(var X=0,se=ye.length,ze=se>>>1;X<ze;){var Pe=2*(X+1)-1,ot=ye[Pe],xe=Pe+1,mt=ye[xe];if(0>g(ot,ve))xe<se&&0>g(mt,ot)?(ye[X]=mt,ye[xe]=ve,X=xe):(ye[X]=ot,ye[Pe]=ve,X=Pe);else if(xe<se&&0>g(mt,ve))ye[X]=mt,ye[xe]=ve,X=xe;else break e}}return Re}function g(ye,Re){var ve=ye.sortIndex-Re.sortIndex;return ve!==0?ve:ye.id-Re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;d.unstable_now=function(){return f.now()}}else{var y=Date,_=y.now();d.unstable_now=function(){return y.now()-_}}var C=[],w=[],A=1,T=null,k=3,B=!1,z=!1,j=!1,F=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function W(ye){for(var Re=o(w);Re!==null;){if(Re.callback===null)h(w);else if(Re.startTime<=ye)h(w),Re.sortIndex=Re.expirationTime,s(C,Re);else break;Re=o(w)}}function J(ye){if(j=!1,W(ye),!z)if(o(C)!==null)z=!0,st(Ce);else{var Re=o(w);Re!==null&&_e(J,Re.startTime-ye)}}function Ce(ye,Re){z=!1,j&&(j=!1,ie(Ee),Ee=-1),B=!0;var ve=k;try{for(W(Re),T=o(C);T!==null&&(!(T.expirationTime>Re)||ye&&!ut());){var X=T.callback;if(typeof X=="function"){T.callback=null,k=T.priorityLevel;var se=X(T.expirationTime<=Re);Re=d.unstable_now(),typeof se=="function"?T.callback=se:T===o(C)&&h(C),W(Re)}else h(C);T=o(C)}if(T!==null)var ze=!0;else{var Pe=o(w);Pe!==null&&_e(J,Pe.startTime-Re),ze=!1}return ze}finally{T=null,k=ve,B=!1}}var he=!1,K=null,Ee=-1,oe=5,vt=-1;function ut(){return!(d.unstable_now()-vt<oe)}function ke(){if(K!==null){var ye=d.unstable_now();vt=ye;var Re=!0;try{Re=K(!0,ye)}finally{Re?Ye():(he=!1,K=null)}}else he=!1}var Ye;if(typeof $=="function")Ye=function(){$(ke)};else if(typeof MessageChannel<"u"){var Ze=new MessageChannel,re=Ze.port2;Ze.port1.onmessage=ke,Ye=function(){re.postMessage(null)}}else Ye=function(){F(ke,0)};function st(ye){K=ye,he||(he=!0,Ye())}function _e(ye,Re){Ee=F(function(){ye(d.unstable_now())},Re)}d.unstable_IdlePriority=5,d.unstable_ImmediatePriority=1,d.unstable_LowPriority=4,d.unstable_NormalPriority=3,d.unstable_Profiling=null,d.unstable_UserBlockingPriority=2,d.unstable_cancelCallback=function(ye){ye.callback=null},d.unstable_continueExecution=function(){z||B||(z=!0,st(Ce))},d.unstable_forceFrameRate=function(ye){0>ye||125<ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):oe=0<ye?Math.floor(1e3/ye):5},d.unstable_getCurrentPriorityLevel=function(){return k},d.unstable_getFirstCallbackNode=function(){return o(C)},d.unstable_next=function(ye){switch(k){case 1:case 2:case 3:var Re=3;break;default:Re=k}var ve=k;k=Re;try{return ye()}finally{k=ve}},d.unstable_pauseExecution=function(){},d.unstable_requestPaint=function(){},d.unstable_runWithPriority=function(ye,Re){switch(ye){case 1:case 2:case 3:case 4:case 5:break;default:ye=3}var ve=k;k=ye;try{return Re()}finally{k=ve}},d.unstable_scheduleCallback=function(ye,Re,ve){var X=d.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?X+ve:X):ve=X,ye){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ve+se,ye={id:A++,callback:Re,priorityLevel:ye,startTime:ve,expirationTime:se,sortIndex:-1},ve>X?(ye.sortIndex=ve,s(w,ye),o(C)===null&&ye===o(w)&&(j?(ie(Ee),Ee=-1):j=!0,_e(J,ve-X))):(ye.sortIndex=se,s(C,ye),z||B||(z=!0,st(Ce))),ye},d.unstable_shouldYield=ut,d.unstable_wrapCallback=function(ye){var Re=k;return function(){var ve=k;k=Re;try{return ye.apply(this,arguments)}finally{k=ve}}}})(Eu)),Eu}var tf;function og(){return tf||(tf=1,vu.exports=sg()),vu.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nf;function ag(){if(nf)return qn;nf=1;var d=Xu(),s=og();function o(t){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+t,u=1;u<arguments.length;u++)i+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=new Set,g={};function f(t,i){y(t,i),y(t+"Capture",i)}function y(t,i){for(g[t]=i,t=0;t<i.length;t++)h.add(i[t])}var _=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},T={};function k(t){return C.call(T,t)?!0:C.call(A,t)?!1:w.test(t)?T[t]=!0:(A[t]=!0,!1)}function B(t,i,u,m){if(u!==null&&u.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return m?!1:u!==null?!u.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function z(t,i,u,m){if(i===null||typeof i>"u"||B(t,i,u,m))return!0;if(m)return!1;if(u!==null)switch(u.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function j(t,i,u,m,E,S,O){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=m,this.attributeNamespace=E,this.mustUseProperty=u,this.propertyName=t,this.type=i,this.sanitizeURL=S,this.removeEmptyString=O}var F={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){F[t]=new j(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var i=t[0];F[i]=new j(i,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){F[t]=new j(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){F[t]=new j(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){F[t]=new j(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){F[t]=new j(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){F[t]=new j(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){F[t]=new j(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){F[t]=new j(t,5,!1,t.toLowerCase(),null,!1,!1)});var ie=/[\-:]([a-z])/g;function $(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var i=t.replace(ie,$);F[i]=new j(i,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var i=t.replace(ie,$);F[i]=new j(i,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var i=t.replace(ie,$);F[i]=new j(i,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){F[t]=new j(t,1,!1,t.toLowerCase(),null,!1,!1)}),F.xlinkHref=new j("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){F[t]=new j(t,1,!1,t.toLowerCase(),null,!0,!0)});function W(t,i,u,m){var E=F.hasOwnProperty(i)?F[i]:null;(E!==null?E.type!==0:m||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(z(i,u,E,m)&&(u=null),m||E===null?k(i)&&(u===null?t.removeAttribute(i):t.setAttribute(i,""+u)):E.mustUseProperty?t[E.propertyName]=u===null?E.type===3?!1:"":u:(i=E.attributeName,m=E.attributeNamespace,u===null?t.removeAttribute(i):(E=E.type,u=E===3||E===4&&u===!0?"":""+u,m?t.setAttributeNS(m,i,u):t.setAttribute(i,u))))}var J=d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ce=Symbol.for("react.element"),he=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),Ee=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),vt=Symbol.for("react.provider"),ut=Symbol.for("react.context"),ke=Symbol.for("react.forward_ref"),Ye=Symbol.for("react.suspense"),Ze=Symbol.for("react.suspense_list"),re=Symbol.for("react.memo"),st=Symbol.for("react.lazy"),_e=Symbol.for("react.offscreen"),ye=Symbol.iterator;function Re(t){return t===null||typeof t!="object"?null:(t=ye&&t[ye]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,X;function se(t){if(X===void 0)try{throw Error()}catch(u){var i=u.stack.trim().match(/\n( *(at )?)/);X=i&&i[1]||""}return`
`+X+t}var ze=!1;function Pe(t,i){if(!t||ze)return"";ze=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ne){var m=ne}Reflect.construct(t,[],i)}else{try{i.call()}catch(ne){m=ne}t.call(i.prototype)}else{try{throw Error()}catch(ne){m=ne}t()}}catch(ne){if(ne&&m&&typeof ne.stack=="string"){for(var E=ne.stack.split(`
`),S=m.stack.split(`
`),O=E.length-1,P=S.length-1;1<=O&&0<=P&&E[O]!==S[P];)P--;for(;1<=O&&0<=P;O--,P--)if(E[O]!==S[P]){if(O!==1||P!==1)do if(O--,P--,0>P||E[O]!==S[P]){var H=`
`+E[O].replace(" at new "," at ");return t.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",t.displayName)),H}while(1<=O&&0<=P);break}}}finally{ze=!1,Error.prepareStackTrace=u}return(t=t?t.displayName||t.name:"")?se(t):""}function ot(t){switch(t.tag){case 5:return se(t.type);case 16:return se("Lazy");case 13:return se("Suspense");case 19:return se("SuspenseList");case 0:case 2:case 15:return t=Pe(t.type,!1),t;case 11:return t=Pe(t.type.render,!1),t;case 1:return t=Pe(t.type,!0),t;default:return""}}function xe(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case K:return"Fragment";case he:return"Portal";case oe:return"Profiler";case Ee:return"StrictMode";case Ye:return"Suspense";case Ze:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ut:return(t.displayName||"Context")+".Consumer";case vt:return(t._context.displayName||"Context")+".Provider";case ke:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case re:return i=t.displayName||null,i!==null?i:xe(t.type)||"Memo";case st:i=t._payload,t=t._init;try{return xe(t(i))}catch{}}return null}function mt(t){var i=t.type;switch(t.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=i.render,t=t.displayName||t.name||"",i.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xe(i);case 8:return i===Ee?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function He(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xt(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function an(t){var i=xt(t)?"checked":"value",u=Object.getOwnPropertyDescriptor(t.constructor.prototype,i),m=""+t[i];if(!t.hasOwnProperty(i)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var E=u.get,S=u.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return E.call(this)},set:function(O){m=""+O,S.call(this,O)}}),Object.defineProperty(t,i,{enumerable:u.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function ln(t){t._valueTracker||(t._valueTracker=an(t))}function qi(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var u=i.getValue(),m="";return t&&(m=xt(t)?t.checked?"true":"false":t.value),t=m,t!==u?(i.setValue(t),!0):!1}function at(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jr(t,i){var u=i.checked;return ve({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??t._wrapperState.initialChecked})}function Zn(t,i){var u=i.defaultValue==null?"":i.defaultValue,m=i.checked!=null?i.checked:i.defaultChecked;u=He(i.value!=null?i.value:u),t._wrapperState={initialChecked:m,initialValue:u,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function pi(t,i){i=i.checked,i!=null&&W(t,"checked",i,!1)}function $t(t,i){pi(t,i);var u=He(i.value),m=i.type;if(u!=null)m==="number"?(u===0&&t.value===""||t.value!=u)&&(t.value=""+u):t.value!==""+u&&(t.value=""+u);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}i.hasOwnProperty("value")?nt(t,i.type,u):i.hasOwnProperty("defaultValue")&&nt(t,i.type,He(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(t.defaultChecked=!!i.defaultChecked)}function Et(t,i,u){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var m=i.type;if(!(m!=="submit"&&m!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+t._wrapperState.initialValue,u||i===t.value||(t.value=i),t.defaultValue=i}u=t.name,u!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,u!==""&&(t.name=u)}function nt(t,i,u){(i!=="number"||at(t.ownerDocument)!==t)&&(u==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+u&&(t.defaultValue=""+u))}var Fr=Array.isArray;function Ie(t,i,u,m){if(t=t.options,i){i={};for(var E=0;E<u.length;E++)i["$"+u[E]]=!0;for(u=0;u<t.length;u++)E=i.hasOwnProperty("$"+t[u].value),t[u].selected!==E&&(t[u].selected=E),E&&m&&(t[u].defaultSelected=!0)}else{for(u=""+He(u),i=null,E=0;E<t.length;E++){if(t[E].value===u){t[E].selected=!0,m&&(t[E].defaultSelected=!0);return}i!==null||t[E].disabled||(i=t[E])}i!==null&&(i.selected=!0)}}function mi(t,i){if(i.dangerouslySetInnerHTML!=null)throw Error(o(91));return ve({},i,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Io(t,i){var u=i.value;if(u==null){if(u=i.children,i=i.defaultValue,u!=null){if(i!=null)throw Error(o(92));if(Fr(u)){if(1<u.length)throw Error(o(93));u=u[0]}i=u}i==null&&(i=""),u=i}t._wrapperState={initialValue:He(u)}}function gr(t,i){var u=He(i.value),m=He(i.defaultValue);u!=null&&(u=""+u,u!==t.value&&(t.value=u),i.defaultValue==null&&t.defaultValue!==u&&(t.defaultValue=u)),m!=null&&(t.defaultValue=""+m)}function Ms(t){var i=t.textContent;i===t._wrapperState.initialValue&&i!==""&&i!==null&&(t.value=i)}function zn(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ks(t,i){return t==null||t==="http://www.w3.org/1999/xhtml"?zn(i):t==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Jn,xn=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,u,m,E){MSApp.execUnsafeLocalFunction(function(){return t(i,u,m,E)})}:t})(function(t,i){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=i;else{for(Jn=Jn||document.createElement("div"),Jn.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=Jn.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;i.firstChild;)t.appendChild(i.firstChild)}});function xi(t,i){if(i){var u=t.firstChild;if(u&&u===t.lastChild&&u.nodeType===3){u.nodeValue=i;return}}t.textContent=i}var Ur={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ql=["Webkit","ms","Moz","O"];Object.keys(Ur).forEach(function(t){ql.forEach(function(i){i=i+t.charAt(0).toUpperCase()+t.substring(1),Ur[i]=Ur[t]})});function jt(t,i,u){return i==null||typeof i=="boolean"||i===""?"":u||typeof i!="number"||i===0||Ur.hasOwnProperty(t)&&Ur[t]?(""+i).trim():i+"px"}function we(t,i){t=t.style;for(var u in i)if(i.hasOwnProperty(u)){var m=u.indexOf("--")===0,E=jt(u,i[u],m);u==="float"&&(u="cssFloat"),m?t.setProperty(u,E):t[u]=E}}var Qt=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(t,i){if(i){if(Qt[t]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(o(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(o(61))}if(i.style!=null&&typeof i.style!="object")throw Error(o(62))}}function Tt(t,i){if(t.indexOf("-")===-1)return typeof i.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function Ki(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ds=null,Je=null,Hn=null;function To(t){if(t=Zo(t)){if(typeof Ds!="function")throw Error(o(280));var i=t.stateNode;i&&(i=Qa(i),Ds(t.stateNode,t.type,i))}}function bo(t){Je?Hn?Hn.push(t):Hn=[t]:Je=t}function Vn(){if(Je){var t=Je,i=Hn;if(Hn=Je=null,To(t),i)for(t=0;t<i.length;t++)To(i[t])}}function Ls(t,i){return t(i)}function cn(){}var zr=!1;function Zi(t,i,u){if(zr)return t(i,u);zr=!0;try{return Ls(t,i,u)}finally{zr=!1,(Je!==null||Hn!==null)&&(cn(),Vn())}}function On(t,i){var u=t.stateNode;if(u===null)return null;var m=Qa(u);if(m===null)return null;u=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(u&&typeof u!="function")throw Error(o(231,i,typeof u));return u}var No=!1;if(_)try{var er={};Object.defineProperty(er,"passive",{get:function(){No=!0}}),window.addEventListener("test",er,er),window.removeEventListener("test",er,er)}catch{No=!1}function Oo(t,i,u,m,E,S,O,P,H){var ne=Array.prototype.slice.call(arguments,3);try{i.apply(u,ne)}catch(de){this.onError(de)}}var en=!1,pr=null,Sn=!1,Ae=null,wi={onError:function(t){en=!0,pr=t}};function Ro(t,i,u,m,E,S,O,P,H){en=!1,pr=null,Oo.apply(wi,arguments)}function Rn(t,i,u,m,E,S,O,P,H){if(Ro.apply(this,arguments),en){if(en){var ne=pr;en=!1,pr=null}else throw Error(o(198));Sn||(Sn=!0,Ae=ne)}}function Wn(t){var i=t,u=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(u=i.return),t=i.return;while(t)}return i.tag===3?u:null}function Ji(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function es(t){if(Wn(t)!==t)throw Error(o(188))}function mr(t){var i=t.alternate;if(!i){if(i=Wn(t),i===null)throw Error(o(188));return i!==t?null:t}for(var u=t,m=i;;){var E=u.return;if(E===null)break;var S=E.alternate;if(S===null){if(m=E.return,m!==null){u=m;continue}break}if(E.child===S.child){for(S=E.child;S;){if(S===u)return es(E),t;if(S===m)return es(E),i;S=S.sibling}throw Error(o(188))}if(u.return!==m.return)u=E,m=S;else{for(var O=!1,P=E.child;P;){if(P===u){O=!0,u=E,m=S;break}if(P===m){O=!0,m=E,u=S;break}P=P.sibling}if(!O){for(P=S.child;P;){if(P===u){O=!0,u=S,m=E;break}if(P===m){O=!0,m=S,u=E;break}P=P.sibling}if(!O)throw Error(o(189))}}if(u.alternate!==m)throw Error(o(190))}if(u.tag!==3)throw Error(o(188));return u.stateNode.current===u?t:i}function ba(t){return t=mr(t),t!==null?Na(t):null}function Na(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var i=Na(t);if(i!==null)return i;t=t.sibling}return null}var tr=s.unstable_scheduleCallback,wn=s.unstable_cancelCallback,bt=s.unstable_shouldYield,Oa=s.unstable_requestPaint,wt=s.unstable_now,Mo=s.unstable_getCurrentPriorityLevel,ae=s.unstable_ImmediatePriority,Ra=s.unstable_UserBlockingPriority,_t=s.unstable_NormalPriority,yi=s.unstable_LowPriority,Ma=s.unstable_IdlePriority,ct=null,Qe=null;function rt(t){if(Qe&&typeof Qe.onCommitFiberRoot=="function")try{Qe.onCommitFiberRoot(ct,t,void 0,(t.current.flags&128)===128)}catch{}}var jn=Math.clz32?Math.clz32:qt,ko=Math.log,Do=Math.LN2;function qt(t){return t>>>=0,t===0?32:31-(ko(t)/Do|0)|0}var nr=64,Ps=4194304;function It(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rr(t,i){var u=t.pendingLanes;if(u===0)return 0;var m=0,E=t.suspendedLanes,S=t.pingedLanes,O=u&268435455;if(O!==0){var P=O&~E;P!==0?m=It(P):(S&=O,S!==0&&(m=It(S)))}else O=u&~E,O!==0?m=It(O):S!==0&&(m=It(S));if(m===0)return 0;if(i!==0&&i!==m&&(i&E)===0&&(E=m&-m,S=i&-i,E>=S||E===16&&(S&4194240)!==0))return i;if((m&4)!==0&&(m|=u&16),i=t.entangledLanes,i!==0)for(t=t.entanglements,i&=m;0<i;)u=31-jn(i),E=1<<u,m|=t[u],i&=~E;return m}function Kl(t,i){switch(t){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vi(t,i){for(var u=t.suspendedLanes,m=t.pingedLanes,E=t.expirationTimes,S=t.pendingLanes;0<S;){var O=31-jn(S),P=1<<O,H=E[O];H===-1?((P&u)===0||(P&m)!==0)&&(E[O]=Kl(P,i)):H<=i&&(t.expiredLanes|=P),S&=~P}}function yt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function un(){var t=nr;return nr<<=1,(nr&4194240)===0&&(nr=64),t}function Q(t){for(var i=[],u=0;31>u;u++)i.push(t);return i}function D(t,i,u){t.pendingLanes|=i,i!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,i=31-jn(i),t[i]=u}function De(t,i){var u=t.pendingLanes&~i;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=i,t.mutableReadLanes&=i,t.entangledLanes&=i,i=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<u;){var E=31-jn(u),S=1<<E;i[E]=0,m[E]=-1,t[E]=-1,u&=~S}}function Ht(t,i){var u=t.entangledLanes|=i;for(t=t.entanglements;u;){var m=31-jn(u),E=1<<m;E&i|t[m]&i&&(t[m]|=i),u&=~E}}var qe=0;function ka(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Bs,Mn,Le,Nt,Lo,Po=!1,Ei=[],ir=null,xr=null,Hr=null,Pt=new Map,Tr=new Map,_n=[],Ue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Da(t,i){switch(t){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":xr=null;break;case"mouseover":case"mouseout":Hr=null;break;case"pointerover":case"pointerout":Pt.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tr.delete(i.pointerId)}}function We(t,i,u,m,E,S){return t===null||t.nativeEvent!==S?(t={blockedOn:i,domEventName:u,eventSystemFlags:m,nativeEvent:S,targetContainers:[E]},i!==null&&(i=Zo(i),i!==null&&Mn(i)),t):(t.eventSystemFlags|=m,i=t.targetContainers,E!==null&&i.indexOf(E)===-1&&i.push(E),t)}function dn(t,i,u,m,E){switch(i){case"focusin":return ir=We(ir,t,i,u,m,E),!0;case"dragenter":return xr=We(xr,t,i,u,m,E),!0;case"mouseover":return Hr=We(Hr,t,i,u,m,E),!0;case"pointerover":var S=E.pointerId;return Pt.set(S,We(Pt.get(S)||null,t,i,u,m,E)),!0;case"gotpointercapture":return S=E.pointerId,Tr.set(S,We(Tr.get(S)||null,t,i,u,m,E)),!0}return!1}function La(t){var i=us(t.target);if(i!==null){var u=Wn(i);if(u!==null){if(i=u.tag,i===13){if(i=Ji(u),i!==null){t.blockedOn=i,Lo(t.priority,function(){Le(u)});return}}else if(i===3&&u.stateNode.current.memoizedState.isDehydrated){t.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ci(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var u=js(t.domEventName,t.eventSystemFlags,i[0],t.nativeEvent);if(u===null){u=t.nativeEvent;var m=new u.constructor(u.type,u);Zr=m,u.target.dispatchEvent(m),Zr=null}else return i=Zo(u),i!==null&&Mn(i),t.blockedOn=u,!1;i.shift()}return!0}function Bo(t,i,u){Ci(t)&&u.delete(i)}function Jr(){Po=!1,ir!==null&&Ci(ir)&&(ir=null),xr!==null&&Ci(xr)&&(xr=null),Hr!==null&&Ci(Hr)&&(Hr=null),Pt.forEach(Bo),Tr.forEach(Bo)}function ts(t,i){t.blockedOn===i&&(t.blockedOn=null,Po||(Po=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Jr)))}function br(t){function i(E){return ts(E,t)}if(0<Ei.length){ts(Ei[0],t);for(var u=1;u<Ei.length;u++){var m=Ei[u];m.blockedOn===t&&(m.blockedOn=null)}}for(ir!==null&&ts(ir,t),xr!==null&&ts(xr,t),Hr!==null&&ts(Hr,t),Pt.forEach(i),Tr.forEach(i),u=0;u<_n.length;u++)m=_n[u],m.blockedOn===t&&(m.blockedOn=null);for(;0<_n.length&&(u=_n[0],u.blockedOn===null);)La(u),u.blockedOn===null&&_n.shift()}var wr=J.ReactCurrentBatchConfig,Vr=!0;function Pa(t,i,u,m){var E=qe,S=wr.transition;wr.transition=null;try{qe=1,ei(t,i,u,m)}finally{qe=E,wr.transition=S}}function ns(t,i,u,m){var E=qe,S=wr.transition;wr.transition=null;try{qe=4,ei(t,i,u,m)}finally{qe=E,wr.transition=S}}function ei(t,i,u,m){if(Vr){var E=js(t,i,u,m);if(E===null)ac(t,i,m,hn,u),Da(t,m);else if(dn(E,t,i,u,m))m.stopPropagation();else if(Da(t,m),i&4&&-1<Ue.indexOf(t)){for(;E!==null;){var S=Zo(E);if(S!==null&&Bs(S),S=js(t,i,u,m),S===null&&ac(t,i,m,hn,u),S===E)break;E=S}E!==null&&m.stopPropagation()}else ac(t,i,m,null,u)}}var hn=null;function js(t,i,u,m){if(hn=null,t=Ki(m),t=us(t),t!==null)if(i=Wn(t),i===null)t=null;else if(u=i.tag,u===13){if(t=Ji(i),t!==null)return t;t=null}else if(u===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null);return hn=t,null}function jo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Mo()){case ae:return 1;case Ra:return 4;case _t:case yi:return 16;case Ma:return 536870912;default:return 16}default:return 16}}var Nr=null,Fo=null,Fs=null;function Ba(){if(Fs)return Fs;var t,i=Fo,u=i.length,m,E="value"in Nr?Nr.value:Nr.textContent,S=E.length;for(t=0;t<u&&i[t]===E[t];t++);var O=u-t;for(m=1;m<=O&&i[u-m]===E[S-m];m++);return Fs=E.slice(t,1<m?1-m:void 0)}function dt(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function rs(){return!0}function is(){return!1}function Vt(t){function i(u,m,E,S,O){this._reactName=u,this._targetInst=E,this.type=m,this.nativeEvent=S,this.target=O,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(u=t[P],this[P]=u?u(S):S[P]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?rs:is,this.isPropagationStopped=is,this}return ve(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=rs)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=rs)},persist:function(){},isPersistent:rs}),i}var Ai={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},te=Vt(Ai),Xe=ve({},Ai,{view:0,detail:0}),fn=Vt(Xe),Si,Us,ss,zs=ve({},Xe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ss&&(ss&&t.type==="mousemove"?(Si=t.screenX-ss.screenX,Us=t.screenY-ss.screenY):Us=Si=0,ss=t),Si)},movementY:function(t){return"movementY"in t?t.movementY:Us}}),ja=Vt(zs),Uo=ve({},zs,{dataTransfer:0}),Kt=Vt(Uo),zo=ve({},Xe,{relatedTarget:0}),Ot=Vt(zo),Hs=ve({},Ai,{animationName:0,elapsedTime:0,pseudoElement:0}),ti=Vt(Hs),Ct=ve({},Ai,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Be=Vt(Ct),Zl=ve({},Ai,{data:0}),St=Vt(Zl),ni={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_i={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jl={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function yr(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Jl[t])?!!i[t]:!1}function os(){return yr}var Fa=ve({},Xe,{key:function(t){if(t.key){var i=ni[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=dt(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_i[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(t){return t.type==="keypress"?dt(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dt(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ho=Vt(Fa),Ua=ve({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=Vt(Ua),ec=ve({},Xe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Ii=Vt(ec),Wo=ve({},Ai,{propertyName:0,elapsedTime:0,pseudoElement:0}),tc=Vt(Wo),as=ve({},zs,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nc=Vt(as),Wr=[9,13,27,32],Ti=_&&"CompositionEvent"in window,yn=null;_&&"documentMode"in document&&(yn=document.documentMode);var za=_&&"TextEvent"in window&&!yn,sr=_&&(!Ti||yn&&8<yn&&11>=yn),Ha=" ",Vs=!1;function Va(t,i){switch(t){case"keyup":return Wr.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Go(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var In=!1;function rc(t,i){switch(t){case"compositionend":return Go(i);case"keypress":return i.which!==32?null:(Vs=!0,Ha);case"textInput":return t=i.data,t===Ha&&Vs?null:t;default:return null}}function Yo(t,i){if(In)return t==="compositionend"||!Ti&&Va(t,i)?(t=Ba(),Fs=Fo=Nr=null,In=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return sr&&i.locale!=="ko"?null:i.data;default:return null}}var ls={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lt(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!ls[t.type]:i==="textarea"}function cs(t,i,u,m){bo(m),i=Ya(i,"onChange"),0<i.length&&(u=new te("onChange","change",null,u,m),t.push({event:u,listeners:i}))}var b=null,e=null;function n(t){hd(t,0)}function r(t){var i=Ys(t);if(qi(i))return t}function a(t,i){if(t==="change")return i}var l=!1;if(_){var c;if(_){var p="oninput"in document;if(!p){var x=document.createElement("div");x.setAttribute("oninput","return;"),p=typeof x.oninput=="function"}c=p}else c=!1;l=c&&(!document.documentMode||9<document.documentMode)}function v(){b&&(b.detachEvent("onpropertychange",I),e=b=null)}function I(t){if(t.propertyName==="value"&&r(e)){var i=[];cs(i,e,t,Ki(t)),Zi(n,i)}}function N(t,i,u){t==="focusin"?(v(),b=i,e=u,b.attachEvent("onpropertychange",I)):t==="focusout"&&v()}function R(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return r(e)}function L(t,i){if(t==="click")return r(i)}function U(t,i){if(t==="input"||t==="change")return r(i)}function V(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Y=typeof Object.is=="function"?Object.is:V;function ee(t,i){if(Y(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var u=Object.keys(t),m=Object.keys(i);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var E=u[m];if(!C.call(i,E)||!Y(t[E],i[E]))return!1}return!0}function ge(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pe(t,i){var u=ge(t);t=0;for(var m;u;){if(u.nodeType===3){if(m=t+u.textContent.length,t<=i&&m>=i)return{node:u,offset:i-t};t=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=ge(u)}}function ue(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?ue(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Ke(){for(var t=window,i=at();i instanceof t.HTMLIFrameElement;){try{var u=typeof i.contentWindow.location.href=="string"}catch{u=!1}if(u)t=i.contentWindow;else break;i=at(t.document)}return i}function Ge(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}function kn(t){var i=Ke(),u=t.focusedElem,m=t.selectionRange;if(i!==u&&u&&u.ownerDocument&&ue(u.ownerDocument.documentElement,u)){if(m!==null&&Ge(u)){if(i=m.start,t=m.end,t===void 0&&(t=i),"selectionStart"in u)u.selectionStart=i,u.selectionEnd=Math.min(t,u.value.length);else if(t=(i=u.ownerDocument||document)&&i.defaultView||window,t.getSelection){t=t.getSelection();var E=u.textContent.length,S=Math.min(m.start,E);m=m.end===void 0?S:Math.min(m.end,E),!t.extend&&S>m&&(E=m,m=S,S=E),E=pe(u,S);var O=pe(u,m);E&&O&&(t.rangeCount!==1||t.anchorNode!==E.node||t.anchorOffset!==E.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(i=i.createRange(),i.setStart(E.node,E.offset),t.removeAllRanges(),S>m?(t.addRange(i),t.extend(O.node,O.offset)):(i.setEnd(O.node,O.offset),t.addRange(i)))}}for(i=[],t=u;t=t.parentNode;)t.nodeType===1&&i.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<i.length;u++)t=i[u],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var or=_&&"documentMode"in document&&11>=document.documentMode,Zt=null,pt=null,Ft=null,Tn=!1;function ri(t,i,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Tn||Zt==null||Zt!==at(m)||(m=Zt,"selectionStart"in m&&Ge(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ft&&ee(Ft,m)||(Ft=m,m=Ya(pt,"onSelect"),0<m.length&&(i=new te("onSelect","select",null,i,u),t.push({event:i,listeners:m}),i.target=Zt)))}function Or(t,i){var u={};return u[t.toLowerCase()]=i.toLowerCase(),u["Webkit"+t]="webkit"+i,u["Moz"+t]="moz"+i,u}var bi={animationend:Or("Animation","AnimationEnd"),animationiteration:Or("Animation","AnimationIteration"),animationstart:Or("Animation","AnimationStart"),transitionend:Or("Transition","TransitionEnd")},Xo={},id={};_&&(id=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function Wa(t){if(Xo[t])return Xo[t];if(!bi[t])return t;var i=bi[t],u;for(u in i)if(i.hasOwnProperty(u)&&u in id)return Xo[t]=i[u];return t}var sd=Wa("animationend"),od=Wa("animationiteration"),ad=Wa("animationstart"),ld=Wa("transitionend"),cd=new Map,ud="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,i){cd.set(t,i),f(i,[t])}for(var ic=0;ic<ud.length;ic++){var sc=ud[ic],c1=sc.toLowerCase(),u1=sc[0].toUpperCase()+sc.slice(1);Ni(c1,"on"+u1)}Ni(sd,"onAnimationEnd"),Ni(od,"onAnimationIteration"),Ni(ad,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(ld,"onTransitionEnd"),y("onMouseEnter",["mouseout","mouseover"]),y("onMouseLeave",["mouseout","mouseover"]),y("onPointerEnter",["pointerout","pointerover"]),y("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $o="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),d1=new Set("cancel close invalid load scroll toggle".split(" ").concat($o));function dd(t,i,u){var m=t.type||"unknown-event";t.currentTarget=u,Rn(m,i,void 0,t),t.currentTarget=null}function hd(t,i){i=(i&4)!==0;for(var u=0;u<t.length;u++){var m=t[u],E=m.event;m=m.listeners;e:{var S=void 0;if(i)for(var O=m.length-1;0<=O;O--){var P=m[O],H=P.instance,ne=P.currentTarget;if(P=P.listener,H!==S&&E.isPropagationStopped())break e;dd(E,P,ne),S=H}else for(O=0;O<m.length;O++){if(P=m[O],H=P.instance,ne=P.currentTarget,P=P.listener,H!==S&&E.isPropagationStopped())break e;dd(E,P,ne),S=H}}}if(Sn)throw t=Ae,Sn=!1,Ae=null,t}function kt(t,i){var u=i[fc];u===void 0&&(u=i[fc]=new Set);var m=t+"__bubble";u.has(m)||(fd(i,t,2,!1),u.add(m))}function oc(t,i,u){var m=0;i&&(m|=4),fd(u,t,m,i)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function Qo(t){if(!t[Ga]){t[Ga]=!0,h.forEach(function(u){u!=="selectionchange"&&(d1.has(u)||oc(u,!1,t),oc(u,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[Ga]||(i[Ga]=!0,oc("selectionchange",!1,i))}}function fd(t,i,u,m){switch(jo(i)){case 1:var E=Pa;break;case 4:E=ns;break;default:E=ei}u=E.bind(null,i,u,t),E=void 0,!No||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(E=!0),m?E!==void 0?t.addEventListener(i,u,{capture:!0,passive:E}):t.addEventListener(i,u,!0):E!==void 0?t.addEventListener(i,u,{passive:E}):t.addEventListener(i,u,!1)}function ac(t,i,u,m,E){var S=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var P=m.stateNode.containerInfo;if(P===E||P.nodeType===8&&P.parentNode===E)break;if(O===4)for(O=m.return;O!==null;){var H=O.tag;if((H===3||H===4)&&(H=O.stateNode.containerInfo,H===E||H.nodeType===8&&H.parentNode===E))return;O=O.return}for(;P!==null;){if(O=us(P),O===null)return;if(H=O.tag,H===5||H===6){m=S=O;continue e}P=P.parentNode}}m=m.return}Zi(function(){var ne=S,de=Ki(u),fe=[];e:{var ce=cd.get(t);if(ce!==void 0){var Se=te,Ne=t;switch(t){case"keypress":if(dt(u)===0)break e;case"keydown":case"keyup":Se=Ho;break;case"focusin":Ne="focus",Se=Ot;break;case"focusout":Ne="blur",Se=Ot;break;case"beforeblur":case"afterblur":Se=Ot;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Kt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=Ii;break;case sd:case od:case ad:Se=ti;break;case ld:Se=tc;break;case"scroll":Se=fn;break;case"wheel":Se=nc;break;case"copy":case"cut":case"paste":Se=Be;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Vo}var Oe=(i&4)!==0,Jt=!Oe&&t==="scroll",q=Oe?ce!==null?ce+"Capture":null:ce;Oe=[];for(var G=ne,Z;G!==null;){Z=G;var me=Z.stateNode;if(Z.tag===5&&me!==null&&(Z=me,q!==null&&(me=On(G,q),me!=null&&Oe.push(qo(G,me,Z)))),Jt)break;G=G.return}0<Oe.length&&(ce=new Se(ce,Ne,null,u,de),fe.push({event:ce,listeners:Oe}))}}if((i&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",Se=t==="mouseout"||t==="pointerout",ce&&u!==Zr&&(Ne=u.relatedTarget||u.fromElement)&&(us(Ne)||Ne[ii]))break e;if((Se||ce)&&(ce=de.window===de?de:(ce=de.ownerDocument)?ce.defaultView||ce.parentWindow:window,Se?(Ne=u.relatedTarget||u.toElement,Se=ne,Ne=Ne?us(Ne):null,Ne!==null&&(Jt=Wn(Ne),Ne!==Jt||Ne.tag!==5&&Ne.tag!==6)&&(Ne=null)):(Se=null,Ne=ne),Se!==Ne)){if(Oe=ja,me="onMouseLeave",q="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(Oe=Vo,me="onPointerLeave",q="onPointerEnter",G="pointer"),Jt=Se==null?ce:Ys(Se),Z=Ne==null?ce:Ys(Ne),ce=new Oe(me,G+"leave",Se,u,de),ce.target=Jt,ce.relatedTarget=Z,me=null,us(de)===ne&&(Oe=new Oe(q,G+"enter",Ne,u,de),Oe.target=Z,Oe.relatedTarget=Jt,me=Oe),Jt=me,Se&&Ne)t:{for(Oe=Se,q=Ne,G=0,Z=Oe;Z;Z=Ws(Z))G++;for(Z=0,me=q;me;me=Ws(me))Z++;for(;0<G-Z;)Oe=Ws(Oe),G--;for(;0<Z-G;)q=Ws(q),Z--;for(;G--;){if(Oe===q||q!==null&&Oe===q.alternate)break t;Oe=Ws(Oe),q=Ws(q)}Oe=null}else Oe=null;Se!==null&&gd(fe,ce,Se,Oe,!1),Ne!==null&&Jt!==null&&gd(fe,Jt,Ne,Oe,!0)}}e:{if(ce=ne?Ys(ne):window,Se=ce.nodeName&&ce.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ce.type==="file")var Me=a;else if(lt(ce))if(l)Me=U;else{Me=R;var je=N}else(Se=ce.nodeName)&&Se.toLowerCase()==="input"&&(ce.type==="checkbox"||ce.type==="radio")&&(Me=L);if(Me&&(Me=Me(t,ne))){cs(fe,Me,u,de);break e}je&&je(t,ce,ne),t==="focusout"&&(je=ce._wrapperState)&&je.controlled&&ce.type==="number"&&nt(ce,"number",ce.value)}switch(je=ne?Ys(ne):window,t){case"focusin":(lt(je)||je.contentEditable==="true")&&(Zt=je,pt=ne,Ft=null);break;case"focusout":Ft=pt=Zt=null;break;case"mousedown":Tn=!0;break;case"contextmenu":case"mouseup":case"dragend":Tn=!1,ri(fe,u,de);break;case"selectionchange":if(or)break;case"keydown":case"keyup":ri(fe,u,de)}var Fe;if(Ti)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else In?Va(t,u)&&(Ve="onCompositionEnd"):t==="keydown"&&u.keyCode===229&&(Ve="onCompositionStart");Ve&&(sr&&u.locale!=="ko"&&(In||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&In&&(Fe=Ba()):(Nr=de,Fo="value"in Nr?Nr.value:Nr.textContent,In=!0)),je=Ya(ne,Ve),0<je.length&&(Ve=new St(Ve,t,null,u,de),fe.push({event:Ve,listeners:je}),Fe?Ve.data=Fe:(Fe=Go(u),Fe!==null&&(Ve.data=Fe)))),(Fe=za?rc(t,u):Yo(t,u))&&(ne=Ya(ne,"onBeforeInput"),0<ne.length&&(de=new St("onBeforeInput","beforeinput",null,u,de),fe.push({event:de,listeners:ne}),de.data=Fe))}hd(fe,i)})}function qo(t,i,u){return{instance:t,listener:i,currentTarget:u}}function Ya(t,i){for(var u=i+"Capture",m=[];t!==null;){var E=t,S=E.stateNode;E.tag===5&&S!==null&&(E=S,S=On(t,u),S!=null&&m.unshift(qo(t,S,E)),S=On(t,i),S!=null&&m.push(qo(t,S,E))),t=t.return}return m}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gd(t,i,u,m,E){for(var S=i._reactName,O=[];u!==null&&u!==m;){var P=u,H=P.alternate,ne=P.stateNode;if(H!==null&&H===m)break;P.tag===5&&ne!==null&&(P=ne,E?(H=On(u,S),H!=null&&O.unshift(qo(u,H,P))):E||(H=On(u,S),H!=null&&O.push(qo(u,H,P)))),u=u.return}O.length!==0&&t.push({event:i,listeners:O})}var h1=/\r\n?/g,f1=/\u0000|\uFFFD/g;function pd(t){return(typeof t=="string"?t:""+t).replace(h1,`
`).replace(f1,"")}function Xa(t,i,u){if(i=pd(i),pd(t)!==i&&u)throw Error(o(425))}function $a(){}var lc=null,cc=null;function uc(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var dc=typeof setTimeout=="function"?setTimeout:void 0,g1=typeof clearTimeout=="function"?clearTimeout:void 0,md=typeof Promise=="function"?Promise:void 0,p1=typeof queueMicrotask=="function"?queueMicrotask:typeof md<"u"?function(t){return md.resolve(null).then(t).catch(m1)}:dc;function m1(t){setTimeout(function(){throw t})}function hc(t,i){var u=i,m=0;do{var E=u.nextSibling;if(t.removeChild(u),E&&E.nodeType===8)if(u=E.data,u==="/$"){if(m===0){t.removeChild(E),br(i);return}m--}else u!=="$"&&u!=="$?"&&u!=="$!"||m++;u=E}while(u);br(i)}function Oi(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return t}function xd(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var u=t.data;if(u==="$"||u==="$!"||u==="$?"){if(i===0)return t;i--}else u==="/$"&&i++}t=t.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),Gr="__reactFiber$"+Gs,Ko="__reactProps$"+Gs,ii="__reactContainer$"+Gs,fc="__reactEvents$"+Gs,x1="__reactListeners$"+Gs,w1="__reactHandles$"+Gs;function us(t){var i=t[Gr];if(i)return i;for(var u=t.parentNode;u;){if(i=u[ii]||u[Gr]){if(u=i.alternate,i.child!==null||u!==null&&u.child!==null)for(t=xd(t);t!==null;){if(u=t[Gr])return u;t=xd(t)}return i}t=u,u=t.parentNode}return null}function Zo(t){return t=t[Gr]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ys(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function Qa(t){return t[Ko]||null}var gc=[],Xs=-1;function Ri(t){return{current:t}}function Dt(t){0>Xs||(t.current=gc[Xs],gc[Xs]=null,Xs--)}function Rt(t,i){Xs++,gc[Xs]=t.current,t.current=i}var Mi={},Dn=Ri(Mi),Gn=Ri(!1),ds=Mi;function $s(t,i){var u=t.type.contextTypes;if(!u)return Mi;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===i)return m.__reactInternalMemoizedMaskedChildContext;var E={},S;for(S in u)E[S]=i[S];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=E),E}function Yn(t){return t=t.childContextTypes,t!=null}function qa(){Dt(Gn),Dt(Dn)}function wd(t,i,u){if(Dn.current!==Mi)throw Error(o(168));Rt(Dn,i),Rt(Gn,u)}function yd(t,i,u){var m=t.stateNode;if(i=i.childContextTypes,typeof m.getChildContext!="function")return u;m=m.getChildContext();for(var E in m)if(!(E in i))throw Error(o(108,mt(t)||"Unknown",E));return ve({},u,m)}function Ka(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ds=Dn.current,Rt(Dn,t),Rt(Gn,Gn.current),!0}function vd(t,i,u){var m=t.stateNode;if(!m)throw Error(o(169));u?(t=yd(t,i,ds),m.__reactInternalMemoizedMergedChildContext=t,Dt(Gn),Dt(Dn),Rt(Dn,t)):Dt(Gn),Rt(Gn,u)}var si=null,Za=!1,pc=!1;function Ed(t){si===null?si=[t]:si.push(t)}function y1(t){Za=!0,Ed(t)}function ki(){if(!pc&&si!==null){pc=!0;var t=0,i=qe;try{var u=si;for(qe=1;t<u.length;t++){var m=u[t];do m=m(!0);while(m!==null)}si=null,Za=!1}catch(E){throw si!==null&&(si=si.slice(t+1)),tr(ae,ki),E}finally{qe=i,pc=!1}}return null}var Qs=[],qs=0,Ja=null,el=0,vr=[],Er=0,hs=null,oi=1,ai="";function fs(t,i){Qs[qs++]=el,Qs[qs++]=Ja,Ja=t,el=i}function Cd(t,i,u){vr[Er++]=oi,vr[Er++]=ai,vr[Er++]=hs,hs=t;var m=oi;t=ai;var E=32-jn(m)-1;m&=~(1<<E),u+=1;var S=32-jn(i)+E;if(30<S){var O=E-E%5;S=(m&(1<<O)-1).toString(32),m>>=O,E-=O,oi=1<<32-jn(i)+E|u<<E|m,ai=S+t}else oi=1<<S|u<<E|m,ai=t}function mc(t){t.return!==null&&(fs(t,1),Cd(t,1,0))}function xc(t){for(;t===Ja;)Ja=Qs[--qs],Qs[qs]=null,el=Qs[--qs],Qs[qs]=null;for(;t===hs;)hs=vr[--Er],vr[Er]=null,ai=vr[--Er],vr[Er]=null,oi=vr[--Er],vr[Er]=null}var ar=null,lr=null,Bt=!1,Rr=null;function Ad(t,i){var u=_r(5,null,null,0);u.elementType="DELETED",u.stateNode=i,u.return=t,i=t.deletions,i===null?(t.deletions=[u],t.flags|=16):i.push(u)}function Sd(t,i){switch(t.tag){case 5:var u=t.type;return i=i.nodeType!==1||u.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(t.stateNode=i,ar=t,lr=Oi(i.firstChild),!0):!1;case 6:return i=t.pendingProps===""||i.nodeType!==3?null:i,i!==null?(t.stateNode=i,ar=t,lr=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(u=hs!==null?{id:oi,overflow:ai}:null,t.memoizedState={dehydrated:i,treeContext:u,retryLane:1073741824},u=_r(18,null,null,0),u.stateNode=i,u.return=t,t.child=u,ar=t,lr=null,!0):!1;default:return!1}}function wc(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yc(t){if(Bt){var i=lr;if(i){var u=i;if(!Sd(t,i)){if(wc(t))throw Error(o(418));i=Oi(u.nextSibling);var m=ar;i&&Sd(t,i)?Ad(m,u):(t.flags=t.flags&-4097|2,Bt=!1,ar=t)}}else{if(wc(t))throw Error(o(418));t.flags=t.flags&-4097|2,Bt=!1,ar=t}}}function _d(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ar=t}function tl(t){if(t!==ar)return!1;if(!Bt)return _d(t),Bt=!0,!1;var i;if((i=t.tag!==3)&&!(i=t.tag!==5)&&(i=t.type,i=i!=="head"&&i!=="body"&&!uc(t.type,t.memoizedProps)),i&&(i=lr)){if(wc(t))throw Id(),Error(o(418));for(;i;)Ad(t,i),i=Oi(i.nextSibling)}if(_d(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,i=0;t;){if(t.nodeType===8){var u=t.data;if(u==="/$"){if(i===0){lr=Oi(t.nextSibling);break e}i--}else u!=="$"&&u!=="$!"&&u!=="$?"||i++}t=t.nextSibling}lr=null}}else lr=ar?Oi(t.stateNode.nextSibling):null;return!0}function Id(){for(var t=lr;t;)t=Oi(t.nextSibling)}function Ks(){lr=ar=null,Bt=!1}function vc(t){Rr===null?Rr=[t]:Rr.push(t)}var v1=J.ReactCurrentBatchConfig;function Jo(t,i,u){if(t=u.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(o(309));var m=u.stateNode}if(!m)throw Error(o(147,t));var E=m,S=""+t;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===S?i.ref:(i=function(O){var P=E.refs;O===null?delete P[S]:P[S]=O},i._stringRef=S,i)}if(typeof t!="string")throw Error(o(284));if(!u._owner)throw Error(o(290,t))}return t}function nl(t,i){throw t=Object.prototype.toString.call(i),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t))}function Td(t){var i=t._init;return i(t._payload)}function bd(t){function i(q,G){if(t){var Z=q.deletions;Z===null?(q.deletions=[G],q.flags|=16):Z.push(G)}}function u(q,G){if(!t)return null;for(;G!==null;)i(q,G),G=G.sibling;return null}function m(q,G){for(q=new Map;G!==null;)G.key!==null?q.set(G.key,G):q.set(G.index,G),G=G.sibling;return q}function E(q,G){return q=zi(q,G),q.index=0,q.sibling=null,q}function S(q,G,Z){return q.index=Z,t?(Z=q.alternate,Z!==null?(Z=Z.index,Z<G?(q.flags|=2,G):Z):(q.flags|=2,G)):(q.flags|=1048576,G)}function O(q){return t&&q.alternate===null&&(q.flags|=2),q}function P(q,G,Z,me){return G===null||G.tag!==6?(G=du(Z,q.mode,me),G.return=q,G):(G=E(G,Z),G.return=q,G)}function H(q,G,Z,me){var Me=Z.type;return Me===K?de(q,G,Z.props.children,me,Z.key):G!==null&&(G.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===st&&Td(Me)===G.type)?(me=E(G,Z.props),me.ref=Jo(q,G,Z),me.return=q,me):(me=Il(Z.type,Z.key,Z.props,null,q.mode,me),me.ref=Jo(q,G,Z),me.return=q,me)}function ne(q,G,Z,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==Z.containerInfo||G.stateNode.implementation!==Z.implementation?(G=hu(Z,q.mode,me),G.return=q,G):(G=E(G,Z.children||[]),G.return=q,G)}function de(q,G,Z,me,Me){return G===null||G.tag!==7?(G=Es(Z,q.mode,me,Me),G.return=q,G):(G=E(G,Z),G.return=q,G)}function fe(q,G,Z){if(typeof G=="string"&&G!==""||typeof G=="number")return G=du(""+G,q.mode,Z),G.return=q,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case Ce:return Z=Il(G.type,G.key,G.props,null,q.mode,Z),Z.ref=Jo(q,null,G),Z.return=q,Z;case he:return G=hu(G,q.mode,Z),G.return=q,G;case st:var me=G._init;return fe(q,me(G._payload),Z)}if(Fr(G)||Re(G))return G=Es(G,q.mode,Z,null),G.return=q,G;nl(q,G)}return null}function ce(q,G,Z,me){var Me=G!==null?G.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number")return Me!==null?null:P(q,G,""+Z,me);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ce:return Z.key===Me?H(q,G,Z,me):null;case he:return Z.key===Me?ne(q,G,Z,me):null;case st:return Me=Z._init,ce(q,G,Me(Z._payload),me)}if(Fr(Z)||Re(Z))return Me!==null?null:de(q,G,Z,me,null);nl(q,Z)}return null}function Se(q,G,Z,me,Me){if(typeof me=="string"&&me!==""||typeof me=="number")return q=q.get(Z)||null,P(G,q,""+me,Me);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case Ce:return q=q.get(me.key===null?Z:me.key)||null,H(G,q,me,Me);case he:return q=q.get(me.key===null?Z:me.key)||null,ne(G,q,me,Me);case st:var je=me._init;return Se(q,G,Z,je(me._payload),Me)}if(Fr(me)||Re(me))return q=q.get(Z)||null,de(G,q,me,Me,null);nl(G,me)}return null}function Ne(q,G,Z,me){for(var Me=null,je=null,Fe=G,Ve=G=0,Cn=null;Fe!==null&&Ve<Z.length;Ve++){Fe.index>Ve?(Cn=Fe,Fe=null):Cn=Fe.sibling;var ft=ce(q,Fe,Z[Ve],me);if(ft===null){Fe===null&&(Fe=Cn);break}t&&Fe&&ft.alternate===null&&i(q,Fe),G=S(ft,G,Ve),je===null?Me=ft:je.sibling=ft,je=ft,Fe=Cn}if(Ve===Z.length)return u(q,Fe),Bt&&fs(q,Ve),Me;if(Fe===null){for(;Ve<Z.length;Ve++)Fe=fe(q,Z[Ve],me),Fe!==null&&(G=S(Fe,G,Ve),je===null?Me=Fe:je.sibling=Fe,je=Fe);return Bt&&fs(q,Ve),Me}for(Fe=m(q,Fe);Ve<Z.length;Ve++)Cn=Se(Fe,q,Ve,Z[Ve],me),Cn!==null&&(t&&Cn.alternate!==null&&Fe.delete(Cn.key===null?Ve:Cn.key),G=S(Cn,G,Ve),je===null?Me=Cn:je.sibling=Cn,je=Cn);return t&&Fe.forEach(function(Hi){return i(q,Hi)}),Bt&&fs(q,Ve),Me}function Oe(q,G,Z,me){var Me=Re(Z);if(typeof Me!="function")throw Error(o(150));if(Z=Me.call(Z),Z==null)throw Error(o(151));for(var je=Me=null,Fe=G,Ve=G=0,Cn=null,ft=Z.next();Fe!==null&&!ft.done;Ve++,ft=Z.next()){Fe.index>Ve?(Cn=Fe,Fe=null):Cn=Fe.sibling;var Hi=ce(q,Fe,ft.value,me);if(Hi===null){Fe===null&&(Fe=Cn);break}t&&Fe&&Hi.alternate===null&&i(q,Fe),G=S(Hi,G,Ve),je===null?Me=Hi:je.sibling=Hi,je=Hi,Fe=Cn}if(ft.done)return u(q,Fe),Bt&&fs(q,Ve),Me;if(Fe===null){for(;!ft.done;Ve++,ft=Z.next())ft=fe(q,ft.value,me),ft!==null&&(G=S(ft,G,Ve),je===null?Me=ft:je.sibling=ft,je=ft);return Bt&&fs(q,Ve),Me}for(Fe=m(q,Fe);!ft.done;Ve++,ft=Z.next())ft=Se(Fe,q,Ve,ft.value,me),ft!==null&&(t&&ft.alternate!==null&&Fe.delete(ft.key===null?Ve:ft.key),G=S(ft,G,Ve),je===null?Me=ft:je.sibling=ft,je=ft);return t&&Fe.forEach(function(J1){return i(q,J1)}),Bt&&fs(q,Ve),Me}function Jt(q,G,Z,me){if(typeof Z=="object"&&Z!==null&&Z.type===K&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Ce:e:{for(var Me=Z.key,je=G;je!==null;){if(je.key===Me){if(Me=Z.type,Me===K){if(je.tag===7){u(q,je.sibling),G=E(je,Z.props.children),G.return=q,q=G;break e}}else if(je.elementType===Me||typeof Me=="object"&&Me!==null&&Me.$$typeof===st&&Td(Me)===je.type){u(q,je.sibling),G=E(je,Z.props),G.ref=Jo(q,je,Z),G.return=q,q=G;break e}u(q,je);break}else i(q,je);je=je.sibling}Z.type===K?(G=Es(Z.props.children,q.mode,me,Z.key),G.return=q,q=G):(me=Il(Z.type,Z.key,Z.props,null,q.mode,me),me.ref=Jo(q,G,Z),me.return=q,q=me)}return O(q);case he:e:{for(je=Z.key;G!==null;){if(G.key===je)if(G.tag===4&&G.stateNode.containerInfo===Z.containerInfo&&G.stateNode.implementation===Z.implementation){u(q,G.sibling),G=E(G,Z.children||[]),G.return=q,q=G;break e}else{u(q,G);break}else i(q,G);G=G.sibling}G=hu(Z,q.mode,me),G.return=q,q=G}return O(q);case st:return je=Z._init,Jt(q,G,je(Z._payload),me)}if(Fr(Z))return Ne(q,G,Z,me);if(Re(Z))return Oe(q,G,Z,me);nl(q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"?(Z=""+Z,G!==null&&G.tag===6?(u(q,G.sibling),G=E(G,Z),G.return=q,q=G):(u(q,G),G=du(Z,q.mode,me),G.return=q,q=G),O(q)):u(q,G)}return Jt}var Zs=bd(!0),Nd=bd(!1),rl=Ri(null),il=null,Js=null,Ec=null;function Cc(){Ec=Js=il=null}function Ac(t){var i=rl.current;Dt(rl),t._currentValue=i}function Sc(t,i,u){for(;t!==null;){var m=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),t===u)break;t=t.return}}function eo(t,i){il=t,Ec=Js=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&i)!==0&&(Xn=!0),t.firstContext=null)}function Cr(t){var i=t._currentValue;if(Ec!==t)if(t={context:t,memoizedValue:i,next:null},Js===null){if(il===null)throw Error(o(308));Js=t,il.dependencies={lanes:0,firstContext:t}}else Js=Js.next=t;return i}var gs=null;function _c(t){gs===null?gs=[t]:gs.push(t)}function Od(t,i,u,m){var E=i.interleaved;return E===null?(u.next=u,_c(i)):(u.next=E.next,E.next=u),i.interleaved=u,li(t,m)}function li(t,i){t.lanes|=i;var u=t.alternate;for(u!==null&&(u.lanes|=i),u=t,t=t.return;t!==null;)t.childLanes|=i,u=t.alternate,u!==null&&(u.childLanes|=i),u=t,t=t.return;return u.tag===3?u.stateNode:null}var Di=!1;function Ic(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rd(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,i){return{eventTime:t,lane:i,tag:0,payload:null,callback:null,next:null}}function Li(t,i,u){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(ht&2)!==0){var E=m.pending;return E===null?i.next=i:(i.next=E.next,E.next=i),m.pending=i,li(t,u)}return E=m.interleaved,E===null?(i.next=i,_c(m)):(i.next=E.next,E.next=i),m.interleaved=i,li(t,u)}function sl(t,i,u){if(i=i.updateQueue,i!==null&&(i=i.shared,(u&4194240)!==0)){var m=i.lanes;m&=t.pendingLanes,u|=m,i.lanes=u,Ht(t,u)}}function Md(t,i){var u=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var E=null,S=null;if(u=u.firstBaseUpdate,u!==null){do{var O={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};S===null?E=S=O:S=S.next=O,u=u.next}while(u!==null);S===null?E=S=i:S=S.next=i}else E=S=i;u={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:S,shared:m.shared,effects:m.effects},t.updateQueue=u;return}t=u.lastBaseUpdate,t===null?u.firstBaseUpdate=i:t.next=i,u.lastBaseUpdate=i}function ol(t,i,u,m){var E=t.updateQueue;Di=!1;var S=E.firstBaseUpdate,O=E.lastBaseUpdate,P=E.shared.pending;if(P!==null){E.shared.pending=null;var H=P,ne=H.next;H.next=null,O===null?S=ne:O.next=ne,O=H;var de=t.alternate;de!==null&&(de=de.updateQueue,P=de.lastBaseUpdate,P!==O&&(P===null?de.firstBaseUpdate=ne:P.next=ne,de.lastBaseUpdate=H))}if(S!==null){var fe=E.baseState;O=0,de=ne=H=null,P=S;do{var ce=P.lane,Se=P.eventTime;if((m&ce)===ce){de!==null&&(de=de.next={eventTime:Se,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var Ne=t,Oe=P;switch(ce=i,Se=u,Oe.tag){case 1:if(Ne=Oe.payload,typeof Ne=="function"){fe=Ne.call(Se,fe,ce);break e}fe=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Oe.payload,ce=typeof Ne=="function"?Ne.call(Se,fe,ce):Ne,ce==null)break e;fe=ve({},fe,ce);break e;case 2:Di=!0}}P.callback!==null&&P.lane!==0&&(t.flags|=64,ce=E.effects,ce===null?E.effects=[P]:ce.push(P))}else Se={eventTime:Se,lane:ce,tag:P.tag,payload:P.payload,callback:P.callback,next:null},de===null?(ne=de=Se,H=fe):de=de.next=Se,O|=ce;if(P=P.next,P===null){if(P=E.shared.pending,P===null)break;ce=P,P=ce.next,ce.next=null,E.lastBaseUpdate=ce,E.shared.pending=null}}while(!0);if(de===null&&(H=fe),E.baseState=H,E.firstBaseUpdate=ne,E.lastBaseUpdate=de,i=E.shared.interleaved,i!==null){E=i;do O|=E.lane,E=E.next;while(E!==i)}else S===null&&(E.shared.lanes=0);xs|=O,t.lanes=O,t.memoizedState=fe}}function kd(t,i,u){if(t=i.effects,i.effects=null,t!==null)for(i=0;i<t.length;i++){var m=t[i],E=m.callback;if(E!==null){if(m.callback=null,m=u,typeof E!="function")throw Error(o(191,E));E.call(m)}}}var ea={},Yr=Ri(ea),ta=Ri(ea),na=Ri(ea);function ps(t){if(t===ea)throw Error(o(174));return t}function Tc(t,i){switch(Rt(na,i),Rt(ta,t),Rt(Yr,ea),t=i.nodeType,t){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:ks(null,"");break;default:t=t===8?i.parentNode:i,i=t.namespaceURI||null,t=t.tagName,i=ks(i,t)}Dt(Yr),Rt(Yr,i)}function to(){Dt(Yr),Dt(ta),Dt(na)}function Dd(t){ps(na.current);var i=ps(Yr.current),u=ks(i,t.type);i!==u&&(Rt(ta,t),Rt(Yr,u))}function bc(t){ta.current===t&&(Dt(Yr),Dt(ta))}var Ut=Ri(0);function al(t){for(var i=t;i!==null;){if(i.tag===13){var u=i.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nc=[];function Oc(){for(var t=0;t<Nc.length;t++)Nc[t]._workInProgressVersionPrimary=null;Nc.length=0}var ll=J.ReactCurrentDispatcher,Rc=J.ReactCurrentBatchConfig,ms=0,zt=null,gn=null,vn=null,cl=!1,ra=!1,ia=0,E1=0;function Ln(){throw Error(o(321))}function Mc(t,i){if(i===null)return!1;for(var u=0;u<i.length&&u<t.length;u++)if(!Y(t[u],i[u]))return!1;return!0}function kc(t,i,u,m,E,S){if(ms=S,zt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,ll.current=t===null||t.memoizedState===null?_1:I1,t=u(m,E),ra){S=0;do{if(ra=!1,ia=0,25<=S)throw Error(o(301));S+=1,vn=gn=null,i.updateQueue=null,ll.current=T1,t=u(m,E)}while(ra)}if(ll.current=hl,i=gn!==null&&gn.next!==null,ms=0,vn=gn=zt=null,cl=!1,i)throw Error(o(300));return t}function Dc(){var t=ia!==0;return ia=0,t}function Xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?zt.memoizedState=vn=t:vn=vn.next=t,vn}function Ar(){if(gn===null){var t=zt.alternate;t=t!==null?t.memoizedState:null}else t=gn.next;var i=vn===null?zt.memoizedState:vn.next;if(i!==null)vn=i,gn=t;else{if(t===null)throw Error(o(310));gn=t,t={memoizedState:gn.memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},vn===null?zt.memoizedState=vn=t:vn=vn.next=t}return vn}function sa(t,i){return typeof i=="function"?i(t):i}function Lc(t){var i=Ar(),u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=gn,E=m.baseQueue,S=u.pending;if(S!==null){if(E!==null){var O=E.next;E.next=S.next,S.next=O}m.baseQueue=E=S,u.pending=null}if(E!==null){S=E.next,m=m.baseState;var P=O=null,H=null,ne=S;do{var de=ne.lane;if((ms&de)===de)H!==null&&(H=H.next={lane:0,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null}),m=ne.hasEagerState?ne.eagerState:t(m,ne.action);else{var fe={lane:de,action:ne.action,hasEagerState:ne.hasEagerState,eagerState:ne.eagerState,next:null};H===null?(P=H=fe,O=m):H=H.next=fe,zt.lanes|=de,xs|=de}ne=ne.next}while(ne!==null&&ne!==S);H===null?O=m:H.next=P,Y(m,i.memoizedState)||(Xn=!0),i.memoizedState=m,i.baseState=O,i.baseQueue=H,u.lastRenderedState=m}if(t=u.interleaved,t!==null){E=t;do S=E.lane,zt.lanes|=S,xs|=S,E=E.next;while(E!==t)}else E===null&&(u.lanes=0);return[i.memoizedState,u.dispatch]}function Pc(t){var i=Ar(),u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=t;var m=u.dispatch,E=u.pending,S=i.memoizedState;if(E!==null){u.pending=null;var O=E=E.next;do S=t(S,O.action),O=O.next;while(O!==E);Y(S,i.memoizedState)||(Xn=!0),i.memoizedState=S,i.baseQueue===null&&(i.baseState=S),u.lastRenderedState=S}return[S,m]}function Ld(){}function Pd(t,i){var u=zt,m=Ar(),E=i(),S=!Y(m.memoizedState,E);if(S&&(m.memoizedState=E,Xn=!0),m=m.queue,Bc(Fd.bind(null,u,m,t),[t]),m.getSnapshot!==i||S||vn!==null&&vn.memoizedState.tag&1){if(u.flags|=2048,oa(9,jd.bind(null,u,m,E,i),void 0,null),En===null)throw Error(o(349));(ms&30)!==0||Bd(u,i,E)}return E}function Bd(t,i,u){t.flags|=16384,t={getSnapshot:i,value:u},i=zt.updateQueue,i===null?(i={lastEffect:null,stores:null},zt.updateQueue=i,i.stores=[t]):(u=i.stores,u===null?i.stores=[t]:u.push(t))}function jd(t,i,u,m){i.value=u,i.getSnapshot=m,Ud(i)&&zd(t)}function Fd(t,i,u){return u(function(){Ud(i)&&zd(t)})}function Ud(t){var i=t.getSnapshot;t=t.value;try{var u=i();return!Y(t,u)}catch{return!0}}function zd(t){var i=li(t,1);i!==null&&Lr(i,t,1,-1)}function Hd(t){var i=Xr();return typeof t=="function"&&(t=t()),i.memoizedState=i.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t},i.queue=t,t=t.dispatch=S1.bind(null,zt,t),[i.memoizedState,t]}function oa(t,i,u,m){return t={tag:t,create:i,destroy:u,deps:m,next:null},i=zt.updateQueue,i===null?(i={lastEffect:null,stores:null},zt.updateQueue=i,i.lastEffect=t.next=t):(u=i.lastEffect,u===null?i.lastEffect=t.next=t:(m=u.next,u.next=t,t.next=m,i.lastEffect=t)),t}function Vd(){return Ar().memoizedState}function ul(t,i,u,m){var E=Xr();zt.flags|=t,E.memoizedState=oa(1|i,u,void 0,m===void 0?null:m)}function dl(t,i,u,m){var E=Ar();m=m===void 0?null:m;var S=void 0;if(gn!==null){var O=gn.memoizedState;if(S=O.destroy,m!==null&&Mc(m,O.deps)){E.memoizedState=oa(i,u,S,m);return}}zt.flags|=t,E.memoizedState=oa(1|i,u,S,m)}function Wd(t,i){return ul(8390656,8,t,i)}function Bc(t,i){return dl(2048,8,t,i)}function Gd(t,i){return dl(4,2,t,i)}function Yd(t,i){return dl(4,4,t,i)}function Xd(t,i){if(typeof i=="function")return t=t(),i(t),function(){i(null)};if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function $d(t,i,u){return u=u!=null?u.concat([t]):null,dl(4,4,Xd.bind(null,i,t),u)}function jc(){}function Qd(t,i){var u=Ar();i=i===void 0?null:i;var m=u.memoizedState;return m!==null&&i!==null&&Mc(i,m[1])?m[0]:(u.memoizedState=[t,i],t)}function qd(t,i){var u=Ar();i=i===void 0?null:i;var m=u.memoizedState;return m!==null&&i!==null&&Mc(i,m[1])?m[0]:(t=t(),u.memoizedState=[t,i],t)}function Kd(t,i,u){return(ms&21)===0?(t.baseState&&(t.baseState=!1,Xn=!0),t.memoizedState=u):(Y(u,i)||(u=un(),zt.lanes|=u,xs|=u,t.baseState=!0),i)}function C1(t,i){var u=qe;qe=u!==0&&4>u?u:4,t(!0);var m=Rc.transition;Rc.transition={};try{t(!1),i()}finally{qe=u,Rc.transition=m}}function Zd(){return Ar().memoizedState}function A1(t,i,u){var m=Fi(t);if(u={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null},Jd(t))eh(i,u);else if(u=Od(t,i,u,m),u!==null){var E=Un();Lr(u,t,m,E),th(u,i,m)}}function S1(t,i,u){var m=Fi(t),E={lane:m,action:u,hasEagerState:!1,eagerState:null,next:null};if(Jd(t))eh(i,E);else{var S=t.alternate;if(t.lanes===0&&(S===null||S.lanes===0)&&(S=i.lastRenderedReducer,S!==null))try{var O=i.lastRenderedState,P=S(O,u);if(E.hasEagerState=!0,E.eagerState=P,Y(P,O)){var H=i.interleaved;H===null?(E.next=E,_c(i)):(E.next=H.next,H.next=E),i.interleaved=E;return}}catch{}finally{}u=Od(t,i,E,m),u!==null&&(E=Un(),Lr(u,t,m,E),th(u,i,m))}}function Jd(t){var i=t.alternate;return t===zt||i!==null&&i===zt}function eh(t,i){ra=cl=!0;var u=t.pending;u===null?i.next=i:(i.next=u.next,u.next=i),t.pending=i}function th(t,i,u){if((u&4194240)!==0){var m=i.lanes;m&=t.pendingLanes,u|=m,i.lanes=u,Ht(t,u)}}var hl={readContext:Cr,useCallback:Ln,useContext:Ln,useEffect:Ln,useImperativeHandle:Ln,useInsertionEffect:Ln,useLayoutEffect:Ln,useMemo:Ln,useReducer:Ln,useRef:Ln,useState:Ln,useDebugValue:Ln,useDeferredValue:Ln,useTransition:Ln,useMutableSource:Ln,useSyncExternalStore:Ln,useId:Ln,unstable_isNewReconciler:!1},_1={readContext:Cr,useCallback:function(t,i){return Xr().memoizedState=[t,i===void 0?null:i],t},useContext:Cr,useEffect:Wd,useImperativeHandle:function(t,i,u){return u=u!=null?u.concat([t]):null,ul(4194308,4,Xd.bind(null,i,t),u)},useLayoutEffect:function(t,i){return ul(4194308,4,t,i)},useInsertionEffect:function(t,i){return ul(4,2,t,i)},useMemo:function(t,i){var u=Xr();return i=i===void 0?null:i,t=t(),u.memoizedState=[t,i],t},useReducer:function(t,i,u){var m=Xr();return i=u!==void 0?u(i):i,m.memoizedState=m.baseState=i,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:i},m.queue=t,t=t.dispatch=A1.bind(null,zt,t),[m.memoizedState,t]},useRef:function(t){var i=Xr();return t={current:t},i.memoizedState=t},useState:Hd,useDebugValue:jc,useDeferredValue:function(t){return Xr().memoizedState=t},useTransition:function(){var t=Hd(!1),i=t[0];return t=C1.bind(null,t[1]),Xr().memoizedState=t,[i,t]},useMutableSource:function(){},useSyncExternalStore:function(t,i,u){var m=zt,E=Xr();if(Bt){if(u===void 0)throw Error(o(407));u=u()}else{if(u=i(),En===null)throw Error(o(349));(ms&30)!==0||Bd(m,i,u)}E.memoizedState=u;var S={value:u,getSnapshot:i};return E.queue=S,Wd(Fd.bind(null,m,S,t),[t]),m.flags|=2048,oa(9,jd.bind(null,m,S,u,i),void 0,null),u},useId:function(){var t=Xr(),i=En.identifierPrefix;if(Bt){var u=ai,m=oi;u=(m&~(1<<32-jn(m)-1)).toString(32)+u,i=":"+i+"R"+u,u=ia++,0<u&&(i+="H"+u.toString(32)),i+=":"}else u=E1++,i=":"+i+"r"+u.toString(32)+":";return t.memoizedState=i},unstable_isNewReconciler:!1},I1={readContext:Cr,useCallback:Qd,useContext:Cr,useEffect:Bc,useImperativeHandle:$d,useInsertionEffect:Gd,useLayoutEffect:Yd,useMemo:qd,useReducer:Lc,useRef:Vd,useState:function(){return Lc(sa)},useDebugValue:jc,useDeferredValue:function(t){var i=Ar();return Kd(i,gn.memoizedState,t)},useTransition:function(){var t=Lc(sa)[0],i=Ar().memoizedState;return[t,i]},useMutableSource:Ld,useSyncExternalStore:Pd,useId:Zd,unstable_isNewReconciler:!1},T1={readContext:Cr,useCallback:Qd,useContext:Cr,useEffect:Bc,useImperativeHandle:$d,useInsertionEffect:Gd,useLayoutEffect:Yd,useMemo:qd,useReducer:Pc,useRef:Vd,useState:function(){return Pc(sa)},useDebugValue:jc,useDeferredValue:function(t){var i=Ar();return gn===null?i.memoizedState=t:Kd(i,gn.memoizedState,t)},useTransition:function(){var t=Pc(sa)[0],i=Ar().memoizedState;return[t,i]},useMutableSource:Ld,useSyncExternalStore:Pd,useId:Zd,unstable_isNewReconciler:!1};function Mr(t,i){if(t&&t.defaultProps){i=ve({},i),t=t.defaultProps;for(var u in t)i[u]===void 0&&(i[u]=t[u]);return i}return i}function Fc(t,i,u,m){i=t.memoizedState,u=u(m,i),u=u==null?i:ve({},i,u),t.memoizedState=u,t.lanes===0&&(t.updateQueue.baseState=u)}var fl={isMounted:function(t){return(t=t._reactInternals)?Wn(t)===t:!1},enqueueSetState:function(t,i,u){t=t._reactInternals;var m=Un(),E=Fi(t),S=ci(m,E);S.payload=i,u!=null&&(S.callback=u),i=Li(t,S,E),i!==null&&(Lr(i,t,E,m),sl(i,t,E))},enqueueReplaceState:function(t,i,u){t=t._reactInternals;var m=Un(),E=Fi(t),S=ci(m,E);S.tag=1,S.payload=i,u!=null&&(S.callback=u),i=Li(t,S,E),i!==null&&(Lr(i,t,E,m),sl(i,t,E))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var u=Un(),m=Fi(t),E=ci(u,m);E.tag=2,i!=null&&(E.callback=i),i=Li(t,E,m),i!==null&&(Lr(i,t,m,u),sl(i,t,m))}};function nh(t,i,u,m,E,S,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,S,O):i.prototype&&i.prototype.isPureReactComponent?!ee(u,m)||!ee(E,S):!0}function rh(t,i,u){var m=!1,E=Mi,S=i.contextType;return typeof S=="object"&&S!==null?S=Cr(S):(E=Yn(i)?ds:Dn.current,m=i.contextTypes,S=(m=m!=null)?$s(t,E):Mi),i=new i(u,S),t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=fl,t.stateNode=i,i._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=E,t.__reactInternalMemoizedMaskedChildContext=S),i}function ih(t,i,u,m){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(u,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(u,m),i.state!==t&&fl.enqueueReplaceState(i,i.state,null)}function Uc(t,i,u,m){var E=t.stateNode;E.props=u,E.state=t.memoizedState,E.refs={},Ic(t);var S=i.contextType;typeof S=="object"&&S!==null?E.context=Cr(S):(S=Yn(i)?ds:Dn.current,E.context=$s(t,S)),E.state=t.memoizedState,S=i.getDerivedStateFromProps,typeof S=="function"&&(Fc(t,i,S,u),E.state=t.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(i=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),i!==E.state&&fl.enqueueReplaceState(E,E.state,null),ol(t,u,E,m),E.state=t.memoizedState),typeof E.componentDidMount=="function"&&(t.flags|=4194308)}function no(t,i){try{var u="",m=i;do u+=ot(m),m=m.return;while(m);var E=u}catch(S){E=`
Error generating stack: `+S.message+`
`+S.stack}return{value:t,source:i,stack:E,digest:null}}function zc(t,i,u){return{value:t,source:null,stack:u??null,digest:i??null}}function Hc(t,i){try{console.error(i.value)}catch(u){setTimeout(function(){throw u})}}var b1=typeof WeakMap=="function"?WeakMap:Map;function sh(t,i,u){u=ci(-1,u),u.tag=3,u.payload={element:null};var m=i.value;return u.callback=function(){vl||(vl=!0,ru=m),Hc(t,i)},u}function oh(t,i,u){u=ci(-1,u),u.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var E=i.value;u.payload=function(){return m(E)},u.callback=function(){Hc(t,i)}}var S=t.stateNode;return S!==null&&typeof S.componentDidCatch=="function"&&(u.callback=function(){Hc(t,i),typeof m!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var O=i.stack;this.componentDidCatch(i.value,{componentStack:O!==null?O:""})}),u}function ah(t,i,u){var m=t.pingCache;if(m===null){m=t.pingCache=new b1;var E=new Set;m.set(i,E)}else E=m.get(i),E===void 0&&(E=new Set,m.set(i,E));E.has(u)||(E.add(u),t=H1.bind(null,t,i,u),i.then(t,t))}function lh(t){do{var i;if((i=t.tag===13)&&(i=t.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return t;t=t.return}while(t!==null);return null}function ch(t,i,u,m,E){return(t.mode&1)===0?(t===i?t.flags|=65536:(t.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(i=ci(-1,1),i.tag=2,Li(u,i,1))),u.lanes|=1),t):(t.flags|=65536,t.lanes=E,t)}var N1=J.ReactCurrentOwner,Xn=!1;function Fn(t,i,u,m){i.child=t===null?Nd(i,null,u,m):Zs(i,t.child,u,m)}function uh(t,i,u,m,E){u=u.render;var S=i.ref;return eo(i,E),m=kc(t,i,u,m,S,E),u=Dc(),t!==null&&!Xn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~E,ui(t,i,E)):(Bt&&u&&mc(i),i.flags|=1,Fn(t,i,m,E),i.child)}function dh(t,i,u,m,E){if(t===null){var S=u.type;return typeof S=="function"&&!uu(S)&&S.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(i.tag=15,i.type=S,hh(t,i,S,m,E)):(t=Il(u.type,null,m,i,i.mode,E),t.ref=i.ref,t.return=i,i.child=t)}if(S=t.child,(t.lanes&E)===0){var O=S.memoizedProps;if(u=u.compare,u=u!==null?u:ee,u(O,m)&&t.ref===i.ref)return ui(t,i,E)}return i.flags|=1,t=zi(S,m),t.ref=i.ref,t.return=i,i.child=t}function hh(t,i,u,m,E){if(t!==null){var S=t.memoizedProps;if(ee(S,m)&&t.ref===i.ref)if(Xn=!1,i.pendingProps=m=S,(t.lanes&E)!==0)(t.flags&131072)!==0&&(Xn=!0);else return i.lanes=t.lanes,ui(t,i,E)}return Vc(t,i,u,m,E)}function fh(t,i,u){var m=i.pendingProps,E=m.children,S=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(io,cr),cr|=u;else{if((u&1073741824)===0)return t=S!==null?S.baseLanes|u:u,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:t,cachePool:null,transitions:null},i.updateQueue=null,Rt(io,cr),cr|=t,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=S!==null?S.baseLanes:u,Rt(io,cr),cr|=m}else S!==null?(m=S.baseLanes|u,i.memoizedState=null):m=u,Rt(io,cr),cr|=m;return Fn(t,i,E,u),i.child}function gh(t,i){var u=i.ref;(t===null&&u!==null||t!==null&&t.ref!==u)&&(i.flags|=512,i.flags|=2097152)}function Vc(t,i,u,m,E){var S=Yn(u)?ds:Dn.current;return S=$s(i,S),eo(i,E),u=kc(t,i,u,m,S,E),m=Dc(),t!==null&&!Xn?(i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~E,ui(t,i,E)):(Bt&&m&&mc(i),i.flags|=1,Fn(t,i,u,E),i.child)}function ph(t,i,u,m,E){if(Yn(u)){var S=!0;Ka(i)}else S=!1;if(eo(i,E),i.stateNode===null)pl(t,i),rh(i,u,m),Uc(i,u,m,E),m=!0;else if(t===null){var O=i.stateNode,P=i.memoizedProps;O.props=P;var H=O.context,ne=u.contextType;typeof ne=="object"&&ne!==null?ne=Cr(ne):(ne=Yn(u)?ds:Dn.current,ne=$s(i,ne));var de=u.getDerivedStateFromProps,fe=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function";fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(P!==m||H!==ne)&&ih(i,O,m,ne),Di=!1;var ce=i.memoizedState;O.state=ce,ol(i,m,O,E),H=i.memoizedState,P!==m||ce!==H||Gn.current||Di?(typeof de=="function"&&(Fc(i,u,de,m),H=i.memoizedState),(P=Di||nh(i,u,P,m,ce,H,ne))?(fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(i.flags|=4194308)):(typeof O.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=H),O.props=m,O.state=H,O.context=ne,m=P):(typeof O.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{O=i.stateNode,Rd(t,i),P=i.memoizedProps,ne=i.type===i.elementType?P:Mr(i.type,P),O.props=ne,fe=i.pendingProps,ce=O.context,H=u.contextType,typeof H=="object"&&H!==null?H=Cr(H):(H=Yn(u)?ds:Dn.current,H=$s(i,H));var Se=u.getDerivedStateFromProps;(de=typeof Se=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(P!==fe||ce!==H)&&ih(i,O,m,H),Di=!1,ce=i.memoizedState,O.state=ce,ol(i,m,O,E);var Ne=i.memoizedState;P!==fe||ce!==Ne||Gn.current||Di?(typeof Se=="function"&&(Fc(i,u,Se,m),Ne=i.memoizedState),(ne=Di||nh(i,u,ne,m,ce,Ne,H)||!1)?(de||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(m,Ne,H),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(m,Ne,H)),typeof O.componentDidUpdate=="function"&&(i.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof O.componentDidUpdate!="function"||P===t.memoizedProps&&ce===t.memoizedState||(i.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ce===t.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=Ne),O.props=m,O.state=Ne,O.context=H,m=ne):(typeof O.componentDidUpdate!="function"||P===t.memoizedProps&&ce===t.memoizedState||(i.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||P===t.memoizedProps&&ce===t.memoizedState||(i.flags|=1024),m=!1)}return Wc(t,i,u,m,S,E)}function Wc(t,i,u,m,E,S){gh(t,i);var O=(i.flags&128)!==0;if(!m&&!O)return E&&vd(i,u,!1),ui(t,i,S);m=i.stateNode,N1.current=i;var P=O&&typeof u.getDerivedStateFromError!="function"?null:m.render();return i.flags|=1,t!==null&&O?(i.child=Zs(i,t.child,null,S),i.child=Zs(i,null,P,S)):Fn(t,i,P,S),i.memoizedState=m.state,E&&vd(i,u,!0),i.child}function mh(t){var i=t.stateNode;i.pendingContext?wd(t,i.pendingContext,i.pendingContext!==i.context):i.context&&wd(t,i.context,!1),Tc(t,i.containerInfo)}function xh(t,i,u,m,E){return Ks(),vc(E),i.flags|=256,Fn(t,i,u,m),i.child}var Gc={dehydrated:null,treeContext:null,retryLane:0};function Yc(t){return{baseLanes:t,cachePool:null,transitions:null}}function wh(t,i,u){var m=i.pendingProps,E=Ut.current,S=!1,O=(i.flags&128)!==0,P;if((P=O)||(P=t!==null&&t.memoizedState===null?!1:(E&2)!==0),P?(S=!0,i.flags&=-129):(t===null||t.memoizedState!==null)&&(E|=1),Rt(Ut,E&1),t===null)return yc(i),t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((i.mode&1)===0?i.lanes=1:t.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(O=m.children,t=m.fallback,S?(m=i.mode,S=i.child,O={mode:"hidden",children:O},(m&1)===0&&S!==null?(S.childLanes=0,S.pendingProps=O):S=Tl(O,m,0,null),t=Es(t,m,u,null),S.return=i,t.return=i,S.sibling=t,i.child=S,i.child.memoizedState=Yc(u),i.memoizedState=Gc,t):Xc(i,O));if(E=t.memoizedState,E!==null&&(P=E.dehydrated,P!==null))return O1(t,i,O,m,P,E,u);if(S){S=m.fallback,O=i.mode,E=t.child,P=E.sibling;var H={mode:"hidden",children:m.children};return(O&1)===0&&i.child!==E?(m=i.child,m.childLanes=0,m.pendingProps=H,i.deletions=null):(m=zi(E,H),m.subtreeFlags=E.subtreeFlags&14680064),P!==null?S=zi(P,S):(S=Es(S,O,u,null),S.flags|=2),S.return=i,m.return=i,m.sibling=S,i.child=m,m=S,S=i.child,O=t.child.memoizedState,O=O===null?Yc(u):{baseLanes:O.baseLanes|u,cachePool:null,transitions:O.transitions},S.memoizedState=O,S.childLanes=t.childLanes&~u,i.memoizedState=Gc,m}return S=t.child,t=S.sibling,m=zi(S,{mode:"visible",children:m.children}),(i.mode&1)===0&&(m.lanes=u),m.return=i,m.sibling=null,t!==null&&(u=i.deletions,u===null?(i.deletions=[t],i.flags|=16):u.push(t)),i.child=m,i.memoizedState=null,m}function Xc(t,i){return i=Tl({mode:"visible",children:i},t.mode,0,null),i.return=t,t.child=i}function gl(t,i,u,m){return m!==null&&vc(m),Zs(i,t.child,null,u),t=Xc(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function O1(t,i,u,m,E,S,O){if(u)return i.flags&256?(i.flags&=-257,m=zc(Error(o(422))),gl(t,i,O,m)):i.memoizedState!==null?(i.child=t.child,i.flags|=128,null):(S=m.fallback,E=i.mode,m=Tl({mode:"visible",children:m.children},E,0,null),S=Es(S,E,O,null),S.flags|=2,m.return=i,S.return=i,m.sibling=S,i.child=m,(i.mode&1)!==0&&Zs(i,t.child,null,O),i.child.memoizedState=Yc(O),i.memoizedState=Gc,S);if((i.mode&1)===0)return gl(t,i,O,null);if(E.data==="$!"){if(m=E.nextSibling&&E.nextSibling.dataset,m)var P=m.dgst;return m=P,S=Error(o(419)),m=zc(S,m,void 0),gl(t,i,O,m)}if(P=(O&t.childLanes)!==0,Xn||P){if(m=En,m!==null){switch(O&-O){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(m.suspendedLanes|O))!==0?0:E,E!==0&&E!==S.retryLane&&(S.retryLane=E,li(t,E),Lr(m,t,E,-1))}return cu(),m=zc(Error(o(421))),gl(t,i,O,m)}return E.data==="$?"?(i.flags|=128,i.child=t.child,i=V1.bind(null,t),E._reactRetry=i,null):(t=S.treeContext,lr=Oi(E.nextSibling),ar=i,Bt=!0,Rr=null,t!==null&&(vr[Er++]=oi,vr[Er++]=ai,vr[Er++]=hs,oi=t.id,ai=t.overflow,hs=i),i=Xc(i,m.children),i.flags|=4096,i)}function yh(t,i,u){t.lanes|=i;var m=t.alternate;m!==null&&(m.lanes|=i),Sc(t.return,i,u)}function $c(t,i,u,m,E){var S=t.memoizedState;S===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:E}:(S.isBackwards=i,S.rendering=null,S.renderingStartTime=0,S.last=m,S.tail=u,S.tailMode=E)}function vh(t,i,u){var m=i.pendingProps,E=m.revealOrder,S=m.tail;if(Fn(t,i,m.children,u),m=Ut.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&yh(t,u,i);else if(t.tag===19)yh(t,u,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(Rt(Ut,m),(i.mode&1)===0)i.memoizedState=null;else switch(E){case"forwards":for(u=i.child,E=null;u!==null;)t=u.alternate,t!==null&&al(t)===null&&(E=u),u=u.sibling;u=E,u===null?(E=i.child,i.child=null):(E=u.sibling,u.sibling=null),$c(i,!1,E,u,S);break;case"backwards":for(u=null,E=i.child,i.child=null;E!==null;){if(t=E.alternate,t!==null&&al(t)===null){i.child=E;break}t=E.sibling,E.sibling=u,u=E,E=t}$c(i,!0,u,null,S);break;case"together":$c(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function pl(t,i){(i.mode&1)===0&&t!==null&&(t.alternate=null,i.alternate=null,i.flags|=2)}function ui(t,i,u){if(t!==null&&(i.dependencies=t.dependencies),xs|=i.lanes,(u&i.childLanes)===0)return null;if(t!==null&&i.child!==t.child)throw Error(o(153));if(i.child!==null){for(t=i.child,u=zi(t,t.pendingProps),i.child=u,u.return=i;t.sibling!==null;)t=t.sibling,u=u.sibling=zi(t,t.pendingProps),u.return=i;u.sibling=null}return i.child}function R1(t,i,u){switch(i.tag){case 3:mh(i),Ks();break;case 5:Dd(i);break;case 1:Yn(i.type)&&Ka(i);break;case 4:Tc(i,i.stateNode.containerInfo);break;case 10:var m=i.type._context,E=i.memoizedProps.value;Rt(rl,m._currentValue),m._currentValue=E;break;case 13:if(m=i.memoizedState,m!==null)return m.dehydrated!==null?(Rt(Ut,Ut.current&1),i.flags|=128,null):(u&i.child.childLanes)!==0?wh(t,i,u):(Rt(Ut,Ut.current&1),t=ui(t,i,u),t!==null?t.sibling:null);Rt(Ut,Ut.current&1);break;case 19:if(m=(u&i.childLanes)!==0,(t.flags&128)!==0){if(m)return vh(t,i,u);i.flags|=128}if(E=i.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Rt(Ut,Ut.current),m)break;return null;case 22:case 23:return i.lanes=0,fh(t,i,u)}return ui(t,i,u)}var Eh,Qc,Ch,Ah;Eh=function(t,i){for(var u=i.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===i)break;for(;u.sibling===null;){if(u.return===null||u.return===i)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Qc=function(){},Ch=function(t,i,u,m){var E=t.memoizedProps;if(E!==m){t=i.stateNode,ps(Yr.current);var S=null;switch(u){case"input":E=jr(t,E),m=jr(t,m),S=[];break;case"select":E=ve({},E,{value:void 0}),m=ve({},m,{value:void 0}),S=[];break;case"textarea":E=mi(t,E),m=mi(t,m),S=[];break;default:typeof E.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=$a)}gt(u,m);var O;u=null;for(ne in E)if(!m.hasOwnProperty(ne)&&E.hasOwnProperty(ne)&&E[ne]!=null)if(ne==="style"){var P=E[ne];for(O in P)P.hasOwnProperty(O)&&(u||(u={}),u[O]="")}else ne!=="dangerouslySetInnerHTML"&&ne!=="children"&&ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(g.hasOwnProperty(ne)?S||(S=[]):(S=S||[]).push(ne,null));for(ne in m){var H=m[ne];if(P=E?.[ne],m.hasOwnProperty(ne)&&H!==P&&(H!=null||P!=null))if(ne==="style")if(P){for(O in P)!P.hasOwnProperty(O)||H&&H.hasOwnProperty(O)||(u||(u={}),u[O]="");for(O in H)H.hasOwnProperty(O)&&P[O]!==H[O]&&(u||(u={}),u[O]=H[O])}else u||(S||(S=[]),S.push(ne,u)),u=H;else ne==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,P=P?P.__html:void 0,H!=null&&P!==H&&(S=S||[]).push(ne,H)):ne==="children"?typeof H!="string"&&typeof H!="number"||(S=S||[]).push(ne,""+H):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&(g.hasOwnProperty(ne)?(H!=null&&ne==="onScroll"&&kt("scroll",t),S||P===H||(S=[])):(S=S||[]).push(ne,H))}u&&(S=S||[]).push("style",u);var ne=S;(i.updateQueue=ne)&&(i.flags|=4)}},Ah=function(t,i,u,m){u!==m&&(i.flags|=4)};function aa(t,i){if(!Bt)switch(t.tailMode){case"hidden":i=t.tail;for(var u=null;i!==null;)i.alternate!==null&&(u=i),i=i.sibling;u===null?t.tail=null:u.sibling=null;break;case"collapsed":u=t.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function Pn(t){var i=t.alternate!==null&&t.alternate.child===t.child,u=0,m=0;if(i)for(var E=t.child;E!==null;)u|=E.lanes|E.childLanes,m|=E.subtreeFlags&14680064,m|=E.flags&14680064,E.return=t,E=E.sibling;else for(E=t.child;E!==null;)u|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=t,E=E.sibling;return t.subtreeFlags|=m,t.childLanes=u,i}function M1(t,i,u){var m=i.pendingProps;switch(xc(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Pn(i),null;case 1:return Yn(i.type)&&qa(),Pn(i),null;case 3:return m=i.stateNode,to(),Dt(Gn),Dt(Dn),Oc(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(tl(i)?i.flags|=4:t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Rr!==null&&(ou(Rr),Rr=null))),Qc(t,i),Pn(i),null;case 5:bc(i);var E=ps(na.current);if(u=i.type,t!==null&&i.stateNode!=null)Ch(t,i,u,m,E),t.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!m){if(i.stateNode===null)throw Error(o(166));return Pn(i),null}if(t=ps(Yr.current),tl(i)){m=i.stateNode,u=i.type;var S=i.memoizedProps;switch(m[Gr]=i,m[Ko]=S,t=(i.mode&1)!==0,u){case"dialog":kt("cancel",m),kt("close",m);break;case"iframe":case"object":case"embed":kt("load",m);break;case"video":case"audio":for(E=0;E<$o.length;E++)kt($o[E],m);break;case"source":kt("error",m);break;case"img":case"image":case"link":kt("error",m),kt("load",m);break;case"details":kt("toggle",m);break;case"input":Zn(m,S),kt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!S.multiple},kt("invalid",m);break;case"textarea":Io(m,S),kt("invalid",m)}gt(u,S),E=null;for(var O in S)if(S.hasOwnProperty(O)){var P=S[O];O==="children"?typeof P=="string"?m.textContent!==P&&(S.suppressHydrationWarning!==!0&&Xa(m.textContent,P,t),E=["children",P]):typeof P=="number"&&m.textContent!==""+P&&(S.suppressHydrationWarning!==!0&&Xa(m.textContent,P,t),E=["children",""+P]):g.hasOwnProperty(O)&&P!=null&&O==="onScroll"&&kt("scroll",m)}switch(u){case"input":ln(m),Et(m,S,!0);break;case"textarea":ln(m),Ms(m);break;case"select":case"option":break;default:typeof S.onClick=="function"&&(m.onclick=$a)}m=E,i.updateQueue=m,m!==null&&(i.flags|=4)}else{O=E.nodeType===9?E:E.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zn(u)),t==="http://www.w3.org/1999/xhtml"?u==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=O.createElement(u,{is:m.is}):(t=O.createElement(u),u==="select"&&(O=t,m.multiple?O.multiple=!0:m.size&&(O.size=m.size))):t=O.createElementNS(t,u),t[Gr]=i,t[Ko]=m,Eh(t,i,!1,!1),i.stateNode=t;e:{switch(O=Tt(u,m),u){case"dialog":kt("cancel",t),kt("close",t),E=m;break;case"iframe":case"object":case"embed":kt("load",t),E=m;break;case"video":case"audio":for(E=0;E<$o.length;E++)kt($o[E],t);E=m;break;case"source":kt("error",t),E=m;break;case"img":case"image":case"link":kt("error",t),kt("load",t),E=m;break;case"details":kt("toggle",t),E=m;break;case"input":Zn(t,m),E=jr(t,m),kt("invalid",t);break;case"option":E=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},E=ve({},m,{value:void 0}),kt("invalid",t);break;case"textarea":Io(t,m),E=mi(t,m),kt("invalid",t);break;default:E=m}gt(u,E),P=E;for(S in P)if(P.hasOwnProperty(S)){var H=P[S];S==="style"?we(t,H):S==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&xn(t,H)):S==="children"?typeof H=="string"?(u!=="textarea"||H!=="")&&xi(t,H):typeof H=="number"&&xi(t,""+H):S!=="suppressContentEditableWarning"&&S!=="suppressHydrationWarning"&&S!=="autoFocus"&&(g.hasOwnProperty(S)?H!=null&&S==="onScroll"&&kt("scroll",t):H!=null&&W(t,S,H,O))}switch(u){case"input":ln(t),Et(t,m,!1);break;case"textarea":ln(t),Ms(t);break;case"option":m.value!=null&&t.setAttribute("value",""+He(m.value));break;case"select":t.multiple=!!m.multiple,S=m.value,S!=null?Ie(t,!!m.multiple,S,!1):m.defaultValue!=null&&Ie(t,!!m.multiple,m.defaultValue,!0);break;default:typeof E.onClick=="function"&&(t.onclick=$a)}switch(u){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Pn(i),null;case 6:if(t&&i.stateNode!=null)Ah(t,i,t.memoizedProps,m);else{if(typeof m!="string"&&i.stateNode===null)throw Error(o(166));if(u=ps(na.current),ps(Yr.current),tl(i)){if(m=i.stateNode,u=i.memoizedProps,m[Gr]=i,(S=m.nodeValue!==u)&&(t=ar,t!==null))switch(t.tag){case 3:Xa(m.nodeValue,u,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(m.nodeValue,u,(t.mode&1)!==0)}S&&(i.flags|=4)}else m=(u.nodeType===9?u:u.ownerDocument).createTextNode(m),m[Gr]=i,i.stateNode=m}return Pn(i),null;case 13:if(Dt(Ut),m=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Bt&&lr!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Id(),Ks(),i.flags|=98560,S=!1;else if(S=tl(i),m!==null&&m.dehydrated!==null){if(t===null){if(!S)throw Error(o(318));if(S=i.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(o(317));S[Gr]=i}else Ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Pn(i),S=!1}else Rr!==null&&(ou(Rr),Rr=null),S=!0;if(!S)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=u,i):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(i.child.flags|=8192,(i.mode&1)!==0&&(t===null||(Ut.current&1)!==0?pn===0&&(pn=3):cu())),i.updateQueue!==null&&(i.flags|=4),Pn(i),null);case 4:return to(),Qc(t,i),t===null&&Qo(i.stateNode.containerInfo),Pn(i),null;case 10:return Ac(i.type._context),Pn(i),null;case 17:return Yn(i.type)&&qa(),Pn(i),null;case 19:if(Dt(Ut),S=i.memoizedState,S===null)return Pn(i),null;if(m=(i.flags&128)!==0,O=S.rendering,O===null)if(m)aa(S,!1);else{if(pn!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(O=al(t),O!==null){for(i.flags|=128,aa(S,!1),m=O.updateQueue,m!==null&&(i.updateQueue=m,i.flags|=4),i.subtreeFlags=0,m=u,u=i.child;u!==null;)S=u,t=m,S.flags&=14680066,O=S.alternate,O===null?(S.childLanes=0,S.lanes=t,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=O.childLanes,S.lanes=O.lanes,S.child=O.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=O.memoizedProps,S.memoizedState=O.memoizedState,S.updateQueue=O.updateQueue,S.type=O.type,t=O.dependencies,S.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),u=u.sibling;return Rt(Ut,Ut.current&1|2),i.child}t=t.sibling}S.tail!==null&&wt()>so&&(i.flags|=128,m=!0,aa(S,!1),i.lanes=4194304)}else{if(!m)if(t=al(O),t!==null){if(i.flags|=128,m=!0,u=t.updateQueue,u!==null&&(i.updateQueue=u,i.flags|=4),aa(S,!0),S.tail===null&&S.tailMode==="hidden"&&!O.alternate&&!Bt)return Pn(i),null}else 2*wt()-S.renderingStartTime>so&&u!==1073741824&&(i.flags|=128,m=!0,aa(S,!1),i.lanes=4194304);S.isBackwards?(O.sibling=i.child,i.child=O):(u=S.last,u!==null?u.sibling=O:i.child=O,S.last=O)}return S.tail!==null?(i=S.tail,S.rendering=i,S.tail=i.sibling,S.renderingStartTime=wt(),i.sibling=null,u=Ut.current,Rt(Ut,m?u&1|2:u&1),i):(Pn(i),null);case 22:case 23:return lu(),m=i.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(i.flags|=8192),m&&(i.mode&1)!==0?(cr&1073741824)!==0&&(Pn(i),i.subtreeFlags&6&&(i.flags|=8192)):Pn(i),null;case 24:return null;case 25:return null}throw Error(o(156,i.tag))}function k1(t,i){switch(xc(i),i.tag){case 1:return Yn(i.type)&&qa(),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return to(),Dt(Gn),Dt(Dn),Oc(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 5:return bc(i),null;case 13:if(Dt(Ut),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(o(340));Ks()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return Dt(Ut),null;case 4:return to(),null;case 10:return Ac(i.type._context),null;case 22:case 23:return lu(),null;case 24:return null;default:return null}}var ml=!1,Bn=!1,D1=typeof WeakSet=="function"?WeakSet:Set,be=null;function ro(t,i){var u=t.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(m){Wt(t,i,m)}else u.current=null}function qc(t,i,u){try{u()}catch(m){Wt(t,i,m)}}var Sh=!1;function L1(t,i){if(lc=Vr,t=Ke(),Ge(t)){if("selectionStart"in t)var u={start:t.selectionStart,end:t.selectionEnd};else e:{u=(u=t.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var E=m.anchorOffset,S=m.focusNode;m=m.focusOffset;try{u.nodeType,S.nodeType}catch{u=null;break e}var O=0,P=-1,H=-1,ne=0,de=0,fe=t,ce=null;t:for(;;){for(var Se;fe!==u||E!==0&&fe.nodeType!==3||(P=O+E),fe!==S||m!==0&&fe.nodeType!==3||(H=O+m),fe.nodeType===3&&(O+=fe.nodeValue.length),(Se=fe.firstChild)!==null;)ce=fe,fe=Se;for(;;){if(fe===t)break t;if(ce===u&&++ne===E&&(P=O),ce===S&&++de===m&&(H=O),(Se=fe.nextSibling)!==null)break;fe=ce,ce=fe.parentNode}fe=Se}u=P===-1||H===-1?null:{start:P,end:H}}else u=null}u=u||{start:0,end:0}}else u=null;for(cc={focusedElem:t,selectionRange:u},Vr=!1,be=i;be!==null;)if(i=be,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,be=t;else for(;be!==null;){i=be;try{var Ne=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(Ne!==null){var Oe=Ne.memoizedProps,Jt=Ne.memoizedState,q=i.stateNode,G=q.getSnapshotBeforeUpdate(i.elementType===i.type?Oe:Mr(i.type,Oe),Jt);q.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Z=i.stateNode.containerInfo;Z.nodeType===1?Z.textContent="":Z.nodeType===9&&Z.documentElement&&Z.removeChild(Z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){Wt(i,i.return,me)}if(t=i.sibling,t!==null){t.return=i.return,be=t;break}be=i.return}return Ne=Sh,Sh=!1,Ne}function la(t,i,u){var m=i.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var E=m=m.next;do{if((E.tag&t)===t){var S=E.destroy;E.destroy=void 0,S!==void 0&&qc(i,u,S)}E=E.next}while(E!==m)}}function xl(t,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var u=i=i.next;do{if((u.tag&t)===t){var m=u.create;u.destroy=m()}u=u.next}while(u!==i)}}function Kc(t){var i=t.ref;if(i!==null){var u=t.stateNode;switch(t.tag){case 5:t=u;break;default:t=u}typeof i=="function"?i(t):i.current=t}}function _h(t){var i=t.alternate;i!==null&&(t.alternate=null,_h(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&(delete i[Gr],delete i[Ko],delete i[fc],delete i[x1],delete i[w1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ih(t){return t.tag===5||t.tag===3||t.tag===4}function Th(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ih(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zc(t,i,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?u.nodeType===8?u.parentNode.insertBefore(t,i):u.insertBefore(t,i):(u.nodeType===8?(i=u.parentNode,i.insertBefore(t,u)):(i=u,i.appendChild(t)),u=u._reactRootContainer,u!=null||i.onclick!==null||(i.onclick=$a));else if(m!==4&&(t=t.child,t!==null))for(Zc(t,i,u),t=t.sibling;t!==null;)Zc(t,i,u),t=t.sibling}function Jc(t,i,u){var m=t.tag;if(m===5||m===6)t=t.stateNode,i?u.insertBefore(t,i):u.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(Jc(t,i,u),t=t.sibling;t!==null;)Jc(t,i,u),t=t.sibling}var bn=null,kr=!1;function Pi(t,i,u){for(u=u.child;u!==null;)bh(t,i,u),u=u.sibling}function bh(t,i,u){if(Qe&&typeof Qe.onCommitFiberUnmount=="function")try{Qe.onCommitFiberUnmount(ct,u)}catch{}switch(u.tag){case 5:Bn||ro(u,i);case 6:var m=bn,E=kr;bn=null,Pi(t,i,u),bn=m,kr=E,bn!==null&&(kr?(t=bn,u=u.stateNode,t.nodeType===8?t.parentNode.removeChild(u):t.removeChild(u)):bn.removeChild(u.stateNode));break;case 18:bn!==null&&(kr?(t=bn,u=u.stateNode,t.nodeType===8?hc(t.parentNode,u):t.nodeType===1&&hc(t,u),br(t)):hc(bn,u.stateNode));break;case 4:m=bn,E=kr,bn=u.stateNode.containerInfo,kr=!0,Pi(t,i,u),bn=m,kr=E;break;case 0:case 11:case 14:case 15:if(!Bn&&(m=u.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){E=m=m.next;do{var S=E,O=S.destroy;S=S.tag,O!==void 0&&((S&2)!==0||(S&4)!==0)&&qc(u,i,O),E=E.next}while(E!==m)}Pi(t,i,u);break;case 1:if(!Bn&&(ro(u,i),m=u.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=u.memoizedProps,m.state=u.memoizedState,m.componentWillUnmount()}catch(P){Wt(u,i,P)}Pi(t,i,u);break;case 21:Pi(t,i,u);break;case 22:u.mode&1?(Bn=(m=Bn)||u.memoizedState!==null,Pi(t,i,u),Bn=m):Pi(t,i,u);break;default:Pi(t,i,u)}}function Nh(t){var i=t.updateQueue;if(i!==null){t.updateQueue=null;var u=t.stateNode;u===null&&(u=t.stateNode=new D1),i.forEach(function(m){var E=W1.bind(null,t,m);u.has(m)||(u.add(m),m.then(E,E))})}}function Dr(t,i){var u=i.deletions;if(u!==null)for(var m=0;m<u.length;m++){var E=u[m];try{var S=t,O=i,P=O;e:for(;P!==null;){switch(P.tag){case 5:bn=P.stateNode,kr=!1;break e;case 3:bn=P.stateNode.containerInfo,kr=!0;break e;case 4:bn=P.stateNode.containerInfo,kr=!0;break e}P=P.return}if(bn===null)throw Error(o(160));bh(S,O,E),bn=null,kr=!1;var H=E.alternate;H!==null&&(H.return=null),E.return=null}catch(ne){Wt(E,i,ne)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)Oh(i,t),i=i.sibling}function Oh(t,i){var u=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dr(i,t),$r(t),m&4){try{la(3,t,t.return),xl(3,t)}catch(Oe){Wt(t,t.return,Oe)}try{la(5,t,t.return)}catch(Oe){Wt(t,t.return,Oe)}}break;case 1:Dr(i,t),$r(t),m&512&&u!==null&&ro(u,u.return);break;case 5:if(Dr(i,t),$r(t),m&512&&u!==null&&ro(u,u.return),t.flags&32){var E=t.stateNode;try{xi(E,"")}catch(Oe){Wt(t,t.return,Oe)}}if(m&4&&(E=t.stateNode,E!=null)){var S=t.memoizedProps,O=u!==null?u.memoizedProps:S,P=t.type,H=t.updateQueue;if(t.updateQueue=null,H!==null)try{P==="input"&&S.type==="radio"&&S.name!=null&&pi(E,S),Tt(P,O);var ne=Tt(P,S);for(O=0;O<H.length;O+=2){var de=H[O],fe=H[O+1];de==="style"?we(E,fe):de==="dangerouslySetInnerHTML"?xn(E,fe):de==="children"?xi(E,fe):W(E,de,fe,ne)}switch(P){case"input":$t(E,S);break;case"textarea":gr(E,S);break;case"select":var ce=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!S.multiple;var Se=S.value;Se!=null?Ie(E,!!S.multiple,Se,!1):ce!==!!S.multiple&&(S.defaultValue!=null?Ie(E,!!S.multiple,S.defaultValue,!0):Ie(E,!!S.multiple,S.multiple?[]:"",!1))}E[Ko]=S}catch(Oe){Wt(t,t.return,Oe)}}break;case 6:if(Dr(i,t),$r(t),m&4){if(t.stateNode===null)throw Error(o(162));E=t.stateNode,S=t.memoizedProps;try{E.nodeValue=S}catch(Oe){Wt(t,t.return,Oe)}}break;case 3:if(Dr(i,t),$r(t),m&4&&u!==null&&u.memoizedState.isDehydrated)try{br(i.containerInfo)}catch(Oe){Wt(t,t.return,Oe)}break;case 4:Dr(i,t),$r(t);break;case 13:Dr(i,t),$r(t),E=t.child,E.flags&8192&&(S=E.memoizedState!==null,E.stateNode.isHidden=S,!S||E.alternate!==null&&E.alternate.memoizedState!==null||(nu=wt())),m&4&&Nh(t);break;case 22:if(de=u!==null&&u.memoizedState!==null,t.mode&1?(Bn=(ne=Bn)||de,Dr(i,t),Bn=ne):Dr(i,t),$r(t),m&8192){if(ne=t.memoizedState!==null,(t.stateNode.isHidden=ne)&&!de&&(t.mode&1)!==0)for(be=t,de=t.child;de!==null;){for(fe=be=de;be!==null;){switch(ce=be,Se=ce.child,ce.tag){case 0:case 11:case 14:case 15:la(4,ce,ce.return);break;case 1:ro(ce,ce.return);var Ne=ce.stateNode;if(typeof Ne.componentWillUnmount=="function"){m=ce,u=ce.return;try{i=m,Ne.props=i.memoizedProps,Ne.state=i.memoizedState,Ne.componentWillUnmount()}catch(Oe){Wt(m,u,Oe)}}break;case 5:ro(ce,ce.return);break;case 22:if(ce.memoizedState!==null){kh(fe);continue}}Se!==null?(Se.return=ce,be=Se):kh(fe)}de=de.sibling}e:for(de=null,fe=t;;){if(fe.tag===5){if(de===null){de=fe;try{E=fe.stateNode,ne?(S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none"):(P=fe.stateNode,H=fe.memoizedProps.style,O=H!=null&&H.hasOwnProperty("display")?H.display:null,P.style.display=jt("display",O))}catch(Oe){Wt(t,t.return,Oe)}}}else if(fe.tag===6){if(de===null)try{fe.stateNode.nodeValue=ne?"":fe.memoizedProps}catch(Oe){Wt(t,t.return,Oe)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===t)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===t)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===t)break e;de===fe&&(de=null),fe=fe.return}de===fe&&(de=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Dr(i,t),$r(t),m&4&&Nh(t);break;case 21:break;default:Dr(i,t),$r(t)}}function $r(t){var i=t.flags;if(i&2){try{e:{for(var u=t.return;u!==null;){if(Ih(u)){var m=u;break e}u=u.return}throw Error(o(160))}switch(m.tag){case 5:var E=m.stateNode;m.flags&32&&(xi(E,""),m.flags&=-33);var S=Th(t);Jc(t,S,E);break;case 3:case 4:var O=m.stateNode.containerInfo,P=Th(t);Zc(t,P,O);break;default:throw Error(o(161))}}catch(H){Wt(t,t.return,H)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function P1(t,i,u){be=t,Rh(t)}function Rh(t,i,u){for(var m=(t.mode&1)!==0;be!==null;){var E=be,S=E.child;if(E.tag===22&&m){var O=E.memoizedState!==null||ml;if(!O){var P=E.alternate,H=P!==null&&P.memoizedState!==null||Bn;P=ml;var ne=Bn;if(ml=O,(Bn=H)&&!ne)for(be=E;be!==null;)O=be,H=O.child,O.tag===22&&O.memoizedState!==null?Dh(E):H!==null?(H.return=O,be=H):Dh(E);for(;S!==null;)be=S,Rh(S),S=S.sibling;be=E,ml=P,Bn=ne}Mh(t)}else(E.subtreeFlags&8772)!==0&&S!==null?(S.return=E,be=S):Mh(t)}}function Mh(t){for(;be!==null;){var i=be;if((i.flags&8772)!==0){var u=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Bn||xl(5,i);break;case 1:var m=i.stateNode;if(i.flags&4&&!Bn)if(u===null)m.componentDidMount();else{var E=i.elementType===i.type?u.memoizedProps:Mr(i.type,u.memoizedProps);m.componentDidUpdate(E,u.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var S=i.updateQueue;S!==null&&kd(i,S,m);break;case 3:var O=i.updateQueue;if(O!==null){if(u=null,i.child!==null)switch(i.child.tag){case 5:u=i.child.stateNode;break;case 1:u=i.child.stateNode}kd(i,O,u)}break;case 5:var P=i.stateNode;if(u===null&&i.flags&4){u=P;var H=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&u.focus();break;case"img":H.src&&(u.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ne=i.alternate;if(ne!==null){var de=ne.memoizedState;if(de!==null){var fe=de.dehydrated;fe!==null&&br(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Bn||i.flags&512&&Kc(i)}catch(ce){Wt(i,i.return,ce)}}if(i===t){be=null;break}if(u=i.sibling,u!==null){u.return=i.return,be=u;break}be=i.return}}function kh(t){for(;be!==null;){var i=be;if(i===t){be=null;break}var u=i.sibling;if(u!==null){u.return=i.return,be=u;break}be=i.return}}function Dh(t){for(;be!==null;){var i=be;try{switch(i.tag){case 0:case 11:case 15:var u=i.return;try{xl(4,i)}catch(H){Wt(i,u,H)}break;case 1:var m=i.stateNode;if(typeof m.componentDidMount=="function"){var E=i.return;try{m.componentDidMount()}catch(H){Wt(i,E,H)}}var S=i.return;try{Kc(i)}catch(H){Wt(i,S,H)}break;case 5:var O=i.return;try{Kc(i)}catch(H){Wt(i,O,H)}}}catch(H){Wt(i,i.return,H)}if(i===t){be=null;break}var P=i.sibling;if(P!==null){P.return=i.return,be=P;break}be=i.return}}var B1=Math.ceil,wl=J.ReactCurrentDispatcher,eu=J.ReactCurrentOwner,Sr=J.ReactCurrentBatchConfig,ht=0,En=null,tn=null,Nn=0,cr=0,io=Ri(0),pn=0,ca=null,xs=0,yl=0,tu=0,ua=null,$n=null,nu=0,so=1/0,di=null,vl=!1,ru=null,Bi=null,El=!1,ji=null,Cl=0,da=0,iu=null,Al=-1,Sl=0;function Un(){return(ht&6)!==0?wt():Al!==-1?Al:Al=wt()}function Fi(t){return(t.mode&1)===0?1:(ht&2)!==0&&Nn!==0?Nn&-Nn:v1.transition!==null?(Sl===0&&(Sl=un()),Sl):(t=qe,t!==0||(t=window.event,t=t===void 0?16:jo(t.type)),t)}function Lr(t,i,u,m){if(50<da)throw da=0,iu=null,Error(o(185));D(t,u,m),((ht&2)===0||t!==En)&&(t===En&&((ht&2)===0&&(yl|=u),pn===4&&Ui(t,Nn)),Qn(t,m),u===1&&ht===0&&(i.mode&1)===0&&(so=wt()+500,Za&&ki()))}function Qn(t,i){var u=t.callbackNode;vi(t,i);var m=rr(t,t===En?Nn:0);if(m===0)u!==null&&wn(u),t.callbackNode=null,t.callbackPriority=0;else if(i=m&-m,t.callbackPriority!==i){if(u!=null&&wn(u),i===1)t.tag===0?y1(Ph.bind(null,t)):Ed(Ph.bind(null,t)),p1(function(){(ht&6)===0&&ki()}),u=null;else{switch(ka(m)){case 1:u=ae;break;case 4:u=Ra;break;case 16:u=_t;break;case 536870912:u=Ma;break;default:u=_t}u=Wh(u,Lh.bind(null,t))}t.callbackPriority=i,t.callbackNode=u}}function Lh(t,i){if(Al=-1,Sl=0,(ht&6)!==0)throw Error(o(327));var u=t.callbackNode;if(oo()&&t.callbackNode!==u)return null;var m=rr(t,t===En?Nn:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||i)i=_l(t,m);else{i=m;var E=ht;ht|=2;var S=jh();(En!==t||Nn!==i)&&(di=null,so=wt()+500,ys(t,i));do try{U1();break}catch(P){Bh(t,P)}while(!0);Cc(),wl.current=S,ht=E,tn!==null?i=0:(En=null,Nn=0,i=pn)}if(i!==0){if(i===2&&(E=yt(t),E!==0&&(m=E,i=su(t,E))),i===1)throw u=ca,ys(t,0),Ui(t,m),Qn(t,wt()),u;if(i===6)Ui(t,m);else{if(E=t.current.alternate,(m&30)===0&&!j1(E)&&(i=_l(t,m),i===2&&(S=yt(t),S!==0&&(m=S,i=su(t,S))),i===1))throw u=ca,ys(t,0),Ui(t,m),Qn(t,wt()),u;switch(t.finishedWork=E,t.finishedLanes=m,i){case 0:case 1:throw Error(o(345));case 2:vs(t,$n,di);break;case 3:if(Ui(t,m),(m&130023424)===m&&(i=nu+500-wt(),10<i)){if(rr(t,0)!==0)break;if(E=t.suspendedLanes,(E&m)!==m){Un(),t.pingedLanes|=t.suspendedLanes&E;break}t.timeoutHandle=dc(vs.bind(null,t,$n,di),i);break}vs(t,$n,di);break;case 4:if(Ui(t,m),(m&4194240)===m)break;for(i=t.eventTimes,E=-1;0<m;){var O=31-jn(m);S=1<<O,O=i[O],O>E&&(E=O),m&=~S}if(m=E,m=wt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*B1(m/1960))-m,10<m){t.timeoutHandle=dc(vs.bind(null,t,$n,di),m);break}vs(t,$n,di);break;case 5:vs(t,$n,di);break;default:throw Error(o(329))}}}return Qn(t,wt()),t.callbackNode===u?Lh.bind(null,t):null}function su(t,i){var u=ua;return t.current.memoizedState.isDehydrated&&(ys(t,i).flags|=256),t=_l(t,i),t!==2&&(i=$n,$n=u,i!==null&&ou(i)),t}function ou(t){$n===null?$n=t:$n.push.apply($n,t)}function j1(t){for(var i=t;;){if(i.flags&16384){var u=i.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var m=0;m<u.length;m++){var E=u[m],S=E.getSnapshot;E=E.value;try{if(!Y(S(),E))return!1}catch{return!1}}}if(u=i.child,i.subtreeFlags&16384&&u!==null)u.return=i,i=u;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ui(t,i){for(i&=~tu,i&=~yl,t.suspendedLanes|=i,t.pingedLanes&=~i,t=t.expirationTimes;0<i;){var u=31-jn(i),m=1<<u;t[u]=-1,i&=~m}}function Ph(t){if((ht&6)!==0)throw Error(o(327));oo();var i=rr(t,0);if((i&1)===0)return Qn(t,wt()),null;var u=_l(t,i);if(t.tag!==0&&u===2){var m=yt(t);m!==0&&(i=m,u=su(t,m))}if(u===1)throw u=ca,ys(t,0),Ui(t,i),Qn(t,wt()),u;if(u===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=i,vs(t,$n,di),Qn(t,wt()),null}function au(t,i){var u=ht;ht|=1;try{return t(i)}finally{ht=u,ht===0&&(so=wt()+500,Za&&ki())}}function ws(t){ji!==null&&ji.tag===0&&(ht&6)===0&&oo();var i=ht;ht|=1;var u=Sr.transition,m=qe;try{if(Sr.transition=null,qe=1,t)return t()}finally{qe=m,Sr.transition=u,ht=i,(ht&6)===0&&ki()}}function lu(){cr=io.current,Dt(io)}function ys(t,i){t.finishedWork=null,t.finishedLanes=0;var u=t.timeoutHandle;if(u!==-1&&(t.timeoutHandle=-1,g1(u)),tn!==null)for(u=tn.return;u!==null;){var m=u;switch(xc(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&qa();break;case 3:to(),Dt(Gn),Dt(Dn),Oc();break;case 5:bc(m);break;case 4:to();break;case 13:Dt(Ut);break;case 19:Dt(Ut);break;case 10:Ac(m.type._context);break;case 22:case 23:lu()}u=u.return}if(En=t,tn=t=zi(t.current,null),Nn=cr=i,pn=0,ca=null,tu=yl=xs=0,$n=ua=null,gs!==null){for(i=0;i<gs.length;i++)if(u=gs[i],m=u.interleaved,m!==null){u.interleaved=null;var E=m.next,S=u.pending;if(S!==null){var O=S.next;S.next=E,m.next=O}u.pending=m}gs=null}return t}function Bh(t,i){do{var u=tn;try{if(Cc(),ll.current=hl,cl){for(var m=zt.memoizedState;m!==null;){var E=m.queue;E!==null&&(E.pending=null),m=m.next}cl=!1}if(ms=0,vn=gn=zt=null,ra=!1,ia=0,eu.current=null,u===null||u.return===null){pn=1,ca=i,tn=null;break}e:{var S=t,O=u.return,P=u,H=i;if(i=Nn,P.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var ne=H,de=P,fe=de.tag;if((de.mode&1)===0&&(fe===0||fe===11||fe===15)){var ce=de.alternate;ce?(de.updateQueue=ce.updateQueue,de.memoizedState=ce.memoizedState,de.lanes=ce.lanes):(de.updateQueue=null,de.memoizedState=null)}var Se=lh(O);if(Se!==null){Se.flags&=-257,ch(Se,O,P,S,i),Se.mode&1&&ah(S,ne,i),i=Se,H=ne;var Ne=i.updateQueue;if(Ne===null){var Oe=new Set;Oe.add(H),i.updateQueue=Oe}else Ne.add(H);break e}else{if((i&1)===0){ah(S,ne,i),cu();break e}H=Error(o(426))}}else if(Bt&&P.mode&1){var Jt=lh(O);if(Jt!==null){(Jt.flags&65536)===0&&(Jt.flags|=256),ch(Jt,O,P,S,i),vc(no(H,P));break e}}S=H=no(H,P),pn!==4&&(pn=2),ua===null?ua=[S]:ua.push(S),S=O;do{switch(S.tag){case 3:S.flags|=65536,i&=-i,S.lanes|=i;var q=sh(S,H,i);Md(S,q);break e;case 1:P=H;var G=S.type,Z=S.stateNode;if((S.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Z!==null&&typeof Z.componentDidCatch=="function"&&(Bi===null||!Bi.has(Z)))){S.flags|=65536,i&=-i,S.lanes|=i;var me=oh(S,P,i);Md(S,me);break e}}S=S.return}while(S!==null)}Uh(u)}catch(Me){i=Me,tn===u&&u!==null&&(tn=u=u.return);continue}break}while(!0)}function jh(){var t=wl.current;return wl.current=hl,t===null?hl:t}function cu(){(pn===0||pn===3||pn===2)&&(pn=4),En===null||(xs&268435455)===0&&(yl&268435455)===0||Ui(En,Nn)}function _l(t,i){var u=ht;ht|=2;var m=jh();(En!==t||Nn!==i)&&(di=null,ys(t,i));do try{F1();break}catch(E){Bh(t,E)}while(!0);if(Cc(),ht=u,wl.current=m,tn!==null)throw Error(o(261));return En=null,Nn=0,pn}function F1(){for(;tn!==null;)Fh(tn)}function U1(){for(;tn!==null&&!bt();)Fh(tn)}function Fh(t){var i=Vh(t.alternate,t,cr);t.memoizedProps=t.pendingProps,i===null?Uh(t):tn=i,eu.current=null}function Uh(t){var i=t;do{var u=i.alternate;if(t=i.return,(i.flags&32768)===0){if(u=M1(u,i,cr),u!==null){tn=u;return}}else{if(u=k1(u,i),u!==null){u.flags&=32767,tn=u;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pn=6,tn=null;return}}if(i=i.sibling,i!==null){tn=i;return}tn=i=t}while(i!==null);pn===0&&(pn=5)}function vs(t,i,u){var m=qe,E=Sr.transition;try{Sr.transition=null,qe=1,z1(t,i,u,m)}finally{Sr.transition=E,qe=m}return null}function z1(t,i,u,m){do oo();while(ji!==null);if((ht&6)!==0)throw Error(o(327));u=t.finishedWork;var E=t.finishedLanes;if(u===null)return null;if(t.finishedWork=null,t.finishedLanes=0,u===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var S=u.lanes|u.childLanes;if(De(t,S),t===En&&(tn=En=null,Nn=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||El||(El=!0,Wh(_t,function(){return oo(),null})),S=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||S){S=Sr.transition,Sr.transition=null;var O=qe;qe=1;var P=ht;ht|=4,eu.current=null,L1(t,u),Oh(u,t),kn(cc),Vr=!!lc,cc=lc=null,t.current=u,P1(u),Oa(),ht=P,qe=O,Sr.transition=S}else t.current=u;if(El&&(El=!1,ji=t,Cl=E),S=t.pendingLanes,S===0&&(Bi=null),rt(u.stateNode),Qn(t,wt()),i!==null)for(m=t.onRecoverableError,u=0;u<i.length;u++)E=i[u],m(E.value,{componentStack:E.stack,digest:E.digest});if(vl)throw vl=!1,t=ru,ru=null,t;return(Cl&1)!==0&&t.tag!==0&&oo(),S=t.pendingLanes,(S&1)!==0?t===iu?da++:(da=0,iu=t):da=0,ki(),null}function oo(){if(ji!==null){var t=ka(Cl),i=Sr.transition,u=qe;try{if(Sr.transition=null,qe=16>t?16:t,ji===null)var m=!1;else{if(t=ji,ji=null,Cl=0,(ht&6)!==0)throw Error(o(331));var E=ht;for(ht|=4,be=t.current;be!==null;){var S=be,O=S.child;if((be.flags&16)!==0){var P=S.deletions;if(P!==null){for(var H=0;H<P.length;H++){var ne=P[H];for(be=ne;be!==null;){var de=be;switch(de.tag){case 0:case 11:case 15:la(8,de,S)}var fe=de.child;if(fe!==null)fe.return=de,be=fe;else for(;be!==null;){de=be;var ce=de.sibling,Se=de.return;if(_h(de),de===ne){be=null;break}if(ce!==null){ce.return=Se,be=ce;break}be=Se}}}var Ne=S.alternate;if(Ne!==null){var Oe=Ne.child;if(Oe!==null){Ne.child=null;do{var Jt=Oe.sibling;Oe.sibling=null,Oe=Jt}while(Oe!==null)}}be=S}}if((S.subtreeFlags&2064)!==0&&O!==null)O.return=S,be=O;else e:for(;be!==null;){if(S=be,(S.flags&2048)!==0)switch(S.tag){case 0:case 11:case 15:la(9,S,S.return)}var q=S.sibling;if(q!==null){q.return=S.return,be=q;break e}be=S.return}}var G=t.current;for(be=G;be!==null;){O=be;var Z=O.child;if((O.subtreeFlags&2064)!==0&&Z!==null)Z.return=O,be=Z;else e:for(O=G;be!==null;){if(P=be,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:xl(9,P)}}catch(Me){Wt(P,P.return,Me)}if(P===O){be=null;break e}var me=P.sibling;if(me!==null){me.return=P.return,be=me;break e}be=P.return}}if(ht=E,ki(),Qe&&typeof Qe.onPostCommitFiberRoot=="function")try{Qe.onPostCommitFiberRoot(ct,t)}catch{}m=!0}return m}finally{qe=u,Sr.transition=i}}return!1}function zh(t,i,u){i=no(u,i),i=sh(t,i,1),t=Li(t,i,1),i=Un(),t!==null&&(D(t,1,i),Qn(t,i))}function Wt(t,i,u){if(t.tag===3)zh(t,t,u);else for(;i!==null;){if(i.tag===3){zh(i,t,u);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Bi===null||!Bi.has(m))){t=no(u,t),t=oh(i,t,1),i=Li(i,t,1),t=Un(),i!==null&&(D(i,1,t),Qn(i,t));break}}i=i.return}}function H1(t,i,u){var m=t.pingCache;m!==null&&m.delete(i),i=Un(),t.pingedLanes|=t.suspendedLanes&u,En===t&&(Nn&u)===u&&(pn===4||pn===3&&(Nn&130023424)===Nn&&500>wt()-nu?ys(t,0):tu|=u),Qn(t,i)}function Hh(t,i){i===0&&((t.mode&1)===0?i=1:(i=Ps,Ps<<=1,(Ps&130023424)===0&&(Ps=4194304)));var u=Un();t=li(t,i),t!==null&&(D(t,i,u),Qn(t,u))}function V1(t){var i=t.memoizedState,u=0;i!==null&&(u=i.retryLane),Hh(t,u)}function W1(t,i){var u=0;switch(t.tag){case 13:var m=t.stateNode,E=t.memoizedState;E!==null&&(u=E.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(o(314))}m!==null&&m.delete(i),Hh(t,u)}var Vh;Vh=function(t,i,u){if(t!==null)if(t.memoizedProps!==i.pendingProps||Gn.current)Xn=!0;else{if((t.lanes&u)===0&&(i.flags&128)===0)return Xn=!1,R1(t,i,u);Xn=(t.flags&131072)!==0}else Xn=!1,Bt&&(i.flags&1048576)!==0&&Cd(i,el,i.index);switch(i.lanes=0,i.tag){case 2:var m=i.type;pl(t,i),t=i.pendingProps;var E=$s(i,Dn.current);eo(i,u),E=kc(null,i,m,t,E,u);var S=Dc();return i.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Yn(m)?(S=!0,Ka(i)):S=!1,i.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ic(i),E.updater=fl,i.stateNode=E,E._reactInternals=i,Uc(i,m,t,u),i=Wc(null,i,m,!0,S,u)):(i.tag=0,Bt&&S&&mc(i),Fn(null,i,E,u),i=i.child),i;case 16:m=i.elementType;e:{switch(pl(t,i),t=i.pendingProps,E=m._init,m=E(m._payload),i.type=m,E=i.tag=Y1(m),t=Mr(m,t),E){case 0:i=Vc(null,i,m,t,u);break e;case 1:i=ph(null,i,m,t,u);break e;case 11:i=uh(null,i,m,t,u);break e;case 14:i=dh(null,i,m,Mr(m.type,t),u);break e}throw Error(o(306,m,""))}return i;case 0:return m=i.type,E=i.pendingProps,E=i.elementType===m?E:Mr(m,E),Vc(t,i,m,E,u);case 1:return m=i.type,E=i.pendingProps,E=i.elementType===m?E:Mr(m,E),ph(t,i,m,E,u);case 3:e:{if(mh(i),t===null)throw Error(o(387));m=i.pendingProps,S=i.memoizedState,E=S.element,Rd(t,i),ol(i,m,null,u);var O=i.memoizedState;if(m=O.element,S.isDehydrated)if(S={element:m,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},i.updateQueue.baseState=S,i.memoizedState=S,i.flags&256){E=no(Error(o(423)),i),i=xh(t,i,m,u,E);break e}else if(m!==E){E=no(Error(o(424)),i),i=xh(t,i,m,u,E);break e}else for(lr=Oi(i.stateNode.containerInfo.firstChild),ar=i,Bt=!0,Rr=null,u=Nd(i,null,m,u),i.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Ks(),m===E){i=ui(t,i,u);break e}Fn(t,i,m,u)}i=i.child}return i;case 5:return Dd(i),t===null&&yc(i),m=i.type,E=i.pendingProps,S=t!==null?t.memoizedProps:null,O=E.children,uc(m,E)?O=null:S!==null&&uc(m,S)&&(i.flags|=32),gh(t,i),Fn(t,i,O,u),i.child;case 6:return t===null&&yc(i),null;case 13:return wh(t,i,u);case 4:return Tc(i,i.stateNode.containerInfo),m=i.pendingProps,t===null?i.child=Zs(i,null,m,u):Fn(t,i,m,u),i.child;case 11:return m=i.type,E=i.pendingProps,E=i.elementType===m?E:Mr(m,E),uh(t,i,m,E,u);case 7:return Fn(t,i,i.pendingProps,u),i.child;case 8:return Fn(t,i,i.pendingProps.children,u),i.child;case 12:return Fn(t,i,i.pendingProps.children,u),i.child;case 10:e:{if(m=i.type._context,E=i.pendingProps,S=i.memoizedProps,O=E.value,Rt(rl,m._currentValue),m._currentValue=O,S!==null)if(Y(S.value,O)){if(S.children===E.children&&!Gn.current){i=ui(t,i,u);break e}}else for(S=i.child,S!==null&&(S.return=i);S!==null;){var P=S.dependencies;if(P!==null){O=S.child;for(var H=P.firstContext;H!==null;){if(H.context===m){if(S.tag===1){H=ci(-1,u&-u),H.tag=2;var ne=S.updateQueue;if(ne!==null){ne=ne.shared;var de=ne.pending;de===null?H.next=H:(H.next=de.next,de.next=H),ne.pending=H}}S.lanes|=u,H=S.alternate,H!==null&&(H.lanes|=u),Sc(S.return,u,i),P.lanes|=u;break}H=H.next}}else if(S.tag===10)O=S.type===i.type?null:S.child;else if(S.tag===18){if(O=S.return,O===null)throw Error(o(341));O.lanes|=u,P=O.alternate,P!==null&&(P.lanes|=u),Sc(O,u,i),O=S.sibling}else O=S.child;if(O!==null)O.return=S;else for(O=S;O!==null;){if(O===i){O=null;break}if(S=O.sibling,S!==null){S.return=O.return,O=S;break}O=O.return}S=O}Fn(t,i,E.children,u),i=i.child}return i;case 9:return E=i.type,m=i.pendingProps.children,eo(i,u),E=Cr(E),m=m(E),i.flags|=1,Fn(t,i,m,u),i.child;case 14:return m=i.type,E=Mr(m,i.pendingProps),E=Mr(m.type,E),dh(t,i,m,E,u);case 15:return hh(t,i,i.type,i.pendingProps,u);case 17:return m=i.type,E=i.pendingProps,E=i.elementType===m?E:Mr(m,E),pl(t,i),i.tag=1,Yn(m)?(t=!0,Ka(i)):t=!1,eo(i,u),rh(i,m,E),Uc(i,m,E,u),Wc(null,i,m,!0,t,u);case 19:return vh(t,i,u);case 22:return fh(t,i,u)}throw Error(o(156,i.tag))};function Wh(t,i){return tr(t,i)}function G1(t,i,u,m){this.tag=t,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(t,i,u,m){return new G1(t,i,u,m)}function uu(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Y1(t){if(typeof t=="function")return uu(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ke)return 11;if(t===re)return 14}return 2}function zi(t,i){var u=t.alternate;return u===null?(u=_r(t.tag,i,t.key,t.mode),u.elementType=t.elementType,u.type=t.type,u.stateNode=t.stateNode,u.alternate=t,t.alternate=u):(u.pendingProps=i,u.type=t.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=t.flags&14680064,u.childLanes=t.childLanes,u.lanes=t.lanes,u.child=t.child,u.memoizedProps=t.memoizedProps,u.memoizedState=t.memoizedState,u.updateQueue=t.updateQueue,i=t.dependencies,u.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},u.sibling=t.sibling,u.index=t.index,u.ref=t.ref,u}function Il(t,i,u,m,E,S){var O=2;if(m=t,typeof t=="function")uu(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case K:return Es(u.children,E,S,i);case Ee:O=8,E|=8;break;case oe:return t=_r(12,u,i,E|2),t.elementType=oe,t.lanes=S,t;case Ye:return t=_r(13,u,i,E),t.elementType=Ye,t.lanes=S,t;case Ze:return t=_r(19,u,i,E),t.elementType=Ze,t.lanes=S,t;case _e:return Tl(u,E,S,i);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vt:O=10;break e;case ut:O=9;break e;case ke:O=11;break e;case re:O=14;break e;case st:O=16,m=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return i=_r(O,u,i,E),i.elementType=t,i.type=m,i.lanes=S,i}function Es(t,i,u,m){return t=_r(7,t,m,i),t.lanes=u,t}function Tl(t,i,u,m){return t=_r(22,t,m,i),t.elementType=_e,t.lanes=u,t.stateNode={isHidden:!1},t}function du(t,i,u){return t=_r(6,t,null,i),t.lanes=u,t}function hu(t,i,u){return i=_r(4,t.children!==null?t.children:[],t.key,i),i.lanes=u,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}function X1(t,i,u,m,E){this.tag=i,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Q(0),this.expirationTimes=Q(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Q(0),this.identifierPrefix=m,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function fu(t,i,u,m,E,S,O,P,H){return t=new X1(t,i,u,P,H),i===1?(i=1,S===!0&&(i|=8)):i=0,S=_r(3,null,null,i),t.current=S,S.stateNode=t,S.memoizedState={element:m,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(S),t}function $1(t,i,u){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:m==null?null:""+m,children:t,containerInfo:i,implementation:u}}function Gh(t){if(!t)return Mi;t=t._reactInternals;e:{if(Wn(t)!==t||t.tag!==1)throw Error(o(170));var i=t;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Yn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(o(171))}if(t.tag===1){var u=t.type;if(Yn(u))return yd(t,u,i)}return i}function Yh(t,i,u,m,E,S,O,P,H){return t=fu(u,m,!0,t,E,S,O,P,H),t.context=Gh(null),u=t.current,m=Un(),E=Fi(u),S=ci(m,E),S.callback=i??null,Li(u,S,E),t.current.lanes=E,D(t,E,m),Qn(t,m),t}function bl(t,i,u,m){var E=i.current,S=Un(),O=Fi(E);return u=Gh(u),i.context===null?i.context=u:i.pendingContext=u,i=ci(S,O),i.payload={element:t},m=m===void 0?null:m,m!==null&&(i.callback=m),t=Li(E,i,O),t!==null&&(Lr(t,E,O,S),sl(t,E,O)),O}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Xh(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var u=t.retryLane;t.retryLane=u!==0&&u<i?u:i}}function gu(t,i){Xh(t,i),(t=t.alternate)&&Xh(t,i)}function Q1(){return null}var $h=typeof reportError=="function"?reportError:function(t){console.error(t)};function pu(t){this._internalRoot=t}Ol.prototype.render=pu.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(o(409));bl(t,i,null,null)},Ol.prototype.unmount=pu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;ws(function(){bl(null,t,null,null)}),i[ii]=null}};function Ol(t){this._internalRoot=t}Ol.prototype.unstable_scheduleHydration=function(t){if(t){var i=Nt();t={blockedOn:null,target:t,priority:i};for(var u=0;u<_n.length&&i!==0&&i<_n[u].priority;u++);_n.splice(u,0,t),u===0&&La(t)}};function mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qh(){}function q1(t,i,u,m,E){if(E){if(typeof m=="function"){var S=m;m=function(){var ne=Nl(O);S.call(ne)}}var O=Yh(i,m,t,0,null,!1,!1,"",Qh);return t._reactRootContainer=O,t[ii]=O.current,Qo(t.nodeType===8?t.parentNode:t),ws(),O}for(;E=t.lastChild;)t.removeChild(E);if(typeof m=="function"){var P=m;m=function(){var ne=Nl(H);P.call(ne)}}var H=fu(t,0,!1,null,null,!1,!1,"",Qh);return t._reactRootContainer=H,t[ii]=H.current,Qo(t.nodeType===8?t.parentNode:t),ws(function(){bl(i,H,u,m)}),H}function Ml(t,i,u,m,E){var S=u._reactRootContainer;if(S){var O=S;if(typeof E=="function"){var P=E;E=function(){var H=Nl(O);P.call(H)}}bl(i,O,t,E)}else O=q1(u,i,t,E,m);return Nl(O)}Bs=function(t){switch(t.tag){case 3:var i=t.stateNode;if(i.current.memoizedState.isDehydrated){var u=It(i.pendingLanes);u!==0&&(Ht(i,u|1),Qn(i,wt()),(ht&6)===0&&(so=wt()+500,ki()))}break;case 13:ws(function(){var m=li(t,1);if(m!==null){var E=Un();Lr(m,t,1,E)}}),gu(t,1)}},Mn=function(t){if(t.tag===13){var i=li(t,134217728);if(i!==null){var u=Un();Lr(i,t,134217728,u)}gu(t,134217728)}},Le=function(t){if(t.tag===13){var i=Fi(t),u=li(t,i);if(u!==null){var m=Un();Lr(u,t,i,m)}gu(t,i)}},Nt=function(){return qe},Lo=function(t,i){var u=qe;try{return qe=t,i()}finally{qe=u}},Ds=function(t,i,u){switch(i){case"input":if($t(t,u),i=u.name,u.type==="radio"&&i!=null){for(u=t;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<u.length;i++){var m=u[i];if(m!==t&&m.form===t.form){var E=Qa(m);if(!E)throw Error(o(90));qi(m),$t(m,E)}}}break;case"textarea":gr(t,u);break;case"select":i=u.value,i!=null&&Ie(t,!!u.multiple,i,!1)}},Ls=au,cn=ws;var K1={usingClientEntryPoint:!1,Events:[Zo,Ys,Qa,bo,Vn,au]},ha={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z1={bundleType:ha.bundleType,version:ha.version,rendererPackageName:ha.rendererPackageName,rendererConfig:ha.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:J.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=ba(t),t===null?null:t.stateNode},findFiberByHostInstance:ha.findFiberByHostInstance||Q1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!kl.isDisabled&&kl.supportsFiber)try{ct=kl.inject(Z1),Qe=kl}catch{}}return qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=K1,qn.createPortal=function(t,i){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mu(i))throw Error(o(200));return $1(t,i,null,u)},qn.createRoot=function(t,i){if(!mu(t))throw Error(o(299));var u=!1,m="",E=$h;return i!=null&&(i.unstable_strictMode===!0&&(u=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onRecoverableError!==void 0&&(E=i.onRecoverableError)),i=fu(t,1,!1,null,null,u,!1,m,E),t[ii]=i.current,Qo(t.nodeType===8?t.parentNode:t),new pu(i)},qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=ba(i),t=t===null?null:t.stateNode,t},qn.flushSync=function(t){return ws(t)},qn.hydrate=function(t,i,u){if(!Rl(i))throw Error(o(200));return Ml(null,t,i,!0,u)},qn.hydrateRoot=function(t,i,u){if(!mu(t))throw Error(o(405));var m=u!=null&&u.hydratedSources||null,E=!1,S="",O=$h;if(u!=null&&(u.unstable_strictMode===!0&&(E=!0),u.identifierPrefix!==void 0&&(S=u.identifierPrefix),u.onRecoverableError!==void 0&&(O=u.onRecoverableError)),i=Yh(i,null,t,1,u??null,E,!1,S,O),t[ii]=i.current,Qo(t),m)for(t=0;t<m.length;t++)u=m[t],E=u._getVersion,E=E(u._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[u,E]:i.mutableSourceEagerHydrationData.push(u,E);return new Ol(i)},qn.render=function(t,i,u){if(!Rl(i))throw Error(o(200));return Ml(null,t,i,!1,u)},qn.unmountComponentAtNode=function(t){if(!Rl(t))throw Error(o(40));return t._reactRootContainer?(ws(function(){Ml(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1},qn.unstable_batchedUpdates=au,qn.unstable_renderSubtreeIntoContainer=function(t,i,u,m){if(!Rl(u))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return Ml(t,i,u,!1,m)},qn.version="18.3.1-next-f1338f8080-20240426",qn}var rf;function a0(){if(rf)return yu.exports;rf=1;function d(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(d)}catch(s){console.error(s)}}return d(),yu.exports=ag(),yu.exports}var sf;function lg(){if(sf)return Ll;sf=1;var d=a0();return Ll.createRoot=d.createRoot,Ll.hydrateRoot=d.hydrateRoot,Ll}var cg=lg();const ug=Yl(cg),dg="modulepreload",hg=function(d){return"/Attendance/"+d},of={},Sa=function(s,o,h){let g=Promise.resolve();if(o&&o.length>0){let w=function(A){return Promise.all(A.map(T=>Promise.resolve(T).then(k=>({status:"fulfilled",value:k}),k=>({status:"rejected",reason:k}))))};var y=w;document.getElementsByTagName("link");const _=document.querySelector("meta[property=csp-nonce]"),C=_?.nonce||_?.getAttribute("nonce");g=w(o.map(A=>{if(A=hg(A),A in of)return;of[A]=!0;const T=A.endsWith(".css"),k=T?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${A}"]${k}`))return;const B=document.createElement("link");if(B.rel=T?"stylesheet":dg,T||(B.as="script"),B.crossOrigin="",B.href=A,C&&B.setAttribute("nonce",C),document.head.appendChild(B),T)return new Promise((z,j)=>{B.addEventListener("load",z),B.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${A}`)))})}))}function f(_){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=_,window.dispatchEvent(C),!C.defaultPrevented)throw _}return g.then(_=>{for(const C of _||[])C.status==="rejected"&&f(C.reason);return s().catch(f)})},fg=d=>{let s;return d?s=d:typeof fetch>"u"?s=(...o)=>Sa(async()=>{const{default:h}=await Promise.resolve().then(()=>So);return{default:h}},void 0).then(({default:h})=>h(...o)):s=fetch,(...o)=>s(...o)};class $u extends Error{constructor(s,o="FunctionsError",h){super(s),this.name=o,this.context=h}}class af extends $u{constructor(s){super("Failed to send a request to the Edge Function","FunctionsFetchError",s)}}class lf extends $u{constructor(s){super("Relay Error invoking the Edge Function","FunctionsRelayError",s)}}class cf extends $u{constructor(s){super("Edge Function returned a non-2xx status code","FunctionsHttpError",s)}}var Ru;(function(d){d.Any="any",d.ApNortheast1="ap-northeast-1",d.ApNortheast2="ap-northeast-2",d.ApSouth1="ap-south-1",d.ApSoutheast1="ap-southeast-1",d.ApSoutheast2="ap-southeast-2",d.CaCentral1="ca-central-1",d.EuCentral1="eu-central-1",d.EuWest1="eu-west-1",d.EuWest2="eu-west-2",d.EuWest3="eu-west-3",d.SaEast1="sa-east-1",d.UsEast1="us-east-1",d.UsWest1="us-west-1",d.UsWest2="us-west-2"})(Ru||(Ru={}));var gg=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};class pg{constructor(s,{headers:o={},customFetch:h,region:g=Ru.Any}={}){this.url=s,this.headers=o,this.region=g,this.fetch=fg(h)}setAuth(s){this.headers.Authorization=`Bearer ${s}`}invoke(s,o={}){var h;return gg(this,void 0,void 0,function*(){try{const{headers:g,method:f,body:y,signal:_}=o;let C={},{region:w}=o;w||(w=this.region);const A=new URL(`${this.url}/${s}`);w&&w!=="any"&&(C["x-region"]=w,A.searchParams.set("forceFunctionRegion",w));let T;y&&(g&&!Object.prototype.hasOwnProperty.call(g,"Content-Type")||!g)&&(typeof Blob<"u"&&y instanceof Blob||y instanceof ArrayBuffer?(C["Content-Type"]="application/octet-stream",T=y):typeof y=="string"?(C["Content-Type"]="text/plain",T=y):typeof FormData<"u"&&y instanceof FormData?T=y:(C["Content-Type"]="application/json",T=JSON.stringify(y)));const k=yield this.fetch(A.toString(),{method:f||"POST",headers:Object.assign(Object.assign(Object.assign({},C),this.headers),g),body:T,signal:_}).catch(F=>{throw F.name==="AbortError"?F:new af(F)}),B=k.headers.get("x-relay-error");if(B&&B==="true")throw new lf(k);if(!k.ok)throw new cf(k);let z=((h=k.headers.get("Content-Type"))!==null&&h!==void 0?h:"text/plain").split(";")[0].trim(),j;return z==="application/json"?j=yield k.json():z==="application/octet-stream"?j=yield k.blob():z==="text/event-stream"?j=k:z==="multipart/form-data"?j=yield k.formData():j=yield k.text(),{data:j,error:null,response:k}}catch(g){return g instanceof Error&&g.name==="AbortError"?{data:null,error:new af(g)}:{data:null,error:g,response:g instanceof cf||g instanceof lf?g.context:void 0}}})}}var An={},ao={},lo={},co={},uo={},ho={},mg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ao=mg();const xg=Ao.fetch,l0=Ao.fetch.bind(Ao),c0=Ao.Headers,wg=Ao.Request,yg=Ao.Response,So=Object.freeze(Object.defineProperty({__proto__:null,Headers:c0,Request:wg,Response:yg,default:l0,fetch:xg},Symbol.toStringTag,{value:"Module"})),vg=eg(So);var Pl={},uf;function u0(){if(uf)return Pl;uf=1,Object.defineProperty(Pl,"__esModule",{value:!0});class d extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}}return Pl.default=d,Pl}var df;function d0(){if(df)return ho;df=1;var d=ho&&ho.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(ho,"__esModule",{value:!0});const s=d(vg),o=d(u0());class h{constructor(f){var y,_;this.shouldThrowOnError=!1,this.method=f.method,this.url=f.url,this.headers=new Headers(f.headers),this.schema=f.schema,this.body=f.body,this.shouldThrowOnError=(y=f.shouldThrowOnError)!==null&&y!==void 0?y:!1,this.signal=f.signal,this.isMaybeSingle=(_=f.isMaybeSingle)!==null&&_!==void 0?_:!1,f.fetch?this.fetch=f.fetch:typeof fetch>"u"?this.fetch=s.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(f,y){return this.headers=new Headers(this.headers),this.headers.set(f,y),this}then(f,y){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const _=this.fetch;let C=_(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async w=>{var A,T,k,B;let z=null,j=null,F=null,ie=w.status,$=w.statusText;if(w.ok){if(this.method!=="HEAD"){const he=await w.text();he===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((A=this.headers.get("Accept"))===null||A===void 0)&&A.includes("application/vnd.pgrst.plan+text"))?j=he:j=JSON.parse(he))}const J=(T=this.headers.get("Prefer"))===null||T===void 0?void 0:T.match(/count=(exact|planned|estimated)/),Ce=(k=w.headers.get("content-range"))===null||k===void 0?void 0:k.split("/");J&&Ce&&Ce.length>1&&(F=parseInt(Ce[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(z={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,F=null,ie=406,$="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const J=await w.text();try{z=JSON.parse(J),Array.isArray(z)&&w.status===404&&(j=[],z=null,ie=200,$="OK")}catch{w.status===404&&J===""?(ie=204,$="No Content"):z={message:J}}if(z&&this.isMaybeSingle&&(!((B=z?.details)===null||B===void 0)&&B.includes("0 rows"))&&(z=null,ie=200,$="OK"),z&&this.shouldThrowOnError)throw new o.default(z)}return{error:z,data:j,count:F,status:ie,statusText:$}});return this.shouldThrowOnError||(C=C.catch(w=>{var A,T,k;return{error:{message:`${(A=w?.name)!==null&&A!==void 0?A:"FetchError"}: ${w?.message}`,details:`${(T=w?.stack)!==null&&T!==void 0?T:""}`,hint:"",code:`${(k=w?.code)!==null&&k!==void 0?k:""}`},data:null,count:null,status:0,statusText:""}})),C.then(f,y)}returns(){return this}overrideTypes(){return this}}return ho.default=h,ho}var hf;function h0(){if(hf)return uo;hf=1;var d=uo&&uo.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(uo,"__esModule",{value:!0});const s=d(d0());class o extends s.default{select(g){let f=!1;const y=(g??"*").split("").map(_=>/\s/.test(_)&&!f?"":(_==='"'&&(f=!f),_)).join("");return this.url.searchParams.set("select",y),this.headers.append("Prefer","return=representation"),this}order(g,{ascending:f=!0,nullsFirst:y,foreignTable:_,referencedTable:C=_}={}){const w=C?`${C}.order`:"order",A=this.url.searchParams.get(w);return this.url.searchParams.set(w,`${A?`${A},`:""}${g}.${f?"asc":"desc"}${y===void 0?"":y?".nullsfirst":".nullslast"}`),this}limit(g,{foreignTable:f,referencedTable:y=f}={}){const _=typeof y>"u"?"limit":`${y}.limit`;return this.url.searchParams.set(_,`${g}`),this}range(g,f,{foreignTable:y,referencedTable:_=y}={}){const C=typeof _>"u"?"offset":`${_}.offset`,w=typeof _>"u"?"limit":`${_}.limit`;return this.url.searchParams.set(C,`${g}`),this.url.searchParams.set(w,`${f-g+1}`),this}abortSignal(g){return this.signal=g,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:g=!1,verbose:f=!1,settings:y=!1,buffers:_=!1,wal:C=!1,format:w="text"}={}){var A;const T=[g?"analyze":null,f?"verbose":null,y?"settings":null,_?"buffers":null,C?"wal":null].filter(Boolean).join("|"),k=(A=this.headers.get("Accept"))!==null&&A!==void 0?A:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${w}; for="${k}"; options=${T};`),w==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(g){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${g}`),this}}return uo.default=o,uo}var ff;function Qu(){if(ff)return co;ff=1;var d=co&&co.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(co,"__esModule",{value:!0});const s=d(h0());class o extends s.default{eq(g,f){return this.url.searchParams.append(g,`eq.${f}`),this}neq(g,f){return this.url.searchParams.append(g,`neq.${f}`),this}gt(g,f){return this.url.searchParams.append(g,`gt.${f}`),this}gte(g,f){return this.url.searchParams.append(g,`gte.${f}`),this}lt(g,f){return this.url.searchParams.append(g,`lt.${f}`),this}lte(g,f){return this.url.searchParams.append(g,`lte.${f}`),this}like(g,f){return this.url.searchParams.append(g,`like.${f}`),this}likeAllOf(g,f){return this.url.searchParams.append(g,`like(all).{${f.join(",")}}`),this}likeAnyOf(g,f){return this.url.searchParams.append(g,`like(any).{${f.join(",")}}`),this}ilike(g,f){return this.url.searchParams.append(g,`ilike.${f}`),this}ilikeAllOf(g,f){return this.url.searchParams.append(g,`ilike(all).{${f.join(",")}}`),this}ilikeAnyOf(g,f){return this.url.searchParams.append(g,`ilike(any).{${f.join(",")}}`),this}is(g,f){return this.url.searchParams.append(g,`is.${f}`),this}in(g,f){const y=Array.from(new Set(f)).map(_=>typeof _=="string"&&new RegExp("[,()]").test(_)?`"${_}"`:`${_}`).join(",");return this.url.searchParams.append(g,`in.(${y})`),this}contains(g,f){return typeof f=="string"?this.url.searchParams.append(g,`cs.${f}`):Array.isArray(f)?this.url.searchParams.append(g,`cs.{${f.join(",")}}`):this.url.searchParams.append(g,`cs.${JSON.stringify(f)}`),this}containedBy(g,f){return typeof f=="string"?this.url.searchParams.append(g,`cd.${f}`):Array.isArray(f)?this.url.searchParams.append(g,`cd.{${f.join(",")}}`):this.url.searchParams.append(g,`cd.${JSON.stringify(f)}`),this}rangeGt(g,f){return this.url.searchParams.append(g,`sr.${f}`),this}rangeGte(g,f){return this.url.searchParams.append(g,`nxl.${f}`),this}rangeLt(g,f){return this.url.searchParams.append(g,`sl.${f}`),this}rangeLte(g,f){return this.url.searchParams.append(g,`nxr.${f}`),this}rangeAdjacent(g,f){return this.url.searchParams.append(g,`adj.${f}`),this}overlaps(g,f){return typeof f=="string"?this.url.searchParams.append(g,`ov.${f}`):this.url.searchParams.append(g,`ov.{${f.join(",")}}`),this}textSearch(g,f,{config:y,type:_}={}){let C="";_==="plain"?C="pl":_==="phrase"?C="ph":_==="websearch"&&(C="w");const w=y===void 0?"":`(${y})`;return this.url.searchParams.append(g,`${C}fts${w}.${f}`),this}match(g){return Object.entries(g).forEach(([f,y])=>{this.url.searchParams.append(f,`eq.${y}`)}),this}not(g,f,y){return this.url.searchParams.append(g,`not.${f}.${y}`),this}or(g,{foreignTable:f,referencedTable:y=f}={}){const _=y?`${y}.or`:"or";return this.url.searchParams.append(_,`(${g})`),this}filter(g,f,y){return this.url.searchParams.append(g,`${f}.${y}`),this}}return co.default=o,co}var gf;function f0(){if(gf)return lo;gf=1;var d=lo&&lo.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(lo,"__esModule",{value:!0});const s=d(Qu());class o{constructor(g,{headers:f={},schema:y,fetch:_}){this.url=g,this.headers=new Headers(f),this.schema=y,this.fetch=_}select(g,{head:f=!1,count:y}={}){const _=f?"HEAD":"GET";let C=!1;const w=(g??"*").split("").map(A=>/\s/.test(A)&&!C?"":(A==='"'&&(C=!C),A)).join("");return this.url.searchParams.set("select",w),y&&this.headers.append("Prefer",`count=${y}`),new s.default({method:_,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(g,{count:f,defaultToNull:y=!0}={}){var _;const C="POST";if(f&&this.headers.append("Prefer",`count=${f}`),y||this.headers.append("Prefer","missing=default"),Array.isArray(g)){const w=g.reduce((A,T)=>A.concat(Object.keys(T)),[]);if(w.length>0){const A=[...new Set(w)].map(T=>`"${T}"`);this.url.searchParams.set("columns",A.join(","))}}return new s.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(_=this.fetch)!==null&&_!==void 0?_:fetch})}upsert(g,{onConflict:f,ignoreDuplicates:y=!1,count:_,defaultToNull:C=!0}={}){var w;const A="POST";if(this.headers.append("Prefer",`resolution=${y?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),_&&this.headers.append("Prefer",`count=${_}`),C||this.headers.append("Prefer","missing=default"),Array.isArray(g)){const T=g.reduce((k,B)=>k.concat(Object.keys(B)),[]);if(T.length>0){const k=[...new Set(T)].map(B=>`"${B}"`);this.url.searchParams.set("columns",k.join(","))}}return new s.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}update(g,{count:f}={}){var y;const _="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new s.default({method:_,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}delete({count:g}={}){var f;const y="DELETE";return g&&this.headers.append("Prefer",`count=${g}`),new s.default({method:y,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}}return lo.default=o,lo}var pf;function Eg(){if(pf)return ao;pf=1;var d=ao&&ao.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(ao,"__esModule",{value:!0});const s=d(f0()),o=d(Qu());class h{constructor(f,{headers:y={},schema:_,fetch:C}={}){this.url=f,this.headers=new Headers(y),this.schemaName=_,this.fetch=C}from(f){const y=new URL(`${this.url}/${f}`);return new s.default(y,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new h(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,y={},{head:_=!1,get:C=!1,count:w}={}){var A;let T;const k=new URL(`${this.url}/rpc/${f}`);let B;_||C?(T=_?"HEAD":"GET",Object.entries(y).filter(([j,F])=>F!==void 0).map(([j,F])=>[j,Array.isArray(F)?`{${F.join(",")}}`:`${F}`]).forEach(([j,F])=>{k.searchParams.append(j,F)})):(T="POST",B=y);const z=new Headers(this.headers);return w&&z.set("Prefer",`count=${w}`),new o.default({method:T,url:k,headers:z,schema:this.schemaName,body:B,fetch:(A=this.fetch)!==null&&A!==void 0?A:fetch})}}return ao.default=h,ao}var mf;function Cg(){if(mf)return An;mf=1;var d=An&&An.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(An,"__esModule",{value:!0}),An.PostgrestError=An.PostgrestBuilder=An.PostgrestTransformBuilder=An.PostgrestFilterBuilder=An.PostgrestQueryBuilder=An.PostgrestClient=void 0;const s=d(Eg());An.PostgrestClient=s.default;const o=d(f0());An.PostgrestQueryBuilder=o.default;const h=d(Qu());An.PostgrestFilterBuilder=h.default;const g=d(h0());An.PostgrestTransformBuilder=g.default;const f=d(d0());An.PostgrestBuilder=f.default;const y=d(u0());return An.PostgrestError=y.default,An.default={PostgrestClient:s.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:h.default,PostgrestTransformBuilder:g.default,PostgrestBuilder:f.default,PostgrestError:y.default},An}var Ag=Cg();const Sg=Yl(Ag),{PostgrestClient:_g,PostgrestQueryBuilder:Px,PostgrestFilterBuilder:Bx,PostgrestTransformBuilder:jx,PostgrestBuilder:Fx,PostgrestError:Ux}=Sg;class Ig{static detectEnvironment(){var s;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((s=navigator.userAgent)===null||s===void 0)&&s.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const o=process.versions;if(o&&o.node){const h=o.node,g=parseInt(h.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const s=this.detectEnvironment();if(s.constructor)return s.constructor;let o=s.error||"WebSocket not supported in this environment.";throw s.workaround&&(o+=`

Suggested solution: ${s.workaround}`),new Error(o)}static createWebSocket(s,o){const h=this.getWebSocketConstructor();return new h(s,o)}static isWebSocketSupported(){try{const s=this.detectEnvironment();return s.type==="native"||s.type==="ws"}catch{return!1}}}const Tg="2.15.5",bg=`realtime-js/${Tg}`,Ng="1.0.0",Mu=1e4,Og=1e3,Rg=100;var wa;(function(d){d[d.connecting=0]="connecting",d[d.open=1]="open",d[d.closing=2]="closing",d[d.closed=3]="closed"})(wa||(wa={}));var mn;(function(d){d.closed="closed",d.errored="errored",d.joined="joined",d.joining="joining",d.leaving="leaving"})(mn||(mn={}));var Pr;(function(d){d.close="phx_close",d.error="phx_error",d.join="phx_join",d.reply="phx_reply",d.leave="phx_leave",d.access_token="access_token"})(Pr||(Pr={}));var ku;(function(d){d.websocket="websocket"})(ku||(ku={}));var _s;(function(d){d.Connecting="connecting",d.Open="open",d.Closing="closing",d.Closed="closed"})(_s||(_s={}));class Mg{constructor(){this.HEADER_LENGTH=1}decode(s,o){return s.constructor===ArrayBuffer?o(this._binaryDecode(s)):o(typeof s=="string"?JSON.parse(s):{})}_binaryDecode(s){const o=new DataView(s),h=new TextDecoder;return this._decodeBroadcast(s,o,h)}_decodeBroadcast(s,o,h){const g=o.getUint8(1),f=o.getUint8(2);let y=this.HEADER_LENGTH+2;const _=h.decode(s.slice(y,y+g));y=y+g;const C=h.decode(s.slice(y,y+f));y=y+f;const w=JSON.parse(h.decode(s.slice(y,s.byteLength)));return{ref:null,topic:_,event:C,payload:w}}}class g0{constructor(s,o){this.callback=s,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=s,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Mt;(function(d){d.abstime="abstime",d.bool="bool",d.date="date",d.daterange="daterange",d.float4="float4",d.float8="float8",d.int2="int2",d.int4="int4",d.int4range="int4range",d.int8="int8",d.int8range="int8range",d.json="json",d.jsonb="jsonb",d.money="money",d.numeric="numeric",d.oid="oid",d.reltime="reltime",d.text="text",d.time="time",d.timestamp="timestamp",d.timestamptz="timestamptz",d.timetz="timetz",d.tsrange="tsrange",d.tstzrange="tstzrange"})(Mt||(Mt={}));const xf=(d,s,o={})=>{var h;const g=(h=o.skipTypes)!==null&&h!==void 0?h:[];return Object.keys(s).reduce((f,y)=>(f[y]=kg(y,d,s,g),f),{})},kg=(d,s,o,h)=>{const g=s.find(_=>_.name===d),f=g?.type,y=o[d];return f&&!h.includes(f)?p0(f,y):Du(y)},p0=(d,s)=>{if(d.charAt(0)==="_"){const o=d.slice(1,d.length);return Bg(s,o)}switch(d){case Mt.bool:return Dg(s);case Mt.float4:case Mt.float8:case Mt.int2:case Mt.int4:case Mt.int8:case Mt.numeric:case Mt.oid:return Lg(s);case Mt.json:case Mt.jsonb:return Pg(s);case Mt.timestamp:return jg(s);case Mt.abstime:case Mt.date:case Mt.daterange:case Mt.int4range:case Mt.int8range:case Mt.money:case Mt.reltime:case Mt.text:case Mt.time:case Mt.timestamptz:case Mt.timetz:case Mt.tsrange:case Mt.tstzrange:return Du(s);default:return Du(s)}},Du=d=>d,Dg=d=>{switch(d){case"t":return!0;case"f":return!1;default:return d}},Lg=d=>{if(typeof d=="string"){const s=parseFloat(d);if(!Number.isNaN(s))return s}return d},Pg=d=>{if(typeof d=="string")try{return JSON.parse(d)}catch(s){return console.log(`JSON parse error: ${s}`),d}return d},Bg=(d,s)=>{if(typeof d!="string")return d;const o=d.length-1,h=d[o];if(d[0]==="{"&&h==="}"){let f;const y=d.slice(1,o);try{f=JSON.parse("["+y+"]")}catch{f=y?y.split(","):[]}return f.map(_=>p0(s,_))}return d},jg=d=>typeof d=="string"?d.replace(" ","T"):d,m0=d=>{let s=d;return s=s.replace(/^ws/i,"http"),s=s.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),s.replace(/\/+$/,"")+"/api/broadcast"};class Cu{constructor(s,o,h={},g=Mu){this.channel=s,this.event=o,this.payload=h,this.timeout=g,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(s){this.timeout=s,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(s){this.payload=Object.assign(Object.assign({},this.payload),s)}receive(s,o){var h;return this._hasReceived(s)&&o((h=this.receivedResp)===null||h===void 0?void 0:h.response),this.recHooks.push({status:s,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const s=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},s),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(s,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:s,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:s,response:o}){this.recHooks.filter(h=>h.status===s).forEach(h=>h.callback(o))}_hasReceived(s){return this.receivedResp&&this.receivedResp.status===s}}var wf;(function(d){d.SYNC="sync",d.JOIN="join",d.LEAVE="leave"})(wf||(wf={}));class ya{constructor(s,o){this.channel=s,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const h=o?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(h.state,{},g=>{const{onJoin:f,onLeave:y,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ya.syncState(this.state,g,f,y),this.pendingDiffs.forEach(C=>{this.state=ya.syncDiff(this.state,C,f,y)}),this.pendingDiffs=[],_()}),this.channel._on(h.diff,{},g=>{const{onJoin:f,onLeave:y,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(g):(this.state=ya.syncDiff(this.state,g,f,y),_())}),this.onJoin((g,f,y)=>{this.channel._trigger("presence",{event:"join",key:g,currentPresences:f,newPresences:y})}),this.onLeave((g,f,y)=>{this.channel._trigger("presence",{event:"leave",key:g,currentPresences:f,leftPresences:y})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(s,o,h,g){const f=this.cloneDeep(s),y=this.transformState(o),_={},C={};return this.map(f,(w,A)=>{y[w]||(C[w]=A)}),this.map(y,(w,A)=>{const T=f[w];if(T){const k=A.map(F=>F.presence_ref),B=T.map(F=>F.presence_ref),z=A.filter(F=>B.indexOf(F.presence_ref)<0),j=T.filter(F=>k.indexOf(F.presence_ref)<0);z.length>0&&(_[w]=z),j.length>0&&(C[w]=j)}else _[w]=A}),this.syncDiff(f,{joins:_,leaves:C},h,g)}static syncDiff(s,o,h,g){const{joins:f,leaves:y}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return h||(h=()=>{}),g||(g=()=>{}),this.map(f,(_,C)=>{var w;const A=(w=s[_])!==null&&w!==void 0?w:[];if(s[_]=this.cloneDeep(C),A.length>0){const T=s[_].map(B=>B.presence_ref),k=A.filter(B=>T.indexOf(B.presence_ref)<0);s[_].unshift(...k)}h(_,A,C)}),this.map(y,(_,C)=>{let w=s[_];if(!w)return;const A=C.map(T=>T.presence_ref);w=w.filter(T=>A.indexOf(T.presence_ref)<0),s[_]=w,g(_,w,C),w.length===0&&delete s[_]}),s}static map(s,o){return Object.getOwnPropertyNames(s).map(h=>o(h,s[h]))}static transformState(s){return s=this.cloneDeep(s),Object.getOwnPropertyNames(s).reduce((o,h)=>{const g=s[h];return"metas"in g?o[h]=g.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):o[h]=g,o},{})}static cloneDeep(s){return JSON.parse(JSON.stringify(s))}onJoin(s){this.caller.onJoin=s}onLeave(s){this.caller.onLeave=s}onSync(s){this.caller.onSync=s}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yf;(function(d){d.ALL="*",d.INSERT="INSERT",d.UPDATE="UPDATE",d.DELETE="DELETE"})(yf||(yf={}));var va;(function(d){d.BROADCAST="broadcast",d.PRESENCE="presence",d.POSTGRES_CHANGES="postgres_changes",d.SYSTEM="system"})(va||(va={}));var fi;(function(d){d.SUBSCRIBED="SUBSCRIBED",d.TIMED_OUT="TIMED_OUT",d.CLOSED="CLOSED",d.CHANNEL_ERROR="CHANNEL_ERROR"})(fi||(fi={}));class qu{constructor(s,o={config:{}},h){this.topic=s,this.params=o,this.socket=h,this.bindings={},this.state=mn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=s.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new Cu(this,Pr.join,this.params,this.timeout),this.rejoinTimer=new g0(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(g=>g.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mn.closed,this.socket._remove(this)}),this._onError(g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",g=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,g),this.state=mn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Pr.reply,{},(g,f)=>{this._trigger(this._replyEventName(f),g)}),this.presence=new ya(this),this.broadcastEndpointURL=m0(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(s,o=this.timeout){var h,g,f;if(this.socket.isConnected()||this.socket.connect(),this.state==mn.closed){const{config:{broadcast:y,presence:_,private:C}}=this.params,w=(g=(h=this.bindings.postgres_changes)===null||h===void 0?void 0:h.map(B=>B.filter))!==null&&g!==void 0?g:[],A=!!this.bindings[va.PRESENCE]&&this.bindings[va.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,T={},k={broadcast:y,presence:Object.assign(Object.assign({},_),{enabled:A}),postgres_changes:w,private:C};this.socket.accessTokenValue&&(T.access_token=this.socket.accessTokenValue),this._onError(B=>s?.(fi.CHANNEL_ERROR,B)),this._onClose(()=>s?.(fi.CLOSED)),this.updateJoinPayload(Object.assign({config:k},T)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:B})=>{var z;if(this.socket.setAuth(),B===void 0){s?.(fi.SUBSCRIBED);return}else{const j=this.bindings.postgres_changes,F=(z=j?.length)!==null&&z!==void 0?z:0,ie=[];for(let $=0;$<F;$++){const W=j[$],{filter:{event:J,schema:Ce,table:he,filter:K}}=W,Ee=B&&B[$];if(Ee&&Ee.event===J&&Ee.schema===Ce&&Ee.table===he&&Ee.filter===K)ie.push(Object.assign(Object.assign({},W),{id:Ee.id}));else{this.unsubscribe(),this.state=mn.errored,s?.(fi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ie,s&&s(fi.SUBSCRIBED);return}}).receive("error",B=>{this.state=mn.errored,s?.(fi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(B).join(", ")||"error")))}).receive("timeout",()=>{s?.(fi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(s,o={}){return await this.send({type:"presence",event:"track",payload:s},o.timeout||this.timeout)}async untrack(s={}){return await this.send({type:"presence",event:"untrack"},s)}on(s,o,h){return this.state===mn.joined&&s===va.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(s,o,h)}async send(s,o={}){var h,g;if(!this._canPush()&&s.type==="broadcast"){const{event:f,payload:y}=s,C={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:y,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,C,(h=o.timeout)!==null&&h!==void 0?h:this.timeout);return await((g=w.body)===null||g===void 0?void 0:g.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var y,_,C;const w=this._push(s.type,s,o.timeout||this.timeout);s.type==="broadcast"&&!(!((C=(_=(y=this.params)===null||y===void 0?void 0:y.config)===null||_===void 0?void 0:_.broadcast)===null||C===void 0)&&C.ack)&&f("ok"),w.receive("ok",()=>f("ok")),w.receive("error",()=>f("error")),w.receive("timeout",()=>f("timed out"))})}updateJoinPayload(s){this.joinPush.updatePayload(s)}unsubscribe(s=this.timeout){this.state=mn.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Pr.close,"leave",this._joinRef())};this.joinPush.destroy();let h=null;return new Promise(g=>{h=new Cu(this,Pr.leave,{},s),h.receive("ok",()=>{o(),g("ok")}).receive("timeout",()=>{o(),g("timed out")}).receive("error",()=>{g("error")}),h.send(),this._canPush()||h.trigger("ok",{})}).finally(()=>{h?.destroy()})}teardown(){this.pushBuffer.forEach(s=>s.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=mn.closed,this.bindings={}}async _fetchWithTimeout(s,o,h){const g=new AbortController,f=setTimeout(()=>g.abort(),h),y=await this.socket.fetch(s,Object.assign(Object.assign({},o),{signal:g.signal}));return clearTimeout(f),y}_push(s,o,h=this.timeout){if(!this.joinedOnce)throw`tried to push '${s}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let g=new Cu(this,s,o,h);return this._canPush()?g.send():this._addToPushBuffer(g),g}_addToPushBuffer(s){if(s.startTimeout(),this.pushBuffer.push(s),this.pushBuffer.length>Rg){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(s,o,h){return o}_isMember(s){return this.topic===s}_joinRef(){return this.joinPush.ref}_trigger(s,o,h){var g,f;const y=s.toLocaleLowerCase(),{close:_,error:C,leave:w,join:A}=Pr;if(h&&[_,C,w,A].indexOf(y)>=0&&h!==this._joinRef())return;let k=this._onMessage(y,o,h);if(o&&!k)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(y)?(g=this.bindings.postgres_changes)===null||g===void 0||g.filter(B=>{var z,j,F;return((z=B.filter)===null||z===void 0?void 0:z.event)==="*"||((F=(j=B.filter)===null||j===void 0?void 0:j.event)===null||F===void 0?void 0:F.toLocaleLowerCase())===y}).map(B=>B.callback(k,h)):(f=this.bindings[y])===null||f===void 0||f.filter(B=>{var z,j,F,ie,$,W;if(["broadcast","presence","postgres_changes"].includes(y))if("id"in B){const J=B.id,Ce=(z=B.filter)===null||z===void 0?void 0:z.event;return J&&((j=o.ids)===null||j===void 0?void 0:j.includes(J))&&(Ce==="*"||Ce?.toLocaleLowerCase()===((F=o.data)===null||F===void 0?void 0:F.type.toLocaleLowerCase()))}else{const J=($=(ie=B?.filter)===null||ie===void 0?void 0:ie.event)===null||$===void 0?void 0:$.toLocaleLowerCase();return J==="*"||J===((W=o?.event)===null||W===void 0?void 0:W.toLocaleLowerCase())}else return B.type.toLocaleLowerCase()===y}).map(B=>{if(typeof k=="object"&&"ids"in k){const z=k.data,{schema:j,table:F,commit_timestamp:ie,type:$,errors:W}=z;k=Object.assign(Object.assign({},{schema:j,table:F,commit_timestamp:ie,eventType:$,new:{},old:{},errors:W}),this._getPayloadRecords(z))}B.callback(k,h)})}_isClosed(){return this.state===mn.closed}_isJoined(){return this.state===mn.joined}_isJoining(){return this.state===mn.joining}_isLeaving(){return this.state===mn.leaving}_replyEventName(s){return`chan_reply_${s}`}_on(s,o,h){const g=s.toLocaleLowerCase(),f={type:g,filter:o,callback:h};return this.bindings[g]?this.bindings[g].push(f):this.bindings[g]=[f],this}_off(s,o){const h=s.toLocaleLowerCase();return this.bindings[h]&&(this.bindings[h]=this.bindings[h].filter(g=>{var f;return!(((f=g.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===h&&qu.isEqual(g.filter,o))})),this}static isEqual(s,o){if(Object.keys(s).length!==Object.keys(o).length)return!1;for(const h in s)if(s[h]!==o[h])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(s){this._on(Pr.close,{},s)}_onError(s){this._on(Pr.error,{},o=>s(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(s=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mn.joining,this.joinPush.resend(s))}_getPayloadRecords(s){const o={new:{},old:{}};return(s.type==="INSERT"||s.type==="UPDATE")&&(o.new=xf(s.columns,s.record)),(s.type==="UPDATE"||s.type==="DELETE")&&(o.old=xf(s.columns,s.old_record)),o}}const Au=()=>{},Bl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Fg=[1e3,2e3,5e3,1e4],Ug=1e4,zg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Hg{constructor(s,o){var h;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Mu,this.transport=null,this.heartbeatIntervalMs=Bl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Au,this.ref=0,this.reconnectTimer=null,this.logger=Au,this.conn=null,this.sendBuffer=[],this.serializer=new Mg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=g=>{let f;return g?f=g:typeof fetch>"u"?f=(...y)=>Sa(async()=>{const{default:_}=await Promise.resolve().then(()=>So);return{default:_}},void 0).then(({default:_})=>_(...y)).catch(_=>{throw new Error(`Failed to load @supabase/node-fetch: ${_.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):f=fetch,(...y)=>f(...y)},!(!((h=o?.params)===null||h===void 0)&&h.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${s}/${ku.websocket}`,this.httpEndpoint=m0(s),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ig.createWebSocket(this.endpointURL())}catch(s){this._setConnectionState("disconnected");const o=s.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Ng}))}disconnect(s,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const h=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(h),this._setConnectionState("disconnected")},s?this.conn.close(s,o??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(s){const o=await s.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const s=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),s}log(s,o,h){this.logger(s,o,h)}connectionState(){switch(this.conn&&this.conn.readyState){case wa.connecting:return _s.Connecting;case wa.open:return _s.Open;case wa.closing:return _s.Closing;default:return _s.Closed}}isConnected(){return this.connectionState()===_s.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(s,o={config:{}}){const h=`realtime:${s}`,g=this.getChannels().find(f=>f.topic===h);if(g)return g;{const f=new qu(`realtime:${s}`,o,this);return this.channels.push(f),f}}push(s){const{topic:o,event:h,payload:g,ref:f}=s,y=()=>{this.encode(s,_=>{var C;(C=this.conn)===null||C===void 0||C.send(_)})};this.log("push",`${o} ${h} (${f})`,g),this.isConnected()?y():this.sendBuffer.push(y)}async setAuth(s=null){this._authPromise=this._performAuth(s);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var s;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(s=this.conn)===null||s===void 0||s.close(Og,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},Bl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(s){this.heartbeatCallback=s}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(s=>s()),this.sendBuffer=[])}_makeRef(){let s=this.ref+1;return s===this.ref?this.ref=0:this.ref=s,this.ref.toString()}_leaveOpenTopic(s){let o=this.channels.find(h=>h.topic===s&&(h._isJoined()||h._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${s}"`),o.unsubscribe())}_remove(s){this.channels=this.channels.filter(o=>o.topic!==s.topic)}_onConnMessage(s){this.decode(s.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply")try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error")}catch(w){this.log("error","error in heartbeat callback",w)}o.ref&&o.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:h,event:g,payload:f,ref:y}=o,_=y?`(${y})`:"",C=f.status||"";this.log("receive",`${C} ${h} ${g} ${_}`.trim(),f),this.channels.filter(w=>w._isMember(h)).forEach(w=>w._trigger(g,f,y)),this._triggerStateCallbacks("message",o)})}_clearTimer(s){var o;s==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):s==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=s=>this._onConnError(s),this.conn.onmessage=s=>this._onConnMessage(s),this.conn.onclose=s=>this._onConnClose(s))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(s=>s.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const s=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(s),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this.workerRef.terminate()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(s){var o;this._setConnectionState("disconnected"),this.log("transport","close",s),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",s)}_onConnError(s){this._setConnectionState("disconnected"),this.log("transport",`${s}`),this._triggerChanError(),this._triggerStateCallbacks("error",s)}_triggerChanError(){this.channels.forEach(s=>s._trigger(Pr.error))}_appendParams(s,o){if(Object.keys(o).length===0)return s;const h=s.match(/\?/)?"&":"?",g=new URLSearchParams(o);return`${s}${h}${g}`}_workerObjectUrl(s){let o;if(s)o=s;else{const h=new Blob([zg],{type:"application/javascript"});o=URL.createObjectURL(h)}return o}_setConnectionState(s,o=!1){this._connectionState=s,s==="connecting"?this._wasManualDisconnect=!1:s==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(s=null){let o;s?o=s:this.accessToken?o=await this.accessToken():o=this.accessTokenValue,this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(h=>{const g={access_token:o,version:bg};o&&h.updateJoinPayload(g),h.joinedOnce&&h._isJoined()&&h._push(Pr.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(s="general"){this.setAuth().catch(o=>{this.log("error",`error setting auth in ${s}`,o)})}_triggerStateCallbacks(s,o){try{this.stateChangeCallbacks[s].forEach(h=>{try{h(o)}catch(g){this.log("error",`error in ${s} callback`,g)}})}catch(h){this.log("error",`error triggering ${s} callbacks`,h)}}_setupReconnectionTimer(){this.reconnectTimer=new g0(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Bl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(s){var o,h,g,f,y,_,C,w,A;if(this.transport=(o=s?.transport)!==null&&o!==void 0?o:null,this.timeout=(h=s?.timeout)!==null&&h!==void 0?h:Mu,this.heartbeatIntervalMs=(g=s?.heartbeatIntervalMs)!==null&&g!==void 0?g:Bl.HEARTBEAT_INTERVAL,this.worker=(f=s?.worker)!==null&&f!==void 0?f:!1,this.accessToken=(y=s?.accessToken)!==null&&y!==void 0?y:null,this.heartbeatCallback=(_=s?.heartbeatCallback)!==null&&_!==void 0?_:Au,s?.params&&(this.params=s.params),s?.logger&&(this.logger=s.logger),(s?.logLevel||s?.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(C=s?.reconnectAfterMs)!==null&&C!==void 0?C:(T=>Fg[T-1]||Ug),this.encode=(w=s?.encode)!==null&&w!==void 0?w:((T,k)=>k(JSON.stringify(T))),this.decode=(A=s?.decode)!==null&&A!==void 0?A:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=s?.workerUrl}}}class Ku extends Error{constructor(s){super(s),this.__isStorageError=!0,this.name="StorageError"}}function nn(d){return typeof d=="object"&&d!==null&&"__isStorageError"in d}class Vg extends Ku{constructor(s,o,h){super(s),this.name="StorageApiError",this.status=o,this.statusCode=h}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Lu extends Ku{constructor(s,o){super(s),this.name="StorageUnknownError",this.originalError=o}}var Wg=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};const x0=d=>{let s;return d?s=d:typeof fetch>"u"?s=(...o)=>Sa(async()=>{const{default:h}=await Promise.resolve().then(()=>So);return{default:h}},void 0).then(({default:h})=>h(...o)):s=fetch,(...o)=>s(...o)},Gg=()=>Wg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Sa(()=>Promise.resolve().then(()=>So),void 0)).Response:Response}),Pu=d=>{if(Array.isArray(d))return d.map(o=>Pu(o));if(typeof d=="function"||d!==Object(d))return d;const s={};return Object.entries(d).forEach(([o,h])=>{const g=o.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));s[g]=Pu(h)}),s},Yg=d=>{if(typeof d!="object"||d===null)return!1;const s=Object.getPrototypeOf(d);return(s===null||s===Object.prototype||Object.getPrototypeOf(s)===null)&&!(Symbol.toStringTag in d)&&!(Symbol.iterator in d)};var bs=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};const Su=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Xg=(d,s,o)=>bs(void 0,void 0,void 0,function*(){const h=yield Gg();d instanceof h&&!o?.noResolveJson?d.json().then(g=>{const f=d.status||500,y=g?.statusCode||f+"";s(new Vg(Su(g),f,y))}).catch(g=>{s(new Lu(Su(g),g))}):s(new Lu(Su(d),d))}),$g=(d,s,o,h)=>{const g={method:d,headers:s?.headers||{}};return d==="GET"||!h?g:(Yg(h)?(g.headers=Object.assign({"Content-Type":"application/json"},s?.headers),g.body=JSON.stringify(h)):g.body=h,s?.duplex&&(g.duplex=s.duplex),Object.assign(Object.assign({},g),o))};function _a(d,s,o,h,g,f){return bs(this,void 0,void 0,function*(){return new Promise((y,_)=>{d(o,$g(s,h,g,f)).then(C=>{if(!C.ok)throw C;return h?.noResolveJson?C:C.json()}).then(C=>y(C)).catch(C=>Xg(C,_,h))})})}function Ul(d,s,o,h){return bs(this,void 0,void 0,function*(){return _a(d,"GET",s,o,h)})}function qr(d,s,o,h,g){return bs(this,void 0,void 0,function*(){return _a(d,"POST",s,h,g,o)})}function Bu(d,s,o,h,g){return bs(this,void 0,void 0,function*(){return _a(d,"PUT",s,h,g,o)})}function Qg(d,s,o,h){return bs(this,void 0,void 0,function*(){return _a(d,"HEAD",s,Object.assign(Object.assign({},o),{noResolveJson:!0}),h)})}function w0(d,s,o,h,g){return bs(this,void 0,void 0,function*(){return _a(d,"DELETE",s,h,g,o)})}var qg=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};class Kg{constructor(s,o){this.downloadFn=s,this.shouldThrowOnError=o}then(s,o){return this.execute().then(s,o)}execute(){return qg(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}})}}var Zg=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};class Jg{constructor(s,o){this.downloadFn=s,this.shouldThrowOnError=o}asStream(){return new Kg(this.downloadFn,this.shouldThrowOnError)}then(s,o){return this.execute().then(s,o)}execute(){return Zg(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}})}}var Kn=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};const ep={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vf={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tp{constructor(s,o={},h,g){this.shouldThrowOnError=!1,this.url=s,this.headers=o,this.bucketId=h,this.fetch=x0(g)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(s,o,h,g){return Kn(this,void 0,void 0,function*(){try{let f;const y=Object.assign(Object.assign({},vf),g);let _=Object.assign(Object.assign({},this.headers),s==="POST"&&{"x-upsert":String(y.upsert)});const C=y.metadata;typeof Blob<"u"&&h instanceof Blob?(f=new FormData,f.append("cacheControl",y.cacheControl),C&&f.append("metadata",this.encodeMetadata(C)),f.append("",h)):typeof FormData<"u"&&h instanceof FormData?(f=h,f.append("cacheControl",y.cacheControl),C&&f.append("metadata",this.encodeMetadata(C))):(f=h,_["cache-control"]=`max-age=${y.cacheControl}`,_["content-type"]=y.contentType,C&&(_["x-metadata"]=this.toBase64(this.encodeMetadata(C)))),g?.headers&&(_=Object.assign(Object.assign({},_),g.headers));const w=this._removeEmptyFolders(o),A=this._getFinalPath(w),T=yield(s=="PUT"?Bu:qr)(this.fetch,`${this.url}/object/${A}`,f,Object.assign({headers:_},y?.duplex?{duplex:y.duplex}:{}));return{data:{path:w,id:T.Id,fullPath:T.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(nn(f))return{data:null,error:f};throw f}})}upload(s,o,h){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",s,o,h)})}uploadToSignedUrl(s,o,h,g){return Kn(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(s),y=this._getFinalPath(f),_=new URL(this.url+`/object/upload/sign/${y}`);_.searchParams.set("token",o);try{let C;const w=Object.assign({upsert:vf.upsert},g),A=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&h instanceof Blob?(C=new FormData,C.append("cacheControl",w.cacheControl),C.append("",h)):typeof FormData<"u"&&h instanceof FormData?(C=h,C.append("cacheControl",w.cacheControl)):(C=h,A["cache-control"]=`max-age=${w.cacheControl}`,A["content-type"]=w.contentType);const T=yield Bu(this.fetch,_.toString(),C,{headers:A});return{data:{path:f,fullPath:T.Key},error:null}}catch(C){if(this.shouldThrowOnError)throw C;if(nn(C))return{data:null,error:C};throw C}})}createSignedUploadUrl(s,o){return Kn(this,void 0,void 0,function*(){try{let h=this._getFinalPath(s);const g=Object.assign({},this.headers);o?.upsert&&(g["x-upsert"]="true");const f=yield qr(this.fetch,`${this.url}/object/upload/sign/${h}`,{},{headers:g}),y=new URL(this.url+f.url),_=y.searchParams.get("token");if(!_)throw new Ku("No token returned by API");return{data:{signedUrl:y.toString(),path:s,token:_},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h))return{data:null,error:h};throw h}})}update(s,o,h){return Kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",s,o,h)})}move(s,o,h){return Kn(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:s,destinationKey:o,destinationBucket:h?.destinationBucket},{headers:this.headers}),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(nn(g))return{data:null,error:g};throw g}})}copy(s,o,h){return Kn(this,void 0,void 0,function*(){try{return{data:{path:(yield qr(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:s,destinationKey:o,destinationBucket:h?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(nn(g))return{data:null,error:g};throw g}})}createSignedUrl(s,o,h){return Kn(this,void 0,void 0,function*(){try{let g=this._getFinalPath(s),f=yield qr(this.fetch,`${this.url}/object/sign/${g}`,Object.assign({expiresIn:o},h?.transform?{transform:h.transform}:{}),{headers:this.headers});const y=h?.download?`&download=${h.download===!0?"":h.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${y}`)},{data:f,error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(nn(g))return{data:null,error:g};throw g}})}createSignedUrls(s,o,h){return Kn(this,void 0,void 0,function*(){try{const g=yield qr(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:o,paths:s},{headers:this.headers}),f=h?.download?`&download=${h.download===!0?"":h.download}`:"";return{data:g.map(y=>Object.assign(Object.assign({},y),{signedUrl:y.signedURL?encodeURI(`${this.url}${y.signedURL}${f}`):null})),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(nn(g))return{data:null,error:g};throw g}})}download(s,o){const g=typeof o?.transform<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString(o?.transform||{}),y=f?`?${f}`:"",_=this._getFinalPath(s),C=()=>Ul(this.fetch,`${this.url}/${g}/${_}${y}`,{headers:this.headers,noResolveJson:!0});return new Jg(C,this.shouldThrowOnError)}info(s){return Kn(this,void 0,void 0,function*(){const o=this._getFinalPath(s);try{const h=yield Ul(this.fetch,`${this.url}/object/info/${o}`,{headers:this.headers});return{data:Pu(h),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h))return{data:null,error:h};throw h}})}exists(s){return Kn(this,void 0,void 0,function*(){const o=this._getFinalPath(s);try{return yield Qg(this.fetch,`${this.url}/object/${o}`,{headers:this.headers}),{data:!0,error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h)&&h instanceof Lu){const g=h.originalError;if([400,404].includes(g?.status))return{data:!1,error:h}}throw h}})}getPublicUrl(s,o){const h=this._getFinalPath(s),g=[],f=o?.download?`download=${o.download===!0?"":o.download}`:"";f!==""&&g.push(f);const _=typeof o?.transform<"u"?"render/image":"object",C=this.transformOptsToQueryString(o?.transform||{});C!==""&&g.push(C);let w=g.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${_}/public/${h}${w}`)}}}remove(s){return Kn(this,void 0,void 0,function*(){try{return{data:yield w0(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:s},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nn(o))return{data:null,error:o};throw o}})}list(s,o,h){return Kn(this,void 0,void 0,function*(){try{const g=Object.assign(Object.assign(Object.assign({},ep),o),{prefix:s||""});return{data:yield qr(this.fetch,`${this.url}/object/list/${this.bucketId}`,g,{headers:this.headers},h),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(nn(g))return{data:null,error:g};throw g}})}listV2(s,o){return Kn(this,void 0,void 0,function*(){try{const h=Object.assign({},s);return{data:yield qr(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,h,{headers:this.headers},o),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h))return{data:null,error:h};throw h}})}encodeMetadata(s){return JSON.stringify(s)}toBase64(s){return typeof Buffer<"u"?Buffer.from(s).toString("base64"):btoa(s)}_getFinalPath(s){return`${this.bucketId}/${s.replace(/^\/+/,"")}`}_removeEmptyFolders(s){return s.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(s){const o=[];return s.width&&o.push(`width=${s.width}`),s.height&&o.push(`height=${s.height}`),s.resize&&o.push(`resize=${s.resize}`),s.format&&o.push(`format=${s.format}`),s.quality&&o.push(`quality=${s.quality}`),o.join("&")}}const np="2.12.2",rp={"X-Client-Info":`storage-js/${np}`};var fo=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};class ip{constructor(s,o={},h,g){this.shouldThrowOnError=!1;const f=new URL(s);g?.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href,this.headers=Object.assign(Object.assign({},rp),o),this.fetch=x0(h)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return fo(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(nn(s))return{data:null,error:s};throw s}})}getBucket(s){return fo(this,void 0,void 0,function*(){try{return{data:yield Ul(this.fetch,`${this.url}/bucket/${s}`,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nn(o))return{data:null,error:o};throw o}})}createBucket(s,o={public:!1}){return fo(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket`,{id:s,name:s,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h))return{data:null,error:h};throw h}})}updateBucket(s,o){return fo(this,void 0,void 0,function*(){try{return{data:yield Bu(this.fetch,`${this.url}/bucket/${s}`,{id:s,name:s,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(nn(h))return{data:null,error:h};throw h}})}emptyBucket(s){return fo(this,void 0,void 0,function*(){try{return{data:yield qr(this.fetch,`${this.url}/bucket/${s}/empty`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nn(o))return{data:null,error:o};throw o}})}deleteBucket(s){return fo(this,void 0,void 0,function*(){try{return{data:yield w0(this.fetch,`${this.url}/bucket/${s}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(nn(o))return{data:null,error:o};throw o}})}}class sp extends ip{constructor(s,o={},h,g){super(s,o,h,g)}from(s){return new tp(this.url,this.headers,s,this.fetch)}}const op="2.58.0";let ma="";typeof Deno<"u"?ma="deno":typeof document<"u"?ma="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ma="react-native":ma="node";const ap={"X-Client-Info":`supabase-js-${ma}/${op}`},lp={headers:ap},cp={schema:"public"},up={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},dp={};var hp=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};const fp=d=>{let s;return d?s=d:typeof fetch>"u"?s=l0:s=fetch,(...o)=>s(...o)},gp=()=>typeof Headers>"u"?c0:Headers,pp=(d,s,o)=>{const h=fp(o),g=gp();return(f,y)=>hp(void 0,void 0,void 0,function*(){var _;const C=(_=yield s())!==null&&_!==void 0?_:d;let w=new g(y?.headers);return w.has("apikey")||w.set("apikey",d),w.has("Authorization")||w.set("Authorization",`Bearer ${C}`),h(f,Object.assign(Object.assign({},y),{headers:w}))})};var mp=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};function xp(d){return d.endsWith("/")?d:d+"/"}function wp(d,s){var o,h;const{db:g,auth:f,realtime:y,global:_}=d,{db:C,auth:w,realtime:A,global:T}=s,k={db:Object.assign(Object.assign({},C),g),auth:Object.assign(Object.assign({},w),f),realtime:Object.assign(Object.assign({},A),y),storage:{},global:Object.assign(Object.assign(Object.assign({},T),_),{headers:Object.assign(Object.assign({},(o=T?.headers)!==null&&o!==void 0?o:{}),(h=_?.headers)!==null&&h!==void 0?h:{})}),accessToken:()=>mp(this,void 0,void 0,function*(){return""})};return d.accessToken?k.accessToken=d.accessToken:delete k.accessToken,k}function yp(d){const s=d?.trim();if(!s)throw new Error("supabaseUrl is required.");if(!s.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(xp(s))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const y0="2.72.0",yo=30*1e3,ju=3,_u=ju*yo,vp="http://localhost:9999",Ep="supabase.auth.token",Cp={"X-Client-Info":`gotrue-js/${y0}`},Fu="X-Supabase-Api-Version",v0={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ap=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Sp=600*1e3;class Zu extends Error{constructor(s,o,h){super(s),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=h}}function $e(d){return typeof d=="object"&&d!==null&&"__isAuthError"in d}class _p extends Zu{constructor(s,o,h){super(s,o,h),this.name="AuthApiError",this.status=o,this.code=h}}function Ip(d){return $e(d)&&d.name==="AuthApiError"}class E0 extends Zu{constructor(s,o){super(s),this.name="AuthUnknownError",this.originalError=o}}class Qi extends Zu{constructor(s,o,h,g){super(s,h,g),this.name=o,this.status=h}}class Gi extends Qi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Tp(d){return $e(d)&&d.name==="AuthSessionMissingError"}class ga extends Qi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class jl extends Qi{constructor(s){super(s,"AuthInvalidCredentialsError",400,void 0)}}class Fl extends Qi{constructor(s,o=null){super(s,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function bp(d){return $e(d)&&d.name==="AuthImplicitGrantRedirectError"}class Ef extends Qi{constructor(s,o=null){super(s,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uu extends Qi{constructor(s,o){super(s,"AuthRetryableFetchError",o,void 0)}}function Iu(d){return $e(d)&&d.name==="AuthRetryableFetchError"}class Cf extends Qi{constructor(s,o,h){super(s,"AuthWeakPasswordError",o,"weak_password"),this.reasons=h}}class zu extends Qi{constructor(s){super(s,"AuthInvalidJwtError",400,"invalid_jwt")}}const zl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Af=` 	
\r=`.split(""),Np=(()=>{const d=new Array(128);for(let s=0;s<d.length;s+=1)d[s]=-1;for(let s=0;s<Af.length;s+=1)d[Af[s].charCodeAt(0)]=-2;for(let s=0;s<zl.length;s+=1)d[zl[s].charCodeAt(0)]=s;return d})();function Sf(d,s,o){if(d!==null)for(s.queue=s.queue<<8|d,s.queuedBits+=8;s.queuedBits>=6;){const h=s.queue>>s.queuedBits-6&63;o(zl[h]),s.queuedBits-=6}else if(s.queuedBits>0)for(s.queue=s.queue<<6-s.queuedBits,s.queuedBits=6;s.queuedBits>=6;){const h=s.queue>>s.queuedBits-6&63;o(zl[h]),s.queuedBits-=6}}function C0(d,s,o){const h=Np[d];if(h>-1)for(s.queue=s.queue<<6|h,s.queuedBits+=6;s.queuedBits>=8;)o(s.queue>>s.queuedBits-8&255),s.queuedBits-=8;else{if(h===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(d)}"`)}}function _f(d){const s=[],o=y=>{s.push(String.fromCodePoint(y))},h={utf8seq:0,codepoint:0},g={queue:0,queuedBits:0},f=y=>{Mp(y,h,o)};for(let y=0;y<d.length;y+=1)C0(d.charCodeAt(y),g,f);return s.join("")}function Op(d,s){if(d<=127){s(d);return}else if(d<=2047){s(192|d>>6),s(128|d&63);return}else if(d<=65535){s(224|d>>12),s(128|d>>6&63),s(128|d&63);return}else if(d<=1114111){s(240|d>>18),s(128|d>>12&63),s(128|d>>6&63),s(128|d&63);return}throw new Error(`Unrecognized Unicode codepoint: ${d.toString(16)}`)}function Rp(d,s){for(let o=0;o<d.length;o+=1){let h=d.charCodeAt(o);if(h>55295&&h<=56319){const g=(h-55296)*1024&65535;h=(d.charCodeAt(o+1)-56320&65535|g)+65536,o+=1}Op(h,s)}}function Mp(d,s,o){if(s.utf8seq===0){if(d<=127){o(d);return}for(let h=1;h<6;h+=1)if((d>>7-h&1)===0){s.utf8seq=h;break}if(s.utf8seq===2)s.codepoint=d&31;else if(s.utf8seq===3)s.codepoint=d&15;else if(s.utf8seq===4)s.codepoint=d&7;else throw new Error("Invalid UTF-8 sequence");s.utf8seq-=1}else if(s.utf8seq>0){if(d<=127)throw new Error("Invalid UTF-8 sequence");s.codepoint=s.codepoint<<6|d&63,s.utf8seq-=1,s.utf8seq===0&&o(s.codepoint)}}function kp(d){const s=[],o={queue:0,queuedBits:0},h=g=>{s.push(g)};for(let g=0;g<d.length;g+=1)C0(d.charCodeAt(g),o,h);return new Uint8Array(s)}function Dp(d){const s=[];return Rp(d,o=>s.push(o)),new Uint8Array(s)}function Lp(d){const s=[],o={queue:0,queuedBits:0},h=g=>{s.push(g)};return d.forEach(g=>Sf(g,o,h)),Sf(null,o,h),s.join("")}function Pp(d){return Math.round(Date.now()/1e3)+d}function Bp(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){const s=Math.random()*16|0;return(d=="x"?s:s&3|8).toString(16)})}const Ir=()=>typeof window<"u"&&typeof document<"u",Cs={tested:!1,writable:!1},A0=()=>{if(!Ir())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Cs.tested)return Cs.writable;const d=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(d,d),globalThis.localStorage.removeItem(d),Cs.tested=!0,Cs.writable=!0}catch{Cs.tested=!0,Cs.writable=!1}return Cs.writable};function jp(d){const s={},o=new URL(d);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((g,f)=>{s[f]=g})}catch{}return o.searchParams.forEach((h,g)=>{s[g]=h}),s}const S0=d=>{let s;return d?s=d:typeof fetch>"u"?s=(...o)=>Sa(async()=>{const{default:h}=await Promise.resolve().then(()=>So);return{default:h}},void 0).then(({default:h})=>h(...o)):s=fetch,(...o)=>s(...o)},Fp=d=>typeof d=="object"&&d!==null&&"status"in d&&"ok"in d&&"json"in d&&typeof d.json=="function",vo=async(d,s,o)=>{await d.setItem(s,JSON.stringify(o))},As=async(d,s)=>{const o=await d.getItem(s);if(!o)return null;try{return JSON.parse(o)}catch{return o}},Vi=async(d,s)=>{await d.removeItem(s)};class Xl{constructor(){this.promise=new Xl.promiseConstructor((s,o)=>{this.resolve=s,this.reject=o})}}Xl.promiseConstructor=Promise;function Tu(d){const s=d.split(".");if(s.length!==3)throw new zu("Invalid JWT structure");for(let h=0;h<s.length;h++)if(!Ap.test(s[h]))throw new zu("JWT not in base64url format");return{header:JSON.parse(_f(s[0])),payload:JSON.parse(_f(s[1])),signature:kp(s[2]),raw:{header:s[0],payload:s[1]}}}async function Up(d){return await new Promise(s=>{setTimeout(()=>s(null),d)})}function zp(d,s){return new Promise((h,g)=>{(async()=>{for(let f=0;f<1/0;f++)try{const y=await d(f);if(!s(f,null,y)){h(y);return}}catch(y){if(!s(f,y)){g(y);return}}})()})}function Hp(d){return("0"+d.toString(16)).substr(-2)}function Vp(){const s=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",h=o.length;let g="";for(let f=0;f<56;f++)g+=o.charAt(Math.floor(Math.random()*h));return g}return crypto.getRandomValues(s),Array.from(s,Hp).join("")}async function Wp(d){const o=new TextEncoder().encode(d),h=await crypto.subtle.digest("SHA-256",o),g=new Uint8Array(h);return Array.from(g).map(f=>String.fromCharCode(f)).join("")}async function Gp(d){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),d;const o=await Wp(d);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function go(d,s,o=!1){const h=Vp();let g=h;o&&(g+="/PASSWORD_RECOVERY"),await vo(d,`${s}-code-verifier`,g);const f=await Gp(h);return[f,h===f?"plain":"s256"]}const Yp=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xp(d){const s=d.headers.get(Fu);if(!s||!s.match(Yp))return null;try{return new Date(`${s}T00:00:00.0Z`)}catch{return null}}function $p(d){if(!d)throw new Error("Missing exp claim");const s=Math.floor(Date.now()/1e3);if(d<=s)throw new Error("JWT has expired")}function Qp(d){switch(d){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const qp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function po(d){if(!qp.test(d))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bu(){const d={};return new Proxy(d,{get:(s,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(s,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(s,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function If(d){return JSON.parse(JSON.stringify(d))}var Kp=function(d,s){var o={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&s.indexOf(h)<0&&(o[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(d);g<h.length;g++)s.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(d,h[g])&&(o[h[g]]=d[h[g]]);return o};const Ss=d=>d.msg||d.message||d.error_description||d.error||JSON.stringify(d),Zp=[502,503,504];async function Tf(d){var s;if(!Fp(d))throw new Uu(Ss(d),0);if(Zp.includes(d.status))throw new Uu(Ss(d),d.status);let o;try{o=await d.json()}catch(f){throw new E0(Ss(f),f)}let h;const g=Xp(d);if(g&&g.getTime()>=v0["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?h=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(h=o.error_code),h){if(h==="weak_password")throw new Cf(Ss(o),d.status,((s=o.weak_password)===null||s===void 0?void 0:s.reasons)||[]);if(h==="session_not_found")throw new Gi}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((f,y)=>f&&typeof y=="string",!0))throw new Cf(Ss(o),d.status,o.weak_password.reasons);throw new _p(Ss(o),d.status||500,h)}const Jp=(d,s,o,h)=>{const g={method:d,headers:s?.headers||{}};return d==="GET"?g:(g.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},s?.headers),g.body=JSON.stringify(h),Object.assign(Object.assign({},g),o))};async function tt(d,s,o,h){var g;const f=Object.assign({},h?.headers);f[Fu]||(f[Fu]=v0["2024-01-01"].name),h?.jwt&&(f.Authorization=`Bearer ${h.jwt}`);const y=(g=h?.query)!==null&&g!==void 0?g:{};h?.redirectTo&&(y.redirect_to=h.redirectTo);const _=Object.keys(y).length?"?"+new URLSearchParams(y).toString():"",C=await em(d,s,o+_,{headers:f,noResolveJson:h?.noResolveJson},{},h?.body);return h?.xform?h?.xform(C):{data:Object.assign({},C),error:null}}async function em(d,s,o,h,g,f){const y=Jp(s,h,g,f);let _;try{_=await d(o,Object.assign({},y))}catch(C){throw console.error(C),new Uu(Ss(C),0)}if(_.ok||await Tf(_),h?.noResolveJson)return _;try{return await _.json()}catch(C){await Tf(C)}}function Qr(d){var s;let o=null;im(d)&&(o=Object.assign({},d),d.expires_at||(o.expires_at=Pp(d.expires_in)));const h=(s=d.user)!==null&&s!==void 0?s:d;return{data:{session:o,user:h},error:null}}function bf(d){const s=Qr(d);return!s.error&&d.weak_password&&typeof d.weak_password=="object"&&Array.isArray(d.weak_password.reasons)&&d.weak_password.reasons.length&&d.weak_password.message&&typeof d.weak_password.message=="string"&&d.weak_password.reasons.reduce((o,h)=>o&&typeof h=="string",!0)&&(s.data.weak_password=d.weak_password),s}function Yi(d){var s;return{data:{user:(s=d.user)!==null&&s!==void 0?s:d},error:null}}function tm(d){return{data:d,error:null}}function nm(d){const{action_link:s,email_otp:o,hashed_token:h,redirect_to:g,verification_type:f}=d,y=Kp(d,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:s,email_otp:o,hashed_token:h,redirect_to:g,verification_type:f},C=Object.assign({},y);return{data:{properties:_,user:C},error:null}}function rm(d){return d}function im(d){return d.access_token&&d.refresh_token&&d.expires_in}const Nu=["global","local","others"];var sm=function(d,s){var o={};for(var h in d)Object.prototype.hasOwnProperty.call(d,h)&&s.indexOf(h)<0&&(o[h]=d[h]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,h=Object.getOwnPropertySymbols(d);g<h.length;g++)s.indexOf(h[g])<0&&Object.prototype.propertyIsEnumerable.call(d,h[g])&&(o[h[g]]=d[h[g]]);return o};class om{constructor({url:s="",headers:o={},fetch:h}){this.url=s,this.headers=o,this.fetch=S0(h),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(s,o=Nu[0]){if(Nu.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nu.join(", ")}`);try{return await tt(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:s,noResolveJson:!0}),{data:null,error:null}}catch(h){if($e(h))return{data:null,error:h};throw h}}async inviteUserByEmail(s,o={}){try{return await tt(this.fetch,"POST",`${this.url}/invite`,{body:{email:s,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:Yi})}catch(h){if($e(h))return{data:{user:null},error:h};throw h}}async generateLink(s){try{const{options:o}=s,h=sm(s,["options"]),g=Object.assign(Object.assign({},h),o);return"newEmail"in h&&(g.new_email=h?.newEmail,delete g.newEmail),await tt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:g,headers:this.headers,xform:nm,redirectTo:o?.redirectTo})}catch(o){if($e(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(s){try{return await tt(this.fetch,"POST",`${this.url}/admin/users`,{body:s,headers:this.headers,xform:Yi})}catch(o){if($e(o))return{data:{user:null},error:o};throw o}}async listUsers(s){var o,h,g,f,y,_,C;try{const w={nextPage:null,lastPage:0,total:0},A=await tt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(h=(o=s?.page)===null||o===void 0?void 0:o.toString())!==null&&h!==void 0?h:"",per_page:(f=(g=s?.perPage)===null||g===void 0?void 0:g.toString())!==null&&f!==void 0?f:""},xform:rm});if(A.error)throw A.error;const T=await A.json(),k=(y=A.headers.get("x-total-count"))!==null&&y!==void 0?y:0,B=(C=(_=A.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&C!==void 0?C:[];return B.length>0&&(B.forEach(z=>{const j=parseInt(z.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(z.split(";")[1].split("=")[1]);w[`${F}Page`]=j}),w.total=parseInt(k)),{data:Object.assign(Object.assign({},T),w),error:null}}catch(w){if($e(w))return{data:{users:[]},error:w};throw w}}async getUserById(s){po(s);try{return await tt(this.fetch,"GET",`${this.url}/admin/users/${s}`,{headers:this.headers,xform:Yi})}catch(o){if($e(o))return{data:{user:null},error:o};throw o}}async updateUserById(s,o){po(s);try{return await tt(this.fetch,"PUT",`${this.url}/admin/users/${s}`,{body:o,headers:this.headers,xform:Yi})}catch(h){if($e(h))return{data:{user:null},error:h};throw h}}async deleteUser(s,o=!1){po(s);try{return await tt(this.fetch,"DELETE",`${this.url}/admin/users/${s}`,{headers:this.headers,body:{should_soft_delete:o},xform:Yi})}catch(h){if($e(h))return{data:{user:null},error:h};throw h}}async _listFactors(s){po(s.userId);try{const{data:o,error:h}=await tt(this.fetch,"GET",`${this.url}/admin/users/${s.userId}/factors`,{headers:this.headers,xform:g=>({data:{factors:g},error:null})});return{data:o,error:h}}catch(o){if($e(o))return{data:null,error:o};throw o}}async _deleteFactor(s){po(s.userId),po(s.id);try{return{data:await tt(this.fetch,"DELETE",`${this.url}/admin/users/${s.userId}/factors/${s.id}`,{headers:this.headers}),error:null}}catch(o){if($e(o))return{data:null,error:o};throw o}}}function Nf(d={}){return{getItem:s=>d[s]||null,setItem:(s,o)=>{d[s]=o},removeItem:s=>{delete d[s]}}}function am(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const mo={debug:!!(globalThis&&A0()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class _0 extends Error{constructor(s){super(s),this.isAcquireTimeout=!0}}class lm extends _0{}async function cm(d,s,o){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",d,s);const h=new globalThis.AbortController;return s>0&&setTimeout(()=>{h.abort(),mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",d)},s),await Promise.resolve().then(()=>globalThis.navigator.locks.request(d,s===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:h.signal},async g=>{if(g){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",d,g.name);try{return await o()}finally{mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",d,g.name)}}else{if(s===0)throw mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",d),new lm(`Acquiring an exclusive Navigator LockManager lock "${d}" immediately failed`);if(mo.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}}))}function I0(d){if(!/^0x[a-fA-F0-9]{40}$/.test(d))throw new Error(`@supabase/auth-js: Address "${d}" is invalid.`);return d.toLowerCase()}function um(d){return parseInt(d,16)}function dm(d){const s=new TextEncoder().encode(d);return"0x"+Array.from(s,h=>h.toString(16).padStart(2,"0")).join("")}function hm(d){var s;const{chainId:o,domain:h,expirationTime:g,issuedAt:f=new Date,nonce:y,notBefore:_,requestId:C,resources:w,scheme:A,uri:T,version:k}=d;{if(!Number.isInteger(o))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(y&&y.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${y}`);if(!T)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(k!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${k}`);if(!((s=d.statement)===null||s===void 0)&&s.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${d.statement}`)}const B=I0(d.address),z=A?`${A}://${h}`:h,j=d.statement?`${d.statement}
`:"",F=`${z} wants you to sign in with your Ethereum account:
${B}

${j}`;let ie=`URI: ${T}
Version: ${k}
Chain ID: ${o}${y?`
Nonce: ${y}`:""}
Issued At: ${f.toISOString()}`;if(g&&(ie+=`
Expiration Time: ${g.toISOString()}`),_&&(ie+=`
Not Before: ${_.toISOString()}`),C&&(ie+=`
Request ID: ${C}`),w){let $=`
Resources:`;for(const W of w){if(!W||typeof W!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${W}`);$+=`
- ${W}`}ie+=$}return`${F}
${ie}`}am();const fm={url:vp,storageKey:Ep,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Cp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Of(d,s,o){return await o()}const xo={};class Ea{constructor(s){var o,h;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ea.nextInstanceID,Ea.nextInstanceID+=1,this.instanceID>0&&Ir()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const g=Object.assign(Object.assign({},fm),s);if(this.logDebugMessages=!!g.debug,typeof g.debug=="function"&&(this.logger=g.debug),this.persistSession=g.persistSession,this.storageKey=g.storageKey,this.autoRefreshToken=g.autoRefreshToken,this.admin=new om({url:g.url,headers:g.headers,fetch:g.fetch}),this.url=g.url,this.headers=g.headers,this.fetch=S0(g.fetch),this.lock=g.lock||Of,this.detectSessionInUrl=g.detectSessionInUrl,this.flowType=g.flowType,this.hasCustomAuthorizationHeader=g.hasCustomAuthorizationHeader,g.lock?this.lock=g.lock:Ir()&&(!((o=globalThis?.navigator)===null||o===void 0)&&o.locks)?this.lock=cm:this.lock=Of,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(g.storage?this.storage=g.storage:A0()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),g.userStorage&&(this.userStorage=g.userStorage)):(this.memoryStorage={},this.storage=Nf(this.memoryStorage)),Ir()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(h=this.broadcastChannel)===null||h===void 0||h.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}get jwks(){var s,o;return(o=(s=xo[this.storageKey])===null||s===void 0?void 0:s.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(s){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{jwks:s})}get jwks_cached_at(){var s,o;return(o=(s=xo[this.storageKey])===null||s===void 0?void 0:s.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(s){xo[this.storageKey]=Object.assign(Object.assign({},xo[this.storageKey]),{cachedAt:s})}_debug(...s){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${y0}) ${new Date().toISOString()}`,...s),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var s;try{const o=jp(window.location.href);let h="none";if(this._isImplicitGrantCallback(o)?h="implicit":await this._isPKCECallback(o)&&(h="pkce"),Ir()&&this.detectSessionInUrl&&h!=="none"){const{data:g,error:f}=await this._getSessionFromURL(o,h);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),bp(f)){const C=(s=f.details)===null||s===void 0?void 0:s.code;if(C==="identity_already_exists"||C==="identity_not_found"||C==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:y,redirectType:_}=g;return this._debug("#_initialize()","detected session in URL",y,"redirect type",_),await this._saveSession(y),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",y):await this._notifyAllSubscribers("SIGNED_IN",y)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return $e(o)?{error:o}:{error:new E0("Unexpected error during initialization",o)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(s){var o,h,g;try{const f=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(h=(o=s?.options)===null||o===void 0?void 0:o.data)!==null&&h!==void 0?h:{},gotrue_meta_security:{captcha_token:(g=s?.options)===null||g===void 0?void 0:g.captchaToken}},xform:Qr}),{data:y,error:_}=f;if(_||!y)return{data:{user:null,session:null},error:_};const C=y.session,w=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",C)),{data:{user:w,session:C},error:null}}catch(f){if($e(f))return{data:{user:null,session:null},error:f};throw f}}async signUp(s){var o,h,g;try{let f;if("email"in s){const{email:A,password:T,options:k}=s;let B=null,z=null;this.flowType==="pkce"&&([B,z]=await go(this.storage,this.storageKey)),f=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:k?.emailRedirectTo,body:{email:A,password:T,data:(o=k?.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:k?.captchaToken},code_challenge:B,code_challenge_method:z},xform:Qr})}else if("phone"in s){const{phone:A,password:T,options:k}=s;f=await tt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:A,password:T,data:(h=k?.data)!==null&&h!==void 0?h:{},channel:(g=k?.channel)!==null&&g!==void 0?g:"sms",gotrue_meta_security:{captcha_token:k?.captchaToken}},xform:Qr})}else throw new jl("You must provide either an email or phone number and a password");const{data:y,error:_}=f;if(_||!y)return{data:{user:null,session:null},error:_};const C=y.session,w=y.user;return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",C)),{data:{user:w,session:C},error:null}}catch(f){if($e(f))return{data:{user:null,session:null},error:f};throw f}}async signInWithPassword(s){try{let o;if("email"in s){const{email:f,password:y,options:_}=s;o=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:y,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:bf})}else if("phone"in s){const{phone:f,password:y,options:_}=s;o=await tt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:y,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:bf})}else throw new jl("You must provide either an email or phone number and a password");const{data:h,error:g}=o;return g?{data:{user:null,session:null},error:g}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new ga}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:Object.assign({user:h.user,session:h.session},h.weak_password?{weakPassword:h.weak_password}:null),error:g})}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOAuth(s){var o,h,g,f;return await this._handleProviderSignIn(s.provider,{redirectTo:(o=s.options)===null||o===void 0?void 0:o.redirectTo,scopes:(h=s.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=s.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:(f=s.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(s){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(s))}async signInWithWeb3(s){const{chain:o}=s;switch(o){case"ethereum":return await this.signInWithEthereum(s);case"solana":return await this.signInWithSolana(s);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}}async signInWithEthereum(s){var o,h,g,f,y,_,C,w,A,T,k;let B,z;if("message"in s)B=s.message,z=s.signature;else{const{chain:j,wallet:F,statement:ie,options:$}=s;let W;if(Ir())if(typeof F=="object")W=F;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")W=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!$?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");W=F}const J=new URL((o=$?.url)!==null&&o!==void 0?o:window.location.href),Ce=await W.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ce||Ce.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const he=I0(Ce[0]);let K=(h=$?.signInWithEthereum)===null||h===void 0?void 0:h.chainId;if(!K){const oe=await W.request({method:"eth_chainId"});K=um(oe)}const Ee={domain:J.host,address:he,statement:ie,uri:J.href,version:"1",chainId:K,nonce:(g=$?.signInWithEthereum)===null||g===void 0?void 0:g.nonce,issuedAt:(y=(f=$?.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&y!==void 0?y:new Date,expirationTime:(_=$?.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(C=$?.signInWithEthereum)===null||C===void 0?void 0:C.notBefore,requestId:(w=$?.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(A=$?.signInWithEthereum)===null||A===void 0?void 0:A.resources};B=hm(Ee),z=await W.request({method:"personal_sign",params:[dm(B),he]})}try{const{data:j,error:F}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:B,signature:z},!((T=s.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(k=s.options)===null||k===void 0?void 0:k.captchaToken}}:null),xform:Qr});if(F)throw F;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new ga}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:F})}catch(j){if($e(j))return{data:{user:null,session:null},error:j};throw j}}async signInWithSolana(s){var o,h,g,f,y,_,C,w,A,T,k,B;let z,j;if("message"in s)z=s.message,j=s.signature;else{const{chain:F,wallet:ie,statement:$,options:W}=s;let J;if(Ir())if(typeof ie=="object")J=ie;else{const he=window;if("solana"in he&&typeof he.solana=="object"&&("signIn"in he.solana&&typeof he.solana.signIn=="function"||"signMessage"in he.solana&&typeof he.solana.signMessage=="function"))J=he.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ie!="object"||!W?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");J=ie}const Ce=new URL((o=W?.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in J&&J.signIn){const he=await J.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},W?.signInWithSolana),{version:"1",domain:Ce.host,uri:Ce.href}),$?{statement:$}:null));let K;if(Array.isArray(he)&&he[0]&&typeof he[0]=="object")K=he[0];else if(he&&typeof he=="object"&&"signedMessage"in he&&"signature"in he)K=he;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)z=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),j=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in J)||typeof J.signMessage!="function"||!("publicKey"in J)||typeof J!="object"||!J.publicKey||!("toBase58"in J.publicKey)||typeof J.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");z=[`${Ce.host} wants you to sign in with your Solana account:`,J.publicKey.toBase58(),...$?["",$,""]:[""],"Version: 1",`URI: ${Ce.href}`,`Issued At: ${(g=(h=W?.signInWithSolana)===null||h===void 0?void 0:h.issuedAt)!==null&&g!==void 0?g:new Date().toISOString()}`,...!((f=W?.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${W.signInWithSolana.notBefore}`]:[],...!((y=W?.signInWithSolana)===null||y===void 0)&&y.expirationTime?[`Expiration Time: ${W.signInWithSolana.expirationTime}`]:[],...!((_=W?.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${W.signInWithSolana.chainId}`]:[],...!((C=W?.signInWithSolana)===null||C===void 0)&&C.nonce?[`Nonce: ${W.signInWithSolana.nonce}`]:[],...!((w=W?.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${W.signInWithSolana.requestId}`]:[],...!((T=(A=W?.signInWithSolana)===null||A===void 0?void 0:A.resources)===null||T===void 0)&&T.length?["Resources",...W.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const he=await J.signMessage(new TextEncoder().encode(z),"utf8");if(!he||!(he instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");j=he}}try{const{data:F,error:ie}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:z,signature:Lp(j)},!((k=s.options)===null||k===void 0)&&k.captchaToken?{gotrue_meta_security:{captcha_token:(B=s.options)===null||B===void 0?void 0:B.captchaToken}}:null),xform:Qr});if(ie)throw ie;return!F||!F.session||!F.user?{data:{user:null,session:null},error:new ga}:(F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),{data:Object.assign({},F),error:ie})}catch(F){if($e(F))return{data:{user:null,session:null},error:F};throw F}}async _exchangeCodeForSession(s){const o=await As(this.storage,`${this.storageKey}-code-verifier`),[h,g]=(o??"").split("/");try{const{data:f,error:y}=await tt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:s,code_verifier:h},xform:Qr});if(await Vi(this.storage,`${this.storageKey}-code-verifier`),y)throw y;return!f||!f.session||!f.user?{data:{user:null,session:null,redirectType:null},error:new ga}:(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),{data:Object.assign(Object.assign({},f),{redirectType:g??null}),error:y})}catch(f){if($e(f))return{data:{user:null,session:null,redirectType:null},error:f};throw f}}async signInWithIdToken(s){try{const{options:o,provider:h,token:g,access_token:f,nonce:y}=s,_=await tt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:h,id_token:g,access_token:f,nonce:y,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:Qr}),{data:C,error:w}=_;return w?{data:{user:null,session:null},error:w}:!C||!C.session||!C.user?{data:{user:null,session:null},error:new ga}:(C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),{data:C,error:w})}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithOtp(s){var o,h,g,f,y;try{if("email"in s){const{email:_,options:C}=s;let w=null,A=null;this.flowType==="pkce"&&([w,A]=await go(this.storage,this.storageKey));const{error:T}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(o=C?.data)!==null&&o!==void 0?o:{},create_user:(h=C?.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:w,code_challenge_method:A},redirectTo:C?.emailRedirectTo});return{data:{user:null,session:null},error:T}}if("phone"in s){const{phone:_,options:C}=s,{data:w,error:A}=await tt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(g=C?.data)!==null&&g!==void 0?g:{},create_user:(f=C?.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},channel:(y=C?.channel)!==null&&y!==void 0?y:"sms"}});return{data:{user:null,session:null,messageId:w?.message_id},error:A}}throw new jl("You must provide either an email or phone number.")}catch(_){if($e(_))return{data:{user:null,session:null},error:_};throw _}}async verifyOtp(s){var o,h;try{let g,f;"options"in s&&(g=(o=s.options)===null||o===void 0?void 0:o.redirectTo,f=(h=s.options)===null||h===void 0?void 0:h.captchaToken);const{data:y,error:_}=await tt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},s),{gotrue_meta_security:{captcha_token:f}}),redirectTo:g,xform:Qr});if(_)throw _;if(!y)throw new Error("An error occurred on token verification.");const C=y.session,w=y.user;return C?.access_token&&(await this._saveSession(C),await this._notifyAllSubscribers(s.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",C)),{data:{user:w,session:C},error:null}}catch(g){if($e(g))return{data:{user:null,session:null},error:g};throw g}}async signInWithSSO(s){var o,h,g;try{let f=null,y=null;return this.flowType==="pkce"&&([f,y]=await go(this.storage,this.storageKey)),await tt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in s?{provider_id:s.providerId}:null),"domain"in s?{domain:s.domain}:null),{redirect_to:(h=(o=s.options)===null||o===void 0?void 0:o.redirectTo)!==null&&h!==void 0?h:void 0}),!((g=s?.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:s.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:y}),headers:this.headers,xform:tm})}catch(f){if($e(f))return{data:null,error:f};throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async s=>{const{data:{session:o},error:h}=s;if(h)throw h;if(!o)throw new Gi;const{error:g}=await tt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return{data:{user:null,session:null},error:g}})}catch(s){if($e(s))return{data:{user:null,session:null},error:s};throw s}}async resend(s){try{const o=`${this.url}/resend`;if("email"in s){const{email:h,type:g,options:f}=s,{error:y}=await tt(this.fetch,"POST",o,{headers:this.headers,body:{email:h,type:g,gotrue_meta_security:{captcha_token:f?.captchaToken}},redirectTo:f?.emailRedirectTo});return{data:{user:null,session:null},error:y}}else if("phone"in s){const{phone:h,type:g,options:f}=s,{data:y,error:_}=await tt(this.fetch,"POST",o,{headers:this.headers,body:{phone:h,type:g,gotrue_meta_security:{captcha_token:f?.captchaToken}}});return{data:{user:null,session:null,messageId:y?.message_id},error:_}}throw new jl("You must provide either an email or phone number and a type")}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async o=>o))}async _acquireLock(s,o){this._debug("#_acquireLock","begin",s);try{if(this.lockAcquired){const h=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),g=(async()=>(await h,await o()))();return this.pendingInLock.push((async()=>{try{await g}catch{}})()),g}return await this.lock(`lock:${this.storageKey}`,s,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const h=o();for(this.pendingInLock.push((async()=>{try{await h}catch{}})()),await h;this.pendingInLock.length;){const g=[...this.pendingInLock];await Promise.all(g),this.pendingInLock.splice(0,g.length)}return await h}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(s){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await s(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let s=null;const o=await As(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?s=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!s)return{data:{session:null},error:null};const h=s.expires_at?s.expires_at*1e3-Date.now()<_u:!1;if(this._debug("#__loadSession()",`session has${h?"":" not"} expired`,"expires_at",s.expires_at),!h){if(this.userStorage){const y=await As(this.userStorage,this.storageKey+"-user");y?.user?s.user=y.user:s.user=bu()}if(this.storage.isServer&&s.user){let y=this.suppressGetSessionWarning;s=new Proxy(s,{get:(C,w,A)=>(!y&&w==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),y=!0,this.suppressGetSessionWarning=!0),Reflect.get(C,w,A))})}return{data:{session:s},error:null}}const{session:g,error:f}=await this._callRefreshToken(s.refresh_token);return f?{data:{session:null},error:f}:{data:{session:g},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(s){return s?await this._getUser(s):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(s){try{return s?await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:s,xform:Yi}):await this._useSession(async o=>{var h,g,f;const{data:y,error:_}=o;if(_)throw _;return!(!((h=y.session)===null||h===void 0)&&h.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gi}:await tt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(g=y.session)===null||g===void 0?void 0:g.access_token)!==null&&f!==void 0?f:void 0,xform:Yi})})}catch(o){if($e(o))return Tp(o)&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:o};throw o}}async updateUser(s,o={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(s,o))}async _updateUser(s,o={}){try{return await this._useSession(async h=>{const{data:g,error:f}=h;if(f)throw f;if(!g.session)throw new Gi;const y=g.session;let _=null,C=null;this.flowType==="pkce"&&s.email!=null&&([_,C]=await go(this.storage,this.storageKey));const{data:w,error:A}=await tt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o?.emailRedirectTo,body:Object.assign(Object.assign({},s),{code_challenge:_,code_challenge_method:C}),jwt:y.access_token,xform:Yi});if(A)throw A;return y.user=w.user,await this._saveSession(y),await this._notifyAllSubscribers("USER_UPDATED",y),{data:{user:y.user},error:null}})}catch(h){if($e(h))return{data:{user:null},error:h};throw h}}async setSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(s))}async _setSession(s){try{if(!s.access_token||!s.refresh_token)throw new Gi;const o=Date.now()/1e3;let h=o,g=!0,f=null;const{payload:y}=Tu(s.access_token);if(y.exp&&(h=y.exp,g=h<=o),g){const{session:_,error:C}=await this._callRefreshToken(s.refresh_token);if(C)return{data:{user:null,session:null},error:C};if(!_)return{data:{user:null,session:null},error:null};f=_}else{const{data:_,error:C}=await this._getUser(s.access_token);if(C)throw C;f={access_token:s.access_token,refresh_token:s.refresh_token,user:_.user,token_type:"bearer",expires_in:h-o,expires_at:h},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return{data:{user:f.user,session:f},error:null}}catch(o){if($e(o))return{data:{session:null,user:null},error:o};throw o}}async refreshSession(s){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(s))}async _refreshSession(s){try{return await this._useSession(async o=>{var h;if(!s){const{data:y,error:_}=o;if(_)throw _;s=(h=y.session)!==null&&h!==void 0?h:void 0}if(!s?.refresh_token)throw new Gi;const{session:g,error:f}=await this._callRefreshToken(s.refresh_token);return f?{data:{user:null,session:null},error:f}:g?{data:{user:g.user,session:g},error:null}:{data:{user:null,session:null},error:null}})}catch(o){if($e(o))return{data:{user:null,session:null},error:o};throw o}}async _getSessionFromURL(s,o){try{if(!Ir())throw new Fl("No browser detected.");if(s.error||s.error_description||s.error_code)throw new Fl(s.error_description||"Error in URL with unspecified error_description",{error:s.error||"unspecified_error",code:s.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new Ef("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Fl("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!s.code)throw new Ef("No code detected.");const{data:$,error:W}=await this._exchangeCodeForSession(s.code);if(W)throw W;const J=new URL(window.location.href);return J.searchParams.delete("code"),window.history.replaceState(window.history.state,"",J.toString()),{data:{session:$.session,redirectType:null},error:null}}const{provider_token:h,provider_refresh_token:g,access_token:f,refresh_token:y,expires_in:_,expires_at:C,token_type:w}=s;if(!f||!_||!y||!w)throw new Fl("No session defined in URL");const A=Math.round(Date.now()/1e3),T=parseInt(_);let k=A+T;C&&(k=parseInt(C));const B=k-A;B*1e3<=yo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${B}s, should have been closer to ${T}s`);const z=k-T;A-z>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",z,k,A):A-z<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",z,k,A);const{data:j,error:F}=await this._getUser(f);if(F)throw F;const ie={provider_token:h,provider_refresh_token:g,access_token:f,expires_in:T,expires_at:k,refresh_token:y,token_type:w,user:j.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:ie,redirectType:s.type},error:null}}catch(h){if($e(h))return{data:{session:null,redirectType:null},error:h};throw h}}_isImplicitGrantCallback(s){return!!(s.access_token||s.error_description)}async _isPKCECallback(s){const o=await As(this.storage,`${this.storageKey}-code-verifier`);return!!(s.code&&o)}async signOut(s={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(s))}async _signOut({scope:s}={scope:"global"}){return await this._useSession(async o=>{var h;const{data:g,error:f}=o;if(f)return{error:f};const y=(h=g.session)===null||h===void 0?void 0:h.access_token;if(y){const{error:_}=await this.admin.signOut(y,s);if(_&&!(Ip(_)&&(_.status===404||_.status===401||_.status===403)))return{error:_}}return s!=="others"&&(await this._removeSession(),await Vi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(s){const o=Bp(),h={id:o,callback:s,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,h),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:h}}}async _emitInitialSession(s){return await this._useSession(async o=>{var h,g;try{const{data:{session:f},error:y}=o;if(y)throw y;await((h=this.stateChangeEmitters.get(s))===null||h===void 0?void 0:h.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",s,"session",f)}catch(f){await((g=this.stateChangeEmitters.get(s))===null||g===void 0?void 0:g.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",s,"error",f),console.error(f)}})}async resetPasswordForEmail(s,o={}){let h=null,g=null;this.flowType==="pkce"&&([h,g]=await go(this.storage,this.storageKey,!0));try{return await tt(this.fetch,"POST",`${this.url}/recover`,{body:{email:s,code_challenge:h,code_challenge_method:g,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(f){if($e(f))return{data:null,error:f};throw f}}async getUserIdentities(){var s;try{const{data:o,error:h}=await this.getUser();if(h)throw h;return{data:{identities:(s=o.user.identities)!==null&&s!==void 0?s:[]},error:null}}catch(o){if($e(o))return{data:null,error:o};throw o}}async linkIdentity(s){var o;try{const{data:h,error:g}=await this._useSession(async f=>{var y,_,C,w,A;const{data:T,error:k}=f;if(k)throw k;const B=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,s.provider,{redirectTo:(y=s.options)===null||y===void 0?void 0:y.redirectTo,scopes:(_=s.options)===null||_===void 0?void 0:_.scopes,queryParams:(C=s.options)===null||C===void 0?void 0:C.queryParams,skipBrowserRedirect:!0});return await tt(this.fetch,"GET",B,{headers:this.headers,jwt:(A=(w=T.session)===null||w===void 0?void 0:w.access_token)!==null&&A!==void 0?A:void 0})});if(g)throw g;return Ir()&&!(!((o=s.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(h?.url),{data:{provider:s.provider,url:h?.url},error:null}}catch(h){if($e(h))return{data:{provider:s.provider,url:null},error:h};throw h}}async unlinkIdentity(s){try{return await this._useSession(async o=>{var h,g;const{data:f,error:y}=o;if(y)throw y;return await tt(this.fetch,"DELETE",`${this.url}/user/identities/${s.identity_id}`,{headers:this.headers,jwt:(g=(h=f.session)===null||h===void 0?void 0:h.access_token)!==null&&g!==void 0?g:void 0})})}catch(o){if($e(o))return{data:null,error:o};throw o}}async _refreshAccessToken(s){const o=`#_refreshAccessToken(${s.substring(0,5)}...)`;this._debug(o,"begin");try{const h=Date.now();return await zp(async g=>(g>0&&await Up(200*Math.pow(2,g-1)),this._debug(o,"refreshing attempt",g),await tt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:s},headers:this.headers,xform:Qr})),(g,f)=>{const y=200*Math.pow(2,g);return f&&Iu(f)&&Date.now()+y-h<yo})}catch(h){if(this._debug(o,"error",h),$e(h))return{data:{session:null,user:null},error:h};throw h}finally{this._debug(o,"end")}}_isValidSession(s){return typeof s=="object"&&s!==null&&"access_token"in s&&"refresh_token"in s&&"expires_at"in s}async _handleProviderSignIn(s,o){const h=await this._getUrlForProvider(`${this.url}/authorize`,s,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",s,"options",o,"url",h),Ir()&&!o.skipBrowserRedirect&&window.location.assign(h),{data:{provider:s,url:h},error:null}}async _recoverAndRefresh(){var s,o;const h="#_recoverAndRefresh()";this._debug(h,"begin");try{const g=await As(this.storage,this.storageKey);if(g&&this.userStorage){let y=await As(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!y&&(y={user:g.user},await vo(this.userStorage,this.storageKey+"-user",y)),g.user=(s=y?.user)!==null&&s!==void 0?s:bu()}else if(g&&!g.user&&!g.user){const y=await As(this.storage,this.storageKey+"-user");y&&y?.user?(g.user=y.user,await Vi(this.storage,this.storageKey+"-user"),await vo(this.storage,this.storageKey,g)):g.user=bu()}if(this._debug(h,"session from storage",g),!this._isValidSession(g)){this._debug(h,"session is not valid"),g!==null&&await this._removeSession();return}const f=((o=g.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<_u;if(this._debug(h,`session has${f?"":" not"} expired with margin of ${_u}s`),f){if(this.autoRefreshToken&&g.refresh_token){const{error:y}=await this._callRefreshToken(g.refresh_token);y&&(console.error(y),Iu(y)||(this._debug(h,"refresh failed with a non-retryable error, removing the session",y),await this._removeSession()))}}else if(g.user&&g.user.__isUserNotAvailableProxy===!0)try{const{data:y,error:_}=await this._getUser(g.access_token);!_&&y?.user?(g.user=y.user,await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)):this._debug(h,"could not get user data, skipping SIGNED_IN notification")}catch(y){console.error("Error getting user data:",y),this._debug(h,"error getting user data, skipping SIGNED_IN notification",y)}else await this._notifyAllSubscribers("SIGNED_IN",g)}catch(g){this._debug(h,"error",g),console.error(g);return}finally{this._debug(h,"end")}}async _callRefreshToken(s){var o,h;if(!s)throw new Gi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const g=`#_callRefreshToken(${s.substring(0,5)}...)`;this._debug(g,"begin");try{this.refreshingDeferred=new Xl;const{data:f,error:y}=await this._refreshAccessToken(s);if(y)throw y;if(!f.session)throw new Gi;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const _={session:f.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(f){if(this._debug(g,"error",f),$e(f)){const y={session:null,error:f};return Iu(f)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(y),y}throw(h=this.refreshingDeferred)===null||h===void 0||h.reject(f),f}finally{this.refreshingDeferred=null,this._debug(g,"end")}}async _notifyAllSubscribers(s,o,h=!0){const g=`#_notifyAllSubscribers(${s})`;this._debug(g,"begin",o,`broadcast = ${h}`);try{this.broadcastChannel&&h&&this.broadcastChannel.postMessage({event:s,session:o});const f=[],y=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(s,o)}catch(C){f.push(C)}});if(await Promise.all(y),f.length>0){for(let _=0;_<f.length;_+=1)console.error(f[_]);throw f[0]}}finally{this._debug(g,"end")}}async _saveSession(s){this._debug("#_saveSession()",s),this.suppressGetSessionWarning=!0;const o=Object.assign({},s),h=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!h&&o.user&&await vo(this.userStorage,this.storageKey+"-user",{user:o.user});const g=Object.assign({},o);delete g.user;const f=If(g);await vo(this.storage,this.storageKey,f)}else{const g=If(o);await vo(this.storage,this.storageKey,g)}}async _removeSession(){this._debug("#_removeSession()"),await Vi(this.storage,this.storageKey),await Vi(this.storage,this.storageKey+"-code-verifier"),await Vi(this.storage,this.storageKey+"-user"),this.userStorage&&await Vi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const s=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{s&&Ir()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",s)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const s=setInterval(()=>this._autoRefreshTokenTick(),yo);this.autoRefreshTicker=s,s&&typeof s=="object"&&typeof s.unref=="function"?s.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(s),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const s=this.autoRefreshTicker;this.autoRefreshTicker=null,s&&clearInterval(s)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const s=Date.now();try{return await this._useSession(async o=>{const{data:{session:h}}=o;if(!h||!h.refresh_token||!h.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const g=Math.floor((h.expires_at*1e3-s)/yo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${g} ticks, a tick lasts ${yo}ms, refresh threshold is ${ju} ticks`),g<=ju&&await this._callRefreshToken(h.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(s){if(s.isAcquireTimeout||s instanceof _0)this._debug("auto refresh token tick lock not available");else throw s}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ir()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(s){console.error("_handleVisibilityChange",s)}}async _onVisibilityChanged(s){const o=`#_onVisibilityChanged(${s})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),s||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(s,o,h){const g=[`provider=${encodeURIComponent(o)}`];if(h?.redirectTo&&g.push(`redirect_to=${encodeURIComponent(h.redirectTo)}`),h?.scopes&&g.push(`scopes=${encodeURIComponent(h.scopes)}`),this.flowType==="pkce"){const[f,y]=await go(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(y)}`});g.push(_.toString())}if(h?.queryParams){const f=new URLSearchParams(h.queryParams);g.push(f.toString())}return h?.skipBrowserRedirect&&g.push(`skip_http_redirect=${h.skipBrowserRedirect}`),`${s}?${g.join("&")}`}async _unenroll(s){try{return await this._useSession(async o=>{var h;const{data:g,error:f}=o;return f?{data:null,error:f}:await tt(this.fetch,"DELETE",`${this.url}/factors/${s.factorId}`,{headers:this.headers,jwt:(h=g?.session)===null||h===void 0?void 0:h.access_token})})}catch(o){if($e(o))return{data:null,error:o};throw o}}async _enroll(s){try{return await this._useSession(async o=>{var h,g;const{data:f,error:y}=o;if(y)return{data:null,error:y};const _=Object.assign({friendly_name:s.friendlyName,factor_type:s.factorType},s.factorType==="phone"?{phone:s.phone}:{issuer:s.issuer}),{data:C,error:w}=await tt(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(h=f?.session)===null||h===void 0?void 0:h.access_token});return w?{data:null,error:w}:(s.factorType==="totp"&&(!((g=C?.totp)===null||g===void 0)&&g.qr_code)&&(C.totp.qr_code=`data:image/svg+xml;utf-8,${C.totp.qr_code}`),{data:C,error:null})})}catch(o){if($e(o))return{data:null,error:o};throw o}}async _verify(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var h;const{data:g,error:f}=o;if(f)return{data:null,error:f};const{data:y,error:_}=await tt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/verify`,{body:{code:s.code,challenge_id:s.challengeId},headers:this.headers,jwt:(h=g?.session)===null||h===void 0?void 0:h.access_token});return _?{data:null,error:_}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+y.expires_in},y)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",y),{data:y,error:_})})}catch(o){if($e(o))return{data:null,error:o};throw o}})}async _challenge(s){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var h;const{data:g,error:f}=o;return f?{data:null,error:f}:await tt(this.fetch,"POST",`${this.url}/factors/${s.factorId}/challenge`,{body:{channel:s.channel},headers:this.headers,jwt:(h=g?.session)===null||h===void 0?void 0:h.access_token})})}catch(o){if($e(o))return{data:null,error:o};throw o}})}async _challengeAndVerify(s){const{data:o,error:h}=await this._challenge({factorId:s.factorId});return h?{data:null,error:h}:await this._verify({factorId:s.factorId,challengeId:o.id,code:s.code})}async _listFactors(){const{data:{user:s},error:o}=await this.getUser();if(o)return{data:null,error:o};const h=s?.factors||[],g=h.filter(y=>y.factor_type==="totp"&&y.status==="verified"),f=h.filter(y=>y.factor_type==="phone"&&y.status==="verified");return{data:{all:h,totp:g,phone:f},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async s=>{var o,h;const{data:{session:g},error:f}=s;if(f)return{data:null,error:f};if(!g)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:y}=Tu(g.access_token);let _=null;y.aal&&(_=y.aal);let C=_;((h=(o=g.user.factors)===null||o===void 0?void 0:o.filter(T=>T.status==="verified"))!==null&&h!==void 0?h:[]).length>0&&(C="aal2");const A=y.amr||[];return{data:{currentLevel:_,nextLevel:C,currentAuthenticationMethods:A},error:null}}))}async fetchJwk(s,o={keys:[]}){let h=o.keys.find(_=>_.kid===s);if(h)return h;const g=Date.now();if(h=this.jwks.keys.find(_=>_.kid===s),h&&this.jwks_cached_at+Sp>g)return h;const{data:f,error:y}=await tt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(y)throw y;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=g,h=f.keys.find(_=>_.kid===s),!h)?null:h}async getClaims(s,o={}){try{let h=s;if(!h){const{data:B,error:z}=await this.getSession();if(z||!B.session)return{data:null,error:z};h=B.session.access_token}const{header:g,payload:f,signature:y,raw:{header:_,payload:C}}=Tu(h);o?.allowExpired||$p(f.exp);const w=!g.alg||g.alg.startsWith("HS")||!g.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(g.kid,o?.keys?{keys:o.keys}:o?.jwks);if(!w){const{error:B}=await this.getUser(h);if(B)throw B;return{data:{claims:f,header:g,signature:y},error:null}}const A=Qp(g.alg),T=await crypto.subtle.importKey("jwk",w,A,!0,["verify"]);if(!await crypto.subtle.verify(A,T,y,Dp(`${_}.${C}`)))throw new zu("Invalid JWT signature");return{data:{claims:f,header:g,signature:y},error:null}}catch(h){if($e(h))return{data:null,error:h};throw h}}}Ea.nextInstanceID=0;const gm=Ea;class pm extends gm{constructor(s){super(s)}}var mm=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})};class xm{constructor(s,o,h){var g,f,y;this.supabaseUrl=s,this.supabaseKey=o;const _=yp(s);if(!o)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",_),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",_),this.storageUrl=new URL("storage/v1",_),this.functionsUrl=new URL("functions/v1",_);const C=`sb-${_.hostname.split(".")[0]}-auth-token`,w={db:cp,realtime:dp,auth:Object.assign(Object.assign({},up),{storageKey:C}),global:lp},A=wp(h??{},w);this.storageKey=(g=A.auth.storageKey)!==null&&g!==void 0?g:"",this.headers=(f=A.global.headers)!==null&&f!==void 0?f:{},A.accessToken?(this.accessToken=A.accessToken,this.auth=new Proxy({},{get:(T,k)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(k)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((y=A.auth)!==null&&y!==void 0?y:{},this.headers,A.global.fetch),this.fetch=pp(o,this._getAccessToken.bind(this),A.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},A.realtime)),this.rest=new _g(new URL("rest/v1",_).href,{headers:this.headers,schema:A.db.schema,fetch:this.fetch}),this.storage=new sp(this.storageUrl.href,this.headers,this.fetch,h?.storage),A.accessToken||this._listenForAuthEvents()}get functions(){return new pg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(s){return this.rest.from(s)}schema(s){return this.rest.schema(s)}rpc(s,o={},h={}){return this.rest.rpc(s,o,h)}channel(s,o={config:{}}){return this.realtime.channel(s,o)}getChannels(){return this.realtime.getChannels()}removeChannel(s){return this.realtime.removeChannel(s)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var s,o;return mm(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:h}=yield this.auth.getSession();return(o=(s=h.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:s,persistSession:o,detectSessionInUrl:h,storage:g,userStorage:f,storageKey:y,flowType:_,lock:C,debug:w},A,T){const k={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pm({url:this.authUrl.href,headers:Object.assign(Object.assign({},k),A),storageKey:y,autoRefreshToken:s,persistSession:o,detectSessionInUrl:h,storage:g,userStorage:f,flowType:_,lock:C,debug:w,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(B=>B.toLowerCase()==="authorization")})}_initRealtimeClient(s){return new Hg(this.realtimeUrl.href,Object.assign(Object.assign({},s),{params:Object.assign({apikey:this.supabaseKey},s?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((o,h)=>{this._handleTokenChanged(o,"CLIENT",h?.access_token)})}_handleTokenChanged(s,o,h){(s==="TOKEN_REFRESHED"||s==="SIGNED_IN")&&this.changedAccessToken!==h?(this.changedAccessToken=h,this.realtime.setAuth(h)):s==="SIGNED_OUT"&&(this.realtime.setAuth(),o=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const wm=(d,s,o)=>new xm(d,s,o);function ym(){if(typeof window<"u"||typeof process>"u")return!1;const d=process.version;if(d==null)return!1;const s=d.match(/^v(\d+)\./);return s?parseInt(s[1],10)<=18:!1}ym()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const vm="https://dcklpblwrzqtcgrijqus.supabase.co",Em="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRja2xwYmx3cnpxdGNncmlqcXVzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0Mjk3NjksImV4cCI6MjA3MzAwNTc2OX0.MmEIEbuOQsYDhns0JOzpWScmgs0xOh4U4uuZN72igSw",Xt=wm(vm,Em),T0=le.createContext(),Ns=()=>le.useContext(T0),b0=({children:d})=>{const[s,o]=le.useState(null),[h,g]=le.useState(!0);le.useEffect(()=>{let C=!0;return console.log("AuthProvider mounted"),(async()=>{try{console.log("Fetching session...");const{data:{session:A},error:T}=await Xt.auth.getSession();if(console.log("Session:",A,"Error:",T),T)throw T;if(A?.user&&C){console.log("Session user found, fetching from users table...");const{data:k,error:B}=await Xt.from("users").select("*").eq("auth_id",A.user.id).single();if(B)throw B;o({...A.user,...k}),console.log("Current user set:",{...A.user,...k})}else C&&(o(null),console.log("No session user found"))}catch(A){console.error("Error fetching user:",A),C&&o(null)}finally{C&&g(!1),console.log("Loading finished")}})(),()=>{C=!1}},[]);const _={currentUser:s,login:async(C,w)=>{const{data:A,error:T}=await Xt.auth.signInWithPassword({email:C,password:w});if(T)return{error:T};const{data:k}=await Xt.from("users").select("*").eq("auth_id",A.user.id).single(),B={...A.user,...k};return o(B),{user:B}},logout:async()=>{await Xt.auth.signOut(),o(null)},loading:h};return M.jsx(T0.Provider,{value:_,children:h?M.jsx("div",{className:"w-full h-screen flex items-center justify-center text-xl",children:"Loading..."}):d})},N0=le.createContext(),_o=()=>le.useContext(N0),Cm=({children:d})=>{const[s,o]=le.useState([]),[h,g]=le.useState([]),[f,y]=le.useState([]),_=async()=>{console.log("Fetching classes...");const{data:B,error:z}=await Xt.from("classes").select("*").order("id");z?console.error("Error fetching classes:",z):(console.log("Classes fetched:",B),o(B))},C=async()=>{console.log("Fetching students...");const{data:B,error:z}=await Xt.from("students").select("*");z?console.error("Error fetching students:",z):(console.log("Students fetched:",B),g(B))},w=async()=>{console.log("Fetching attendance...");const{data:B,error:z}=await Xt.from("attendance").select("*");z?console.error("Error fetching attendance:",z):(console.log("Attendance fetched:",B),y(B))},A=async(B,z)=>{console.log(`Recording attendance for QR: ${B}, isArrival: ${z}`);try{const{data:j,error:F}=await Xt.from("students").select("id, name, qr_code").eq("qr_code",B).maybeSingle();if(F||!j)return console.error("Student not found:",F),{success:!1,message:"Student not found"};console.log("Student found:",j);const ie=j.id,$=new Date().toISOString().split("T")[0],W=new Date().toLocaleTimeString("en-GB",{hour12:!1}),{data:J,error:Ce}=await Xt.from("attendance").select("*").eq("student_id",ie).eq("date",$).maybeSingle();if(Ce&&Ce.code!=="PGRST116")throw Ce;if(console.log("Existing attendance record for today:",J),z){if(J&&J.time_in)return console.log("Student already checked in"),{success:!1,message:"Student already checked in",student:j,record:J};{const{data:he,error:K}=await Xt.from("attendance").upsert({student_id:ie,date:$,time_in:W},{onConflict:"student_id,date"});if(K)throw K;return console.log("Check-in recorded:",he),w(),{success:!0,student:j,record:{...J,date:$,time_in:W,time_out:J?.time_out}}}}else{if(!J||!J.time_in)return console.log("Cannot check out, student hasn't checked in"),{success:!1,message:"Student has not checked in yet",student:j,record:J||{}};if(J.time_out)return console.log("Student already checked out"),{success:!1,message:"Student already checked out",student:j,record:J};const{data:he,error:K}=await Xt.from("attendance").update({time_out:W}).eq("student_id",ie).eq("date",$);if(K)throw K;return console.log("Check-out recorded:",he),w(),{success:!0,student:j,record:{...J,time_out:W}}}}catch(j){return console.error("Error recording attendance:",j),{success:!1,message:"Error recording attendance"}}},T=(B,z,j=null)=>{console.log(`Filtering attendance from ${B} to ${z} for classId: ${j}`);let F=f.filter(ie=>ie.date>=B&&ie.date<=z);return j&&(F=F.filter(ie=>h.find(W=>W.id===ie.student_id)?.class_id===j)),console.log("Filtered attendance:",F),F};le.useEffect(()=>{console.log("Initializing DataProvider..."),_(),C(),w()},[]);const k={classes:s,students:h,attendance:f,fetchClasses:_,fetchStudents:C,fetchAttendance:w,recordAttendance:A,getAttendanceByDateRange:T};return M.jsx(N0.Provider,{value:k,children:d})};a0();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ca(){return Ca=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(d[h]=o[h])}return d},Ca.apply(this,arguments)}var Xi;(function(d){d.Pop="POP",d.Push="PUSH",d.Replace="REPLACE"})(Xi||(Xi={}));const Rf="popstate";function Am(d){d===void 0&&(d={});function s(g,f){let{pathname:y="/",search:_="",hash:C=""}=Os(g.location.hash.substr(1));return!y.startsWith("/")&&!y.startsWith(".")&&(y="/"+y),Hu("",{pathname:y,search:_,hash:C},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(g,f){let y=g.document.querySelector("base"),_="";if(y&&y.getAttribute("href")){let C=g.location.href,w=C.indexOf("#");_=w===-1?C:C.slice(0,w)}return _+"#"+(typeof f=="string"?f:O0(f))}function h(g,f){Ju(g.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(f)+")")}return _m(s,o,h,d)}function on(d,s){if(d===!1||d===null||typeof d>"u")throw new Error(s)}function Ju(d,s){if(!d){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function Sm(){return Math.random().toString(36).substr(2,8)}function Mf(d,s){return{usr:d.state,key:d.key,idx:s}}function Hu(d,s,o,h){return o===void 0&&(o=null),Ca({pathname:typeof d=="string"?d:d.pathname,search:"",hash:""},typeof s=="string"?Os(s):s,{state:o,key:s&&s.key||h||Sm()})}function O0(d){let{pathname:s="/",search:o="",hash:h=""}=d;return o&&o!=="?"&&(s+=o.charAt(0)==="?"?o:"?"+o),h&&h!=="#"&&(s+=h.charAt(0)==="#"?h:"#"+h),s}function Os(d){let s={};if(d){let o=d.indexOf("#");o>=0&&(s.hash=d.substr(o),d=d.substr(0,o));let h=d.indexOf("?");h>=0&&(s.search=d.substr(h),d=d.substr(0,h)),d&&(s.pathname=d)}return s}function _m(d,s,o,h){h===void 0&&(h={});let{window:g=document.defaultView,v5Compat:f=!1}=h,y=g.history,_=Xi.Pop,C=null,w=A();w==null&&(w=0,y.replaceState(Ca({},y.state,{idx:w}),""));function A(){return(y.state||{idx:null}).idx}function T(){_=Xi.Pop;let F=A(),ie=F==null?null:F-w;w=F,C&&C({action:_,location:j.location,delta:ie})}function k(F,ie){_=Xi.Push;let $=Hu(j.location,F,ie);o&&o($,F),w=A()+1;let W=Mf($,w),J=j.createHref($);try{y.pushState(W,"",J)}catch(Ce){if(Ce instanceof DOMException&&Ce.name==="DataCloneError")throw Ce;g.location.assign(J)}f&&C&&C({action:_,location:j.location,delta:1})}function B(F,ie){_=Xi.Replace;let $=Hu(j.location,F,ie);o&&o($,F),w=A();let W=Mf($,w),J=j.createHref($);y.replaceState(W,"",J),f&&C&&C({action:_,location:j.location,delta:0})}function z(F){let ie=g.location.origin!=="null"?g.location.origin:g.location.href,$=typeof F=="string"?F:O0(F);return $=$.replace(/ $/,"%20"),on(ie,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,ie)}let j={get action(){return _},get location(){return d(g,y)},listen(F){if(C)throw new Error("A history only accepts one active listener");return g.addEventListener(Rf,T),C=F,()=>{g.removeEventListener(Rf,T),C=null}},createHref(F){return s(g,F)},createURL:z,encodeLocation(F){let ie=z(F);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:k,replace:B,go(F){return y.go(F)}};return j}var kf;(function(d){d.data="data",d.deferred="deferred",d.redirect="redirect",d.error="error"})(kf||(kf={}));function Im(d,s,o){return o===void 0&&(o="/"),Tm(d,s,o)}function Tm(d,s,o,h){let g=typeof s=="string"?Os(s):s,f=k0(g.pathname||"/",o);if(f==null)return null;let y=R0(d);bm(y);let _=null;for(let C=0;_==null&&C<y.length;++C){let w=Um(f);_=Bm(y[C],w)}return _}function R0(d,s,o,h){s===void 0&&(s=[]),o===void 0&&(o=[]),h===void 0&&(h="");let g=(f,y,_)=>{let C={relativePath:_===void 0?f.path||"":_,caseSensitive:f.caseSensitive===!0,childrenIndex:y,route:f};C.relativePath.startsWith("/")&&(on(C.relativePath.startsWith(h),'Absolute route path "'+C.relativePath+'" nested under path '+('"'+h+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),C.relativePath=C.relativePath.slice(h.length));let w=Is([h,C.relativePath]),A=o.concat(C);f.children&&f.children.length>0&&(on(f.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),R0(f.children,s,A,w)),!(f.path==null&&!f.index)&&s.push({path:w,score:Lm(w,f.index),routesMeta:A})};return d.forEach((f,y)=>{var _;if(f.path===""||!((_=f.path)!=null&&_.includes("?")))g(f,y);else for(let C of M0(f.path))g(f,y,C)}),s}function M0(d){let s=d.split("/");if(s.length===0)return[];let[o,...h]=s,g=o.endsWith("?"),f=o.replace(/\?$/,"");if(h.length===0)return g?[f,""]:[f];let y=M0(h.join("/")),_=[];return _.push(...y.map(C=>C===""?f:[f,C].join("/"))),g&&_.push(...y),_.map(C=>d.startsWith("/")&&C===""?"/":C)}function bm(d){d.sort((s,o)=>s.score!==o.score?o.score-s.score:Pm(s.routesMeta.map(h=>h.childrenIndex),o.routesMeta.map(h=>h.childrenIndex)))}const Nm=/^:[\w-]+$/,Om=3,Rm=2,Mm=1,km=10,Dm=-2,Df=d=>d==="*";function Lm(d,s){let o=d.split("/"),h=o.length;return o.some(Df)&&(h+=Dm),s&&(h+=Rm),o.filter(g=>!Df(g)).reduce((g,f)=>g+(Nm.test(f)?Om:f===""?Mm:km),h)}function Pm(d,s){return d.length===s.length&&d.slice(0,-1).every((h,g)=>h===s[g])?d[d.length-1]-s[s.length-1]:0}function Bm(d,s,o){let{routesMeta:h}=d,g={},f="/",y=[];for(let _=0;_<h.length;++_){let C=h[_],w=_===h.length-1,A=f==="/"?s:s.slice(f.length)||"/",T=jm({path:C.relativePath,caseSensitive:C.caseSensitive,end:w},A),k=C.route;if(!T)return null;Object.assign(g,T.params),y.push({params:g,pathname:Is([f,T.pathname]),pathnameBase:Wm(Is([f,T.pathnameBase])),route:k}),T.pathnameBase!=="/"&&(f=Is([f,T.pathnameBase]))}return y}function jm(d,s){typeof d=="string"&&(d={path:d,caseSensitive:!1,end:!0});let[o,h]=Fm(d.path,d.caseSensitive,d.end),g=s.match(o);if(!g)return null;let f=g[0],y=f.replace(/(.)\/+$/,"$1"),_=g.slice(1);return{params:h.reduce((w,A,T)=>{let{paramName:k,isOptional:B}=A;if(k==="*"){let j=_[T]||"";y=f.slice(0,f.length-j.length).replace(/(.)\/+$/,"$1")}const z=_[T];return B&&!z?w[k]=void 0:w[k]=(z||"").replace(/%2F/g,"/"),w},{}),pathname:f,pathnameBase:y,pattern:d}}function Fm(d,s,o){s===void 0&&(s=!1),o===void 0&&(o=!0),Ju(d==="*"||!d.endsWith("*")||d.endsWith("/*"),'Route path "'+d+'" will be treated as if it were '+('"'+d.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+d.replace(/\*$/,"/*")+'".'));let h=[],g="^"+d.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,_,C)=>(h.push({paramName:_,isOptional:C!=null}),C?"/?([^\\/]+)?":"/([^\\/]+)"));return d.endsWith("*")?(h.push({paramName:"*"}),g+=d==="*"||d==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?g+="\\/*$":d!==""&&d!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,s?void 0:"i"),h]}function Um(d){try{return d.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Ju(!1,'The URL path "'+d+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),d}}function k0(d,s){if(s==="/")return d;if(!d.toLowerCase().startsWith(s.toLowerCase()))return null;let o=s.endsWith("/")?s.length-1:s.length,h=d.charAt(o);return h&&h!=="/"?null:d.slice(o)||"/"}function zm(d,s){s===void 0&&(s="/");let{pathname:o,search:h="",hash:g=""}=typeof d=="string"?Os(d):d;return{pathname:o?o.startsWith("/")?o:Hm(o,s):s,search:Gm(h),hash:Ym(g)}}function Hm(d,s){let o=s.replace(/\/+$/,"").split("/");return d.split("/").forEach(g=>{g===".."?o.length>1&&o.pop():g!=="."&&o.push(g)}),o.length>1?o.join("/"):"/"}function Ou(d,s,o,h){return"Cannot include a '"+d+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(h)+"].  Please separate it out to the ")+("`to."+o+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Vm(d){return d.filter((s,o)=>o===0||s.route.path&&s.route.path.length>0)}function D0(d,s){let o=Vm(d);return s?o.map((h,g)=>g===o.length-1?h.pathname:h.pathnameBase):o.map(h=>h.pathnameBase)}function L0(d,s,o,h){h===void 0&&(h=!1);let g;typeof d=="string"?g=Os(d):(g=Ca({},d),on(!g.pathname||!g.pathname.includes("?"),Ou("?","pathname","search",g)),on(!g.pathname||!g.pathname.includes("#"),Ou("#","pathname","hash",g)),on(!g.search||!g.search.includes("#"),Ou("#","search","hash",g)));let f=d===""||g.pathname==="",y=f?"/":g.pathname,_;if(y==null)_=o;else{let T=s.length-1;if(!h&&y.startsWith("..")){let k=y.split("/");for(;k[0]==="..";)k.shift(),T-=1;g.pathname=k.join("/")}_=T>=0?s[T]:"/"}let C=zm(g,_),w=y&&y!=="/"&&y.endsWith("/"),A=(f||y===".")&&o.endsWith("/");return!C.pathname.endsWith("/")&&(w||A)&&(C.pathname+="/"),C}const Is=d=>d.join("/").replace(/\/\/+/g,"/"),Wm=d=>d.replace(/\/+$/,"").replace(/^\/*/,"/"),Gm=d=>!d||d==="?"?"":d.startsWith("?")?d:"?"+d,Ym=d=>!d||d==="#"?"":d.startsWith("#")?d:"#"+d;function Xm(d){return d!=null&&typeof d.status=="number"&&typeof d.statusText=="string"&&typeof d.internal=="boolean"&&"data"in d}const P0=["post","put","patch","delete"];new Set(P0);const $m=["get",...P0];new Set($m);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Aa(){return Aa=Object.assign?Object.assign.bind():function(d){for(var s=1;s<arguments.length;s++){var o=arguments[s];for(var h in o)Object.prototype.hasOwnProperty.call(o,h)&&(d[h]=o[h])}return d},Aa.apply(this,arguments)}const ed=le.createContext(null),Qm=le.createContext(null),Ia=le.createContext(null),$l=le.createContext(null),Rs=le.createContext({outlet:null,matches:[],isDataRoute:!1}),B0=le.createContext(null);function Ta(){return le.useContext($l)!=null}function Ql(){return Ta()||on(!1),le.useContext($l).location}function j0(d){le.useContext(Ia).static||le.useLayoutEffect(d)}function td(){let{isDataRoute:d}=le.useContext(Rs);return d?l2():qm()}function qm(){Ta()||on(!1);let d=le.useContext(ed),{basename:s,future:o,navigator:h}=le.useContext(Ia),{matches:g}=le.useContext(Rs),{pathname:f}=Ql(),y=JSON.stringify(D0(g,o.v7_relativeSplatPath)),_=le.useRef(!1);return j0(()=>{_.current=!0}),le.useCallback(function(w,A){if(A===void 0&&(A={}),!_.current)return;if(typeof w=="number"){h.go(w);return}let T=L0(w,JSON.parse(y),f,A.relative==="path");d==null&&s!=="/"&&(T.pathname=T.pathname==="/"?s:Is([s,T.pathname])),(A.replace?h.replace:h.push)(T,A.state,A)},[s,h,y,f,d])}function Km(d,s){return Zm(d,s)}function Zm(d,s,o,h){Ta()||on(!1);let{navigator:g}=le.useContext(Ia),{matches:f}=le.useContext(Rs),y=f[f.length-1],_=y?y.params:{};y&&y.pathname;let C=y?y.pathnameBase:"/";y&&y.route;let w=Ql(),A;if(s){var T;let F=typeof s=="string"?Os(s):s;C==="/"||(T=F.pathname)!=null&&T.startsWith(C)||on(!1),A=F}else A=w;let k=A.pathname||"/",B=k;if(C!=="/"){let F=C.replace(/^\//,"").split("/");B="/"+k.replace(/^\//,"").split("/").slice(F.length).join("/")}let z=Im(d,{pathname:B}),j=r2(z&&z.map(F=>Object.assign({},F,{params:Object.assign({},_,F.params),pathname:Is([C,g.encodeLocation?g.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?C:Is([C,g.encodeLocation?g.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),f,o,h);return s&&j?le.createElement($l.Provider,{value:{location:Aa({pathname:"/",search:"",hash:"",state:null,key:"default"},A),navigationType:Xi.Pop}},j):j}function Jm(){let d=a2(),s=Xm(d)?d.status+" "+d.statusText:d instanceof Error?d.message:JSON.stringify(d),o=d instanceof Error?d.stack:null,g={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return le.createElement(le.Fragment,null,le.createElement("h2",null,"Unexpected Application Error!"),le.createElement("h3",{style:{fontStyle:"italic"}},s),o?le.createElement("pre",{style:g},o):null,null)}const e2=le.createElement(Jm,null);class t2 extends le.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,o){return o.location!==s.location||o.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:o.error,location:o.location,revalidation:s.revalidation||o.revalidation}}componentDidCatch(s,o){console.error("React Router caught the following error during render",s,o)}render(){return this.state.error!==void 0?le.createElement(Rs.Provider,{value:this.props.routeContext},le.createElement(B0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n2(d){let{routeContext:s,match:o,children:h}=d,g=le.useContext(ed);return g&&g.static&&g.staticContext&&(o.route.errorElement||o.route.ErrorBoundary)&&(g.staticContext._deepestRenderedBoundaryId=o.route.id),le.createElement(Rs.Provider,{value:s},h)}function r2(d,s,o,h){var g;if(s===void 0&&(s=[]),o===void 0&&(o=null),h===void 0&&(h=null),d==null){var f;if(!o)return null;if(o.errors)d=o.matches;else if((f=h)!=null&&f.v7_partialHydration&&s.length===0&&!o.initialized&&o.matches.length>0)d=o.matches;else return null}let y=d,_=(g=o)==null?void 0:g.errors;if(_!=null){let A=y.findIndex(T=>T.route.id&&_?.[T.route.id]!==void 0);A>=0||on(!1),y=y.slice(0,Math.min(y.length,A+1))}let C=!1,w=-1;if(o&&h&&h.v7_partialHydration)for(let A=0;A<y.length;A++){let T=y[A];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(w=A),T.route.id){let{loaderData:k,errors:B}=o,z=T.route.loader&&k[T.route.id]===void 0&&(!B||B[T.route.id]===void 0);if(T.route.lazy||z){C=!0,w>=0?y=y.slice(0,w+1):y=[y[0]];break}}}return y.reduceRight((A,T,k)=>{let B,z=!1,j=null,F=null;o&&(B=_&&T.route.id?_[T.route.id]:void 0,j=T.route.errorElement||e2,C&&(w<0&&k===0?(c2("route-fallback"),z=!0,F=null):w===k&&(z=!0,F=T.route.hydrateFallbackElement||null)));let ie=s.concat(y.slice(0,k+1)),$=()=>{let W;return B?W=j:z?W=F:T.route.Component?W=le.createElement(T.route.Component,null):T.route.element?W=T.route.element:W=A,le.createElement(n2,{match:T,routeContext:{outlet:A,matches:ie,isDataRoute:o!=null},children:W})};return o&&(T.route.ErrorBoundary||T.route.errorElement||k===0)?le.createElement(t2,{location:o.location,revalidation:o.revalidation,component:j,error:B,children:$(),routeContext:{outlet:null,matches:ie,isDataRoute:!0}}):$()},null)}var F0=(function(d){return d.UseBlocker="useBlocker",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d})(F0||{}),U0=(function(d){return d.UseBlocker="useBlocker",d.UseLoaderData="useLoaderData",d.UseActionData="useActionData",d.UseRouteError="useRouteError",d.UseNavigation="useNavigation",d.UseRouteLoaderData="useRouteLoaderData",d.UseMatches="useMatches",d.UseRevalidator="useRevalidator",d.UseNavigateStable="useNavigate",d.UseRouteId="useRouteId",d})(U0||{});function i2(d){let s=le.useContext(ed);return s||on(!1),s}function s2(d){let s=le.useContext(Qm);return s||on(!1),s}function o2(d){let s=le.useContext(Rs);return s||on(!1),s}function z0(d){let s=o2(),o=s.matches[s.matches.length-1];return o.route.id||on(!1),o.route.id}function a2(){var d;let s=le.useContext(B0),o=s2(),h=z0();return s!==void 0?s:(d=o.errors)==null?void 0:d[h]}function l2(){let{router:d}=i2(F0.UseNavigateStable),s=z0(U0.UseNavigateStable),o=le.useRef(!1);return j0(()=>{o.current=!0}),le.useCallback(function(g,f){f===void 0&&(f={}),o.current&&(typeof g=="number"?d.navigate(g):d.navigate(g,Aa({fromRouteId:s},f)))},[d,s])}const Lf={};function c2(d,s,o){Lf[d]||(Lf[d]=!0)}function u2(d,s){d?.v7_startTransition,d?.v7_relativeSplatPath}function Hl(d){let{to:s,replace:o,state:h,relative:g}=d;Ta()||on(!1);let{future:f,static:y}=le.useContext(Ia),{matches:_}=le.useContext(Rs),{pathname:C}=Ql(),w=td(),A=L0(s,D0(_,f.v7_relativeSplatPath),C,g==="path"),T=JSON.stringify(A);return le.useEffect(()=>w(JSON.parse(T),{replace:o,state:h,relative:g}),[w,T,g,o,h]),null}function hi(d){on(!1)}function d2(d){let{basename:s="/",children:o=null,location:h,navigationType:g=Xi.Pop,navigator:f,static:y=!1,future:_}=d;Ta()&&on(!1);let C=s.replace(/^\/*/,"/"),w=le.useMemo(()=>({basename:C,navigator:f,static:y,future:Aa({v7_relativeSplatPath:!1},_)}),[C,_,f,y]);typeof h=="string"&&(h=Os(h));let{pathname:A="/",search:T="",hash:k="",state:B=null,key:z="default"}=h,j=le.useMemo(()=>{let F=k0(A,C);return F==null?null:{location:{pathname:F,search:T,hash:k,state:B,key:z},navigationType:g}},[C,A,T,k,B,z,g]);return j==null?null:le.createElement(Ia.Provider,{value:w},le.createElement($l.Provider,{children:o,value:j}))}function h2(d){let{children:s,location:o}=d;return Km(Vu(s),o)}new Promise(()=>{});function Vu(d,s){s===void 0&&(s=[]);let o=[];return le.Children.forEach(d,(h,g)=>{if(!le.isValidElement(h))return;let f=[...s,g];if(h.type===le.Fragment){o.push.apply(o,Vu(h.props.children,f));return}h.type!==hi&&on(!1),!h.props.index||!h.props.children||on(!1);let y={id:h.props.id||f.join("-"),caseSensitive:h.props.caseSensitive,element:h.props.element,Component:h.props.Component,index:h.props.index,path:h.props.path,loader:h.props.loader,action:h.props.action,errorElement:h.props.errorElement,ErrorBoundary:h.props.ErrorBoundary,hasErrorBoundary:h.props.ErrorBoundary!=null||h.props.errorElement!=null,shouldRevalidate:h.props.shouldRevalidate,handle:h.props.handle,lazy:h.props.lazy};h.props.children&&(y.children=Vu(h.props.children,f)),o.push(y)}),o}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const f2="6";try{window.__reactRouterVersion=f2}catch{}const g2="startTransition",Pf=ig[g2];function p2(d){let{basename:s,children:o,future:h,window:g}=d,f=le.useRef();f.current==null&&(f.current=Am({window:g,v5Compat:!0}));let y=f.current,[_,C]=le.useState({action:y.action,location:y.location}),{v7_startTransition:w}=h||{},A=le.useCallback(T=>{w&&Pf?Pf(()=>C(T)):C(T)},[C,w]);return le.useLayoutEffect(()=>y.listen(A),[y,A]),le.useEffect(()=>u2(h),[h]),le.createElement(d2,{basename:s,children:o,location:_.location,navigationType:_.action,navigator:y,future:h})}var Bf;(function(d){d.UseScrollRestoration="useScrollRestoration",d.UseSubmit="useSubmit",d.UseSubmitFetcher="useSubmitFetcher",d.UseFetcher="useFetcher",d.useViewTransitionState="useViewTransitionState"})(Bf||(Bf={}));var jf;(function(d){d.UseFetcher="useFetcher",d.UseFetchers="useFetchers",d.UseScrollRestoration="useScrollRestoration"})(jf||(jf={}));const sn=({children:d,onClick:s,variant:o="primary",size:h="md",fullWidth:g=!1,disabled:f=!1,type:y="button"})=>{const _="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",C={primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",success:"bg-green-600 text-white hover:bg-green-700 focus:ring-green-500",outline:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-blue-500"},w={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},A=f?"opacity-50 cursor-not-allowed":"cursor-pointer",T=g?"w-full":"";return M.jsx("button",{type:y,className:`
        ${_}
        ${C[o]||C.primary}
        ${w[h]||w.md}
        ${A}
        ${T}
      `,onClick:s,disabled:f,children:d})},m2=()=>{const[d,s]=le.useState(""),[o,h]=le.useState(""),[g,f]=le.useState(""),[y,_]=le.useState(!1),C=td(),{login:w}=Ns(),A=async T=>{T.preventDefault(),f(""),_(!0);try{const{user:k,error:B}=await w(d,o);if(B)throw B;if(!k)throw new Error("No user returned");if(k.role==="admin")C("/admin");else if(k.role==="teacher")C("/teacher");else throw new Error("User role not recognized")}catch(k){f(k.message||"Login failed"),_(!1)}};return M.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:M.jsxs("div",{className:"max-w-md w-full space-y-8",children:[M.jsx("div",{children:M.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Student Attendance System"})}),M.jsxs("form",{className:"mt-8 space-y-6",onSubmit:A,children:[M.jsx("input",{type:"email",placeholder:"Email",value:d,onChange:T=>s(T.target.value),required:!0,className:"appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm mb-2"}),M.jsx("input",{type:"password",placeholder:"Password",value:o,onChange:T=>h(T.target.value),required:!0,className:"appearance-none rounded relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm mb-2"}),g&&M.jsx("div",{className:"text-red-500 text-sm text-center",children:g}),M.jsx(sn,{type:"submit",variant:"primary",fullWidth:!0,disabled:y,children:y?"Signing in...":"Sign In"})]})]})})},x2=()=>{const{currentUser:d}=Ns(),{students:s,classes:o,attendance:h}=_o(),[g,f]=le.useState([]),[y,_]=le.useState(!1),[C,w]=le.useState(null),[A,T]=le.useState({name:"",email:"",password:"",username:"",role:"teacher",phone:"",profile_img:"",class_name:""}),[k,B]=le.useState(!1),[z,j]=le.useState(""),F=new Date().toISOString().split("T")[0],ie=h.filter(K=>K.date===F),$=new Set(ie.map(K=>K.studentId)).size,W=async()=>{const{data:K,error:Ee}=await Xt.from("users").select("*");Ee||f(K)};le.useEffect(()=>{W()},[]);const J=K=>{const{name:Ee,value:oe}=K.target;T(vt=>({...vt,[Ee]:oe}))},Ce=async K=>{K.preventDefault(),B(!0),j("");try{const{data:Ee,error:oe}=await Xt.auth.signUp({email:A.email,password:A.password});if(oe)throw oe;const{error:vt}=await Xt.from("users").insert([{auth_id:Ee.user.id,username:A.username||A.email,email:A.email,role:A.role,name:A.name,phone:A.phone||null,profile_img:A.profile_img||null,class_name:A.class_id||null}]);if(vt)throw vt;T({name:"",email:"",password:"",username:"",role:"teacher",phone:"",profile_img:"",class_id:""}),_(!1),W(),alert("User created successfully! They must confirm their email before logging in.")}catch(Ee){j(Ee.message||"An error occurred"),console.error(Ee)}finally{B(!1)}},he=async K=>{if(!window.confirm("Are you sure you want to delete this user?"))return;const{error:Ee}=await Xt.from("users").delete().eq("id",K);Ee||W()};return M.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 w-full max-w-full",children:[M.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Admin Dashboard"}),M.jsxs("p",{className:"mt-1 text-sm sm:text-base text-gray-600",children:["Welcome back, ",d.name]}),M.jsx("div",{className:"mt-4",children:M.jsx(sn,{onClick:()=>_(!0),variant:"primary",children:"+ Create User"})}),y&&M.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-50 flex items-center justify-center p-4 z-50",children:M.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Create New User"}),M.jsxs("form",{onSubmit:Ce,className:"space-y-4",children:[M.jsx("input",{name:"name",placeholder:"Full Name",value:A.name,onChange:J,required:!0,className:"w-full px-3 py-2 border rounded"}),M.jsx("input",{name:"username",placeholder:"Username",value:A.username,onChange:J,className:"w-full px-3 py-2 border rounded"}),M.jsx("input",{type:"email",name:"email",placeholder:"Email",value:A.email,onChange:J,required:!0,className:"w-full px-3 py-2 border rounded"}),M.jsx("input",{type:"password",name:"password",placeholder:"Password",value:A.password,onChange:J,required:!0,className:"w-full px-3 py-2 border rounded"}),M.jsx("input",{name:"phone",placeholder:"Phone",value:A.phone,onChange:J,className:"w-full px-3 py-2 border rounded"}),M.jsx("input",{name:"profile_img",placeholder:"Profile Image URL",value:A.profile_img,onChange:J,className:"w-full px-3 py-2 border rounded"}),M.jsxs("select",{name:"role",value:A.role,onChange:J,className:"w-full px-3 py-2 border rounded",children:[M.jsx("option",{value:"teacher",children:"Teacher"}),M.jsx("option",{value:"admin",children:"Admin"})]}),A.role==="teacher"&&M.jsxs("select",{name:"class_id",value:A.class_id,onChange:J,className:"w-full px-3 py-2 border rounded",children:[M.jsx("option",{value:"",children:"Select Class"}),o.map(K=>M.jsx("option",{value:K.name,children:K.name},K.id))]}),z&&M.jsx("p",{className:"text-red-500 text-sm",children:z}),M.jsxs("div",{className:"flex flex-col sm:flex-row justify-end sm:space-x-2 space-y-2 sm:space-y-0",children:[M.jsx(sn,{type:"button",variant:"secondary",onClick:()=>_(!1),children:"Cancel"}),M.jsx(sn,{type:"submit",variant:"primary",disabled:k,children:k?"Creating...":"Create User"})]})]})]})}),M.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3",children:[M.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Students"}),M.jsx("dd",{className:"mt-1 text-2xl sm:text-3xl font-semibold text-gray-900",children:s.length})]})}),M.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Total Classes"}),M.jsx("dd",{className:"mt-1 text-2xl sm:text-3xl font-semibold text-gray-900",children:o.length})]})}),M.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Students Present Today"}),M.jsxs("dd",{className:"mt-1 text-2xl sm:text-3xl font-semibold text-gray-900",children:[$," / ",s.length]})]})})]}),M.jsxs("div",{className:"mt-10",children:[M.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Manage Users"}),M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"min-w-full border text-sm sm:text-base",children:[M.jsx("thead",{className:"bg-gray-100",children:M.jsxs("tr",{children:[M.jsx("th",{className:"px-4 py-2 border text-left",children:"Name"}),M.jsx("th",{className:"px-4 py-2 border text-left",children:"Email"}),M.jsx("th",{className:"px-4 py-2 border text-left",children:"Role"}),M.jsx("th",{className:"px-4 py-2 border text-left",children:"Class"}),M.jsx("th",{className:"px-4 py-2 border text-left",children:"Actions"})]})}),M.jsxs("tbody",{children:[g.map(K=>M.jsxs("tr",{className:"text-center sm:text-left",children:[M.jsx("td",{className:"px-4 py-2 border",children:K.name}),M.jsx("td",{className:"px-4 py-2 border",children:K.email}),M.jsx("td",{className:"px-4 py-2 border",children:K.role}),M.jsx("td",{className:"px-4 py-2 border",children:K.class_name||"-"}),M.jsxs("td",{className:"px-4 py-2 border flex flex-col sm:flex-row justify-center sm:justify-start space-y-1 sm:space-y-0 sm:space-x-2",children:[M.jsx(sn,{variant:"secondary",onClick:()=>{T(K),w(K)},children:"Edit"}),M.jsx(sn,{variant:"danger",onClick:()=>he(K.id),children:"Delete"})]})]},K.id)),g.length===0&&M.jsx("tr",{children:M.jsx("td",{colSpan:"5",className:"px-4 py-2 border text-gray-500 text-center",children:"No users found"})})]})]})})]})]})},H0=({records:d,showClass:s=!1})=>{const{students:o,classes:h}=_o(),g=y=>{const _=o.find(C=>C.id===y);return _?_.name:"Unknown Student"},f=y=>{const _=o.find(w=>w.id===y);if(!_)return"Unknown Class";const C=h.find(w=>w.id===_.class_id);return C?C.name:"Unknown Class"};return M.jsx("div",{className:"overflow-x-auto",children:M.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[M.jsx("thead",{className:"bg-gray-50",children:M.jsxs("tr",{children:[M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Student"}),s&&M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Class"}),M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check In"}),M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Check Out"}),M.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),M.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:d.length>0?d.map(y=>M.jsxs("tr",{children:[M.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.date}),M.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:g(y.student_id)}),s&&M.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:f(y.student_id)}),M.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.time_in}),M.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.time_out||"Not checked out"}),M.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${y.time_out?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:y.time_out?"Complete":"In Progress"})})]},y.id)):M.jsx("tr",{children:M.jsx("td",{colSpan:s?6:5,className:"px-6 py-4 text-center text-sm text-gray-500",children:"No attendance records found"})})})]})})},w2=()=>{const{currentUser:d}=Ns(),{students:s,classes:o,attendance:h}=_o(),g=d.class_name,f=o.find(A=>A.name===g),y=f?s.filter(A=>A.class_id===f.id):[],_=new Date().toISOString().split("T")[0],C=h.filter(A=>{const T=s.find(k=>k.id===A.student_id);return A.date===_&&T?.class_id===f?.id}),w=new Set(C.map(A=>A.student_id)).size;return M.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[M.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900",children:"Teacher Dashboard"}),M.jsxs("p",{className:"mt-1 text-sm sm:text-base text-gray-600",children:["Welcome back, ",d.name]}),f?M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"mt-6",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900",children:f.name}),M.jsxs("p",{className:"text-sm text-gray-600",children:[y.length," students enrolled"]})]}),M.jsxs("div",{className:"mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2",children:[M.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Students in Class"}),M.jsx("dd",{className:"mt-1 text-2xl sm:text-3xl font-semibold text-gray-900",children:y.length})]})}),M.jsx("div",{className:"bg-white overflow-hidden shadow rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("dt",{className:"text-sm font-medium text-gray-500 truncate",children:"Students Present Today"}),M.jsxs("dd",{className:"mt-1 text-2xl sm:text-3xl font-semibold text-gray-900",children:[w," / ",y.length]})]})})]}),M.jsxs("div",{className:"mt-8 space-y-4",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Today's Attendance"}),M.jsx("div",{className:"overflow-x-auto",children:M.jsx(H0,{records:C,readOnly:!0})})]})]}):M.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:M.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center",children:[M.jsx("div",{className:"flex-shrink-0",children:M.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),M.jsxs("div",{className:"mt-3 sm:mt-0 sm:ml-3",children:[M.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"No class assigned"}),M.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:M.jsx("p",{children:"You haven't been assigned to a class yet. Please contact the administrator."})})]})]})}),M.jsx("h1",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mt-10",children:"Students"}),M.jsx("div",{className:"mt-6 bg-white shadow overflow-hidden rounded-md",children:M.jsx("ul",{className:"divide-y divide-gray-200",children:y.length>0?y.map(A=>M.jsx("li",{className:"px-4 sm:px-6 py-4",children:M.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-900",children:A.name}),M.jsxs("p",{className:"text-sm text-gray-500",children:["Class: ",g]})]}),M.jsx("div",{className:"flex space-x-2 mt-2 sm:mt-0"})]})},A.id)):M.jsx("li",{className:"px-4 py-4 text-center text-gray-500",children:"No students found."})})})]})};var Te;(function(d){d[d.QR_CODE=0]="QR_CODE",d[d.AZTEC=1]="AZTEC",d[d.CODABAR=2]="CODABAR",d[d.CODE_39=3]="CODE_39",d[d.CODE_93=4]="CODE_93",d[d.CODE_128=5]="CODE_128",d[d.DATA_MATRIX=6]="DATA_MATRIX",d[d.MAXICODE=7]="MAXICODE",d[d.ITF=8]="ITF",d[d.EAN_13=9]="EAN_13",d[d.EAN_8=10]="EAN_8",d[d.PDF_417=11]="PDF_417",d[d.RSS_14=12]="RSS_14",d[d.RSS_EXPANDED=13]="RSS_EXPANDED",d[d.UPC_A=14]="UPC_A",d[d.UPC_E=15]="UPC_E",d[d.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Te||(Te={}));var Ff=new Map([[Te.QR_CODE,"QR_CODE"],[Te.AZTEC,"AZTEC"],[Te.CODABAR,"CODABAR"],[Te.CODE_39,"CODE_39"],[Te.CODE_93,"CODE_93"],[Te.CODE_128,"CODE_128"],[Te.DATA_MATRIX,"DATA_MATRIX"],[Te.MAXICODE,"MAXICODE"],[Te.ITF,"ITF"],[Te.EAN_13,"EAN_13"],[Te.EAN_8,"EAN_8"],[Te.PDF_417,"PDF_417"],[Te.RSS_14,"RSS_14"],[Te.RSS_EXPANDED,"RSS_EXPANDED"],[Te.UPC_A,"UPC_A"],[Te.UPC_E,"UPC_E"],[Te.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Uf;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.URL=1]="URL"})(Uf||(Uf={}));function y2(d){return Object.values(Te).includes(d)}var $i;(function(d){d[d.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",d[d.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})($i||($i={}));var Br=(function(){function d(){}return d.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",d.SCAN_DEFAULT_FPS=2,d.DEFAULT_DISABLE_FLIP=!1,d.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,d.DEFAULT_SUPPORTED_SCAN_TYPE=[$i.SCAN_TYPE_CAMERA,$i.SCAN_TYPE_FILE],d})(),V0=(function(){function d(s,o){this.format=s,this.formatName=o}return d.prototype.toString=function(){return this.formatName},d.create=function(s){if(!Ff.has(s))throw"".concat(s," not in html5QrcodeSupportedFormatsTextMap");return new d(s,Ff.get(s))},d})(),zf=(function(){function d(){}return d.createFromText=function(s){var o={text:s};return{decodedText:s,result:o}},d.createFromQrcodeResult=function(s){return{decodedText:s.text,result:s}},d})(),Wu;(function(d){d[d.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",d[d.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",d[d.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Wu||(Wu={}));var W0=(function(){function d(){}return d.createFrom=function(s){return{errorMessage:s,type:Wu.UNKWOWN_ERROR}},d})(),G0=(function(){function d(s){this.verbose=s}return d.prototype.log=function(s){this.verbose&&console.log(s)},d.prototype.warn=function(s){this.verbose&&console.warn(s)},d.prototype.logError=function(s,o){(this.verbose||o===!0)&&console.error(s)},d.prototype.logErrors=function(s){if(s.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(s)},d})();function Kr(d){return typeof d>"u"||d===null}function v2(d,s,o){return d>o?o:d<s?s:d}var Eo=(function(){function d(){}return d.codeParseError=function(s){return"QR code parse error, error = ".concat(s)},d.errorGettingUserMedia=function(s){return"Error getting userMedia, error = ".concat(s)},d.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},d.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},d.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},d.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},d.scannerPaused=function(){return"Scanner paused"},d})(),At=(function(){function d(){}return d.scanningStatus=function(){return"Scanning"},d.idleStatus=function(){return"Idle"},d.errorStatus=function(){return"Error"},d.permissionStatus=function(){return"Permission"},d.noCameraFoundErrorStatus=function(){return"No Cameras"},d.lastMatch=function(s){return"Last Match: ".concat(s)},d.codeScannerTitle=function(){return"Code Scanner"},d.cameraPermissionTitle=function(){return"Request Camera Permissions"},d.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},d.noCameraFound=function(){return"No camera found"},d.scanButtonStopScanningText=function(){return"Stop Scanning"},d.scanButtonStartScanningText=function(){return"Start Scanning"},d.torchOnButton=function(){return"Switch On Torch"},d.torchOffButton=function(){return"Switch Off Torch"},d.torchOnFailedMessage=function(){return"Failed to turn on torch"},d.torchOffFailedMessage=function(){return"Failed to turn off torch"},d.scanButtonScanningStarting=function(){return"Launching Camera..."},d.textIfCameraScanSelected=function(){return"Scan an Image File"},d.textIfFileScanSelected=function(){return"Scan using camera directly"},d.selectCamera=function(){return"Select Camera"},d.fileSelectionChooseImage=function(){return"Choose Image"},d.fileSelectionChooseAnother=function(){return"Choose Another"},d.fileSelectionNoImageSelected=function(){return"No image choosen"},d.anonymousCameraPrefix=function(){return"Anonymous Camera"},d.dragAndDropMessage=function(){return"Or drop an image to scan"},d.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},d.zoom=function(){return"zoom"},d.loadingImage=function(){return"Loading image..."},d.cameraScanAltText=function(){return"Camera based scan"},d.fileScanAltText=function(){return"Fule based scan"},d})(),Hf=(function(){function d(){}return d.poweredBy=function(){return"Powered by "},d.reportIssues=function(){return"Report issues"},d})(),Y0=(function(){function d(){}return d.isMediaStreamConstraintsValid=function(s,o){if(typeof s!="object"){var h=typeof s;return o.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(h,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(g),y=Object.keys(s),_=0,C=y;_<C.length;_++){var w=C[_];if(f.has(w))return o.logError("".concat(w," is not supported videoConstaints."),!0),!1}return!0},d})(),xa={exports:{}},E2=xa.exports,Vf;function C2(){return Vf||(Vf=1,(function(d,s){(function(o,h){h(s)})(E2,(function(o){function h(b){return b==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,e){b.__proto__=e}||function(b,e){for(var n in e)e.hasOwnProperty(n)&&(b[n]=e[n])};function f(b,e){g(b,e);function n(){this.constructor=b}b.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function y(b,e){var n=Object.setPrototypeOf;n?n(b,e):b.__proto__=e}function _(b,e){e===void 0&&(e=b.constructor);var n=Error.captureStackTrace;n&&n(b,e)}var C=(function(b){f(e,b);function e(n){var r=this.constructor,a=b.call(this,n)||this;return Object.defineProperty(a,"name",{value:r.name,enumerable:!1}),y(a,r.prototype),_(a),a}return e})(Error);class w extends C{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}w.kind="Exception";class A extends w{}A.kind="ArgumentException";class T extends w{}T.kind="IllegalArgumentException";class k{constructor(e){if(this.binarizer=e,e===null)throw new T("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,n){return this.binarizer.getBlackRow(e,n)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,n,r,a){const l=this.binarizer.getLuminanceSource().crop(e,n,r,a);return new k(this.binarizer.createBinarizer(l))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new k(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new k(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class B extends w{static getChecksumInstance(){return new B}}B.kind="ChecksumException";class z{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class j{static arraycopy(e,n,r,a,l){for(;l--;)r[a++]=e[n++]}static currentTimeMillis(){return Date.now()}}class F extends w{}F.kind="IndexOutOfBoundsException";class ie extends F{constructor(e=void 0,n=void 0){super(n),this.index=e,this.message=n}}ie.kind="ArrayIndexOutOfBoundsException";class ${static fill(e,n){for(let r=0,a=e.length;r<a;r++)e[r]=n}static fillWithin(e,n,r,a){$.rangeCheck(e.length,n,r);for(let l=n;l<r;l++)e[l]=a}static rangeCheck(e,n,r){if(n>r)throw new T("fromIndex("+n+") > toIndex("+r+")");if(n<0)throw new ie(n);if(r>e)throw new ie(r)}static asList(...e){return e}static create(e,n,r){return Array.from({length:e}).map(l=>Array.from({length:n}).fill(r))}static createInt32Array(e,n,r){return Array.from({length:e}).map(l=>Int32Array.from({length:n}).fill(r))}static equals(e,n){if(!e||!n||!e.length||!n.length||e.length!==n.length)return!1;for(let r=0,a=e.length;r<a;r++)if(e[r]!==n[r])return!1;return!0}static hashCode(e){if(e===null)return 0;let n=1;for(const r of e)n=31*n+r;return n}static fillUint8Array(e,n){for(let r=0;r!==e.length;r++)e[r]=n}static copyOf(e,n){return e.slice(0,n)}static copyOfUint8Array(e,n){if(e.length<=n){const r=new Uint8Array(n);return r.set(e),r}return e.slice(0,n)}static copyOfRange(e,n,r){const a=r-n,l=new Int32Array(a);return j.arraycopy(e,n,l,0,a),l}static binarySearch(e,n,r){r===void 0&&(r=$.numberComparator);let a=0,l=e.length-1;for(;a<=l;){const c=l+a>>1,p=r(n,e[c]);if(p>0)a=c+1;else if(p<0)l=c-1;else return c}return-a-1}static numberComparator(e,n){return e-n}}class W{static numberOfTrailingZeros(e){let n;if(e===0)return 32;let r=31;return n=e<<16,n!==0&&(r-=16,e=n),n=e<<8,n!==0&&(r-=8,e=n),n=e<<4,n!==0&&(r-=4,e=n),n=e<<2,n!==0&&(r-=2,e=n),r-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let n=1;return e>>>16||(n+=16,e<<=16),e>>>24||(n+=8,e<<=8),e>>>28||(n+=4,e<<=4),e>>>30||(n+=2,e<<=2),n-=e>>>31,n}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,n){return Math.trunc(e/n)}static parseInt(e,n=void 0){return parseInt(e,n)}}W.MIN_VALUE_32_BITS=-2147483648,W.MAX_VALUE=Number.MAX_SAFE_INTEGER;class J{constructor(e,n){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,n==null?this.bits=J.makeArray(e):this.bits=n)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const n=J.makeArray(e);j.arraycopy(this.bits,0,n,0,this.bits.length),this.bits=n}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const n=this.size;if(e>=n)return n;const r=this.bits;let a=Math.floor(e/32),l=r[a];l&=~((1<<(e&31))-1);const c=r.length;for(;l===0;){if(++a===c)return n;l=r[a]}const p=a*32+W.numberOfTrailingZeros(l);return p>n?n:p}getNextUnset(e){const n=this.size;if(e>=n)return n;const r=this.bits;let a=Math.floor(e/32),l=~r[a];l&=~((1<<(e&31))-1);const c=r.length;for(;l===0;){if(++a===c)return n;l=~r[a]}const p=a*32+W.numberOfTrailingZeros(l);return p>n?n:p}setBulk(e,n){this.bits[Math.floor(e/32)]=n}setRange(e,n){if(n<e||e<0||n>this.size)throw new T;if(n===e)return;n--;const r=Math.floor(e/32),a=Math.floor(n/32),l=this.bits;for(let c=r;c<=a;c++){const p=c>r?0:e&31,v=(2<<(c<a?31:n&31))-(1<<p);l[c]|=v}}clear(){const e=this.bits.length,n=this.bits;for(let r=0;r<e;r++)n[r]=0}isRange(e,n,r){if(n<e||e<0||n>this.size)throw new T;if(n===e)return!0;n--;const a=Math.floor(e/32),l=Math.floor(n/32),c=this.bits;for(let p=a;p<=l;p++){const x=p>a?0:e&31,I=(2<<(p<l?31:n&31))-(1<<x)&4294967295;if((c[p]&I)!==(r?I:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,n){if(n<0||n>32)throw new T("Num bits must be between 0 and 32");this.ensureCapacity(this.size+n);for(let r=n;r>0;r--)this.appendBit((e>>r-1&1)===1)}appendBitArray(e){const n=e.size;this.ensureCapacity(this.size+n);for(let r=0;r<n;r++)this.appendBit(e.get(r))}xor(e){if(this.size!==e.size)throw new T("Sizes don't match");const n=this.bits;for(let r=0,a=n.length;r<a;r++)n[r]^=e.bits[r]}toBytes(e,n,r,a){for(let l=0;l<a;l++){let c=0;for(let p=0;p<8;p++)this.get(e)&&(c|=1<<7-p),e++;n[r+l]=c}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),n=Math.floor((this.size-1)/32),r=n+1,a=this.bits;for(let l=0;l<r;l++){let c=a[l];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,e[n-l]=c}if(this.size!==r*32){const l=r*32-this.size;let c=e[0]>>>l;for(let p=1;p<r;p++){const x=e[p];c|=x<<32-l,e[p-1]=c,c=x>>>l}e[r-1]=c}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof J))return!1;const n=e;return this.size===n.size&&$.equals(this.bits,n.bits)}hashCode(){return 31*this.size+$.hashCode(this.bits)}toString(){let e="";for(let n=0,r=this.size;n<r;n++)(n&7)===0&&(e+=" "),e+=this.get(n)?"X":".";return e}clone(){return new J(this.size,this.bits.slice())}}var Ce;(function(b){b[b.OTHER=0]="OTHER",b[b.PURE_BARCODE=1]="PURE_BARCODE",b[b.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",b[b.TRY_HARDER=3]="TRY_HARDER",b[b.CHARACTER_SET=4]="CHARACTER_SET",b[b.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",b[b.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",b[b.ASSUME_GS1=7]="ASSUME_GS1",b[b.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",b[b.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",b[b.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ce||(Ce={}));var he=Ce;class K extends w{static getFormatInstance(){return new K}}K.kind="FormatException";var Ee;(function(b){b[b.Cp437=0]="Cp437",b[b.ISO8859_1=1]="ISO8859_1",b[b.ISO8859_2=2]="ISO8859_2",b[b.ISO8859_3=3]="ISO8859_3",b[b.ISO8859_4=4]="ISO8859_4",b[b.ISO8859_5=5]="ISO8859_5",b[b.ISO8859_6=6]="ISO8859_6",b[b.ISO8859_7=7]="ISO8859_7",b[b.ISO8859_8=8]="ISO8859_8",b[b.ISO8859_9=9]="ISO8859_9",b[b.ISO8859_10=10]="ISO8859_10",b[b.ISO8859_11=11]="ISO8859_11",b[b.ISO8859_13=12]="ISO8859_13",b[b.ISO8859_14=13]="ISO8859_14",b[b.ISO8859_15=14]="ISO8859_15",b[b.ISO8859_16=15]="ISO8859_16",b[b.SJIS=16]="SJIS",b[b.Cp1250=17]="Cp1250",b[b.Cp1251=18]="Cp1251",b[b.Cp1252=19]="Cp1252",b[b.Cp1256=20]="Cp1256",b[b.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",b[b.UTF8=22]="UTF8",b[b.ASCII=23]="ASCII",b[b.Big5=24]="Big5",b[b.GB18030=25]="GB18030",b[b.EUC_KR=26]="EUC_KR"})(Ee||(Ee={}));class oe{constructor(e,n,r,...a){this.valueIdentifier=e,this.name=r,typeof n=="number"?this.values=Int32Array.from([n]):this.values=n,this.otherEncodingNames=a,oe.VALUE_IDENTIFIER_TO_ECI.set(e,this),oe.NAME_TO_ECI.set(r,this);const l=this.values;for(let c=0,p=l.length;c!==p;c++){const x=l[c];oe.VALUES_TO_ECI.set(x,this)}for(const c of a)oe.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new K("incorect value");const n=oe.VALUES_TO_ECI.get(e);if(n===void 0)throw new K("incorect value");return n}static getCharacterSetECIByName(e){const n=oe.NAME_TO_ECI.get(e);if(n===void 0)throw new K("incorect value");return n}equals(e){if(!(e instanceof oe))return!1;const n=e;return this.getName()===n.getName()}}oe.VALUE_IDENTIFIER_TO_ECI=new Map,oe.VALUES_TO_ECI=new Map,oe.NAME_TO_ECI=new Map,oe.Cp437=new oe(Ee.Cp437,Int32Array.from([0,2]),"Cp437"),oe.ISO8859_1=new oe(Ee.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),oe.ISO8859_2=new oe(Ee.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),oe.ISO8859_3=new oe(Ee.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),oe.ISO8859_4=new oe(Ee.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),oe.ISO8859_5=new oe(Ee.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),oe.ISO8859_6=new oe(Ee.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),oe.ISO8859_7=new oe(Ee.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),oe.ISO8859_8=new oe(Ee.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),oe.ISO8859_9=new oe(Ee.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),oe.ISO8859_10=new oe(Ee.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),oe.ISO8859_11=new oe(Ee.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),oe.ISO8859_13=new oe(Ee.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),oe.ISO8859_14=new oe(Ee.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),oe.ISO8859_15=new oe(Ee.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),oe.ISO8859_16=new oe(Ee.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),oe.SJIS=new oe(Ee.SJIS,20,"SJIS","Shift_JIS"),oe.Cp1250=new oe(Ee.Cp1250,21,"Cp1250","windows-1250"),oe.Cp1251=new oe(Ee.Cp1251,22,"Cp1251","windows-1251"),oe.Cp1252=new oe(Ee.Cp1252,23,"Cp1252","windows-1252"),oe.Cp1256=new oe(Ee.Cp1256,24,"Cp1256","windows-1256"),oe.UnicodeBigUnmarked=new oe(Ee.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),oe.UTF8=new oe(Ee.UTF8,26,"UTF8","UTF-8"),oe.ASCII=new oe(Ee.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),oe.Big5=new oe(Ee.Big5,28,"Big5"),oe.GB18030=new oe(Ee.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),oe.EUC_KR=new oe(Ee.EUC_KR,30,"EUC_KR","EUC-KR");class vt extends w{}vt.kind="UnsupportedOperationException";class ut{static decode(e,n){const r=this.encodingName(n);return this.customDecoder?this.customDecoder(e,r):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(r)?this.decodeFallback(e,r):new TextDecoder(r).decode(e)}static shouldDecodeOnFallback(e){return!ut.isBrowser()&&e==="ISO-8859-1"}static encode(e,n){const r=this.encodingName(n);return this.customEncoder?this.customEncoder(e,r):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof oe?e:oe.getCharacterSetECIByName(e)}static decodeFallback(e,n){const r=this.encodingCharacterSet(n);if(ut.isDecodeFallbackSupported(r)){let a="";for(let l=0,c=e.length;l<c;l++){let p=e[l].toString(16);p.length<2&&(p="0"+p),a+="%"+p}return decodeURIComponent(a)}if(r.equals(oe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new vt(`Encoding ${this.encodingName(n)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(oe.UTF8)||e.equals(oe.ISO8859_1)||e.equals(oe.ASCII)}static encodeFallback(e){const r=btoa(unescape(encodeURIComponent(e))).split(""),a=[];for(let l=0;l<r.length;l++)a.push(r[l].charCodeAt(0));return new Uint8Array(a)}}class ke{static castAsNonUtf8Char(e,n=null){const r=n?n.getName():this.ISO88591;return ut.decode(new Uint8Array([e]),r)}static guessEncoding(e,n){if(n!=null&&n.get(he.CHARACTER_SET)!==void 0)return n.get(he.CHARACTER_SET).toString();const r=e.length;let a=!0,l=!0,c=!0,p=0,x=0,v=0,I=0,N=0,R=0,L=0,U=0,V=0,Y=0,ee=0;const ge=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let pe=0;pe<r&&(a||l||c);pe++){const ue=e[pe]&255;c&&(p>0?(ue&128)===0?c=!1:p--:(ue&128)!==0&&((ue&64)===0?c=!1:(p++,(ue&32)===0?x++:(p++,(ue&16)===0?v++:(p++,(ue&8)===0?I++:c=!1))))),a&&(ue>127&&ue<160?a=!1:ue>159&&(ue<192||ue===215||ue===247)&&ee++),l&&(N>0?ue<64||ue===127||ue>252?l=!1:N--:ue===128||ue===160||ue>239?l=!1:ue>160&&ue<224?(R++,U=0,L++,L>V&&(V=L)):ue>127?(N++,L=0,U++,U>Y&&(Y=U)):(L=0,U=0))}return c&&p>0&&(c=!1),l&&N>0&&(l=!1),c&&(ge||x+v+I>0)?ke.UTF8:l&&(ke.ASSUME_SHIFT_JIS||V>=3||Y>=3)?ke.SHIFT_JIS:a&&l?V===2&&R===2||ee*10>=r?ke.SHIFT_JIS:ke.ISO88591:a?ke.ISO88591:l?ke.SHIFT_JIS:c?ke.UTF8:ke.PLATFORM_DEFAULT_ENCODING}static format(e,...n){let r=-1;function a(c,p,x,v,I,N){if(c==="%%")return"%";if(n[++r]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let R=I?parseInt(I.substr(1)):void 0,L;switch(N){case"s":L=n[r];break;case"c":L=n[r][0];break;case"f":L=parseFloat(n[r]).toFixed(c);break;case"p":L=parseFloat(n[r]).toPrecision(c);break;case"e":L=parseFloat(n[r]).toExponential(c);break;case"x":L=parseInt(n[r]).toString(R||16);break;case"d":L=parseFloat(parseInt(n[r],R||10).toPrecision(c)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(R);let U=parseInt(x),V=x&&x[0]+""=="0"?"0":" ";for(;L.length<U;)L=p!==void 0?L+V:V+L;return L}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,a)}static getBytes(e,n){return ut.encode(e,n)}static getCharCode(e,n=0){return e.charCodeAt(n)}static getCharAt(e){return String.fromCharCode(e)}}ke.SHIFT_JIS=oe.SJIS.getName(),ke.GB2312="GB2312",ke.ISO88591=oe.ISO8859_1.getName(),ke.EUC_JP="EUC_JP",ke.UTF8=oe.UTF8.getName(),ke.PLATFORM_DEFAULT_ENCODING=ke.UTF8,ke.ASSUME_SHIFT_JIS=!1;class Ye{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ke.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,n,r){for(let a=n;n<n+r;a++)this.append(e[a]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+1)}substring(e,n){return this.value.substring(e,n)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,n){this.value=this.value.substr(0,e)+n+this.value.substr(e+n.length)}}class Ze{constructor(e,n,r,a){if(this.width=e,this.height=n,this.rowSize=r,this.bits=a,n==null&&(n=e),this.height=n,e<1||n<1)throw new T("Both dimensions must be greater than 0");r==null&&(r=Math.floor((e+31)/32)),this.rowSize=r,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const n=e.length,r=e[0].length,a=new Ze(r,n);for(let l=0;l<n;l++){const c=e[l];for(let p=0;p<r;p++)c[p]&&a.set(p,l)}return a}static parseFromString(e,n,r){if(e===null)throw new T("stringRepresentation cannot be null");const a=new Array(e.length);let l=0,c=0,p=-1,x=0,v=0;for(;v<e.length;)if(e.charAt(v)===`
`||e.charAt(v)==="\r"){if(l>c){if(p===-1)p=l-c;else if(l-c!==p)throw new T("row lengths do not match");c=l,x++}v++}else if(e.substring(v,v+n.length)===n)v+=n.length,a[l]=!0,l++;else if(e.substring(v,v+r.length)===r)v+=r.length,a[l]=!1,l++;else throw new T("illegal character encountered: "+e.substring(v));if(l>c){if(p===-1)p=l-c;else if(l-c!==p)throw new T("row lengths do not match");x++}const I=new Ze(p,x);for(let N=0;N<l;N++)a[N]&&I.set(Math.floor(N%p),Math.floor(N/p));return I}get(e,n){const r=n*this.rowSize+Math.floor(e/32);return(this.bits[r]>>>(e&31)&1)!==0}set(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]|=1<<(e&31)&4294967295}unset(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]&=~(1<<(e&31)&4294967295)}flip(e,n){const r=n*this.rowSize+Math.floor(e/32);this.bits[r]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new T("input matrix dimensions do not match");const n=new J(Math.floor(this.width/32)+1),r=this.rowSize,a=this.bits;for(let l=0,c=this.height;l<c;l++){const p=l*r,x=e.getRow(l,n).getBitArray();for(let v=0;v<r;v++)a[p+v]^=x[v]}}clear(){const e=this.bits,n=e.length;for(let r=0;r<n;r++)e[r]=0}setRegion(e,n,r,a){if(n<0||e<0)throw new T("Left and top must be nonnegative");if(a<1||r<1)throw new T("Height and width must be at least 1");const l=e+r,c=n+a;if(c>this.height||l>this.width)throw new T("The region must fit inside the matrix");const p=this.rowSize,x=this.bits;for(let v=n;v<c;v++){const I=v*p;for(let N=e;N<l;N++)x[I+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(e,n){n==null||n.getSize()<this.width?n=new J(this.width):n.clear();const r=this.rowSize,a=this.bits,l=e*r;for(let c=0;c<r;c++)n.setBulk(c*32,a[l+c]);return n}setRow(e,n){j.arraycopy(n.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),n=this.getHeight();let r=new J(e),a=new J(e);for(let l=0,c=Math.floor((n+1)/2);l<c;l++)r=this.getRow(l,r),a=this.getRow(n-1-l,a),r.reverse(),a.reverse(),this.setRow(l,a),this.setRow(n-1-l,r)}getEnclosingRectangle(){const e=this.width,n=this.height,r=this.rowSize,a=this.bits;let l=e,c=n,p=-1,x=-1;for(let v=0;v<n;v++)for(let I=0;I<r;I++){const N=a[v*r+I];if(N!==0){if(v<c&&(c=v),v>x&&(x=v),I*32<l){let R=0;for(;(N<<31-R&4294967295)===0;)R++;I*32+R<l&&(l=I*32+R)}if(I*32+31>p){let R=31;for(;!(N>>>R);)R--;I*32+R>p&&(p=I*32+R)}}}return p<l||x<c?null:Int32Array.from([l,c,p-l+1,x-c+1])}getTopLeftOnBit(){const e=this.rowSize,n=this.bits;let r=0;for(;r<n.length&&n[r]===0;)r++;if(r===n.length)return null;const a=r/e;let l=r%e*32;const c=n[r];let p=0;for(;(c<<31-p&4294967295)===0;)p++;return l+=p,Int32Array.from([l,a])}getBottomRightOnBit(){const e=this.rowSize,n=this.bits;let r=n.length-1;for(;r>=0&&n[r]===0;)r--;if(r<0)return null;const a=Math.floor(r/e);let l=Math.floor(r%e)*32;const c=n[r];let p=31;for(;!(c>>>p);)p--;return l+=p,Int32Array.from([l,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof Ze))return!1;const n=e;return this.width===n.width&&this.height===n.height&&this.rowSize===n.rowSize&&$.equals(this.bits,n.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+$.hashCode(this.bits),e}toString(e="X ",n="  ",r=`
`){return this.buildToString(e,n,r)}buildToString(e,n,r){let a=new Ye;for(let l=0,c=this.height;l<c;l++){for(let p=0,x=this.width;p<x;p++)a.append(this.get(p,l)?e:n);a.append(r)}return a.toString()}clone(){return new Ze(this.width,this.height,this.rowSize,this.bits.slice())}}class re extends w{static getNotFoundInstance(){return new re}}re.kind="NotFoundException";class st extends z{constructor(e){super(e),this.luminances=st.EMPTY,this.buckets=new Int32Array(st.LUMINANCE_BUCKETS)}getBlackRow(e,n){const r=this.getLuminanceSource(),a=r.getWidth();n==null||n.getSize()<a?n=new J(a):n.clear(),this.initArrays(a);const l=r.getRow(e,this.luminances),c=this.buckets;for(let x=0;x<a;x++)c[(l[x]&255)>>st.LUMINANCE_SHIFT]++;const p=st.estimateBlackPoint(c);if(a<3)for(let x=0;x<a;x++)(l[x]&255)<p&&n.set(x);else{let x=l[0]&255,v=l[1]&255;for(let I=1;I<a-1;I++){const N=l[I+1]&255;(v*4-x-N)/2<p&&n.set(I),x=v,v=N}}return n}getBlackMatrix(){const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight(),a=new Ze(n,r);this.initArrays(n);const l=this.buckets;for(let x=1;x<5;x++){const v=Math.floor(r*x/5),I=e.getRow(v,this.luminances),N=Math.floor(n*4/5);for(let R=Math.floor(n/5);R<N;R++){const L=I[R]&255;l[L>>st.LUMINANCE_SHIFT]++}}const c=st.estimateBlackPoint(l),p=e.getMatrix();for(let x=0;x<r;x++){const v=x*n;for(let I=0;I<n;I++)(p[v+I]&255)<c&&a.set(I,x)}return a}createBinarizer(e){return new st(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const n=this.buckets;for(let r=0;r<st.LUMINANCE_BUCKETS;r++)n[r]=0}static estimateBlackPoint(e){const n=e.length;let r=0,a=0,l=0;for(let I=0;I<n;I++)e[I]>l&&(a=I,l=e[I]),e[I]>r&&(r=e[I]);let c=0,p=0;for(let I=0;I<n;I++){const N=I-a,R=e[I]*N*N;R>p&&(c=I,p=R)}if(a>c){const I=a;a=c,c=I}if(c-a<=n/16)throw new re;let x=c-1,v=-1;for(let I=c-1;I>a;I--){const N=I-a,R=N*N*(c-I)*(r-e[I]);R>v&&(x=I,v=R)}return x<<st.LUMINANCE_SHIFT}}st.LUMINANCE_BITS=5,st.LUMINANCE_SHIFT=8-st.LUMINANCE_BITS,st.LUMINANCE_BUCKETS=1<<st.LUMINANCE_BITS,st.EMPTY=Uint8ClampedArray.from([0]);class _e extends st{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),n=e.getWidth(),r=e.getHeight();if(n>=_e.MINIMUM_DIMENSION&&r>=_e.MINIMUM_DIMENSION){const a=e.getMatrix();let l=n>>_e.BLOCK_SIZE_POWER;(n&_e.BLOCK_SIZE_MASK)!==0&&l++;let c=r>>_e.BLOCK_SIZE_POWER;(r&_e.BLOCK_SIZE_MASK)!==0&&c++;const p=_e.calculateBlackPoints(a,l,c,n,r),x=new Ze(n,r);_e.calculateThresholdForBlock(a,l,c,n,r,p,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new _e(e)}static calculateThresholdForBlock(e,n,r,a,l,c,p){const x=l-_e.BLOCK_SIZE,v=a-_e.BLOCK_SIZE;for(let I=0;I<r;I++){let N=I<<_e.BLOCK_SIZE_POWER;N>x&&(N=x);const R=_e.cap(I,2,r-3);for(let L=0;L<n;L++){let U=L<<_e.BLOCK_SIZE_POWER;U>v&&(U=v);const V=_e.cap(L,2,n-3);let Y=0;for(let ge=-2;ge<=2;ge++){const pe=c[R+ge];Y+=pe[V-2]+pe[V-1]+pe[V]+pe[V+1]+pe[V+2]}const ee=Y/25;_e.thresholdBlock(e,U,N,ee,a,p)}}}static cap(e,n,r){return e<n?n:e>r?r:e}static thresholdBlock(e,n,r,a,l,c){for(let p=0,x=r*l+n;p<_e.BLOCK_SIZE;p++,x+=l)for(let v=0;v<_e.BLOCK_SIZE;v++)(e[x+v]&255)<=a&&c.set(n+v,r+p)}static calculateBlackPoints(e,n,r,a,l){const c=l-_e.BLOCK_SIZE,p=a-_e.BLOCK_SIZE,x=new Array(r);for(let v=0;v<r;v++){x[v]=new Int32Array(n);let I=v<<_e.BLOCK_SIZE_POWER;I>c&&(I=c);for(let N=0;N<n;N++){let R=N<<_e.BLOCK_SIZE_POWER;R>p&&(R=p);let L=0,U=255,V=0;for(let ee=0,ge=I*a+R;ee<_e.BLOCK_SIZE;ee++,ge+=a){for(let pe=0;pe<_e.BLOCK_SIZE;pe++){const ue=e[ge+pe]&255;L+=ue,ue<U&&(U=ue),ue>V&&(V=ue)}if(V-U>_e.MIN_DYNAMIC_RANGE)for(ee++,ge+=a;ee<_e.BLOCK_SIZE;ee++,ge+=a)for(let pe=0;pe<_e.BLOCK_SIZE;pe++)L+=e[ge+pe]&255}let Y=L>>_e.BLOCK_SIZE_POWER*2;if(V-U<=_e.MIN_DYNAMIC_RANGE&&(Y=U/2,v>0&&N>0)){const ee=(x[v-1][N]+2*x[v][N-1]+x[v-1][N-1])/4;U<ee&&(Y=ee)}x[v][N]=Y}}return x}}_e.BLOCK_SIZE_POWER=3,_e.BLOCK_SIZE=1<<_e.BLOCK_SIZE_POWER,_e.BLOCK_SIZE_MASK=_e.BLOCK_SIZE-1,_e.MINIMUM_DIMENSION=_e.BLOCK_SIZE*5,_e.MIN_DYNAMIC_RANGE=24;class ye{constructor(e,n){this.width=e,this.height=n}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,n,r,a){throw new vt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new vt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new vt("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let n=new Ye;for(let r=0;r<this.height;r++){const a=this.getRow(r,e);for(let l=0;l<this.width;l++){const c=a[l]&255;let p;c<64?p="#":c<128?p="+":c<192?p=".":p=" ",n.append(p)}n.append(`
`)}return n.toString()}}class Re extends ye{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,n){const r=this.delegate.getRow(e,n),a=this.getWidth();for(let l=0;l<a;l++)r[l]=255-(r[l]&255);return r}getMatrix(){const e=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),r=new Uint8ClampedArray(n);for(let a=0;a<n;a++)r[a]=255-(e[a]&255);return r}isCropSupported(){return this.delegate.isCropSupported()}crop(e,n,r,a){return new Re(this.delegate.crop(e,n,r,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Re(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Re(this.delegate.rotateCounterClockwise45())}}class ve extends ye{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=ve.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const n=e.getContext("2d").getImageData(0,0,e.width,e.height);return ve.toGrayscaleBuffer(n.data,e.width,e.height)}static toGrayscaleBuffer(e,n,r){const a=new Uint8ClampedArray(n*r);for(let l=0,c=0,p=e.length;l<p;l+=4,c++){let x;if(e[l+3]===0)x=255;else{const I=e[l],N=e[l+1],R=e[l+2];x=306*I+601*N+117*R+512>>10}a[c]=x}return a}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const r=this.getWidth(),a=e*r;return n===null?n=this.buffer.slice(a,a+r):(n.length<r&&(n=new Uint8ClampedArray(r)),n.set(this.buffer.slice(a,a+r))),n}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,n,r,a){return super.crop(e,n,r,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const n=this.getTempCanvasElement(),r=n.getContext("2d"),a=e*ve.DEGREE_TO_RADIANS,l=this.canvas.width,c=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(a))*l+Math.abs(Math.sin(a))*c),x=Math.ceil(Math.abs(Math.sin(a))*l+Math.abs(Math.cos(a))*c);return n.width=p,n.height=x,r.translate(p/2,x/2),r.rotate(a),r.drawImage(this.canvas,l/-2,c/-2),this.buffer=ve.makeBufferFromCanvasImageData(n),this}invert(){return new Re(this)}}ve.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,n,r){this.deviceId=e,this.label=n,this.kind="videoinput",this.groupId=r||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var se=(globalThis||Dl||self||window||void 0)&&(globalThis||Dl||self||window||void 0).__awaiter||function(b,e,n,r){function a(l){return l instanceof n?l:new n(function(c){c(l)})}return new(n||(n=Promise))(function(l,c){function p(I){try{v(r.next(I))}catch(N){c(N)}}function x(I){try{v(r.throw(I))}catch(N){c(N)}}function v(I){I.done?l(I.value):a(I.value).then(p,x)}v((r=r.apply(b,e||[])).next())})};class ze{constructor(e,n=500,r){this.reader=e,this.timeBetweenScansMillis=n,this._hints=r,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return se(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),n=[];for(const r of e){const a=r.kind==="video"?"videoinput":r.kind;if(a!=="videoinput")continue;const l=r.deviceId||r.id,c=r.label||`Video device ${n.length+1}`,p=r.groupId,x={deviceId:l,label:c,kind:a,groupId:p};n.push(x)}return n})}getVideoInputDevices(){return se(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(n=>new X(n.deviceId,n.label))})}findDeviceById(e){return se(this,void 0,void 0,function*(){const n=yield this.listVideoInputDevices();return n?n.find(r=>r.deviceId===e):null})}decodeFromInputVideoDevice(e,n){return se(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,n)})}decodeOnceFromVideoDevice(e,n){return se(this,void 0,void 0,function*(){this.reset();let r;e?r={deviceId:{exact:e}}:r={facingMode:"environment"};const a={video:r};return yield this.decodeOnceFromConstraints(a,n)})}decodeOnceFromConstraints(e,n){return se(this,void 0,void 0,function*(){const r=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(r,n)})}decodeOnceFromStream(e,n){return se(this,void 0,void 0,function*(){this.reset();const r=yield this.attachStreamToVideo(e,n);return yield this.decodeOnce(r)})}decodeFromInputVideoDeviceContinuously(e,n,r){return se(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,n,r)})}decodeFromVideoDevice(e,n,r){return se(this,void 0,void 0,function*(){let a;e?a={deviceId:{exact:e}}:a={facingMode:"environment"};const l={video:a};return yield this.decodeFromConstraints(l,n,r)})}decodeFromConstraints(e,n,r){return se(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(a,n,r)})}decodeFromStream(e,n,r){return se(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(e,n);return yield this.decodeContinuously(a,r)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,n){return se(this,void 0,void 0,function*(){const r=this.prepareVideoElement(n);return this.addVideoSource(r,e),this.videoElement=r,this.stream=e,yield this.playVideoOnLoadAsync(r),r})}playVideoOnLoadAsync(e){return new Promise((n,r)=>this.playVideoOnLoad(e,()=>n()))}playVideoOnLoad(e,n){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",n),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return se(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,n){const r=document.getElementById(e);if(!r)throw new A(`element with id '${e}' not found`);if(r.nodeName.toLowerCase()!==n.toLowerCase())throw new A(`element with id '${e}' must be an ${n} element`);return r}decodeFromImage(e,n){if(!e&&!n)throw new A("either imageElement with a src set or an url must be provided");return n&&!e?this.decodeFromImageUrl(n):this.decodeFromImageElement(e)}decodeFromVideo(e,n){if(!e&&!n)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrl(n):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,n,r){if(e===void 0&&n===void 0)throw new A("Either an element with a src set or an URL must be provided");return n&&!e?this.decodeFromVideoUrlContinuously(n,r):this.decodeFromVideoElementContinuously(e,r)}decodeFromImageElement(e){if(!e)throw new A("An image element must be provided.");this.reset();const n=this.prepareImageElement(e);this.imageElement=n;let r;return this.isImageLoaded(n)?r=this.decodeOnce(n,!1,!0):r=this._decodeOnLoadImage(n),r}decodeFromVideoElement(e){const n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(n)}decodeFromVideoElementContinuously(e,n){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(r,n)}_decodeFromVideoElementSetup(e){if(!e)throw new A("A video element must be provided.");this.reset();const n=this.prepareVideoElement(e);return this.videoElement=n,n}decodeFromImageUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareImageElement();this.imageElement=n;const r=this._decodeOnLoadImage(n);return n.src=e,r}decodeFromVideoUrl(e){if(!e)throw new A("An URL must be provided.");this.reset();const n=this.prepareVideoElement(),r=this.decodeFromVideoElement(n);return n.src=e,r}decodeFromVideoUrlContinuously(e,n){if(!e)throw new A("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(r,n);return r.src=e,a}_decodeOnLoadImage(e){return new Promise((n,r)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(n,r),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return se(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,n){return se(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,n)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let n;return typeof e>"u"&&(n=document.createElement("img"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(n=e),n}prepareVideoElement(e){let n;return!e&&typeof document<"u"&&(n=document.createElement("video"),n.width=200,n.height=200),typeof e=="string"&&(n=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(n=e),n.setAttribute("autoplay","true"),n.setAttribute("muted","true"),n.setAttribute("playsinline","true"),n}decodeOnce(e,n=!0,r=!0){this._stopAsyncDecode=!1;const a=(l,c)=>{if(this._stopAsyncDecode){c(new re("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);l(p)}catch(p){const x=n&&p instanceof re,I=(p instanceof B||p instanceof K)&&r;if(x||I)return setTimeout(a,this._timeBetweenDecodingAttempts,l,c);c(p)}};return new Promise((l,c)=>a(l,c))}decodeContinuously(e,n){this._stopContinuousDecode=!1;const r=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(e);n(a,null),setTimeout(r,this.timeBetweenScansMillis)}catch(a){n(null,a);const l=a instanceof B||a instanceof K,c=a instanceof re;(l||c)&&setTimeout(r,this._timeBetweenDecodingAttempts)}};r()}decode(e){const n=this.createBinaryBitmap(e);return this.decodeBitmap(n)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,n,r){n||(n={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}drawImageOnCanvas(e,n,r=this.captureCanvasContext){n||(n={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),r||(r=this.captureCanvasContext),r.drawImage(e,n.sx,n.sy,n.sWidth,n.sHeight,n.dx,n.dy,n.dWidth,n.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const n=this.getCaptureCanvas(e),r=new ve(n),a=new _e(r);return new k(a)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const r=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=r}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const n=this.createCaptureCanvas(e);this.captureCanvas=n}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const n=document.createElement("canvas");let r,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(r=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(r=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),n.style.width=r+"px",n.style.height=a+"px",n.width=r,n.height=a,n}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,n){try{e.srcObject=n}catch{e.src=URL.createObjectURL(n)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Pe{constructor(e,n,r=n==null?0:8*n.length,a,l,c=j.currentTimeMillis()){this.text=e,this.rawBytes=n,this.numBits=r,this.resultPoints=a,this.format=l,this.timestamp=c,this.text=e,this.rawBytes=n,r==null?this.numBits=n==null?0:8*n.length:this.numBits=r,this.resultPoints=a,this.format=l,this.resultMetadata=null,c==null?this.timestamp=j.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,n){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,n)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const n=this.resultPoints;if(n===null)this.resultPoints=e;else if(e!==null&&e.length>0){const r=new Array(n.length+e.length);j.arraycopy(n,0,r,0,n.length),j.arraycopy(e,0,r,n.length,e.length),this.resultPoints=r}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ot;(function(b){b[b.AZTEC=0]="AZTEC",b[b.CODABAR=1]="CODABAR",b[b.CODE_39=2]="CODE_39",b[b.CODE_93=3]="CODE_93",b[b.CODE_128=4]="CODE_128",b[b.DATA_MATRIX=5]="DATA_MATRIX",b[b.EAN_8=6]="EAN_8",b[b.EAN_13=7]="EAN_13",b[b.ITF=8]="ITF",b[b.MAXICODE=9]="MAXICODE",b[b.PDF_417=10]="PDF_417",b[b.QR_CODE=11]="QR_CODE",b[b.RSS_14=12]="RSS_14",b[b.RSS_EXPANDED=13]="RSS_EXPANDED",b[b.UPC_A=14]="UPC_A",b[b.UPC_E=15]="UPC_E",b[b.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ot||(ot={}));var xe=ot,mt;(function(b){b[b.OTHER=0]="OTHER",b[b.ORIENTATION=1]="ORIENTATION",b[b.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",b[b.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",b[b.ISSUE_NUMBER=4]="ISSUE_NUMBER",b[b.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",b[b.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",b[b.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",b[b.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",b[b.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",b[b.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(mt||(mt={}));var He=mt;class xt{constructor(e,n,r,a,l=-1,c=-1){this.rawBytes=e,this.text=n,this.byteSegments=r,this.ecLevel=a,this.structuredAppendSequenceNumber=l,this.structuredAppendParity=c,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class an{exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}static addOrSubtract(e,n){return e^n}}class ln{constructor(e,n){if(n.length===0)throw new T;this.field=e;const r=n.length;if(r>1&&n[0]===0){let a=1;for(;a<r&&n[a]===0;)a++;a===r?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(r-a),j.arraycopy(n,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const n=this.coefficients;let r;if(e===1){r=0;for(let c=0,p=n.length;c!==p;c++){const x=n[c];r=an.addOrSubtract(r,x)}return r}r=n[0];const a=n.length,l=this.field;for(let c=1;c<a;c++)r=an.addOrSubtract(l.multiply(e,r),n[c]);return r}addOrSubtract(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){const c=n;n=r,r=c}let a=new Int32Array(r.length);const l=r.length-n.length;j.arraycopy(r,0,a,0,l);for(let c=l;c<r.length;c++)a[c]=an.addOrSubtract(n[c-l],r[c]);return new ln(this.field,a)}multiply(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const n=this.coefficients,r=n.length,a=e.coefficients,l=a.length,c=new Int32Array(r+l-1),p=this.field;for(let x=0;x<r;x++){const v=n[x];for(let I=0;I<l;I++)c[x+I]=an.addOrSubtract(c[x+I],p.multiply(v,a[I]))}return new ln(p,c)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const n=this.coefficients.length,r=this.field,a=new Int32Array(n),l=this.coefficients;for(let c=0;c<n;c++)a[c]=r.multiply(l[c],e);return new ln(r,a)}multiplyByMonomial(e,n){if(e<0)throw new T;if(n===0)return this.field.getZero();const r=this.coefficients,a=r.length,l=new Int32Array(a+e),c=this.field;for(let p=0;p<a;p++)l[p]=c.multiply(r[p],n);return new ln(c,l)}divide(e){if(!this.field.equals(e.field))throw new T("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new T("Divide by 0");const n=this.field;let r=n.getZero(),a=this;const l=e.getCoefficient(e.getDegree()),c=n.inverse(l);for(;a.getDegree()>=e.getDegree()&&!a.isZero();){const p=a.getDegree()-e.getDegree(),x=n.multiply(a.getCoefficient(a.getDegree()),c),v=e.multiplyByMonomial(p,x),I=n.buildMonomial(p,x);r=r.addOrSubtract(I),a=a.addOrSubtract(v)}return[r,a]}toString(){let e="";for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);if(r!==0){if(r<0?(e+=" - ",r=-r):e.length>0&&(e+=" + "),n===0||r!==1){const a=this.field.log(r);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}n!==0&&(n===1?e+="x":(e+="x^",e+=n))}}return e}}class qi extends w{}qi.kind="ArithmeticException";class at extends an{constructor(e,n,r){super(),this.primitive=e,this.size=n,this.generatorBase=r;const a=new Int32Array(n);let l=1;for(let p=0;p<n;p++)a[p]=l,l*=2,l>=n&&(l^=e,l&=n-1);this.expTable=a;const c=new Int32Array(n);for(let p=0;p<n-1;p++)c[a[p]]=p;this.logTable=c,this.zero=new ln(this,Int32Array.from([0])),this.one=new ln(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new T;if(n===0)return this.zero;const r=new Int32Array(e+1);return r[0]=n,new ln(this,r)}inverse(e){if(e===0)throw new qi;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+W.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class jr extends w{}jr.kind="ReedSolomonException";class Zn extends w{}Zn.kind="IllegalStateException";class pi{constructor(e){this.field=e}decode(e,n){const r=this.field,a=new ln(r,e),l=new Int32Array(n);let c=!0;for(let L=0;L<n;L++){const U=a.evaluateAt(r.exp(L+r.getGeneratorBase()));l[l.length-1-L]=U,U!==0&&(c=!1)}if(c)return;const p=new ln(r,l),x=this.runEuclideanAlgorithm(r.buildMonomial(n,1),p,n),v=x[0],I=x[1],N=this.findErrorLocations(v),R=this.findErrorMagnitudes(I,N);for(let L=0;L<N.length;L++){const U=e.length-1-r.log(N[L]);if(U<0)throw new jr("Bad error location");e[U]=at.addOrSubtract(e[U],R[L])}}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){const L=e;e=n,n=L}const a=this.field;let l=e,c=n,p=a.getZero(),x=a.getOne();for(;c.getDegree()>=(r/2|0);){let L=l,U=p;if(l=c,p=x,l.isZero())throw new jr("r_{i-1} was zero");c=L;let V=a.getZero();const Y=l.getCoefficient(l.getDegree()),ee=a.inverse(Y);for(;c.getDegree()>=l.getDegree()&&!c.isZero();){const ge=c.getDegree()-l.getDegree(),pe=a.multiply(c.getCoefficient(c.getDegree()),ee);V=V.addOrSubtract(a.buildMonomial(ge,pe)),c=c.addOrSubtract(l.multiplyByMonomial(ge,pe))}if(x=V.multiply(p).addOrSubtract(U),c.getDegree()>=l.getDegree())throw new Zn("Division algorithm failed to reduce polynomial?")}const v=x.getCoefficient(0);if(v===0)throw new jr("sigmaTilde(0) was zero");const I=a.inverse(v),N=x.multiplyScalar(I),R=c.multiplyScalar(I);return[N,R]}findErrorLocations(e){const n=e.getDegree();if(n===1)return Int32Array.from([e.getCoefficient(1)]);const r=new Int32Array(n);let a=0;const l=this.field;for(let c=1;c<l.getSize()&&a<n;c++)e.evaluateAt(c)===0&&(r[a]=l.inverse(c),a++);if(a!==n)throw new jr("Error locator degree does not match number of roots");return r}findErrorMagnitudes(e,n){const r=n.length,a=new Int32Array(r),l=this.field;for(let c=0;c<r;c++){const p=l.inverse(n[c]);let x=1;for(let v=0;v<r;v++)if(c!==v){const I=l.multiply(n[v],p),N=(I&1)===0?I|1:I&-2;x=l.multiply(x,N)}a[c]=l.multiply(e.evaluateAt(p),l.inverse(x)),l.getGeneratorBase()!==0&&(a[c]=l.multiply(a[c],p))}return a}}var $t;(function(b){b[b.UPPER=0]="UPPER",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.DIGIT=3]="DIGIT",b[b.PUNCT=4]="PUNCT",b[b.BINARY=5]="BINARY"})($t||($t={}));class Et{decode(e){this.ddata=e;let n=e.getBits(),r=this.extractBits(n),a=this.correctBits(r),l=Et.convertBoolArrayToByteArray(a),c=Et.getEncodedData(a),p=new xt(l,c,null,null);return p.setNumBits(a.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let n=e.length,r=$t.UPPER,a=$t.UPPER,l="",c=0;for(;c<n;)if(a===$t.BINARY){if(n-c<5)break;let p=Et.readCode(e,c,5);if(c+=5,p===0){if(n-c<11)break;p=Et.readCode(e,c,11)+31,c+=11}for(let x=0;x<p;x++){if(n-c<8){c=n;break}const v=Et.readCode(e,c,8);l+=ke.castAsNonUtf8Char(v),c+=8}a=r}else{let p=a===$t.DIGIT?4:5;if(n-c<p)break;let x=Et.readCode(e,c,p);c+=p;let v=Et.getCharacter(a,x);v.startsWith("CTRL_")?(r=a,a=Et.getTable(v.charAt(5)),v.charAt(6)==="L"&&(r=a)):(l+=v,a=r)}return l}static getTable(e){switch(e){case"L":return $t.LOWER;case"P":return $t.PUNCT;case"M":return $t.MIXED;case"D":return $t.DIGIT;case"B":return $t.BINARY;case"U":default:return $t.UPPER}}static getCharacter(e,n){switch(e){case $t.UPPER:return Et.UPPER_TABLE[n];case $t.LOWER:return Et.LOWER_TABLE[n];case $t.MIXED:return Et.MIXED_TABLE[n];case $t.PUNCT:return Et.PUNCT_TABLE[n];case $t.DIGIT:return Et.DIGIT_TABLE[n];default:throw new Zn("Bad table")}}correctBits(e){let n,r;this.ddata.getNbLayers()<=2?(r=6,n=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(r=8,n=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(r=10,n=at.AZTEC_DATA_10):(r=12,n=at.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),l=e.length/r;if(l<a)throw new K;let c=e.length%r,p=new Int32Array(l);for(let R=0;R<l;R++,c+=r)p[R]=Et.readCode(e,c,r);try{new pi(n).decode(p,l-a)}catch(R){throw new K(R)}let x=(1<<r)-1,v=0;for(let R=0;R<a;R++){let L=p[R];if(L===0||L===x)throw new K;(L===1||L===x-1)&&v++}let I=new Array(a*r-v),N=0;for(let R=0;R<a;R++){let L=p[R];if(L===1||L===x-1)I.fill(L>1,N,N+r-1),N+=r-1;else for(let U=r-1;U>=0;--U)I[N++]=(L&1<<U)!==0}return I}extractBits(e){let n=this.ddata.isCompact(),r=this.ddata.getNbLayers(),a=(n?11:14)+r*4,l=new Int32Array(a),c=new Array(this.totalBitsInLayer(r,n));if(n)for(let p=0;p<l.length;p++)l[p]=p;else{let p=a+1+2*W.truncDivision(W.truncDivision(a,2)-1,15),x=a/2,v=W.truncDivision(p,2);for(let I=0;I<x;I++){let N=I+W.truncDivision(I,15);l[x-I-1]=v-N-1,l[x+I]=v+N+1}}for(let p=0,x=0;p<r;p++){let v=(r-p)*4+(n?9:12),I=p*2,N=a-1-I;for(let R=0;R<v;R++){let L=R*2;for(let U=0;U<2;U++)c[x+L+U]=e.get(l[I+U],l[I+R]),c[x+2*v+L+U]=e.get(l[I+R],l[N-U]),c[x+4*v+L+U]=e.get(l[N-U],l[N-R]),c[x+6*v+L+U]=e.get(l[N-R],l[I+U])}x+=v*8}return c}static readCode(e,n,r){let a=0;for(let l=n;l<n+r;l++)a<<=1,e[l]&&(a|=1);return a}static readByte(e,n){let r=e.length-n;return r>=8?Et.readCode(e,n,8):Et.readCode(e,n,r)<<8-r}static convertBoolArrayToByteArray(e){let n=new Uint8Array((e.length+7)/8);for(let r=0;r<n.length;r++)n[r]=Et.readByte(e,8*r);return n}totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}Et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Et.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class nt{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,n,r,a){const l=e-r,c=n-a;return Math.sqrt(l*l+c*c)}static sum(e){let n=0;for(let r=0,a=e.length;r!==a;r++){const l=e[r];n+=l}return n}}class Fr{static floatToIntBits(e){return e}}Fr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(e,n){this.x=e,this.y=n}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ie){const n=e;return this.x===n.x&&this.y===n.y}return!1}hashCode(){return 31*Fr.floatToIntBits(this.x)+Fr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const n=this.distance(e[0],e[1]),r=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);let l,c,p;if(r>=n&&r>=a?(c=e[0],l=e[1],p=e[2]):a>=r&&a>=n?(c=e[1],l=e[0],p=e[2]):(c=e[2],l=e[0],p=e[1]),this.crossProductZ(l,c,p)<0){const x=l;l=p,p=x}e[0]=l,e[1]=c,e[2]=p}static distance(e,n){return nt.distance(e.x,e.y,n.x,n.y)}static crossProductZ(e,n,r){const a=n.x,l=n.y;return(r.x-a)*(e.y-l)-(r.y-l)*(e.x-a)}}class mi{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class Io extends mi{constructor(e,n,r,a,l){super(e,n),this.compact=r,this.nbDatablocks=a,this.nbLayers=l}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class gr{constructor(e,n,r,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),n==null&&(n=gr.INIT_SIZE),r==null&&(r=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);const l=n/2|0;if(this.leftInit=r-l,this.rightInit=r+l,this.upInit=a-l,this.downInit=a+l,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new re}detect(){let e=this.leftInit,n=this.rightInit,r=this.upInit,a=this.downInit,l=!1,c=!0,p=!1,x=!1,v=!1,I=!1,N=!1;const R=this.width,L=this.height;for(;c;){c=!1;let U=!0;for(;(U||!x)&&n<R;)U=this.containsBlackPoint(r,a,n,!1),U?(n++,c=!0,x=!0):x||n++;if(n>=R){l=!0;break}let V=!0;for(;(V||!v)&&a<L;)V=this.containsBlackPoint(e,n,a,!0),V?(a++,c=!0,v=!0):v||a++;if(a>=L){l=!0;break}let Y=!0;for(;(Y||!I)&&e>=0;)Y=this.containsBlackPoint(r,a,e,!1),Y?(e--,c=!0,I=!0):I||e--;if(e<0){l=!0;break}let ee=!0;for(;(ee||!N)&&r>=0;)ee=this.containsBlackPoint(e,n,r,!0),ee?(r--,c=!0,N=!0):N||r--;if(r<0){l=!0;break}c&&(p=!0)}if(!l&&p){const U=n-e;let V=null;for(let pe=1;V===null&&pe<U;pe++)V=this.getBlackPointOnSegment(e,a-pe,e+pe,a);if(V==null)throw new re;let Y=null;for(let pe=1;Y===null&&pe<U;pe++)Y=this.getBlackPointOnSegment(e,r+pe,e+pe,r);if(Y==null)throw new re;let ee=null;for(let pe=1;ee===null&&pe<U;pe++)ee=this.getBlackPointOnSegment(n,r+pe,n-pe,r);if(ee==null)throw new re;let ge=null;for(let pe=1;ge===null&&pe<U;pe++)ge=this.getBlackPointOnSegment(n,a-pe,n-pe,a);if(ge==null)throw new re;return this.centerEdges(ge,V,ee,Y)}else throw new re}getBlackPointOnSegment(e,n,r,a){const l=nt.round(nt.distance(e,n,r,a)),c=(r-e)/l,p=(a-n)/l,x=this.image;for(let v=0;v<l;v++){const I=nt.round(e+v*c),N=nt.round(n+v*p);if(x.get(I,N))return new Ie(I,N)}return null}centerEdges(e,n,r,a){const l=e.getX(),c=e.getY(),p=n.getX(),x=n.getY(),v=r.getX(),I=r.getY(),N=a.getX(),R=a.getY(),L=gr.CORR;return l<this.width/2?[new Ie(N-L,R+L),new Ie(p+L,x+L),new Ie(v-L,I-L),new Ie(l+L,c-L)]:[new Ie(N+L,R+L),new Ie(p+L,x-L),new Ie(v-L,I+L),new Ie(l-L,c-L)]}containsBlackPoint(e,n,r,a){const l=this.image;if(a){for(let c=e;c<=n;c++)if(l.get(c,r))return!0}else for(let c=e;c<=n;c++)if(l.get(r,c))return!0;return!1}}gr.INIT_SIZE=10,gr.CORR=1;class Ms{static checkAndNudgePoints(e,n){const r=e.getWidth(),a=e.getHeight();let l=!0;for(let c=0;c<n.length&&l;c+=2){const p=Math.floor(n[c]),x=Math.floor(n[c+1]);if(p<-1||p>r||x<-1||x>a)throw new re;l=!1,p===-1?(n[c]=0,l=!0):p===r&&(n[c]=r-1,l=!0),x===-1?(n[c+1]=0,l=!0):x===a&&(n[c+1]=a-1,l=!0)}l=!0;for(let c=n.length-2;c>=0&&l;c-=2){const p=Math.floor(n[c]),x=Math.floor(n[c+1]);if(p<-1||p>r||x<-1||x>a)throw new re;l=!1,p===-1?(n[c]=0,l=!0):p===r&&(n[c]=r-1,l=!0),x===-1?(n[c+1]=0,l=!0):x===a&&(n[c+1]=a-1,l=!0)}}}class zn{constructor(e,n,r,a,l,c,p,x,v){this.a11=e,this.a21=n,this.a31=r,this.a12=a,this.a22=l,this.a32=c,this.a13=p,this.a23=x,this.a33=v}static quadrilateralToQuadrilateral(e,n,r,a,l,c,p,x,v,I,N,R,L,U,V,Y){const ee=zn.quadrilateralToSquare(e,n,r,a,l,c,p,x);return zn.squareToQuadrilateral(v,I,N,R,L,U,V,Y).times(ee)}transformPoints(e){const n=e.length,r=this.a11,a=this.a12,l=this.a13,c=this.a21,p=this.a22,x=this.a23,v=this.a31,I=this.a32,N=this.a33;for(let R=0;R<n;R+=2){const L=e[R],U=e[R+1],V=l*L+x*U+N;e[R]=(r*L+c*U+v)/V,e[R+1]=(a*L+p*U+I)/V}}transformPointsWithValues(e,n){const r=this.a11,a=this.a12,l=this.a13,c=this.a21,p=this.a22,x=this.a23,v=this.a31,I=this.a32,N=this.a33,R=e.length;for(let L=0;L<R;L++){const U=e[L],V=n[L],Y=l*U+x*V+N;e[L]=(r*U+c*V+v)/Y,n[L]=(a*U+p*V+I)/Y}}static squareToQuadrilateral(e,n,r,a,l,c,p,x){const v=e-r+l-p,I=n-a+c-x;if(v===0&&I===0)return new zn(r-e,l-r,e,a-n,c-a,n,0,0,1);{const N=r-l,R=p-l,L=a-c,U=x-c,V=N*U-R*L,Y=(v*U-R*I)/V,ee=(N*I-v*L)/V;return new zn(r-e+Y*r,p-e+ee*p,e,a-n+Y*a,x-n+ee*x,n,Y,ee,1)}}static quadrilateralToSquare(e,n,r,a,l,c,p,x){return zn.squareToQuadrilateral(e,n,r,a,l,c,p,x).buildAdjoint()}buildAdjoint(){return new zn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new zn(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ks extends Ms{sampleGrid(e,n,r,a,l,c,p,x,v,I,N,R,L,U,V,Y,ee,ge,pe){const ue=zn.quadrilateralToQuadrilateral(a,l,c,p,x,v,I,N,R,L,U,V,Y,ee,ge,pe);return this.sampleGridWithTransform(e,n,r,ue)}sampleGridWithTransform(e,n,r,a){if(n<=0||r<=0)throw new re;const l=new Ze(n,r),c=new Float32Array(2*n);for(let p=0;p<r;p++){const x=c.length,v=p+.5;for(let I=0;I<x;I+=2)c[I]=I/2+.5,c[I+1]=v;a.transformPoints(c),Ms.checkAndNudgePoints(e,c);try{for(let I=0;I<x;I+=2)e.get(Math.floor(c[I]),Math.floor(c[I+1]))&&l.set(I/2,p)}catch{throw new re}}return l}}class Jn{static setGridSampler(e){Jn.gridSampler=e}static getInstance(){return Jn.gridSampler}}Jn.gridSampler=new ks;class xn{constructor(e,n){this.x=e,this.y=n}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class xi{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let n=this.getMatrixCenter(),r=this.getBullsEyeCorners(n);if(e){let c=r[0];r[0]=r[2],r[2]=c}this.extractParameters(r);let a=this.sampleGrid(this.image,r[this.shift%4],r[(this.shift+1)%4],r[(this.shift+2)%4],r[(this.shift+3)%4]),l=this.getMatrixCornerPoints(r);return new Io(a,l,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new re;let n=2*this.nbCenterLayers,r=new Int32Array([this.sampleLine(e[0],e[1],n),this.sampleLine(e[1],e[2],n),this.sampleLine(e[2],e[3],n),this.sampleLine(e[3],e[0],n)]);this.shift=this.getRotation(r,n);let a=0;for(let c=0;c<4;c++){let p=r[(this.shift+c)%4];this.compact?(a<<=7,a+=p>>1&127):(a<<=10,a+=(p>>2&992)+(p>>1&31))}let l=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(l>>6)+1,this.nbDataBlocks=(l&63)+1):(this.nbLayers=(l>>11)+1,this.nbDataBlocks=(l&2047)+1)}getRotation(e,n){let r=0;e.forEach((a,l,c)=>{let p=(a>>n-2<<1)+(a&1);r=(r<<3)+p}),r=((r&1)<<11)+(r>>1);for(let a=0;a<4;a++)if(W.bitCount(r^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new re}getCorrectedParameterData(e,n){let r,a;n?(r=7,a=2):(r=10,a=4);let l=r-a,c=new Int32Array(r);for(let x=r-1;x>=0;--x)c[x]=e&15,e>>=4;try{new pi(at.AZTEC_PARAM).decode(c,l)}catch{throw new re}let p=0;for(let x=0;x<a;x++)p=(p<<4)+c[x];return p}getBullsEyeCorners(e){let n=e,r=e,a=e,l=e,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(n,c,1,-1),R=this.getFirstDifferent(r,c,1,1),L=this.getFirstDifferent(a,c,-1,1),U=this.getFirstDifferent(l,c,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(U,N)*this.nbCenterLayers/(this.distancePoint(l,n)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(N,R,L,U))break}n=N,r=R,a=L,l=U,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new re;this.compact=this.nbCenterLayers===5;let p=new Ie(n.getX()+.5,n.getY()-.5),x=new Ie(r.getX()+.5,r.getY()+.5),v=new Ie(a.getX()-.5,a.getY()+.5),I=new Ie(l.getX()-.5,l.getY()-.5);return this.expandSquare([p,x,v,I],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,n,r,a;try{let p=new gr(this.image).detect();e=p[0],n=p[1],r=p[2],a=p[3]}catch{let x=this.image.getWidth()/2,v=this.image.getHeight()/2;e=this.getFirstDifferent(new xn(x+7,v-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new xn(x+7,v+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new xn(x-7,v+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new xn(x-7,v-7),!1,-1,-1).toResultPoint()}let l=nt.round((e.getX()+a.getX()+n.getX()+r.getX())/4),c=nt.round((e.getY()+a.getY()+n.getY()+r.getY())/4);try{let p=new gr(this.image,15,l,c).detect();e=p[0],n=p[1],r=p[2],a=p[3]}catch{e=this.getFirstDifferent(new xn(l+7,c-7),!1,1,-1).toResultPoint(),n=this.getFirstDifferent(new xn(l+7,c+7),!1,1,1).toResultPoint(),r=this.getFirstDifferent(new xn(l-7,c+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new xn(l-7,c-7),!1,-1,-1).toResultPoint()}return l=nt.round((e.getX()+a.getX()+n.getX()+r.getX())/4),c=nt.round((e.getY()+a.getY()+n.getY()+r.getY())/4),new xn(l,c)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,n,r,a,l){let c=Jn.getInstance(),p=this.getDimension(),x=p/2-this.nbCenterLayers,v=p/2+this.nbCenterLayers;return c.sampleGrid(e,p,p,x,x,v,x,v,v,x,v,n.getX(),n.getY(),r.getX(),r.getY(),a.getX(),a.getY(),l.getX(),l.getY())}sampleLine(e,n,r){let a=0,l=this.distanceResultPoint(e,n),c=l/r,p=e.getX(),x=e.getY(),v=c*(n.getX()-e.getX())/l,I=c*(n.getY()-e.getY())/l;for(let N=0;N<r;N++)this.image.get(nt.round(p+N*v),nt.round(x+N*I))&&(a|=1<<r-N-1);return a}isWhiteOrBlackRectangle(e,n,r,a){let l=3;e=new xn(e.getX()-l,e.getY()+l),n=new xn(n.getX()-l,n.getY()-l),r=new xn(r.getX()+l,r.getY()-l),a=new xn(a.getX()+l,a.getY()+l);let c=this.getColor(a,e);if(c===0)return!1;let p=this.getColor(e,n);return p!==c||(p=this.getColor(n,r),p!==c)?!1:(p=this.getColor(r,a),p===c)}getColor(e,n){let r=this.distancePoint(e,n),a=(n.getX()-e.getX())/r,l=(n.getY()-e.getY())/r,c=0,p=e.getX(),x=e.getY(),v=this.image.get(e.getX(),e.getY()),I=Math.ceil(r);for(let R=0;R<I;R++)p+=a,x+=l,this.image.get(nt.round(p),nt.round(x))!==v&&c++;let N=c/r;return N>.1&&N<.9?0:N<=.1===v?1:-1}getFirstDifferent(e,n,r,a){let l=e.getX()+r,c=e.getY()+a;for(;this.isValid(l,c)&&this.image.get(l,c)===n;)l+=r,c+=a;for(l-=r,c-=a;this.isValid(l,c)&&this.image.get(l,c)===n;)l+=r;for(l-=r;this.isValid(l,c)&&this.image.get(l,c)===n;)c+=a;return c-=a,new xn(l,c)}expandSquare(e,n,r){let a=r/(2*n),l=e[0].getX()-e[2].getX(),c=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,x=(e[0].getY()+e[2].getY())/2,v=new Ie(p+a*l,x+a*c),I=new Ie(p-a*l,x-a*c);l=e[1].getX()-e[3].getX(),c=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,x=(e[1].getY()+e[3].getY())/2;let N=new Ie(p+a*l,x+a*c),R=new Ie(p-a*l,x-a*c);return[v,N,I,R]}isValid(e,n){return e>=0&&e<this.image.getWidth()&&n>0&&n<this.image.getHeight()}isValidPoint(e){let n=nt.round(e.getX()),r=nt.round(e.getY());return this.isValid(n,r)}distancePoint(e,n){return nt.distance(e.getX(),e.getY(),n.getX(),n.getY())}distanceResultPoint(e,n){return nt.distance(e.getX(),e.getY(),n.getX(),n.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(W.truncDivision(this.nbLayers-4,8)+1)+15}}class Ur{decode(e,n=null){let r=null,a=new xi(e.getBlackMatrix()),l=null,c=null;try{let I=a.detectMirror(!1);l=I.getPoints(),this.reportFoundResultPoints(n,l),c=new Et().decode(I)}catch(I){r=I}if(c==null)try{let I=a.detectMirror(!0);l=I.getPoints(),this.reportFoundResultPoints(n,l),c=new Et().decode(I)}catch(I){throw r??I}let p=new Pe(c.getText(),c.getRawBytes(),c.getNumBits(),l,xe.AZTEC,j.currentTimeMillis()),x=c.getByteSegments();x!=null&&p.putMetadata(He.BYTE_SEGMENTS,x);let v=c.getECLevel();return v!=null&&p.putMetadata(He.ERROR_CORRECTION_LEVEL,v),p}reportFoundResultPoints(e,n){if(e!=null){let r=e.get(he.NEED_RESULT_POINT_CALLBACK);r!=null&&n.forEach((a,l,c)=>{r.foundPossibleResultPoint(a)})}}reset(){}}class ql extends ze{constructor(e=500){super(new Ur,e)}}class jt{decode(e,n){try{return this.doDecode(e,n)}catch{if(n&&n.get(he.TRY_HARDER)===!0&&e.isRotateSupported()){const l=e.rotateCounterClockwise(),c=this.doDecode(l,n),p=c.getResultMetadata();let x=270;p!==null&&p.get(He.ORIENTATION)===!0&&(x=x+p.get(He.ORIENTATION)%360),c.putMetadata(He.ORIENTATION,x);const v=c.getResultPoints();if(v!==null){const I=l.getHeight();for(let N=0;N<v.length;N++)v[N]=new Ie(I-v[N].getY()-1,v[N].getX())}return c}else throw new re}}reset(){}doDecode(e,n){const r=e.getWidth(),a=e.getHeight();let l=new J(r);const c=n&&n.get(he.TRY_HARDER)===!0,p=Math.max(1,a>>(c?8:5));let x;c?x=a:x=15;const v=Math.trunc(a/2);for(let I=0;I<x;I++){const N=Math.trunc((I+1)/2),R=(I&1)===0,L=v+p*(R?N:-N);if(L<0||L>=a)break;try{l=e.getBlackRow(L,l)}catch{continue}for(let U=0;U<2;U++){if(U===1&&(l.reverse(),n&&n.get(he.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;n.forEach((Y,ee)=>V.set(ee,Y)),V.delete(he.NEED_RESULT_POINT_CALLBACK),n=V}try{const V=this.decodeRow(L,l,n);if(U===1){V.putMetadata(He.ORIENTATION,180);const Y=V.getResultPoints();Y!==null&&(Y[0]=new Ie(r-Y[0].getX()-1,Y[0].getY()),Y[1]=new Ie(r-Y[1].getX()-1,Y[1].getY()))}return V}catch{}}}throw new re}static recordPattern(e,n,r){const a=r.length;for(let v=0;v<a;v++)r[v]=0;const l=e.getSize();if(n>=l)throw new re;let c=!e.get(n),p=0,x=n;for(;x<l;){if(e.get(x)!==c)r[p]++;else{if(++p===a)break;r[p]=1,c=!c}x++}if(!(p===a||p===a-1&&x===l))throw new re}static recordPatternInReverse(e,n,r){let a=r.length,l=e.get(n);for(;n>0&&a>=0;)e.get(--n)!==l&&(a--,l=!l);if(a>=0)throw new re;jt.recordPattern(e,n+1,r)}static patternMatchVariance(e,n,r){const a=e.length;let l=0,c=0;for(let v=0;v<a;v++)l+=e[v],c+=n[v];if(l<c)return Number.POSITIVE_INFINITY;const p=l/c;r*=p;let x=0;for(let v=0;v<a;v++){const I=e[v],N=n[v]*p,R=I>N?I-N:N-I;if(R>r)return Number.POSITIVE_INFINITY;x+=R}return x/l}}class we extends jt{static findStartPattern(e){const n=e.getSize(),r=e.getNextSet(0);let a=0,l=Int32Array.from([0,0,0,0,0,0]),c=r,p=!1;const x=6;for(let v=r;v<n;v++)if(e.get(v)!==p)l[a]++;else{if(a===x-1){let I=we.MAX_AVG_VARIANCE,N=-1;for(let R=we.CODE_START_A;R<=we.CODE_START_C;R++){const L=jt.patternMatchVariance(l,we.CODE_PATTERNS[R],we.MAX_INDIVIDUAL_VARIANCE);L<I&&(I=L,N=R)}if(N>=0&&e.isRange(Math.max(0,c-(v-c)/2),c,!1))return Int32Array.from([c,v,N]);c+=l[0]+l[1],l=l.slice(2,l.length-1),l[a-1]=0,l[a]=0,a--}else a++;l[a]=1,p=!p}throw new re}static decodeCode(e,n,r){jt.recordPattern(e,r,n);let a=we.MAX_AVG_VARIANCE,l=-1;for(let c=0;c<we.CODE_PATTERNS.length;c++){const p=we.CODE_PATTERNS[c],x=this.patternMatchVariance(n,p,we.MAX_INDIVIDUAL_VARIANCE);x<a&&(a=x,l=c)}if(l>=0)return l;throw new re}decodeRow(e,n,r){const a=r&&r.get(he.ASSUME_GS1)===!0,l=we.findStartPattern(n),c=l[2];let p=0;const x=new Uint8Array(20);x[p++]=c;let v;switch(c){case we.CODE_START_A:v=we.CODE_CODE_A;break;case we.CODE_START_B:v=we.CODE_CODE_B;break;case we.CODE_START_C:v=we.CODE_CODE_C;break;default:throw new K}let I=!1,N=!1,R="",L=l[0],U=l[1];const V=Int32Array.from([0,0,0,0,0,0]);let Y=0,ee=0,ge=c,pe=0,ue=!0,Ke=!1,Ge=!1;for(;!I;){const Or=N;switch(N=!1,Y=ee,ee=we.decodeCode(n,V,U),x[p++]=ee,ee!==we.CODE_STOP&&(ue=!0),ee!==we.CODE_STOP&&(pe++,ge+=pe*ee),L=U,U+=V.reduce((bi,Xo)=>bi+Xo,0),ee){case we.CODE_START_A:case we.CODE_START_B:case we.CODE_START_C:throw new K}switch(v){case we.CODE_CODE_A:if(ee<64)Ge===Ke?R+=String.fromCharCode(32+ee):R+=String.fromCharCode(32+ee+128),Ge=!1;else if(ee<96)Ge===Ke?R+=String.fromCharCode(ee-64):R+=String.fromCharCode(ee+64),Ge=!1;else switch(ee!==we.CODE_STOP&&(ue=!1),ee){case we.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_A:!Ke&&Ge?(Ke=!0,Ge=!1):Ke&&Ge?(Ke=!1,Ge=!1):Ge=!0;break;case we.CODE_SHIFT:N=!0,v=we.CODE_CODE_B;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:I=!0;break}break;case we.CODE_CODE_B:if(ee<96)Ge===Ke?R+=String.fromCharCode(32+ee):R+=String.fromCharCode(32+ee+128),Ge=!1;else switch(ee!==we.CODE_STOP&&(ue=!1),ee){case we.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case we.CODE_FNC_2:case we.CODE_FNC_3:break;case we.CODE_FNC_4_B:!Ke&&Ge?(Ke=!0,Ge=!1):Ke&&Ge?(Ke=!1,Ge=!1):Ge=!0;break;case we.CODE_SHIFT:N=!0,v=we.CODE_CODE_A;break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_C:v=we.CODE_CODE_C;break;case we.CODE_STOP:I=!0;break}break;case we.CODE_CODE_C:if(ee<100)ee<10&&(R+="0"),R+=ee;else switch(ee!==we.CODE_STOP&&(ue=!1),ee){case we.CODE_FNC_1:a&&(R.length===0?R+="]C1":R+="");break;case we.CODE_CODE_A:v=we.CODE_CODE_A;break;case we.CODE_CODE_B:v=we.CODE_CODE_B;break;case we.CODE_STOP:I=!0;break}break}Or&&(v=v===we.CODE_CODE_A?we.CODE_CODE_B:we.CODE_CODE_A)}const kn=U-L;if(U=n.getNextUnset(U),!n.isRange(U,Math.min(n.getSize(),U+(U-L)/2),!1))throw new re;if(ge-=pe*Y,ge%103!==Y)throw new B;const or=R.length;if(or===0)throw new re;or>0&&ue&&(v===we.CODE_CODE_C?R=R.substring(0,or-2):R=R.substring(0,or-1));const Zt=(l[1]+l[0])/2,pt=L+kn/2,Ft=x.length,Tn=new Uint8Array(Ft);for(let Or=0;Or<Ft;Or++)Tn[Or]=x[Or];const ri=[new Ie(Zt,e),new Ie(pt,e)];return new Pe(R,Tn,0,ri,xe.CODE_128,new Date().getTime())}}we.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],we.MAX_AVG_VARIANCE=.25,we.MAX_INDIVIDUAL_VARIANCE=.7,we.CODE_SHIFT=98,we.CODE_CODE_C=99,we.CODE_CODE_B=100,we.CODE_CODE_A=101,we.CODE_FNC_1=102,we.CODE_FNC_2=97,we.CODE_FNC_3=96,we.CODE_FNC_4_A=101,we.CODE_FNC_4_B=100,we.CODE_START_A=103,we.CODE_START_B=104,we.CODE_START_C=105,we.CODE_STOP=106;class Qt extends jt{constructor(e=!1,n=!1){super(),this.usingCheckDigit=e,this.extendedMode=n,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,n,r){let a=this.counters;a.fill(0),this.decodeRowResult="";let l=Qt.findAsteriskPattern(n,a),c=n.getNextSet(l[1]),p=n.getSize(),x,v;do{Qt.recordPattern(n,c,a);let V=Qt.toNarrowWidePattern(a);if(V<0)throw new re;x=Qt.patternToChar(V),this.decodeRowResult+=x,v=c;for(let Y of a)c+=Y;c=n.getNextSet(c)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let I=0;for(let V of a)I+=V;let N=c-v-I;if(c!==p&&N*2<I)throw new re;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,Y=0;for(let ee=0;ee<V;ee++)Y+=Qt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ee));if(this.decodeRowResult.charAt(V)!==Qt.ALPHABET_STRING.charAt(Y%43))throw new B;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new re;let R;this.extendedMode?R=Qt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let L=(l[1]+l[0])/2,U=v+I/2;return new Pe(R,null,0,[new Ie(L,e),new Ie(U,e)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(e,n){let r=e.getSize(),a=e.getNextSet(0),l=0,c=a,p=!1,x=n.length;for(let v=a;v<r;v++)if(e.get(v)!==p)n[l]++;else{if(l===x-1){if(this.toNarrowWidePattern(n)===Qt.ASTERISK_ENCODING&&e.isRange(Math.max(0,c-Math.floor((v-c)/2)),c,!1))return[c,v];c+=n[0]+n[1],n.copyWithin(0,2,2+l-1),n[l-1]=0,n[l]=0,l--}else l++;n[l]=1,p=!p}throw new re}static toNarrowWidePattern(e){let n=e.length,r=0,a;do{let l=2147483647;for(let x of e)x<l&&x>r&&(l=x);r=l,a=0;let c=0,p=0;for(let x=0;x<n;x++){let v=e[x];v>r&&(p|=1<<n-1-x,a++,c+=v)}if(a===3){for(let x=0;x<n&&a>0;x++){let v=e[x];if(v>r&&(a--,v*2>=c))return-1}return p}}while(a>3);return-1}static patternToChar(e){for(let n=0;n<Qt.CHARACTER_ENCODINGS.length;n++)if(Qt.CHARACTER_ENCODINGS[n]===e)return Qt.ALPHABET_STRING.charAt(n);if(e===Qt.ASTERISK_ENCODING)return"*";throw new re}static decodeExtended(e){let n=e.length,r="";for(let a=0;a<n;a++){let l=e.charAt(a);if(l==="+"||l==="$"||l==="%"||l==="/"){let c=e.charAt(a+1),p="\0";switch(l){case"+":if(c>="A"&&c<="Z")p=String.fromCharCode(c.charCodeAt(0)+32);else throw new K;break;case"$":if(c>="A"&&c<="Z")p=String.fromCharCode(c.charCodeAt(0)-64);else throw new K;break;case"%":if(c>="A"&&c<="E")p=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")p=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")p=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")p=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")p="\0";else if(c==="V")p="@";else if(c==="W")p="`";else if(c==="X"||c==="Y"||c==="Z")p="";else throw new K;break;case"/":if(c>="A"&&c<="O")p=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")p=":";else throw new K;break}r+=p,a++}else r+=l}return r}}Qt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Qt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Qt.ASTERISK_ENCODING=148;class gt extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,n,r){let a=this.decodeStart(n),l=this.decodeEnd(n),c=new Ye;gt.decodeMiddle(n,a[1],l[0],c);let p=c.toString(),x=null;r!=null&&(x=r.get(he.ALLOWED_LENGTHS)),x==null&&(x=gt.DEFAULT_ALLOWED_LENGTHS);let v=p.length,I=!1,N=0;for(let U of x){if(v===U){I=!0;break}U>N&&(N=U)}if(!I&&v>N&&(I=!0),!I)throw new K;const R=[new Ie(a[1],e),new Ie(l[0],e)];return new Pe(p,null,0,R,xe.ITF,new Date().getTime())}static decodeMiddle(e,n,r,a){let l=new Int32Array(10),c=new Int32Array(5),p=new Int32Array(5);for(l.fill(0),c.fill(0),p.fill(0);n<r;){jt.recordPattern(e,n,l);for(let v=0;v<5;v++){let I=2*v;c[v]=l[I],p[v]=l[I+1]}let x=gt.decodeDigit(c);a.append(x.toString()),x=this.decodeDigit(p),a.append(x.toString()),l.forEach(function(v){n+=v})}}decodeStart(e){let n=gt.skipWhiteSpace(e),r=gt.findGuardPattern(e,n,gt.START_PATTERN);return this.narrowLineWidth=(r[1]-r[0])/4,this.validateQuietZone(e,r[0]),r}validateQuietZone(e,n){let r=this.narrowLineWidth*10;r=r<n?r:n;for(let a=n-1;r>0&&a>=0&&!e.get(a);a--)r--;if(r!==0)throw new re}static skipWhiteSpace(e){const n=e.getSize(),r=e.getNextSet(0);if(r===n)throw new re;return r}decodeEnd(e){e.reverse();try{let n=gt.skipWhiteSpace(e),r;try{r=gt.findGuardPattern(e,n,gt.END_PATTERN_REVERSED[0])}catch(l){l instanceof re&&(r=gt.findGuardPattern(e,n,gt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,r[0]);let a=r[0];return r[0]=e.getSize()-r[1],r[1]=e.getSize()-a,r}finally{e.reverse()}}static findGuardPattern(e,n,r){let a=r.length,l=new Int32Array(a),c=e.getSize(),p=!1,x=0,v=n;l.fill(0);for(let I=n;I<c;I++)if(e.get(I)!==p)l[x]++;else{if(x===a-1){if(jt.patternMatchVariance(l,r,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return[v,I];v+=l[0]+l[1],j.arraycopy(l,2,l,0,x-1),l[x-1]=0,l[x]=0,x--}else x++;l[x]=1,p=!p}throw new re}static decodeDigit(e){let n=gt.MAX_AVG_VARIANCE,r=-1,a=gt.PATTERNS.length;for(let l=0;l<a;l++){let c=gt.PATTERNS[l],p=jt.patternMatchVariance(e,c,gt.MAX_INDIVIDUAL_VARIANCE);p<n?(n=p,r=l):p===n&&(r=-1)}if(r>=0)return r%10;throw new re}}gt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],gt.MAX_AVG_VARIANCE=.38,gt.MAX_INDIVIDUAL_VARIANCE=.5,gt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],gt.START_PATTERN=Int32Array.from([1,1,1,1]),gt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Tt extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let n=!1,r,a=0,l=Int32Array.from([0,0,0]);for(;!n;){l=Int32Array.from([0,0,0]),r=Tt.findGuardPattern(e,a,!1,this.START_END_PATTERN,l);let c=r[0];a=r[1];let p=c-(a-c);p>=0&&(n=e.isRange(p,c,!1))}return r}static checkChecksum(e){return Tt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return Tt.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let a=n-1;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new K;r+=l}r*=3;for(let a=n-2;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new K;r+=l}return(1e3-r)%10}static decodeEnd(e,n){return Tt.findGuardPattern(e,n,!1,Tt.START_END_PATTERN,new Int32Array(Tt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,n,r,a){return this.findGuardPattern(e,n,r,a,new Int32Array(a.length))}static findGuardPattern(e,n,r,a,l){let c=e.getSize();n=r?e.getNextUnset(n):e.getNextSet(n);let p=0,x=n,v=a.length,I=r;for(let N=n;N<c;N++)if(e.get(N)!==I)l[p]++;else{if(p===v-1){if(jt.patternMatchVariance(l,a,Tt.MAX_INDIVIDUAL_VARIANCE)<Tt.MAX_AVG_VARIANCE)return Int32Array.from([x,N]);x+=l[0]+l[1];let R=l.slice(2,l.length-1);for(let L=0;L<p-1;L++)l[L]=R[L];l[p-1]=0,l[p]=0,p--}else p++;l[p]=1,I=!I}throw new re}static decodeDigit(e,n,r,a){this.recordPattern(e,r,n);let l=this.MAX_AVG_VARIANCE,c=-1,p=a.length;for(let x=0;x<p;x++){let v=a[x],I=jt.patternMatchVariance(n,v,Tt.MAX_INDIVIDUAL_VARIANCE);I<l&&(l=I,c=x)}if(c>=0)return c;throw new re}}Tt.MAX_AVG_VARIANCE=.48,Tt.MAX_INDIVIDUAL_VARIANCE=.7,Tt.START_END_PATTERN=Int32Array.from([1,1,1]),Tt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Tt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Zr{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(n,r,a),c=a.toString(),p=Zr.parseExtensionString(c),x=[new Ie((r[0]+r[1])/2,e),new Ie(l,e)],v=new Pe(c,null,0,x,xe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&v.putAllMetadata(p),v}decodeMiddle(e,n,r){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),c=n[1],p=0;for(let v=0;v<5&&c<l;v++){let I=Tt.decodeDigit(e,a,c,Tt.L_AND_G_PATTERNS);r+=String.fromCharCode(48+I%10);for(let N of a)c+=N;I>=10&&(p|=1<<4-v),v!==4&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==5)throw new re;let x=this.determineCheckDigit(p);if(Zr.extensionChecksum(r.toString())!==x)throw new re;return c}static extensionChecksum(e){let n=e.length,r=0;for(let a=n-2;a>=0;a-=2)r+=e.charAt(a).charCodeAt(0)-48;r*=3;for(let a=n-1;a>=0;a-=2)r+=e.charAt(a).charCodeAt(0)-48;return r*=3,r%10}determineCheckDigit(e){for(let n=0;n<10;n++)if(e===this.CHECK_DIGIT_ENCODINGS[n])return n;throw new re}static parseExtensionString(e){if(e.length!==5)return null;let n=Zr.parseExtension5String(e);return n==null?null:new Map([[He.SUGGESTED_PRICE,n]])}static parseExtension5String(e){let n;switch(e.charAt(0)){case"0":n="";break;case"5":n="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}n="";break;default:n="";break}let r=parseInt(e.substring(1)),a=(r/100).toString(),l=r%100,c=l<10?"0"+l:l.toString();return n+a+"."+c}}class Ki{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,n,r){let a=this.decodeRowStringBuffer,l=this.decodeMiddle(n,r,a),c=a.toString(),p=Ki.parseExtensionString(c),x=[new Ie((r[0]+r[1])/2,e),new Ie(l,e)],v=new Pe(c,null,0,x,xe.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&v.putAllMetadata(p),v}decodeMiddle(e,n,r){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),c=n[1],p=0;for(let x=0;x<2&&c<l;x++){let v=Tt.decodeDigit(e,a,c,Tt.L_AND_G_PATTERNS);r+=String.fromCharCode(48+v%10);for(let I of a)c+=I;v>=10&&(p|=1<<1-x),x!==1&&(c=e.getNextSet(c),c=e.getNextUnset(c))}if(r.length!==2)throw new re;if(parseInt(r.toString())%4!==p)throw new re;return c}static parseExtensionString(e){return e.length!==2?null:new Map([[He.ISSUE_NUMBER,parseInt(e)]])}}class Ds{static decodeRow(e,n,r){let a=Tt.findGuardPattern(n,r,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Zr().decodeRow(e,n,a)}catch{return new Ki().decodeRow(e,n,a)}}}Ds.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Je extends Tt{constructor(){super(),this.decodeRowStringBuffer="",Je.L_AND_G_PATTERNS=Je.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let n=Je.L_PATTERNS[e-10],r=new Int32Array(n.length);for(let a=0;a<n.length;a++)r[a]=n[n.length-a-1];Je.L_AND_G_PATTERNS[e]=r}}decodeRow(e,n,r){let a=Je.findStartGuardPattern(n),l=r==null?null:r.get(he.NEED_RESULT_POINT_CALLBACK);if(l!=null){const ue=new Ie((a[0]+a[1])/2,e);l.foundPossibleResultPoint(ue)}let c=this.decodeMiddle(n,a,this.decodeRowStringBuffer),p=c.rowOffset,x=c.resultString;if(l!=null){const ue=new Ie(p,e);l.foundPossibleResultPoint(ue)}let v=this.decodeEnd(n,p);if(l!=null){const ue=new Ie((v[0]+v[1])/2,e);l.foundPossibleResultPoint(ue)}let I=v[1],N=I+(I-v[0]);if(N>=n.getSize()||!n.isRange(I,N,!1))throw new re;let R=x.toString();if(R.length<8)throw new K;if(!Je.checkChecksum(R))throw new B;let L=(a[1]+a[0])/2,U=(v[1]+v[0])/2,V=this.getBarcodeFormat(),Y=[new Ie(L,e),new Ie(U,e)],ee=new Pe(R,null,0,Y,V,new Date().getTime()),ge=0;try{let ue=Ds.decodeRow(e,n,v[1]);ee.putMetadata(He.UPC_EAN_EXTENSION,ue.getText()),ee.putAllMetadata(ue.getResultMetadata()),ee.addResultPoints(ue.getResultPoints()),ge=ue.getText().length}catch{}let pe=r==null?null:r.get(he.ALLOWED_EAN_EXTENSIONS);if(pe!=null){let ue=!1;for(let Ke in pe)if(ge.toString()===Ke){ue=!0;break}if(!ue)throw new re}return ee}decodeEnd(e,n){return Je.findGuardPattern(e,n,!1,Je.START_END_PATTERN,new Int32Array(Je.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return Je.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let n=e.length;if(n===0)return!1;let r=parseInt(e.charAt(n-1),10);return Je.getStandardUPCEANChecksum(e.substring(0,n-1))===r}static getStandardUPCEANChecksum(e){let n=e.length,r=0;for(let a=n-1;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new K;r+=l}r*=3;for(let a=n-2;a>=0;a-=2){let l=e.charAt(a).charCodeAt(0)-48;if(l<0||l>9)throw new K;r+=l}return(1e3-r)%10}}class Hn extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),c=n[1],p=0;for(let v=0;v<6&&c<l;v++){let I=Je.decodeDigit(e,a,c,Je.L_AND_G_PATTERNS);r+=String.fromCharCode(48+I%10);for(let N of a)c+=N;I>=10&&(p|=1<<5-v)}r=Hn.determineFirstDigit(r,p),c=Je.findGuardPattern(e,c,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&c<l;v++){let I=Je.decodeDigit(e,a,c,Je.L_PATTERNS);r+=String.fromCharCode(48+I);for(let N of a)c+=N}return{rowOffset:c,resultString:r}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(e,n){for(let r=0;r<10;r++)if(n===this.FIRST_DIGIT_ENCODINGS[r])return e=String.fromCharCode(48+r)+e,e;throw new re}}Hn.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class To extends Je{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,n,r){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),c=n[1];for(let x=0;x<4&&c<l;x++){let v=Je.decodeDigit(e,a,c,Je.L_PATTERNS);r+=String.fromCharCode(48+v);for(let I of a)c+=I}c=Je.findGuardPattern(e,c,!0,Je.MIDDLE_PATTERN,new Int32Array(Je.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&c<l;x++){let v=Je.decodeDigit(e,a,c,Je.L_PATTERNS);r+=String.fromCharCode(48+v);for(let I of a)c+=I}return{rowOffset:c,resultString:r}}getBarcodeFormat(){return xe.EAN_8}}class bo extends Je{constructor(){super(...arguments),this.ean13Reader=new Hn}getBarcodeFormat(){return xe.UPC_A}decode(e,n){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,n,r){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,n,r))}decodeMiddle(e,n,r){return this.ean13Reader.decodeMiddle(e,n,r)}maybeReturnResult(e){let n=e.getText();if(n.charAt(0)==="0"){let r=new Pe(n.substring(1),null,null,e.getResultPoints(),xe.UPC_A);return e.getResultMetadata()!=null&&r.putAllMetadata(e.getResultMetadata()),r}else throw new re}reset(){this.ean13Reader.reset()}}class Vn extends Je{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,n,r){const a=this.decodeMiddleCounters.map(v=>v);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const l=e.getSize();let c=n[1],p=0;for(let v=0;v<6&&c<l;v++){const I=Vn.decodeDigit(e,a,c,Vn.L_AND_G_PATTERNS);r+=String.fromCharCode(48+I%10);for(let N of a)c+=N;I>=10&&(p|=1<<5-v)}let x=Vn.determineNumSysAndCheckDigit(r,p);return{rowOffset:c,resultString:x}}decodeEnd(e,n){return Vn.findGuardPatternWithoutCounters(e,n,!0,Vn.MIDDLE_END_PATTERN)}checkChecksum(e){return Je.checkChecksum(Vn.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,n){for(let r=0;r<=1;r++)for(let a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[r][a]){let l=String.fromCharCode(48+r),c=String.fromCharCode(48+a);return l+e+c}throw re.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(e){const n=e.slice(1,7).split("").map(l=>l.charCodeAt(0)),r=new Ye;r.append(e.charAt(0));let a=n[5];switch(a){case 0:case 1:case 2:r.appendChars(n,0,2),r.append(a),r.append("0000"),r.appendChars(n,2,3);break;case 3:r.appendChars(n,0,3),r.append("00000"),r.appendChars(n,3,2);break;case 4:r.appendChars(n,0,4),r.append("00000"),r.append(n[4]);break;default:r.appendChars(n,0,5),r.append("0000"),r.append(a);break}return e.length>=8&&r.append(e.charAt(7)),r.toString()}}Vn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Vn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ls extends jt{constructor(e){super();let n=e==null?null:e.get(he.POSSIBLE_FORMATS),r=[];h(n)?(r.push(new Hn),r.push(new bo),r.push(new To),r.push(new Vn)):(n.indexOf(xe.EAN_13)>-1&&r.push(new Hn),n.indexOf(xe.UPC_A)>-1&&r.push(new bo),n.indexOf(xe.EAN_8)>-1&&r.push(new To),n.indexOf(xe.UPC_E)>-1&&r.push(new Vn)),this.readers=r}decodeRow(e,n,r){for(let a of this.readers)try{const l=a.decodeRow(e,n,r),c=l.getBarcodeFormat()===xe.EAN_13&&l.getText().charAt(0)==="0",p=r==null?null:r.get(he.POSSIBLE_FORMATS),x=p==null||p.includes(xe.UPC_A);if(c&&x){const v=l.getRawBytes(),I=new Pe(l.getText().substring(1),v,v?v.length:null,l.getResultPoints(),xe.UPC_A);return I.putAllMetadata(l.getResultMetadata()),I}return l}catch{}throw new re}reset(){for(let e of this.readers)e.reset()}}class cn extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,n){for(let r=0;r<n.length;r++)if(jt.patternMatchVariance(e,n[r],cn.MAX_INDIVIDUAL_VARIANCE)<cn.MAX_AVG_VARIANCE)return r;throw new re}static count(e){return nt.sum(new Int32Array(e))}static increment(e,n){let r=0,a=n[0];for(let l=1;l<e.length;l++)n[l]>a&&(a=n[l],r=l);e[r]++}static decrement(e,n){let r=0,a=n[0];for(let l=1;l<e.length;l++)n[l]<a&&(a=n[l],r=l);e[r]--}static isFinderPattern(e){let n=e[0]+e[1],r=n+e[2]+e[3],a=n/r;if(a>=cn.MIN_FINDER_PATTERN_RATIO&&a<=cn.MAX_FINDER_PATTERN_RATIO){let l=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let p of e)p>c&&(c=p),p<l&&(l=p);return c<10*l}return!1}}cn.MAX_AVG_VARIANCE=.2,cn.MAX_INDIVIDUAL_VARIANCE=.45,cn.MIN_FINDER_PATTERN_RATIO=9.5/12,cn.MAX_FINDER_PATTERN_RATIO=12.5/14;class zr{constructor(e,n){this.value=e,this.checksumPortion=n}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof zr))return!1;const n=e;return this.value===n.value&&this.checksumPortion===n.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Zi{constructor(e,n,r,a,l){this.value=e,this.startEnd=n,this.value=e,this.startEnd=n,this.resultPoints=new Array,this.resultPoints.push(new Ie(r,l)),this.resultPoints.push(new Ie(a,l))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Zi))return!1;const n=e;return this.value===n.value}hashCode(){return this.value}}class On{constructor(){}static getRSSvalue(e,n,r){let a=0;for(let x of e)a+=x;let l=0,c=0,p=e.length;for(let x=0;x<p-1;x++){let v;for(v=1,c|=1<<x;v<e[x];v++,c&=~(1<<x)){let I=On.combins(a-v-1,p-x-2);if(r&&c===0&&a-v-(p-x-1)>=p-x-1&&(I-=On.combins(a-v-(p-x),p-x-2)),p-x-1>1){let N=0;for(let R=a-v-(p-x-2);R>n;R--)N+=On.combins(a-v-R-1,p-x-3);I-=N*(p-1-x)}else a-v>n&&I--;l+=I}a-=v}return l}static combins(e,n){let r,a;e-n>n?(a=n,r=e-n):(a=e-n,r=n);let l=1,c=1;for(let p=e;p>r;p--)l*=p,c<=a&&(l/=c,c++);for(;c<=a;)l/=c,c++;return l}}class No{static buildBitArray(e){let n=e.length*2-1;e[e.length-1].getRightChar()==null&&(n-=1);let r=12*n,a=new J(r),l=0,p=e[0].getRightChar().getValue();for(let x=11;x>=0;--x)(p&1<<x)!=0&&a.set(l),l++;for(let x=1;x<e.length;++x){let v=e[x],I=v.getLeftChar().getValue();for(let N=11;N>=0;--N)(I&1<<N)!=0&&a.set(l),l++;if(v.getRightChar()!=null){let N=v.getRightChar().getValue();for(let R=11;R>=0;--R)(N&1<<R)!=0&&a.set(l),l++}}return a}}class er{constructor(e,n){n?this.decodedInformation=null:(this.finished=e,this.decodedInformation=n)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Oo{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class en extends Oo{constructor(e,n){super(e),this.value=n}getValue(){return this.value}isFNC1(){return this.value===en.FNC1}}en.FNC1="$";class pr extends Oo{constructor(e,n,r){super(e),r?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=n}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Sn extends Oo{constructor(e,n,r){if(super(e),n<0||n>10||r<0||r>10)throw new K;this.firstDigit=n,this.secondDigit=r}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Sn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Sn.FNC1}isAnyFNC1(){return this.firstDigit===Sn.FNC1||this.secondDigit===Sn.FNC1}}Sn.FNC1=10;class Ae{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new re;let n=e.substring(0,2);for(let l of Ae.TWO_DIGIT_DATA_LENGTH)if(l[0]===n)return l[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(2,l[2],e):Ae.processFixedAI(2,l[1],e);if(e.length<3)throw new re;let r=e.substring(0,3);for(let l of Ae.THREE_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(3,l[2],e):Ae.processFixedAI(3,l[1],e);for(let l of Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(l[0]===r)return l[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,l[2],e):Ae.processFixedAI(4,l[1],e);if(e.length<4)throw new re;let a=e.substring(0,4);for(let l of Ae.FOUR_DIGIT_DATA_LENGTH)if(l[0]===a)return l[1]===Ae.VARIABLE_LENGTH?Ae.processVariableAI(4,l[2],e):Ae.processFixedAI(4,l[1],e);throw new re}static processFixedAI(e,n,r){if(r.length<e)throw new re;let a=r.substring(0,e);if(r.length<e+n)throw new re;let l=r.substring(e,e+n),c=r.substring(e+n),p="("+a+")"+l,x=Ae.parseFieldsInGeneralPurpose(c);return x==null?p:p+x}static processVariableAI(e,n,r){let a=r.substring(0,e),l;r.length<e+n?l=r.length:l=e+n;let c=r.substring(e,l),p=r.substring(l),x="("+a+")"+c,v=Ae.parseFieldsInGeneralPurpose(p);return v==null?x:x+v}}Ae.VARIABLE_LENGTH=[],Ae.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ae.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ae.VARIABLE_LENGTH,20],["22",Ae.VARIABLE_LENGTH,29],["30",Ae.VARIABLE_LENGTH,8],["37",Ae.VARIABLE_LENGTH,8],["90",Ae.VARIABLE_LENGTH,30],["91",Ae.VARIABLE_LENGTH,30],["92",Ae.VARIABLE_LENGTH,30],["93",Ae.VARIABLE_LENGTH,30],["94",Ae.VARIABLE_LENGTH,30],["95",Ae.VARIABLE_LENGTH,30],["96",Ae.VARIABLE_LENGTH,30],["97",Ae.VARIABLE_LENGTH,3],["98",Ae.VARIABLE_LENGTH,30],["99",Ae.VARIABLE_LENGTH,30]],Ae.THREE_DIGIT_DATA_LENGTH=[["240",Ae.VARIABLE_LENGTH,30],["241",Ae.VARIABLE_LENGTH,30],["242",Ae.VARIABLE_LENGTH,6],["250",Ae.VARIABLE_LENGTH,30],["251",Ae.VARIABLE_LENGTH,30],["253",Ae.VARIABLE_LENGTH,17],["254",Ae.VARIABLE_LENGTH,20],["400",Ae.VARIABLE_LENGTH,30],["401",Ae.VARIABLE_LENGTH,30],["402",17],["403",Ae.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ae.VARIABLE_LENGTH,20],["421",Ae.VARIABLE_LENGTH,15],["422",3],["423",Ae.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ae.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ae.VARIABLE_LENGTH,15],["391",Ae.VARIABLE_LENGTH,18],["392",Ae.VARIABLE_LENGTH,15],["393",Ae.VARIABLE_LENGTH,18],["703",Ae.VARIABLE_LENGTH,30]],Ae.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ae.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ae.VARIABLE_LENGTH,20],["8003",Ae.VARIABLE_LENGTH,30],["8004",Ae.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ae.VARIABLE_LENGTH,30],["8008",Ae.VARIABLE_LENGTH,12],["8018",18],["8020",Ae.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ae.VARIABLE_LENGTH,70],["8200",Ae.VARIABLE_LENGTH,70]];class wi{constructor(e){this.buffer=new Ye,this.information=e}decodeAllCodes(e,n){let r=n,a=null;do{let l=this.decodeGeneralPurposeField(r,a),c=Ae.parseFieldsInGeneralPurpose(l.getNewString());if(c!=null&&e.append(c),l.isRemaining()?a=""+l.getRemainingValue():a=null,r===l.getNewPosition())break;r=l.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let n=e;n<e+3;++n)if(this.information.get(n))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let l=this.extractNumericValueFromBitArray(e,4);return l===0?new Sn(this.information.getSize(),Sn.FNC1,Sn.FNC1):new Sn(this.information.getSize(),l-1,Sn.FNC1)}let n=this.extractNumericValueFromBitArray(e,7),r=(n-8)/11,a=(n-8)%11;return new Sn(e+7,r,a)}extractNumericValueFromBitArray(e,n){return wi.extractNumericValueFromBitArray(this.information,e,n)}static extractNumericValueFromBitArray(e,n,r){let a=0;for(let l=0;l<r;++l)e.get(n+l)&&(a|=1<<r-l-1);return a}decodeGeneralPurposeField(e,n){this.buffer.setLengthToZero(),n!=null&&this.buffer.append(n),this.current.setPosition(e);let r=this.parseBlocks();return r!=null&&r.isRemaining()?new pr(this.current.getPosition(),this.buffer.toString(),r.getRemainingValue()):new pr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,n;do{let r=this.current.getPosition();if(this.current.isAlpha()?(n=this.parseAlphaBlock(),e=n.isFinished()):this.current.isIsoIec646()?(n=this.parseIsoIec646Block(),e=n.isFinished()):(n=this.parseNumericBlock(),e=n.isFinished()),!(r!==this.current.getPosition())&&!e)break}while(!e);return n.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let n;return e.isSecondDigitFNC1()?n=new pr(this.current.getPosition(),this.buffer.toString()):n=new pr(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new er(!0,n)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let n=new pr(this.current.getPosition(),this.buffer.toString());return new er(!0,n)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new er(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new pr(this.current.getPosition(),this.buffer.toString());return new er(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new er(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let n=new pr(this.current.getPosition(),this.buffer.toString());return new er(!0,n)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new er(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+7>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<116)return!0;if(e+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253}decodeIsoIec646(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new en(e+5,en.FNC1);if(n>=5&&n<15)return new en(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,7);if(r>=64&&r<90)return new en(e+7,""+(r+1));if(r>=90&&r<116)return new en(e+7,""+(r+7));let a=this.extractNumericValueFromBitArray(e,8),l;switch(a){case 232:l="!";break;case 233:l='"';break;case 234:l="%";break;case 235:l="&";break;case 236:l="'";break;case 237:l="(";break;case 238:l=")";break;case 239:l="*";break;case 240:l="+";break;case 241:l=",";break;case 242:l="-";break;case 243:l=".";break;case 244:l="/";break;case 245:l=":";break;case 246:l=";";break;case 247:l="<";break;case 248:l="=";break;case 249:l=">";break;case 250:l="?";break;case 251:l="_";break;case 252:l=" ";break;default:throw new K}return new en(e+8,l)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let n=this.extractNumericValueFromBitArray(e,5);if(n>=5&&n<16)return!0;if(e+6>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,6);return r>=16&&r<63}decodeAlphanumeric(e){let n=this.extractNumericValueFromBitArray(e,5);if(n===15)return new en(e+5,en.FNC1);if(n>=5&&n<15)return new en(e+5,"0"+(n-5));let r=this.extractNumericValueFromBitArray(e,6);if(r>=32&&r<58)return new en(e+6,""+(r+33));let a;switch(r){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Zn("Decoding invalid alphanumeric value: "+r)}return new en(e+6,a)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<5&&n+e<this.information.getSize();++n)if(n===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+n))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let n=e;n<e+3;++n)if(this.information.get(n))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let n=0;n<4&&n+e<this.information.getSize();++n)if(this.information.get(e+n))return!1;return!0}}class Ro{constructor(e){this.information=e,this.generalDecoder=new wi(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Rn extends Ro{constructor(e){super(e)}encodeCompressedGtin(e,n){e.append("(01)");let r=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,n,r)}encodeCompressedGtinWithoutAI(e,n,r){for(let a=0;a<4;++a){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);l/100===0&&e.append("0"),l/10===0&&e.append("0"),e.append(l)}Rn.appendCheckDigit(e,r)}static appendCheckDigit(e,n){let r=0;for(let a=0;a<13;a++){let l=e.charAt(a+n).charCodeAt(0)-48;r+=(a&1)===0?3*l:l}r=10-r%10,r===10&&(r=0),e.append(r)}}Rn.GTIN_SIZE=40;class Wn extends Rn{constructor(e){super(e)}parseInformation(){let e=new Ye;e.append("(01)");let n=e.length(),r=this.getGeneralDecoder().extractNumericValueFromBitArray(Wn.HEADER_SIZE,4);return e.append(r),this.encodeCompressedGtinWithoutAI(e,Wn.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(e,Wn.HEADER_SIZE+44)}}Wn.HEADER_SIZE=4;class Ji extends Ro{constructor(e){super(e)}parseInformation(){let e=new Ye;return this.getGeneralDecoder().decodeAllCodes(e,Ji.HEADER_SIZE)}}Ji.HEADER_SIZE=5;class es extends Rn{constructor(e){super(e)}encodeCompressedWeight(e,n,r){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,r);this.addWeightCode(e,a);let l=this.checkWeight(a),c=1e5;for(let p=0;p<5;++p)l/c===0&&e.append("0"),c/=10;e.append(l)}}class mr extends es{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=mr.HEADER_SIZE+es.GTIN_SIZE+mr.WEIGHT_SIZE)throw new re;let e=new Ye;return this.encodeCompressedGtin(e,mr.HEADER_SIZE),this.encodeCompressedWeight(e,mr.HEADER_SIZE+es.GTIN_SIZE,mr.WEIGHT_SIZE),e.toString()}}mr.HEADER_SIZE=5,mr.WEIGHT_SIZE=15;class ba extends mr{constructor(e){super(e)}addWeightCode(e,n){e.append("(3103)")}checkWeight(e){return e}}class Na extends mr{constructor(e){super(e)}addWeightCode(e,n){n<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class tr extends Rn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<tr.HEADER_SIZE+Rn.GTIN_SIZE)throw new re;let e=new Ye;this.encodeCompressedGtin(e,tr.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(tr.HEADER_SIZE+Rn.GTIN_SIZE,tr.LAST_DIGIT_SIZE);e.append("(392"),e.append(n),e.append(")");let r=this.getGeneralDecoder().decodeGeneralPurposeField(tr.HEADER_SIZE+Rn.GTIN_SIZE+tr.LAST_DIGIT_SIZE,null);return e.append(r.getNewString()),e.toString()}}tr.HEADER_SIZE=8,tr.LAST_DIGIT_SIZE=2;class wn extends Rn{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+Rn.GTIN_SIZE)throw new re;let e=new Ye;this.encodeCompressedGtin(e,wn.HEADER_SIZE);let n=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+Rn.GTIN_SIZE,wn.LAST_DIGIT_SIZE);e.append("(393"),e.append(n),e.append(")");let r=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+Rn.GTIN_SIZE+wn.LAST_DIGIT_SIZE,wn.FIRST_THREE_DIGITS_SIZE);r/100==0&&e.append("0"),r/10==0&&e.append("0"),e.append(r);let a=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+Rn.GTIN_SIZE+wn.LAST_DIGIT_SIZE+wn.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2,wn.FIRST_THREE_DIGITS_SIZE=10;class bt extends es{constructor(e,n,r){super(e),this.dateCode=r,this.firstAIdigits=n}parseInformation(){if(this.getInformation().getSize()!=bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE+bt.DATE_SIZE)throw new re;let e=new Ye;return this.encodeCompressedGtin(e,bt.HEADER_SIZE),this.encodeCompressedWeight(e,bt.HEADER_SIZE+bt.GTIN_SIZE,bt.WEIGHT_SIZE),this.encodeCompressedDate(e,bt.HEADER_SIZE+bt.GTIN_SIZE+bt.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,n){let r=this.getGeneralDecoder().extractNumericValueFromBitArray(n,bt.DATE_SIZE);if(r==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let a=r%32;r/=32;let l=r%12+1;r/=12;let c=r;c/10==0&&e.append("0"),e.append(c),l/10==0&&e.append("0"),e.append(l),a/10==0&&e.append("0"),e.append(a)}addWeightCode(e,n){e.append("("),e.append(this.firstAIdigits),e.append(n/1e5),e.append(")")}checkWeight(e){return e%1e5}}bt.HEADER_SIZE=8,bt.WEIGHT_SIZE=20,bt.DATE_SIZE=16;function Oa(b){try{if(b.get(1))return new Wn(b);if(!b.get(2))return new Ji(b);switch(wi.extractNumericValueFromBitArray(b,1,4)){case 4:return new ba(b);case 5:return new Na(b)}switch(wi.extractNumericValueFromBitArray(b,1,5)){case 12:return new tr(b);case 13:return new wn(b)}switch(wi.extractNumericValueFromBitArray(b,1,7)){case 56:return new bt(b,"310","11");case 57:return new bt(b,"320","11");case 58:return new bt(b,"310","13");case 59:return new bt(b,"320","13");case 60:return new bt(b,"310","15");case 61:return new bt(b,"320","15");case 62:return new bt(b,"310","17");case 63:return new bt(b,"320","17")}}catch(e){throw console.log(e),new Zn("unknown decoder: "+b)}}class wt{constructor(e,n,r,a){this.leftchar=e,this.rightchar=n,this.finderpattern=r,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,n){return e instanceof wt?wt.equalsOrNull(e.leftchar,n.leftchar)&&wt.equalsOrNull(e.rightchar,n.rightchar)&&wt.equalsOrNull(e.finderpattern,n.finderpattern):!1}static equalsOrNull(e,n){return e===null?n===null:wt.equals(e,n)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Mo{constructor(e,n,r){this.pairs=e,this.rowNumber=n,this.wasReversed=r}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,n){return e instanceof Mo?this.checkEqualitity(e,n)&&e.wasReversed===n.wasReversed:!1}checkEqualitity(e,n){if(!e||!n)return;let r;return e.forEach((a,l)=>{n.forEach(c=>{a.getLeftChar().getValue()===c.getLeftChar().getValue()&&a.getRightChar().getValue()===c.getRightChar().getValue()&&a.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(r=!0)})}),r}}class ae extends cn{constructor(e){super(...arguments),this.pairs=new Array(ae.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,n,r){this.pairs.length=0,this.startFromEven=!1;try{return ae.constructResult(this.decodeRow2pairs(e,n))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,ae.constructResult(this.decodeRow2pairs(e,n))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,n){let r=!1;for(;!r;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,e))}catch(l){if(l instanceof re){if(!this.pairs.length)throw new re;r=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){let l=this.checkRowsBoolean(!1);if(l!=null||(l=this.checkRowsBoolean(!0),l!=null))return l}throw new re}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let n=null;try{n=this.checkRows(new Array,0)}catch(r){this.verbose&&console.log(r)}return e&&(this.rows=this.rows.reverse()),n}checkRows(e,n){for(let r=n;r<this.rows.length;r++){let a=this.rows[r];this.pairs.length=0;for(let c of e)this.pairs.push(c.getPairs());if(this.pairs.push(a.getPairs()),!ae.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let l=new Array(e);l.push(a);try{return this.checkRows(l,r+1)}catch(c){this.verbose&&console.log(c)}}throw new re}static isValidSequence(e){for(let n of ae.FINDER_PATTERN_SEQUENCES){if(e.length>n.length)continue;let r=!0;for(let a=0;a<e.length;a++)if(e[a].getFinderPattern().getValue()!=n[a]){r=!1;break}if(r)return!0}return!1}storeRow(e,n){let r=0,a=!1,l=!1;for(;r<this.rows.length;){let c=this.rows[r];if(c.getRowNumber()>e){l=c.isEquivalent(this.pairs);break}a=c.isEquivalent(this.pairs),r++}l||a||ae.isPartialRow(this.pairs,this.rows)||(this.rows.push(r,new Mo(this.pairs,e,n)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,n){for(let r of n)if(r.getPairs().length!==e.length){for(let a of r.getPairs())for(let l of e)if(wt.equals(a,l))break}}static isPartialRow(e,n){for(let r of n){let a=!0;for(let l of e){let c=!1;for(let p of r.getPairs())if(l.equals(p)){c=!0;break}if(!c){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(e){let n=No.buildBitArray(e),a=Oa(n).parseInformation(),l=e[0].getFinderPattern().getResultPoints(),c=e[e.length-1].getFinderPattern().getResultPoints(),p=[l[0],l[1],c[0],c[1]];return new Pe(a,null,null,p,xe.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),n=e.getLeftChar(),r=e.getRightChar();if(r==null)return!1;let a=r.getChecksumPortion(),l=2;for(let p=1;p<this.pairs.size();++p){let x=this.pairs.get(p);a+=x.getLeftChar().getChecksumPortion(),l++;let v=x.getRightChar();v!=null&&(a+=v.getChecksumPortion(),l++)}return a%=211,211*(l-4)+a==n.getValue()}static getNextSecondBar(e,n){let r;return e.get(n)?(r=e.getNextUnset(n),r=e.getNextSet(r)):(r=e.getNextSet(n),r=e.getNextUnset(r)),r}retrieveNextPair(e,n,r){let a=n.length%2==0;this.startFromEven&&(a=!a);let l,c=!0,p=-1;do this.findNextPair(e,n,p),l=this.parseFoundFinderPattern(e,r,a),l==null?p=ae.getNextSecondBar(e,this.startEnd[0]):c=!1;while(c);let x=this.decodeDataCharacter(e,l,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new re;let v;try{v=this.decodeDataCharacter(e,l,a,!1)}catch(I){v=null,this.verbose&&console.log(I)}return new wt(x,v,l,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,n,r){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let l=e.getSize(),c;r>=0?c=r:this.isEmptyPair(n)?c=0:c=n[n.length-1].getFinderPattern().getStartEnd()[1];let p=n.length%2!=0;this.startFromEven&&(p=!p);let x=!1;for(;c<l&&(x=!e.get(c),!!x);)c++;let v=0,I=c;for(let N=c;N<l;N++)if(e.get(N)!=x)a[v]++;else{if(v==3){if(p&&ae.reverseCounters(a),ae.isFinderPattern(a)){this.startEnd[0]=I,this.startEnd[1]=N;return}p&&ae.reverseCounters(a),I+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,v--}else v++;a[v]=1,x=!x}throw new re}static reverseCounters(e){let n=e.length;for(let r=0;r<n/2;++r){let a=e[r];e[r]=e[n-r-1],e[n-r-1]=a}}parseFoundFinderPattern(e,n,r){let a,l,c;if(r){let v=this.startEnd[0]-1;for(;v>=0&&!e.get(v);)v--;v++,a=this.startEnd[0]-v,l=v,c=this.startEnd[1]}else l=this.startEnd[0],c=e.getNextUnset(this.startEnd[1]+1),a=c-this.startEnd[1];let p=this.getDecodeFinderCounters();j.arraycopy(p,0,p,1,p.length-1),p[0]=a;let x;try{x=this.parseFinderValue(p,ae.FINDER_PATTERNS)}catch{return null}return new Zi(x,[l,c],l,c,n)}decodeDataCharacter(e,n,r,a){let l=this.getDataCharacterCounters();for(let pt=0;pt<l.length;pt++)l[pt]=0;if(a)ae.recordPatternInReverse(e,n.getStartEnd()[0],l);else{ae.recordPattern(e,n.getStartEnd()[1],l);for(let pt=0,Ft=l.length-1;pt<Ft;pt++,Ft--){let Tn=l[pt];l[pt]=l[Ft],l[Ft]=Tn}}let c=17,p=nt.sum(new Int32Array(l))/c,x=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(p-x)/x>.3)throw new re;let v=this.getOddCounts(),I=this.getEvenCounts(),N=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let pt=0;pt<l.length;pt++){let Ft=1*l[pt]/p,Tn=Ft+.5;if(Tn<1){if(Ft<.3)throw new re;Tn=1}else if(Tn>8){if(Ft>8.7)throw new re;Tn=8}let ri=pt/2;(pt&1)==0?(v[ri]=Tn,N[ri]=Ft-Tn):(I[ri]=Tn,R[ri]=Ft-Tn)}this.adjustOddEvenCounts(c);let L=4*n.getValue()+(r?0:2)+(a?0:1)-1,U=0,V=0;for(let pt=v.length-1;pt>=0;pt--){if(ae.isNotA1left(n,r,a)){let Ft=ae.WEIGHTS[L][2*pt];V+=v[pt]*Ft}U+=v[pt]}let Y=0;for(let pt=I.length-1;pt>=0;pt--)if(ae.isNotA1left(n,r,a)){let Ft=ae.WEIGHTS[L][2*pt+1];Y+=I[pt]*Ft}let ee=V+Y;if((U&1)!=0||U>13||U<4)throw new re;let ge=(13-U)/2,pe=ae.SYMBOL_WIDEST[ge],ue=9-pe,Ke=On.getRSSvalue(v,pe,!0),Ge=On.getRSSvalue(I,ue,!1),kn=ae.EVEN_TOTAL_SUBSET[ge],or=ae.GSUM[ge],Zt=Ke*kn+Ge+or;return new zr(Zt,ee)}static isNotA1left(e,n,r){return!(e.getValue()==0&&n&&r)}adjustOddEvenCounts(e){let n=nt.sum(new Int32Array(this.getOddCounts())),r=nt.sum(new Int32Array(this.getEvenCounts())),a=!1,l=!1;n>13?l=!0:n<4&&(a=!0);let c=!1,p=!1;r>13?p=!0:r<4&&(c=!0);let x=n+r-e,v=(n&1)==1,I=(r&1)==0;if(x==1)if(v){if(I)throw new re;l=!0}else{if(!I)throw new re;p=!0}else if(x==-1)if(v){if(I)throw new re;a=!0}else{if(!I)throw new re;c=!0}else if(x==0){if(v){if(!I)throw new re;n<r?(a=!0,p=!0):(l=!0,c=!0)}else if(I)throw new re}else throw new re;if(a){if(l)throw new re;ae.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(l&&ae.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(p)throw new re;ae.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&ae.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ae.SYMBOL_WIDEST=[7,5,4,3,1],ae.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ae.GSUM=[0,348,1388,2948,3988],ae.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ae.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ae.FINDER_PAT_A=0,ae.FINDER_PAT_B=1,ae.FINDER_PAT_C=2,ae.FINDER_PAT_D=3,ae.FINDER_PAT_E=4,ae.FINDER_PAT_F=5,ae.FINDER_PATTERN_SEQUENCES=[[ae.FINDER_PAT_A,ae.FINDER_PAT_A],[ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B],[ae.FINDER_PAT_A,ae.FINDER_PAT_C,ae.FINDER_PAT_B,ae.FINDER_PAT_D],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_C],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_D,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_E,ae.FINDER_PAT_B,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_D],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_E],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F],[ae.FINDER_PAT_A,ae.FINDER_PAT_A,ae.FINDER_PAT_B,ae.FINDER_PAT_B,ae.FINDER_PAT_C,ae.FINDER_PAT_D,ae.FINDER_PAT_D,ae.FINDER_PAT_E,ae.FINDER_PAT_E,ae.FINDER_PAT_F,ae.FINDER_PAT_F]],ae.MAX_PAIRS=11;class Ra extends zr{constructor(e,n,r){super(e,n),this.count=0,this.finderPattern=r}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class _t extends cn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,n,r){const a=this.decodePair(n,!1,e,r);_t.addOrTally(this.possibleLeftPairs,a),n.reverse();let l=this.decodePair(n,!0,e,r);_t.addOrTally(this.possibleRightPairs,l),n.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&_t.checkChecksum(c,p))return _t.constructResult(c,p)}throw new re}static addOrTally(e,n){if(n==null)return;let r=!1;for(let a of e)if(a.getValue()===n.getValue()){a.incrementCount(),r=!0;break}r||e.push(n)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,n){let r=4537077*e.getValue()+n.getValue(),a=new String(r).toString(),l=new Ye;for(let v=13-a.length;v>0;v--)l.append("0");l.append(a);let c=0;for(let v=0;v<13;v++){let I=l.charAt(v).charCodeAt(0)-48;c+=(v&1)===0?3*I:I}c=10-c%10,c===10&&(c=0),l.append(c.toString());let p=e.getFinderPattern().getResultPoints(),x=n.getFinderPattern().getResultPoints();return new Pe(l.toString(),null,0,[p[0],p[1],x[0],x[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(e,n){let r=(e.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,r===a}decodePair(e,n,r,a){try{let l=this.findFinderPattern(e,n),c=this.parseFoundFinderPattern(e,r,n,l),p=a==null?null:a.get(he.NEED_RESULT_POINT_CALLBACK);if(p!=null){let I=(l[0]+l[1])/2;n&&(I=e.getSize()-1-I),p.foundPossibleResultPoint(new Ie(I,r))}let x=this.decodeDataCharacter(e,c,!0),v=this.decodeDataCharacter(e,c,!1);return new Ra(1597*x.getValue()+v.getValue(),x.getChecksumPortion()+4*v.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(e,n,r){let a=this.getDataCharacterCounters();for(let Y=0;Y<a.length;Y++)a[Y]=0;if(r)jt.recordPatternInReverse(e,n.getStartEnd()[0],a);else{jt.recordPattern(e,n.getStartEnd()[1]+1,a);for(let Y=0,ee=a.length-1;Y<ee;Y++,ee--){let ge=a[Y];a[Y]=a[ee],a[ee]=ge}}let l=r?16:15,c=nt.sum(new Int32Array(a))/l,p=this.getOddCounts(),x=this.getEvenCounts(),v=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Y=0;Y<a.length;Y++){let ee=a[Y]/c,ge=Math.floor(ee+.5);ge<1?ge=1:ge>8&&(ge=8);let pe=Math.floor(Y/2);(Y&1)===0?(p[pe]=ge,v[pe]=ee-ge):(x[pe]=ge,I[pe]=ee-ge)}this.adjustOddEvenCounts(r,l);let N=0,R=0;for(let Y=p.length-1;Y>=0;Y--)R*=9,R+=p[Y],N+=p[Y];let L=0,U=0;for(let Y=x.length-1;Y>=0;Y--)L*=9,L+=x[Y],U+=x[Y];let V=R+3*L;if(r){if((N&1)!==0||N>12||N<4)throw new re;let Y=(12-N)/2,ee=_t.OUTSIDE_ODD_WIDEST[Y],ge=9-ee,pe=On.getRSSvalue(p,ee,!1),ue=On.getRSSvalue(x,ge,!0),Ke=_t.OUTSIDE_EVEN_TOTAL_SUBSET[Y],Ge=_t.OUTSIDE_GSUM[Y];return new zr(pe*Ke+ue+Ge,V)}else{if((U&1)!==0||U>10||U<4)throw new re;let Y=(10-U)/2,ee=_t.INSIDE_ODD_WIDEST[Y],ge=9-ee,pe=On.getRSSvalue(p,ee,!0),ue=On.getRSSvalue(x,ge,!1),Ke=_t.INSIDE_ODD_TOTAL_SUBSET[Y],Ge=_t.INSIDE_GSUM[Y];return new zr(ue*Ke+pe+Ge,V)}}findFinderPattern(e,n){let r=this.getDecodeFinderCounters();r[0]=0,r[1]=0,r[2]=0,r[3]=0;let a=e.getSize(),l=!1,c=0;for(;c<a&&(l=!e.get(c),n!==l);)c++;let p=0,x=c;for(let v=c;v<a;v++)if(e.get(v)!==l)r[p]++;else{if(p===3){if(cn.isFinderPattern(r))return[x,v];x+=r[0]+r[1],r[0]=r[2],r[1]=r[3],r[2]=0,r[3]=0,p--}else p++;r[p]=1,l=!l}throw new re}parseFoundFinderPattern(e,n,r,a){let l=e.get(a[0]),c=a[0]-1;for(;c>=0&&l!==e.get(c);)c--;c++;const p=a[0]-c,x=this.getDecodeFinderCounters(),v=new Int32Array(x.length);j.arraycopy(x,0,v,1,x.length-1),v[0]=p;const I=this.parseFinderValue(v,_t.FINDER_PATTERNS);let N=c,R=a[1];return r&&(N=e.getSize()-1-N,R=e.getSize()-1-R),new Zi(I,[c,a[1]],N,R,n)}adjustOddEvenCounts(e,n){let r=nt.sum(new Int32Array(this.getOddCounts())),a=nt.sum(new Int32Array(this.getEvenCounts())),l=!1,c=!1,p=!1,x=!1;e?(r>12?c=!0:r<4&&(l=!0),a>12?x=!0:a<4&&(p=!0)):(r>11?c=!0:r<5&&(l=!0),a>10?x=!0:a<4&&(p=!0));let v=r+a-n,I=(r&1)===(e?1:0),N=(a&1)===1;if(v===1)if(I){if(N)throw new re;c=!0}else{if(!N)throw new re;x=!0}else if(v===-1)if(I){if(N)throw new re;l=!0}else{if(!N)throw new re;p=!0}else if(v===0){if(I){if(!N)throw new re;r<a?(l=!0,x=!0):(c=!0,p=!0)}else if(N)throw new re}else throw new re;if(l){if(c)throw new re;cn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&cn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(x)throw new re;cn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&cn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}_t.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],_t.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],_t.OUTSIDE_GSUM=[0,161,961,2015,2715],_t.INSIDE_GSUM=[0,336,1036,1516],_t.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],_t.INSIDE_ODD_WIDEST=[2,4,6,8],_t.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class yi extends jt{constructor(e,n){super(),this.readers=[],this.verbose=n===!0;const r=e?e.get(he.POSSIBLE_FORMATS):null,a=e&&e.get(he.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;r?((r.includes(xe.EAN_13)||r.includes(xe.UPC_A)||r.includes(xe.EAN_8)||r.includes(xe.UPC_E))&&this.readers.push(new Ls(e)),r.includes(xe.CODE_39)&&this.readers.push(new Qt(a)),r.includes(xe.CODE_128)&&this.readers.push(new we),r.includes(xe.ITF)&&this.readers.push(new gt),r.includes(xe.RSS_14)&&this.readers.push(new _t),r.includes(xe.RSS_EXPANDED)&&this.readers.push(new ae(this.verbose))):(this.readers.push(new Ls(e)),this.readers.push(new Qt),this.readers.push(new Ls(e)),this.readers.push(new we),this.readers.push(new gt),this.readers.push(new _t),this.readers.push(new ae(this.verbose)))}decodeRow(e,n,r){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,n,r)}catch{}throw new re}reset(){this.readers.forEach(e=>e.reset())}}class Ma extends ze{constructor(e=500,n){super(new yi(n),e,n)}}class ct{constructor(e,n,r){this.ecCodewords=e,this.ecBlocks=[n],r&&this.ecBlocks.push(r)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Qe{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class rt{constructor(e,n,r,a,l,c){this.versionNumber=e,this.symbolSizeRows=n,this.symbolSizeColumns=r,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=l,this.ecBlocks=c;let p=0;const x=c.getECCodewords(),v=c.getECBlocks();for(let I of v)p+=I.getCount()*(I.getDataCodewords()+x);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,n){if((e&1)!==0||(n&1)!==0)throw new K;for(let r of rt.VERSIONS)if(r.symbolSizeRows===e&&r.symbolSizeColumns===n)return r;throw new K}toString(){return""+this.versionNumber}static buildVersions(){return[new rt(1,10,10,8,8,new ct(5,new Qe(1,3))),new rt(2,12,12,10,10,new ct(7,new Qe(1,5))),new rt(3,14,14,12,12,new ct(10,new Qe(1,8))),new rt(4,16,16,14,14,new ct(12,new Qe(1,12))),new rt(5,18,18,16,16,new ct(14,new Qe(1,18))),new rt(6,20,20,18,18,new ct(18,new Qe(1,22))),new rt(7,22,22,20,20,new ct(20,new Qe(1,30))),new rt(8,24,24,22,22,new ct(24,new Qe(1,36))),new rt(9,26,26,24,24,new ct(28,new Qe(1,44))),new rt(10,32,32,14,14,new ct(36,new Qe(1,62))),new rt(11,36,36,16,16,new ct(42,new Qe(1,86))),new rt(12,40,40,18,18,new ct(48,new Qe(1,114))),new rt(13,44,44,20,20,new ct(56,new Qe(1,144))),new rt(14,48,48,22,22,new ct(68,new Qe(1,174))),new rt(15,52,52,24,24,new ct(42,new Qe(2,102))),new rt(16,64,64,14,14,new ct(56,new Qe(2,140))),new rt(17,72,72,16,16,new ct(36,new Qe(4,92))),new rt(18,80,80,18,18,new ct(48,new Qe(4,114))),new rt(19,88,88,20,20,new ct(56,new Qe(4,144))),new rt(20,96,96,22,22,new ct(68,new Qe(4,174))),new rt(21,104,104,24,24,new ct(56,new Qe(6,136))),new rt(22,120,120,18,18,new ct(68,new Qe(6,175))),new rt(23,132,132,20,20,new ct(62,new Qe(8,163))),new rt(24,144,144,22,22,new ct(62,new Qe(8,156),new Qe(2,155))),new rt(25,8,18,6,16,new ct(7,new Qe(1,5))),new rt(26,8,32,6,14,new ct(11,new Qe(1,10))),new rt(27,12,26,10,24,new ct(14,new Qe(1,16))),new rt(28,12,36,10,16,new ct(18,new Qe(1,22))),new rt(29,16,36,14,16,new ct(24,new Qe(1,32))),new rt(30,16,48,14,22,new ct(28,new Qe(1,49)))]}}rt.VERSIONS=rt.buildVersions();class jn{constructor(e){const n=e.getHeight();if(n<8||n>144||(n&1)!==0)throw new K;this.version=jn.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Ze(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const n=e.getHeight(),r=e.getWidth();return rt.getVersionForDimensions(n,r)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let n=0,r=4,a=0;const l=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let p=!1,x=!1,v=!1,I=!1;do if(r===l&&a===0&&!p)e[n++]=this.readCorner1(l,c)&255,r-=2,a+=2,p=!0;else if(r===l-2&&a===0&&(c&3)!==0&&!x)e[n++]=this.readCorner2(l,c)&255,r-=2,a+=2,x=!0;else if(r===l+4&&a===2&&(c&7)===0&&!v)e[n++]=this.readCorner3(l,c)&255,r-=2,a+=2,v=!0;else if(r===l-2&&a===0&&(c&7)===4&&!I)e[n++]=this.readCorner4(l,c)&255,r-=2,a+=2,I=!0;else{do r<l&&a>=0&&!this.readMappingMatrix.get(a,r)&&(e[n++]=this.readUtah(r,a,l,c)&255),r-=2,a+=2;while(r>=0&&a<c);r+=1,a+=3;do r>=0&&a<c&&!this.readMappingMatrix.get(a,r)&&(e[n++]=this.readUtah(r,a,l,c)&255),r+=2,a-=2;while(r<l&&a>=0);r+=3,a+=1}while(r<l||a<c);if(n!==this.version.getTotalCodewords())throw new K;return e}readModule(e,n,r,a){return e<0&&(e+=r,n+=4-(r+4&7)),n<0&&(n+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(n,e),this.mappingBitMatrix.get(n,e)}readUtah(e,n,r,a){let l=0;return this.readModule(e-2,n-2,r,a)&&(l|=1),l<<=1,this.readModule(e-2,n-1,r,a)&&(l|=1),l<<=1,this.readModule(e-1,n-2,r,a)&&(l|=1),l<<=1,this.readModule(e-1,n-1,r,a)&&(l|=1),l<<=1,this.readModule(e-1,n,r,a)&&(l|=1),l<<=1,this.readModule(e,n-2,r,a)&&(l|=1),l<<=1,this.readModule(e,n-1,r,a)&&(l|=1),l<<=1,this.readModule(e,n,r,a)&&(l|=1),l}readCorner1(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,1,e,n)&&(r|=1),r<<=1,this.readModule(e-1,2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}readCorner2(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-4,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner3(e,n){let r=0;return this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(0,n-3,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-3,e,n)&&(r|=1),r<<=1,this.readModule(1,n-2,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r}readCorner4(e,n){let r=0;return this.readModule(e-3,0,e,n)&&(r|=1),r<<=1,this.readModule(e-2,0,e,n)&&(r|=1),r<<=1,this.readModule(e-1,0,e,n)&&(r|=1),r<<=1,this.readModule(0,n-2,e,n)&&(r|=1),r<<=1,this.readModule(0,n-1,e,n)&&(r|=1),r<<=1,this.readModule(1,n-1,e,n)&&(r|=1),r<<=1,this.readModule(2,n-1,e,n)&&(r|=1),r<<=1,this.readModule(3,n-1,e,n)&&(r|=1),r}extractDataRegion(e){const n=this.version.getSymbolSizeRows(),r=this.version.getSymbolSizeColumns();if(e.getHeight()!==n)throw new T("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),l=this.version.getDataRegionSizeColumns(),c=n/a|0,p=r/l|0,x=c*a,v=p*l,I=new Ze(v,x);for(let N=0;N<c;++N){const R=N*a;for(let L=0;L<p;++L){const U=L*l;for(let V=0;V<a;++V){const Y=N*(a+2)+1+V,ee=R+V;for(let ge=0;ge<l;++ge){const pe=L*(l+2)+1+ge;if(e.get(pe,Y)){const ue=U+ge;I.set(ue,ee)}}}}}return I}}class ko{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n){const r=n.getECBlocks();let a=0;const l=r.getECBlocks();for(let V of l)a+=V.getCount();const c=new Array(a);let p=0;for(let V of l)for(let Y=0;Y<V.getCount();Y++){const ee=V.getDataCodewords(),ge=r.getECCodewords()+ee;c[p++]=new ko(ee,new Uint8Array(ge))}const v=c[0].codewords.length-r.getECCodewords(),I=v-1;let N=0;for(let V=0;V<I;V++)for(let Y=0;Y<p;Y++)c[Y].codewords[V]=e[N++];const R=n.getVersionNumber()===24,L=R?8:p;for(let V=0;V<L;V++)c[V].codewords[v-1]=e[N++];const U=c[0].codewords.length;for(let V=v;V<U;V++)for(let Y=0;Y<p;Y++){const ee=R?(Y+8)%p:Y,ge=R&&ee>7?V-1:V;c[ee].codewords[ge]=e[N++]}if(N!==e.length)throw new T;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Do{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new T(""+e);let n=0,r=this.bitOffset,a=this.byteOffset;const l=this.bytes;if(r>0){const c=8-r,p=e<c?e:c,x=c-p,v=255>>8-p<<x;n=(l[a]&v)>>x,e-=p,r+=p,r===8&&(r=0,a++)}if(e>0){for(;e>=8;)n=n<<8|l[a]&255,a++,e-=8;if(e>0){const c=8-e,p=255>>c<<c;n=n<<e|(l[a]&p)>>c,r+=e}}return this.bitOffset=r,this.byteOffset=a,n}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(b){b[b.PAD_ENCODE=0]="PAD_ENCODE",b[b.ASCII_ENCODE=1]="ASCII_ENCODE",b[b.C40_ENCODE=2]="C40_ENCODE",b[b.TEXT_ENCODE=3]="TEXT_ENCODE",b[b.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",b[b.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",b[b.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class nr{static decode(e){const n=new Do(e),r=new Ye,a=new Ye,l=new Array;let c=qt.ASCII_ENCODE;do if(c===qt.ASCII_ENCODE)c=this.decodeAsciiSegment(n,r,a);else{switch(c){case qt.C40_ENCODE:this.decodeC40Segment(n,r);break;case qt.TEXT_ENCODE:this.decodeTextSegment(n,r);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(n,r);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(n,r);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(n,r,l);break;default:throw new K}c=qt.ASCII_ENCODE}while(c!==qt.PAD_ENCODE&&n.available()>0);return a.length()>0&&r.append(a.toString()),new xt(e,r.toString(),l.length===0?null:l,null)}static decodeAsciiSegment(e,n,r){let a=!1;do{let l=e.readBits(8);if(l===0)throw new K;if(l<=128)return a&&(l+=128),n.append(String.fromCharCode(l-1)),qt.ASCII_ENCODE;if(l===129)return qt.PAD_ENCODE;if(l<=229){const c=l-130;c<10&&n.append("0"),n.append(""+c)}else switch(l){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:n.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:n.append("[)>05"),r.insert(0,"");break;case 237:n.append("[)>06"),r.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(l!==254||e.available()!==0)throw new K;break}}while(e.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(e,n){let r=!1;const a=[];let l=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),a);for(let p=0;p<3;p++){const x=a[p];switch(l){case 0:if(x<3)l=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[x];r?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),r=!1):n.append(v)}else throw new K;break;case 1:r?(n.append(String.fromCharCode(x+128)),r=!1):n.append(String.fromCharCode(x)),l=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[x];r?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),r=!1):n.append(v)}else switch(x){case 27:n.append("");break;case 30:r=!0;break;default:throw new K}l=0;break;case 3:r?(n.append(String.fromCharCode(x+224)),r=!1):n.append(String.fromCharCode(x+96)),l=0;break;default:throw new K}}}while(e.available()>0)}static decodeTextSegment(e,n){let r=!1,a=[],l=0;do{if(e.available()===8)return;const c=e.readBits(8);if(c===254)return;this.parseTwoBytes(c,e.readBits(8),a);for(let p=0;p<3;p++){const x=a[p];switch(l){case 0:if(x<3)l=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[x];r?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),r=!1):n.append(v)}else throw new K;break;case 1:r?(n.append(String.fromCharCode(x+128)),r=!1):n.append(String.fromCharCode(x)),l=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[x];r?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),r=!1):n.append(v)}else switch(x){case 27:n.append("");break;case 30:r=!0;break;default:throw new K}l=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[x];r?(n.append(String.fromCharCode(v.charCodeAt(0)+128)),r=!1):n.append(v),l=0}else throw new K;break;default:throw new K}}}while(e.available()>0)}static decodeAnsiX12Segment(e,n){const r=[];do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),r);for(let l=0;l<3;l++){const c=r[l];switch(c){case 0:n.append("\r");break;case 1:n.append("*");break;case 2:n.append(">");break;case 3:n.append(" ");break;default:if(c<14)n.append(String.fromCharCode(c+44));else if(c<40)n.append(String.fromCharCode(c+51));else throw new K;break}}}while(e.available()>0)}static parseTwoBytes(e,n,r){let a=(e<<8)+n-1,l=Math.floor(a/1600);r[0]=l,a-=l*1600,l=Math.floor(a/40),r[1]=l,r[2]=a-l*40}static decodeEdifactSegment(e,n){do{if(e.available()<=16)return;for(let r=0;r<4;r++){let a=e.readBits(6);if(a===31){const l=8-e.getBitOffset();l!==8&&e.readBits(l);return}(a&32)===0&&(a|=64),n.append(String.fromCharCode(a))}}while(e.available()>0)}static decodeBase256Segment(e,n,r){let a=1+e.getByteOffset();const l=this.unrandomize255State(e.readBits(8),a++);let c;if(l===0?c=e.available()/8|0:l<250?c=l:c=250*(l-249)+this.unrandomize255State(e.readBits(8),a++),c<0)throw new K;const p=new Uint8Array(c);for(let x=0;x<c;x++){if(e.available()<8)throw new K;p[x]=this.unrandomize255State(e.readBits(8),a++)}r.push(p);try{n.append(ut.decode(p,ke.ISO88591))}catch(x){throw new Zn("Platform does not support required encoding: "+x.message)}}static unrandomize255State(e,n){const r=149*n%255+1,a=e-r;return a>=0?a:a+256}}nr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],nr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],nr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],nr.TEXT_SHIFT2_SET_CHARS=nr.C40_SHIFT2_SET_CHARS,nr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ps{constructor(){this.rsDecoder=new pi(at.DATA_MATRIX_FIELD_256)}decode(e){const n=new jn(e),r=n.getVersion(),a=n.readCodewords(),l=ko.getDataBlocks(a,r);let c=0;for(let v of l)c+=v.getNumDataCodewords();const p=new Uint8Array(c),x=l.length;for(let v=0;v<x;v++){const I=l[v],N=I.getCodewords(),R=I.getNumDataCodewords();this.correctErrors(N,R);for(let L=0;L<R;L++)p[L*x+v]=N[L]}return nr.decode(p)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new B}for(let a=0;a<n;a++)e[a]=r[a]}}class It{constructor(e){this.image=e,this.rectangleDetector=new gr(this.image)}detect(){const e=this.rectangleDetector.detect();let n=this.detectSolid1(e);if(n=this.detectSolid2(n),n[3]=this.correctTopRight(n),!n[3])throw new re;n=this.shiftToModuleCenter(n);const r=n[0],a=n[1],l=n[2],c=n[3];let p=this.transitionsBetween(r,c)+1,x=this.transitionsBetween(l,c)+1;(p&1)===1&&(p+=1),(x&1)===1&&(x+=1),4*p<7*x&&4*x<7*p&&(p=x=Math.max(p,x));let v=It.sampleGrid(this.image,r,a,l,c,p,x);return new mi(v,[r,a,l,c])}static shiftPoint(e,n,r){let a=(n.getX()-e.getX())/(r+1),l=(n.getY()-e.getY())/(r+1);return new Ie(e.getX()+a,e.getY()+l)}static moveAway(e,n,r){let a=e.getX(),l=e.getY();return a<n?a-=1:a+=1,l<r?l-=1:l+=1,new Ie(a,l)}detectSolid1(e){let n=e[0],r=e[1],a=e[3],l=e[2],c=this.transitionsBetween(n,r),p=this.transitionsBetween(r,a),x=this.transitionsBetween(a,l),v=this.transitionsBetween(l,n),I=c,N=[l,n,r,a];return I>p&&(I=p,N[0]=n,N[1]=r,N[2]=a,N[3]=l),I>x&&(I=x,N[0]=r,N[1]=a,N[2]=l,N[3]=n),I>v&&(N[0]=a,N[1]=l,N[2]=n,N[3]=r),N}detectSolid2(e){let n=e[0],r=e[1],a=e[2],l=e[3],c=this.transitionsBetween(n,l),p=It.shiftPoint(r,a,(c+1)*4),x=It.shiftPoint(a,r,(c+1)*4),v=this.transitionsBetween(p,n),I=this.transitionsBetween(x,l);return v<I?(e[0]=n,e[1]=r,e[2]=a,e[3]=l):(e[0]=r,e[1]=a,e[2]=l,e[3]=n),e}correctTopRight(e){let n=e[0],r=e[1],a=e[2],l=e[3],c=this.transitionsBetween(n,l),p=this.transitionsBetween(r,l),x=It.shiftPoint(n,r,(p+1)*4),v=It.shiftPoint(a,r,(c+1)*4);c=this.transitionsBetween(x,l),p=this.transitionsBetween(v,l);let I=new Ie(l.getX()+(a.getX()-r.getX())/(c+1),l.getY()+(a.getY()-r.getY())/(c+1)),N=new Ie(l.getX()+(n.getX()-r.getX())/(p+1),l.getY()+(n.getY()-r.getY())/(p+1));if(!this.isValid(I))return this.isValid(N)?N:null;if(!this.isValid(N))return I;let R=this.transitionsBetween(x,I)+this.transitionsBetween(v,I),L=this.transitionsBetween(x,N)+this.transitionsBetween(v,N);return R>L?I:N}shiftToModuleCenter(e){let n=e[0],r=e[1],a=e[2],l=e[3],c=this.transitionsBetween(n,l)+1,p=this.transitionsBetween(a,l)+1,x=It.shiftPoint(n,r,p*4),v=It.shiftPoint(a,r,c*4);c=this.transitionsBetween(x,l)+1,p=this.transitionsBetween(v,l)+1,(c&1)===1&&(c+=1),(p&1)===1&&(p+=1);let I=(n.getX()+r.getX()+a.getX()+l.getX())/4,N=(n.getY()+r.getY()+a.getY()+l.getY())/4;n=It.moveAway(n,I,N),r=It.moveAway(r,I,N),a=It.moveAway(a,I,N),l=It.moveAway(l,I,N);let R,L;return x=It.shiftPoint(n,r,p*4),x=It.shiftPoint(x,l,c*4),R=It.shiftPoint(r,n,p*4),R=It.shiftPoint(R,a,c*4),v=It.shiftPoint(a,l,p*4),v=It.shiftPoint(v,r,c*4),L=It.shiftPoint(l,a,p*4),L=It.shiftPoint(L,n,c*4),[x,R,v,L]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,n,r,a,l,c,p){return Jn.getInstance().sampleGrid(e,c,p,.5,.5,c-.5,.5,c-.5,p-.5,.5,p-.5,n.getX(),n.getY(),l.getX(),l.getY(),a.getX(),a.getY(),r.getX(),r.getY())}transitionsBetween(e,n){let r=Math.trunc(e.getX()),a=Math.trunc(e.getY()),l=Math.trunc(n.getX()),c=Math.trunc(n.getY()),p=Math.abs(c-a)>Math.abs(l-r);if(p){let V=r;r=a,a=V,V=l,l=c,c=V}let x=Math.abs(l-r),v=Math.abs(c-a),I=-x/2,N=a<c?1:-1,R=r<l?1:-1,L=0,U=this.image.get(p?a:r,p?r:a);for(let V=r,Y=a;V!==l;V+=R){let ee=this.image.get(p?Y:V,p?V:Y);if(ee!==U&&(L++,U=ee),I+=v,I>0){if(Y===c)break;Y+=N,I-=x}}return L}}class rr{constructor(){this.decoder=new Ps}decode(e,n=null){let r,a;if(n!=null&&n.has(he.PURE_BARCODE)){const v=rr.extractPureBits(e.getBlackMatrix());r=this.decoder.decode(v),a=rr.NO_POINTS}else{const v=new It(e.getBlackMatrix()).detect();r=this.decoder.decode(v.getBits()),a=v.getPoints()}const l=r.getRawBytes(),c=new Pe(r.getText(),l,8*l.length,a,xe.DATA_MATRIX,j.currentTimeMillis()),p=r.getByteSegments();p!=null&&c.putMetadata(He.BYTE_SEGMENTS,p);const x=r.getECLevel();return x!=null&&c.putMetadata(He.ERROR_CORRECTION_LEVEL,x),c}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n==null||r==null)throw new re;const a=this.moduleSize(n,e);let l=n[1];const c=r[1];let p=n[0];const v=(r[0]-p+1)/a,I=(c-l+1)/a;if(v<=0||I<=0)throw new re;const N=a/2;l+=N,p+=N;const R=new Ze(v,I);for(let L=0;L<I;L++){const U=l+L*a;for(let V=0;V<v;V++)e.get(p+V*a,U)&&R.set(V,L)}return R}static moduleSize(e,n){const r=n.getWidth();let a=e[0];const l=e[1];for(;a<r&&n.get(a,l);)a++;if(a===r)throw new re;const c=a-e[0];if(c===0)throw new re;return c}}rr.NO_POINTS=[];class Kl extends ze{constructor(e=500){super(new rr,e)}}var vi;(function(b){b[b.L=0]="L",b[b.M=1]="M",b[b.Q=2]="Q",b[b.H=3]="H"})(vi||(vi={}));class yt{constructor(e,n,r){this.value=e,this.stringValue=n,this.bits=r,yt.FOR_BITS.set(r,this),yt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return yt.L;case"M":return yt.M;case"Q":return yt.Q;case"H":return yt.H;default:throw new A(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof yt))return!1;const n=e;return this.value===n.value}static forBits(e){if(e<0||e>=yt.FOR_BITS.size)throw new T;return yt.FOR_BITS.get(e)}}yt.FOR_BITS=new Map,yt.FOR_VALUE=new Map,yt.L=new yt(vi.L,"L",1),yt.M=new yt(vi.M,"M",0),yt.Q=new yt(vi.Q,"Q",3),yt.H=new yt(vi.H,"H",2);class un{constructor(e){this.errorCorrectionLevel=yt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,n){return W.bitCount(e^n)}static decodeFormatInformation(e,n){const r=un.doDecodeFormatInformation(e,n);return r!==null?r:un.doDecodeFormatInformation(e^un.FORMAT_INFO_MASK_QR,n^un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,n){let r=Number.MAX_SAFE_INTEGER,a=0;for(const l of un.FORMAT_INFO_DECODE_LOOKUP){const c=l[0];if(c===e||c===n)return new un(l[1]);let p=un.numBitsDiffering(e,c);p<r&&(a=l[1],r=p),e!==n&&(p=un.numBitsDiffering(n,c),p<r&&(a=l[1],r=p))}return r<=3?new un(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof un))return!1;const n=e;return this.errorCorrectionLevel===n.errorCorrectionLevel&&this.dataMask===n.dataMask}}un.FORMAT_INFO_MASK_QR=21522,un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class Q{constructor(e,...n){this.ecCodewordsPerBlock=e,this.ecBlocks=n}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const n=this.ecBlocks;for(const r of n)e+=r.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class D{constructor(e,n){this.count=e,this.dataCodewords=n}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class De{constructor(e,n,...r){this.versionNumber=e,this.alignmentPatternCenters=n,this.ecBlocks=r;let a=0;const l=r[0].getECCodewordsPerBlock(),c=r[0].getECBlocks();for(const p of c)a+=p.getCount()*(p.getDataCodewords()+l);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new K;try{return this.getVersionForNumber((e-17)/4)}catch{throw new K}}static getVersionForNumber(e){if(e<1||e>40)throw new T;return De.VERSIONS[e-1]}static decodeVersionInformation(e){let n=Number.MAX_SAFE_INTEGER,r=0;for(let a=0;a<De.VERSION_DECODE_INFO.length;a++){const l=De.VERSION_DECODE_INFO[a];if(l===e)return De.getVersionForNumber(a+7);const c=un.numBitsDiffering(e,l);c<n&&(r=a+7,n=c)}return n<=3?De.getVersionForNumber(r):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),n=new Ze(e);n.setRegion(0,0,9,9),n.setRegion(e-8,0,8,9),n.setRegion(0,e-8,9,8);const r=this.alignmentPatternCenters.length;for(let a=0;a<r;a++){const l=this.alignmentPatternCenters[a]-2;for(let c=0;c<r;c++)a===0&&(c===0||c===r-1)||a===r-1&&c===0||n.setRegion(this.alignmentPatternCenters[c]-2,l,5,5)}return n.setRegion(6,9,1,e-17),n.setRegion(9,6,e-17,1),this.versionNumber>6&&(n.setRegion(e-11,0,3,6),n.setRegion(0,e-11,6,3)),n}toString(){return""+this.versionNumber}}De.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),De.VERSIONS=[new De(1,new Int32Array(0),new Q(7,new D(1,19)),new Q(10,new D(1,16)),new Q(13,new D(1,13)),new Q(17,new D(1,9))),new De(2,Int32Array.from([6,18]),new Q(10,new D(1,34)),new Q(16,new D(1,28)),new Q(22,new D(1,22)),new Q(28,new D(1,16))),new De(3,Int32Array.from([6,22]),new Q(15,new D(1,55)),new Q(26,new D(1,44)),new Q(18,new D(2,17)),new Q(22,new D(2,13))),new De(4,Int32Array.from([6,26]),new Q(20,new D(1,80)),new Q(18,new D(2,32)),new Q(26,new D(2,24)),new Q(16,new D(4,9))),new De(5,Int32Array.from([6,30]),new Q(26,new D(1,108)),new Q(24,new D(2,43)),new Q(18,new D(2,15),new D(2,16)),new Q(22,new D(2,11),new D(2,12))),new De(6,Int32Array.from([6,34]),new Q(18,new D(2,68)),new Q(16,new D(4,27)),new Q(24,new D(4,19)),new Q(28,new D(4,15))),new De(7,Int32Array.from([6,22,38]),new Q(20,new D(2,78)),new Q(18,new D(4,31)),new Q(18,new D(2,14),new D(4,15)),new Q(26,new D(4,13),new D(1,14))),new De(8,Int32Array.from([6,24,42]),new Q(24,new D(2,97)),new Q(22,new D(2,38),new D(2,39)),new Q(22,new D(4,18),new D(2,19)),new Q(26,new D(4,14),new D(2,15))),new De(9,Int32Array.from([6,26,46]),new Q(30,new D(2,116)),new Q(22,new D(3,36),new D(2,37)),new Q(20,new D(4,16),new D(4,17)),new Q(24,new D(4,12),new D(4,13))),new De(10,Int32Array.from([6,28,50]),new Q(18,new D(2,68),new D(2,69)),new Q(26,new D(4,43),new D(1,44)),new Q(24,new D(6,19),new D(2,20)),new Q(28,new D(6,15),new D(2,16))),new De(11,Int32Array.from([6,30,54]),new Q(20,new D(4,81)),new Q(30,new D(1,50),new D(4,51)),new Q(28,new D(4,22),new D(4,23)),new Q(24,new D(3,12),new D(8,13))),new De(12,Int32Array.from([6,32,58]),new Q(24,new D(2,92),new D(2,93)),new Q(22,new D(6,36),new D(2,37)),new Q(26,new D(4,20),new D(6,21)),new Q(28,new D(7,14),new D(4,15))),new De(13,Int32Array.from([6,34,62]),new Q(26,new D(4,107)),new Q(22,new D(8,37),new D(1,38)),new Q(24,new D(8,20),new D(4,21)),new Q(22,new D(12,11),new D(4,12))),new De(14,Int32Array.from([6,26,46,66]),new Q(30,new D(3,115),new D(1,116)),new Q(24,new D(4,40),new D(5,41)),new Q(20,new D(11,16),new D(5,17)),new Q(24,new D(11,12),new D(5,13))),new De(15,Int32Array.from([6,26,48,70]),new Q(22,new D(5,87),new D(1,88)),new Q(24,new D(5,41),new D(5,42)),new Q(30,new D(5,24),new D(7,25)),new Q(24,new D(11,12),new D(7,13))),new De(16,Int32Array.from([6,26,50,74]),new Q(24,new D(5,98),new D(1,99)),new Q(28,new D(7,45),new D(3,46)),new Q(24,new D(15,19),new D(2,20)),new Q(30,new D(3,15),new D(13,16))),new De(17,Int32Array.from([6,30,54,78]),new Q(28,new D(1,107),new D(5,108)),new Q(28,new D(10,46),new D(1,47)),new Q(28,new D(1,22),new D(15,23)),new Q(28,new D(2,14),new D(17,15))),new De(18,Int32Array.from([6,30,56,82]),new Q(30,new D(5,120),new D(1,121)),new Q(26,new D(9,43),new D(4,44)),new Q(28,new D(17,22),new D(1,23)),new Q(28,new D(2,14),new D(19,15))),new De(19,Int32Array.from([6,30,58,86]),new Q(28,new D(3,113),new D(4,114)),new Q(26,new D(3,44),new D(11,45)),new Q(26,new D(17,21),new D(4,22)),new Q(26,new D(9,13),new D(16,14))),new De(20,Int32Array.from([6,34,62,90]),new Q(28,new D(3,107),new D(5,108)),new Q(26,new D(3,41),new D(13,42)),new Q(30,new D(15,24),new D(5,25)),new Q(28,new D(15,15),new D(10,16))),new De(21,Int32Array.from([6,28,50,72,94]),new Q(28,new D(4,116),new D(4,117)),new Q(26,new D(17,42)),new Q(28,new D(17,22),new D(6,23)),new Q(30,new D(19,16),new D(6,17))),new De(22,Int32Array.from([6,26,50,74,98]),new Q(28,new D(2,111),new D(7,112)),new Q(28,new D(17,46)),new Q(30,new D(7,24),new D(16,25)),new Q(24,new D(34,13))),new De(23,Int32Array.from([6,30,54,78,102]),new Q(30,new D(4,121),new D(5,122)),new Q(28,new D(4,47),new D(14,48)),new Q(30,new D(11,24),new D(14,25)),new Q(30,new D(16,15),new D(14,16))),new De(24,Int32Array.from([6,28,54,80,106]),new Q(30,new D(6,117),new D(4,118)),new Q(28,new D(6,45),new D(14,46)),new Q(30,new D(11,24),new D(16,25)),new Q(30,new D(30,16),new D(2,17))),new De(25,Int32Array.from([6,32,58,84,110]),new Q(26,new D(8,106),new D(4,107)),new Q(28,new D(8,47),new D(13,48)),new Q(30,new D(7,24),new D(22,25)),new Q(30,new D(22,15),new D(13,16))),new De(26,Int32Array.from([6,30,58,86,114]),new Q(28,new D(10,114),new D(2,115)),new Q(28,new D(19,46),new D(4,47)),new Q(28,new D(28,22),new D(6,23)),new Q(30,new D(33,16),new D(4,17))),new De(27,Int32Array.from([6,34,62,90,118]),new Q(30,new D(8,122),new D(4,123)),new Q(28,new D(22,45),new D(3,46)),new Q(30,new D(8,23),new D(26,24)),new Q(30,new D(12,15),new D(28,16))),new De(28,Int32Array.from([6,26,50,74,98,122]),new Q(30,new D(3,117),new D(10,118)),new Q(28,new D(3,45),new D(23,46)),new Q(30,new D(4,24),new D(31,25)),new Q(30,new D(11,15),new D(31,16))),new De(29,Int32Array.from([6,30,54,78,102,126]),new Q(30,new D(7,116),new D(7,117)),new Q(28,new D(21,45),new D(7,46)),new Q(30,new D(1,23),new D(37,24)),new Q(30,new D(19,15),new D(26,16))),new De(30,Int32Array.from([6,26,52,78,104,130]),new Q(30,new D(5,115),new D(10,116)),new Q(28,new D(19,47),new D(10,48)),new Q(30,new D(15,24),new D(25,25)),new Q(30,new D(23,15),new D(25,16))),new De(31,Int32Array.from([6,30,56,82,108,134]),new Q(30,new D(13,115),new D(3,116)),new Q(28,new D(2,46),new D(29,47)),new Q(30,new D(42,24),new D(1,25)),new Q(30,new D(23,15),new D(28,16))),new De(32,Int32Array.from([6,34,60,86,112,138]),new Q(30,new D(17,115)),new Q(28,new D(10,46),new D(23,47)),new Q(30,new D(10,24),new D(35,25)),new Q(30,new D(19,15),new D(35,16))),new De(33,Int32Array.from([6,30,58,86,114,142]),new Q(30,new D(17,115),new D(1,116)),new Q(28,new D(14,46),new D(21,47)),new Q(30,new D(29,24),new D(19,25)),new Q(30,new D(11,15),new D(46,16))),new De(34,Int32Array.from([6,34,62,90,118,146]),new Q(30,new D(13,115),new D(6,116)),new Q(28,new D(14,46),new D(23,47)),new Q(30,new D(44,24),new D(7,25)),new Q(30,new D(59,16),new D(1,17))),new De(35,Int32Array.from([6,30,54,78,102,126,150]),new Q(30,new D(12,121),new D(7,122)),new Q(28,new D(12,47),new D(26,48)),new Q(30,new D(39,24),new D(14,25)),new Q(30,new D(22,15),new D(41,16))),new De(36,Int32Array.from([6,24,50,76,102,128,154]),new Q(30,new D(6,121),new D(14,122)),new Q(28,new D(6,47),new D(34,48)),new Q(30,new D(46,24),new D(10,25)),new Q(30,new D(2,15),new D(64,16))),new De(37,Int32Array.from([6,28,54,80,106,132,158]),new Q(30,new D(17,122),new D(4,123)),new Q(28,new D(29,46),new D(14,47)),new Q(30,new D(49,24),new D(10,25)),new Q(30,new D(24,15),new D(46,16))),new De(38,Int32Array.from([6,32,58,84,110,136,162]),new Q(30,new D(4,122),new D(18,123)),new Q(28,new D(13,46),new D(32,47)),new Q(30,new D(48,24),new D(14,25)),new Q(30,new D(42,15),new D(32,16))),new De(39,Int32Array.from([6,26,54,82,110,138,166]),new Q(30,new D(20,117),new D(4,118)),new Q(28,new D(40,47),new D(7,48)),new Q(30,new D(43,24),new D(22,25)),new Q(30,new D(10,15),new D(67,16))),new De(40,Int32Array.from([6,30,58,86,114,142,170]),new Q(30,new D(19,118),new D(6,119)),new Q(28,new D(18,47),new D(31,48)),new Q(30,new D(34,24),new D(34,25)),new Q(30,new D(20,15),new D(61,16)))];var Ht;(function(b){b[b.DATA_MASK_000=0]="DATA_MASK_000",b[b.DATA_MASK_001=1]="DATA_MASK_001",b[b.DATA_MASK_010=2]="DATA_MASK_010",b[b.DATA_MASK_011=3]="DATA_MASK_011",b[b.DATA_MASK_100=4]="DATA_MASK_100",b[b.DATA_MASK_101=5]="DATA_MASK_101",b[b.DATA_MASK_110=6]="DATA_MASK_110",b[b.DATA_MASK_111=7]="DATA_MASK_111"})(Ht||(Ht={}));class qe{constructor(e,n){this.value=e,this.isMasked=n}unmaskBitMatrix(e,n){for(let r=0;r<n;r++)for(let a=0;a<n;a++)this.isMasked(r,a)&&e.flip(a,r)}}qe.values=new Map([[Ht.DATA_MASK_000,new qe(Ht.DATA_MASK_000,(b,e)=>(b+e&1)===0)],[Ht.DATA_MASK_001,new qe(Ht.DATA_MASK_001,(b,e)=>(b&1)===0)],[Ht.DATA_MASK_010,new qe(Ht.DATA_MASK_010,(b,e)=>e%3===0)],[Ht.DATA_MASK_011,new qe(Ht.DATA_MASK_011,(b,e)=>(b+e)%3===0)],[Ht.DATA_MASK_100,new qe(Ht.DATA_MASK_100,(b,e)=>(Math.floor(b/2)+Math.floor(e/3)&1)===0)],[Ht.DATA_MASK_101,new qe(Ht.DATA_MASK_101,(b,e)=>b*e%6===0)],[Ht.DATA_MASK_110,new qe(Ht.DATA_MASK_110,(b,e)=>b*e%6<3)],[Ht.DATA_MASK_111,new qe(Ht.DATA_MASK_111,(b,e)=>(b+e+b*e%3&1)===0)]]);class ka{constructor(e){const n=e.getHeight();if(n<21||(n&3)!==1)throw new K;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let l=0;l<6;l++)e=this.copyBit(l,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let l=5;l>=0;l--)e=this.copyBit(8,l,e);const n=this.bitMatrix.getHeight();let r=0;const a=n-7;for(let l=n-1;l>=a;l--)r=this.copyBit(8,l,r);for(let l=n-8;l<n;l++)r=this.copyBit(l,8,r);if(this.parsedFormatInfo=un.decodeFormatInformation(e,r),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),n=Math.floor((e-17)/4);if(n<=6)return De.getVersionForNumber(n);let r=0;const a=e-11;for(let c=5;c>=0;c--)for(let p=e-9;p>=a;p--)r=this.copyBit(p,c,r);let l=De.decodeVersionInformation(r);if(l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;r=0;for(let c=5;c>=0;c--)for(let p=e-9;p>=a;p--)r=this.copyBit(c,p,r);if(l=De.decodeVersionInformation(r),l!==null&&l.getDimensionForVersion()===e)return this.parsedVersion=l,l;throw new K}copyBit(e,n,r){return(this.isMirror?this.bitMatrix.get(n,e):this.bitMatrix.get(e,n))?r<<1|1:r<<1}readCodewords(){const e=this.readFormatInformation(),n=this.readVersion(),r=qe.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,a);const l=n.buildFunctionPattern();let c=!0;const p=new Uint8Array(n.getTotalCodewords());let x=0,v=0,I=0;for(let N=a-1;N>0;N-=2){N===6&&N--;for(let R=0;R<a;R++){const L=c?a-1-R:R;for(let U=0;U<2;U++)l.get(N-U,L)||(I++,v<<=1,this.bitMatrix.get(N-U,L)&&(v|=1),I===8&&(p[x++]=v,I=0,v=0))}c=!c}if(x!==n.getTotalCodewords())throw new K;return p}remask(){if(this.parsedFormatInfo===null)return;const e=qe.values[this.parsedFormatInfo.getDataMask()],n=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,n)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let n=0,r=e.getWidth();n<r;n++)for(let a=n+1,l=e.getHeight();a<l;a++)e.get(n,a)!==e.get(a,n)&&(e.flip(a,n),e.flip(n,a))}}class Bs{constructor(e,n){this.numDataCodewords=e,this.codewords=n}static getDataBlocks(e,n,r){if(e.length!==n.getTotalCodewords())throw new T;const a=n.getECBlocksForLevel(r);let l=0;const c=a.getECBlocks();for(const U of c)l+=U.getCount();const p=new Array(l);let x=0;for(const U of c)for(let V=0;V<U.getCount();V++){const Y=U.getDataCodewords(),ee=a.getECCodewordsPerBlock()+Y;p[x++]=new Bs(Y,new Uint8Array(ee))}const v=p[0].codewords.length;let I=p.length-1;for(;I>=0&&p[I].codewords.length!==v;)I--;I++;const N=v-a.getECCodewordsPerBlock();let R=0;for(let U=0;U<N;U++)for(let V=0;V<x;V++)p[V].codewords[U]=e[R++];for(let U=I;U<x;U++)p[U].codewords[N]=e[R++];const L=p[0].codewords.length;for(let U=N;U<L;U++)for(let V=0;V<x;V++){const Y=V<I?U:U+1;p[V].codewords[Y]=e[R++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Mn;(function(b){b[b.TERMINATOR=0]="TERMINATOR",b[b.NUMERIC=1]="NUMERIC",b[b.ALPHANUMERIC=2]="ALPHANUMERIC",b[b.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",b[b.BYTE=4]="BYTE",b[b.ECI=5]="ECI",b[b.KANJI=6]="KANJI",b[b.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",b[b.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",b[b.HANZI=9]="HANZI"})(Mn||(Mn={}));class Le{constructor(e,n,r,a){this.value=e,this.stringValue=n,this.characterCountBitsForVersions=r,this.bits=a,Le.FOR_BITS.set(a,this),Le.FOR_VALUE.set(e,this)}static forBits(e){const n=Le.FOR_BITS.get(e);if(n===void 0)throw new T;return n}getCharacterCountBits(e){const n=e.getVersionNumber();let r;return n<=9?r=0:n<=26?r=1:r=2,this.characterCountBitsForVersions[r]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof Le))return!1;const n=e;return this.value===n.value}toString(){return this.stringValue}}Le.FOR_BITS=new Map,Le.FOR_VALUE=new Map,Le.TERMINATOR=new Le(Mn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Le.NUMERIC=new Le(Mn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Le.ALPHANUMERIC=new Le(Mn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Le.STRUCTURED_APPEND=new Le(Mn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Le.BYTE=new Le(Mn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Le.ECI=new Le(Mn.ECI,"ECI",Int32Array.from([0,0,0]),7),Le.KANJI=new Le(Mn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Le.FNC1_FIRST_POSITION=new Le(Mn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Le.FNC1_SECOND_POSITION=new Le(Mn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Le.HANZI=new Le(Mn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Nt{static decode(e,n,r,a){const l=new Do(e);let c=new Ye;const p=new Array;let x=-1,v=-1;try{let I=null,N=!1,R;do{if(l.available()<4)R=Le.TERMINATOR;else{const L=l.readBits(4);R=Le.forBits(L)}switch(R){case Le.TERMINATOR:break;case Le.FNC1_FIRST_POSITION:case Le.FNC1_SECOND_POSITION:N=!0;break;case Le.STRUCTURED_APPEND:if(l.available()<16)throw new K;x=l.readBits(8),v=l.readBits(8);break;case Le.ECI:const L=Nt.parseECIValue(l);if(I=oe.getCharacterSetECIByValue(L),I===null)throw new K;break;case Le.HANZI:const U=l.readBits(4),V=l.readBits(R.getCharacterCountBits(n));U===Nt.GB2312_SUBSET&&Nt.decodeHanziSegment(l,c,V);break;default:const Y=l.readBits(R.getCharacterCountBits(n));switch(R){case Le.NUMERIC:Nt.decodeNumericSegment(l,c,Y);break;case Le.ALPHANUMERIC:Nt.decodeAlphanumericSegment(l,c,Y,N);break;case Le.BYTE:Nt.decodeByteSegment(l,c,Y,I,p,a);break;case Le.KANJI:Nt.decodeKanjiSegment(l,c,Y);break;default:throw new K}break}}while(R!==Le.TERMINATOR)}catch{throw new K}return new xt(e,c.toString(),p.length===0?null:p,r===null?null:r.toString(),x,v)}static decodeHanziSegment(e,n,r){if(r*13>e.available())throw new K;const a=new Uint8Array(2*r);let l=0;for(;r>0;){const c=e.readBits(13);let p=c/96<<8&4294967295|c%96;p<959?p+=41377:p+=42657,a[l]=p>>8&255,a[l+1]=p&255,l+=2,r--}try{n.append(ut.decode(a,ke.GB2312))}catch(c){throw new K(c)}}static decodeKanjiSegment(e,n,r){if(r*13>e.available())throw new K;const a=new Uint8Array(2*r);let l=0;for(;r>0;){const c=e.readBits(13);let p=c/192<<8&4294967295|c%192;p<7936?p+=33088:p+=49472,a[l]=p>>8,a[l+1]=p,l+=2,r--}try{n.append(ut.decode(a,ke.SHIFT_JIS))}catch(c){throw new K(c)}}static decodeByteSegment(e,n,r,a,l,c){if(8*r>e.available())throw new K;const p=new Uint8Array(r);for(let v=0;v<r;v++)p[v]=e.readBits(8);let x;a===null?x=ke.guessEncoding(p,c):x=a.getName();try{n.append(ut.decode(p,x))}catch(v){throw new K(v)}l.push(p)}static toAlphaNumericChar(e){if(e>=Nt.ALPHANUMERIC_CHARS.length)throw new K;return Nt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,n,r,a){const l=n.length();for(;r>1;){if(e.available()<11)throw new K;const c=e.readBits(11);n.append(Nt.toAlphaNumericChar(Math.floor(c/45))),n.append(Nt.toAlphaNumericChar(c%45)),r-=2}if(r===1){if(e.available()<6)throw new K;n.append(Nt.toAlphaNumericChar(e.readBits(6)))}if(a)for(let c=l;c<n.length();c++)n.charAt(c)==="%"&&(c<n.length()-1&&n.charAt(c+1)==="%"?n.deleteCharAt(c+1):n.setCharAt(c,""))}static decodeNumericSegment(e,n,r){for(;r>=3;){if(e.available()<10)throw new K;const a=e.readBits(10);if(a>=1e3)throw new K;n.append(Nt.toAlphaNumericChar(Math.floor(a/100))),n.append(Nt.toAlphaNumericChar(Math.floor(a/10)%10)),n.append(Nt.toAlphaNumericChar(a%10)),r-=3}if(r===2){if(e.available()<7)throw new K;const a=e.readBits(7);if(a>=100)throw new K;n.append(Nt.toAlphaNumericChar(Math.floor(a/10))),n.append(Nt.toAlphaNumericChar(a%10))}else if(r===1){if(e.available()<4)throw new K;const a=e.readBits(4);if(a>=10)throw new K;n.append(Nt.toAlphaNumericChar(a))}}static parseECIValue(e){const n=e.readBits(8);if((n&128)===0)return n&127;if((n&192)===128){const r=e.readBits(8);return(n&63)<<8&4294967295|r}if((n&224)===192){const r=e.readBits(16);return(n&31)<<16&4294967295|r}throw new K}}Nt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Nt.GB2312_SUBSET=1;class Lo{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const n=e[0];e[0]=e[2],e[2]=n}}class Po{constructor(){this.rsDecoder=new pi(at.QR_CODE_FIELD_256)}decodeBooleanArray(e,n){return this.decodeBitMatrix(Ze.parseFromBooleanArray(e),n)}decodeBitMatrix(e,n){const r=new ka(e);let a=null;try{return this.decodeBitMatrixParser(r,n)}catch(l){a=l}try{r.remask(),r.setMirror(!0),r.readVersion(),r.readFormatInformation(),r.mirror();const l=this.decodeBitMatrixParser(r,n);return l.setOther(new Lo(!0)),l}catch(l){throw a!==null?a:l}}decodeBitMatrixParser(e,n){const r=e.readVersion(),a=e.readFormatInformation().getErrorCorrectionLevel(),l=e.readCodewords(),c=Bs.getDataBlocks(l,r,a);let p=0;for(const I of c)p+=I.getNumDataCodewords();const x=new Uint8Array(p);let v=0;for(const I of c){const N=I.getCodewords(),R=I.getNumDataCodewords();this.correctErrors(N,R);for(let L=0;L<R;L++)x[v++]=N[L]}return Nt.decode(x,r,a,n)}correctErrors(e,n){const r=new Int32Array(e);try{this.rsDecoder.decode(r,e.length-n)}catch{throw new B}for(let a=0;a<n;a++)e[a]=r[a]}}class Ei extends Ie{constructor(e,n,r){super(e,n),this.estimatedModuleSize=r}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const a=(this.getX()+n)/2,l=(this.getY()+e)/2,c=(this.estimatedModuleSize+r)/2;return new Ei(a,l,c)}}class ir{constructor(e,n,r,a,l,c,p){this.image=e,this.startX=n,this.startY=r,this.width=a,this.height=l,this.moduleSize=c,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,n=this.height,r=this.width,a=e+r,l=this.startY+n/2,c=new Int32Array(3),p=this.image;for(let x=0;x<n;x++){const v=l+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));c[0]=0,c[1]=0,c[2]=0;let I=e;for(;I<a&&!p.get(I,v);)I++;let N=0;for(;I<a;){if(p.get(I,v))if(N===1)c[1]++;else if(N===2){if(this.foundPatternCross(c)){const R=this.handlePossibleCenter(c,v,I);if(R!==null)return R}c[0]=c[2],c[1]=1,c[2]=0,N=1}else c[++N]++;else N===1&&N++,c[N]++;I++}if(this.foundPatternCross(c)){const R=this.handlePossibleCenter(c,v,a);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new re}static centerFromEnd(e,n){return n-e[2]-e[1]/2}foundPatternCross(e){const n=this.moduleSize,r=n/2;for(let a=0;a<3;a++)if(Math.abs(n-e[a])>=r)return!1;return!0}crossCheckVertical(e,n,r,a){const l=this.image,c=l.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let x=e;for(;x>=0&&l.get(n,x)&&p[1]<=r;)p[1]++,x--;if(x<0||p[1]>r)return NaN;for(;x>=0&&!l.get(n,x)&&p[0]<=r;)p[0]++,x--;if(p[0]>r)return NaN;for(x=e+1;x<c&&l.get(n,x)&&p[1]<=r;)p[1]++,x++;if(x===c||p[1]>r)return NaN;for(;x<c&&!l.get(n,x)&&p[2]<=r;)p[2]++,x++;if(p[2]>r)return NaN;const v=p[0]+p[1]+p[2];return 5*Math.abs(v-a)>=2*a?NaN:this.foundPatternCross(p)?ir.centerFromEnd(p,x):NaN}handlePossibleCenter(e,n,r){const a=e[0]+e[1]+e[2],l=ir.centerFromEnd(e,r),c=this.crossCheckVertical(n,l,2*e[1],a);if(!isNaN(c)){const p=(e[0]+e[1]+e[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(p,c,l))return v.combineEstimate(c,l,p);const x=new Ei(l,c,p);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class xr extends Ie{constructor(e,n,r,a){super(e,n),this.estimatedModuleSize=r,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,n,r){if(Math.abs(n-this.getY())<=e&&Math.abs(r-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,n,r){const a=this.count+1,l=(this.count*this.getX()+n)/a,c=(this.count*this.getY()+e)/a,p=(this.count*this.estimatedModuleSize+r)/a;return new xr(l,c,p,a)}}class Hr{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Pt{constructor(e,n){this.image=e,this.resultPointCallback=n,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=n}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const n=e!=null&&e.get(he.TRY_HARDER)!==void 0,r=e!=null&&e.get(he.PURE_BARCODE)!==void 0,a=this.image,l=a.getHeight(),c=a.getWidth();let p=Math.floor(3*l/(4*Pt.MAX_MODULES));(p<Pt.MIN_SKIP||n)&&(p=Pt.MIN_SKIP);let x=!1;const v=new Int32Array(5);for(let N=p-1;N<l&&!x;N+=p){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let R=0;for(let L=0;L<c;L++)if(a.get(L,N))(R&1)===1&&R++,v[R]++;else if((R&1)===0)if(R===4)if(Pt.foundPatternCross(v)){if(this.handlePossibleCenter(v,N,L,r)===!0)if(p=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>v[2]&&(N+=V-v[2]-p,L=c-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;continue}R=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;else v[++R]++;else v[R]++;Pt.foundPatternCross(v)&&this.handlePossibleCenter(v,N,c,r)===!0&&(p=v[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const I=this.selectBestPatterns();return Ie.orderBestPatterns(I),new Hr(I)}static centerFromEnd(e,n){return n-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let n=0;for(let l=0;l<5;l++){const c=e[l];if(c===0)return!1;n+=c}if(n<7)return!1;const r=n/7,a=r/2;return Math.abs(r-e[0])<a&&Math.abs(r-e[1])<a&&Math.abs(3*r-e[2])<3*a&&Math.abs(r-e[3])<a&&Math.abs(r-e[4])<a}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,n,r,a){const l=this.getCrossCheckStateCount();let c=0;const p=this.image;for(;e>=c&&n>=c&&p.get(n-c,e-c);)l[2]++,c++;if(e<c||n<c)return!1;for(;e>=c&&n>=c&&!p.get(n-c,e-c)&&l[1]<=r;)l[1]++,c++;if(e<c||n<c||l[1]>r)return!1;for(;e>=c&&n>=c&&p.get(n-c,e-c)&&l[0]<=r;)l[0]++,c++;if(l[0]>r)return!1;const x=p.getHeight(),v=p.getWidth();for(c=1;e+c<x&&n+c<v&&p.get(n+c,e+c);)l[2]++,c++;if(e+c>=x||n+c>=v)return!1;for(;e+c<x&&n+c<v&&!p.get(n+c,e+c)&&l[3]<r;)l[3]++,c++;if(e+c>=x||n+c>=v||l[3]>=r)return!1;for(;e+c<x&&n+c<v&&p.get(n+c,e+c)&&l[4]<r;)l[4]++,c++;if(l[4]>=r)return!1;const I=l[0]+l[1]+l[2]+l[3]+l[4];return Math.abs(I-a)<2*a&&Pt.foundPatternCross(l)}crossCheckVertical(e,n,r,a){const l=this.image,c=l.getHeight(),p=this.getCrossCheckStateCount();let x=e;for(;x>=0&&l.get(n,x);)p[2]++,x--;if(x<0)return NaN;for(;x>=0&&!l.get(n,x)&&p[1]<=r;)p[1]++,x--;if(x<0||p[1]>r)return NaN;for(;x>=0&&l.get(n,x)&&p[0]<=r;)p[0]++,x--;if(p[0]>r)return NaN;for(x=e+1;x<c&&l.get(n,x);)p[2]++,x++;if(x===c)return NaN;for(;x<c&&!l.get(n,x)&&p[3]<r;)p[3]++,x++;if(x===c||p[3]>=r)return NaN;for(;x<c&&l.get(n,x)&&p[4]<r;)p[4]++,x++;if(p[4]>=r)return NaN;const v=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(v-a)>=2*a?NaN:Pt.foundPatternCross(p)?Pt.centerFromEnd(p,x):NaN}crossCheckHorizontal(e,n,r,a){const l=this.image,c=l.getWidth(),p=this.getCrossCheckStateCount();let x=e;for(;x>=0&&l.get(x,n);)p[2]++,x--;if(x<0)return NaN;for(;x>=0&&!l.get(x,n)&&p[1]<=r;)p[1]++,x--;if(x<0||p[1]>r)return NaN;for(;x>=0&&l.get(x,n)&&p[0]<=r;)p[0]++,x--;if(p[0]>r)return NaN;for(x=e+1;x<c&&l.get(x,n);)p[2]++,x++;if(x===c)return NaN;for(;x<c&&!l.get(x,n)&&p[3]<r;)p[3]++,x++;if(x===c||p[3]>=r)return NaN;for(;x<c&&l.get(x,n)&&p[4]<r;)p[4]++,x++;if(p[4]>=r)return NaN;const v=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(v-a)>=a?NaN:Pt.foundPatternCross(p)?Pt.centerFromEnd(p,x):NaN}handlePossibleCenter(e,n,r,a){const l=e[0]+e[1]+e[2]+e[3]+e[4];let c=Pt.centerFromEnd(e,r),p=this.crossCheckVertical(n,Math.floor(c),e[2],l);if(!isNaN(p)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(p),e[2],l),!isNaN(c)&&(!a||this.crossCheckDiagonal(Math.floor(p),Math.floor(c),e[2],l)))){const x=l/7;let v=!1;const I=this.possibleCenters;for(let N=0,R=I.length;N<R;N++){const L=I[N];if(L.aboutEquals(x,p,c)){I[N]=L.combineEstimate(p,c,x),v=!0;break}}if(!v){const N=new xr(c,p,x);I.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let n=null;for(const r of this.possibleCenters)if(r.getCount()>=Pt.CENTER_QUORUM)if(n==null)n=r;else return this.hasSkipped=!0,Math.floor((Math.abs(n.getX()-r.getX())-Math.abs(n.getY()-r.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,n=0;const r=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=Pt.CENTER_QUORUM&&(e++,n+=c.getEstimatedModuleSize());if(e<3)return!1;const a=n/r;let l=0;for(const c of this.possibleCenters)l+=Math.abs(c.getEstimatedModuleSize()-a);return l<=.05*n}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new re;const n=this.possibleCenters;let r;if(e>3){let a=0,l=0;for(const x of this.possibleCenters){const v=x.getEstimatedModuleSize();a+=v,l+=v*v}r=a/e;let c=Math.sqrt(l/e-r*r);n.sort((x,v)=>{const I=Math.abs(v.getEstimatedModuleSize()-r),N=Math.abs(x.getEstimatedModuleSize()-r);return I<N?-1:I>N?1:0});const p=Math.max(.2*r,c);for(let x=0;x<n.length&&n.length>3;x++){const v=n[x];Math.abs(v.getEstimatedModuleSize()-r)>p&&(n.splice(x,1),x--)}}if(n.length>3){let a=0;for(const l of n)a+=l.getEstimatedModuleSize();r=a/n.length,n.sort((l,c)=>{if(c.getCount()===l.getCount()){const p=Math.abs(c.getEstimatedModuleSize()-r),x=Math.abs(l.getEstimatedModuleSize()-r);return p<x?1:p>x?-1:0}else return c.getCount()-l.getCount()}),n.splice(3)}return[n[0],n[1],n[2]]}}Pt.CENTER_QUORUM=2,Pt.MIN_SKIP=3,Pt.MAX_MODULES=57;class Tr{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(he.NEED_RESULT_POINT_CALLBACK);const r=new Pt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(r)}processFinderPatternInfo(e){const n=e.getTopLeft(),r=e.getTopRight(),a=e.getBottomLeft(),l=this.calculateModuleSize(n,r,a);if(l<1)throw new re("No pattern found in proccess finder.");const c=Tr.computeDimension(n,r,a,l),p=De.getProvisionalVersionForDimension(c),x=p.getDimensionForVersion()-7;let v=null;if(p.getAlignmentPatternCenters().length>0){const L=r.getX()-n.getX()+a.getX(),U=r.getY()-n.getY()+a.getY(),V=1-3/x,Y=Math.floor(n.getX()+V*(L-n.getX())),ee=Math.floor(n.getY()+V*(U-n.getY()));for(let ge=4;ge<=16;ge<<=1)try{v=this.findAlignmentInRegion(l,Y,ee,ge);break}catch(pe){if(!(pe instanceof re))throw pe}}const I=Tr.createTransform(n,r,a,v,c),N=Tr.sampleGrid(this.image,I,c);let R;return v===null?R=[a,n,r]:R=[a,n,r,v],new mi(N,R)}static createTransform(e,n,r,a,l){const c=l-3.5;let p,x,v,I;return a!==null?(p=a.getX(),x=a.getY(),v=c-3,I=v):(p=n.getX()-e.getX()+r.getX(),x=n.getY()-e.getY()+r.getY(),v=c,I=c),zn.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,v,I,3.5,c,e.getX(),e.getY(),n.getX(),n.getY(),p,x,r.getX(),r.getY())}static sampleGrid(e,n,r){return Jn.getInstance().sampleGridWithTransform(e,r,r,n)}static computeDimension(e,n,r,a){const l=nt.round(Ie.distance(e,n)/a),c=nt.round(Ie.distance(e,r)/a);let p=Math.floor((l+c)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new re("Dimensions could be not found.")}return p}calculateModuleSize(e,n,r){return(this.calculateModuleSizeOneWay(e,n)+this.calculateModuleSizeOneWay(e,r))/2}calculateModuleSizeOneWay(e,n){const r=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(n.getX()),Math.floor(n.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(n.getX()),Math.floor(n.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(r)?a/7:isNaN(a)?r/7:(r+a)/14}sizeOfBlackWhiteBlackRunBothWays(e,n,r,a){let l=this.sizeOfBlackWhiteBlackRun(e,n,r,a),c=1,p=e-(r-e);p<0?(c=e/(e-p),p=0):p>=this.image.getWidth()&&(c=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let x=Math.floor(n-(a-n)*c);return c=1,x<0?(c=n/(n-x),x=0):x>=this.image.getHeight()&&(c=(this.image.getHeight()-1-n)/(x-n),x=this.image.getHeight()-1),p=Math.floor(e+(p-e)*c),l+=this.sizeOfBlackWhiteBlackRun(e,n,p,x),l-1}sizeOfBlackWhiteBlackRun(e,n,r,a){const l=Math.abs(a-n)>Math.abs(r-e);if(l){let L=e;e=n,n=L,L=r,r=a,a=L}const c=Math.abs(r-e),p=Math.abs(a-n);let x=-c/2;const v=e<r?1:-1,I=n<a?1:-1;let N=0;const R=r+v;for(let L=e,U=n;L!==R;L+=v){const V=l?U:L,Y=l?L:U;if(N===1===this.image.get(V,Y)){if(N===2)return nt.distance(L,U,e,n);N++}if(x+=p,x>0){if(U===a)break;U+=I,x-=c}}return N===2?nt.distance(r+v,a,e,n):NaN}findAlignmentInRegion(e,n,r,a){const l=Math.floor(a*e),c=Math.max(0,n-l),p=Math.min(this.image.getWidth()-1,n+l);if(p-c<e*3)throw new re("Alignment top exceeds estimated module size.");const x=Math.max(0,r-l),v=Math.min(this.image.getHeight()-1,r+l);if(v-x<e*3)throw new re("Alignment bottom exceeds estimated module size.");return new ir(this.image,c,x,p-c,v-x,e,this.resultPointCallback).find()}}class _n{constructor(){this.decoder=new Po}getDecoder(){return this.decoder}decode(e,n){let r,a;if(n!=null&&n.get(he.PURE_BARCODE)!==void 0){const x=_n.extractPureBits(e.getBlackMatrix());r=this.decoder.decodeBitMatrix(x,n),a=_n.NO_POINTS}else{const x=new Tr(e.getBlackMatrix()).detect(n);r=this.decoder.decodeBitMatrix(x.getBits(),n),a=x.getPoints()}r.getOther()instanceof Lo&&r.getOther().applyMirroredCorrection(a);const l=new Pe(r.getText(),r.getRawBytes(),void 0,a,xe.QR_CODE,void 0),c=r.getByteSegments();c!==null&&l.putMetadata(He.BYTE_SEGMENTS,c);const p=r.getECLevel();return p!==null&&l.putMetadata(He.ERROR_CORRECTION_LEVEL,p),r.hasStructuredAppend()&&(l.putMetadata(He.STRUCTURED_APPEND_SEQUENCE,r.getStructuredAppendSequenceNumber()),l.putMetadata(He.STRUCTURED_APPEND_PARITY,r.getStructuredAppendParity())),l}reset(){}static extractPureBits(e){const n=e.getTopLeftOnBit(),r=e.getBottomRightOnBit();if(n===null||r===null)throw new re;const a=this.moduleSize(n,e);let l=n[1],c=r[1],p=n[0],x=r[0];if(p>=x||l>=c)throw new re;if(c-l!==x-p&&(x=p+(c-l),x>=e.getWidth()))throw new re;const v=Math.round((x-p+1)/a),I=Math.round((c-l+1)/a);if(v<=0||I<=0)throw new re;if(I!==v)throw new re;const N=Math.floor(a/2);l+=N,p+=N;const R=p+Math.floor((v-1)*a)-x;if(R>0){if(R>N)throw new re;p-=R}const L=l+Math.floor((I-1)*a)-c;if(L>0){if(L>N)throw new re;l-=L}const U=new Ze(v,I);for(let V=0;V<I;V++){const Y=l+Math.floor(V*a);for(let ee=0;ee<v;ee++)e.get(p+Math.floor(ee*a),Y)&&U.set(ee,V)}return U}static moduleSize(e,n){const r=n.getHeight(),a=n.getWidth();let l=e[0],c=e[1],p=!0,x=0;for(;l<a&&c<r;){if(p!==n.get(l,c)){if(++x===5)break;p=!p}l++,c++}if(l===a||c===r)throw new re;return(l-e[0])/7}}_n.NO_POINTS=new Array;class Ue{PDF417Common(){}static getBitCountSum(e){return nt.sum(e)}static toIntArray(e){if(e==null||!e.length)return Ue.EMPTY_INT_ARRAY;const n=new Int32Array(e.length);let r=0;for(const a of e)n[r++]=a;return n}static getCodeword(e){const n=$.binarySearch(Ue.SYMBOL_TABLE,e&262143);return n<0?-1:(Ue.CODEWORD_TABLE[n]-1)%Ue.NUMBER_OF_CODEWORDS}}Ue.NUMBER_OF_CODEWORDS=929,Ue.MAX_CODEWORDS_IN_BARCODE=Ue.NUMBER_OF_CODEWORDS-1,Ue.MIN_ROWS_IN_BARCODE=3,Ue.MAX_ROWS_IN_BARCODE=90,Ue.MODULES_IN_CODEWORD=17,Ue.MODULES_IN_STOP_PATTERN=18,Ue.BARS_IN_MODULE=8,Ue.EMPTY_INT_ARRAY=new Int32Array([]),Ue.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ue.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Da{constructor(e,n){this.bits=e,this.points=n}getBits(){return this.bits}getPoints(){return this.points}}class We{static detectMultiple(e,n,r){let a=e.getBlackMatrix(),l=We.detect(r,a);return l.length||(a=a.clone(),a.rotate180(),l=We.detect(r,a)),new Da(a,l)}static detect(e,n){const r=new Array;let a=0,l=0,c=!1;for(;a<n.getHeight();){const p=We.findVertices(n,a,l);if(p[0]==null&&p[3]==null){if(!c)break;c=!1,l=0;for(const x of r)x[1]!=null&&(a=Math.trunc(Math.max(a,x[1].getY()))),x[3]!=null&&(a=Math.max(a,Math.trunc(x[3].getY())));a+=We.ROW_STEP;continue}if(c=!0,r.push(p),!e)break;p[2]!=null?(l=Math.trunc(p[2].getX()),a=Math.trunc(p[2].getY())):(l=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY()))}return r}static findVertices(e,n,r){const a=e.getHeight(),l=e.getWidth(),c=new Array(8);return We.copyToResult(c,We.findRowsWithPattern(e,a,l,n,r,We.START_PATTERN),We.INDEXES_START_PATTERN),c[4]!=null&&(r=Math.trunc(c[4].getX()),n=Math.trunc(c[4].getY())),We.copyToResult(c,We.findRowsWithPattern(e,a,l,n,r,We.STOP_PATTERN),We.INDEXES_STOP_PATTERN),c}static copyToResult(e,n,r){for(let a=0;a<r.length;a++)e[r[a]]=n[a]}static findRowsWithPattern(e,n,r,a,l,c){const p=new Array(4);let x=!1;const v=new Int32Array(c.length);for(;a<n;a+=We.ROW_STEP){let N=We.findGuardPattern(e,l,a,r,!1,c,v);if(N!=null){for(;a>0;){const R=We.findGuardPattern(e,l,--a,r,!1,c,v);if(R!=null)N=R;else{a++;break}}p[0]=new Ie(N[0],a),p[1]=new Ie(N[1],a),x=!0;break}}let I=a+1;if(x){let N=0,R=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;I<n;I++){const L=We.findGuardPattern(e,R[0],I,r,!1,c,v);if(L!=null&&Math.abs(R[0]-L[0])<We.MAX_PATTERN_DRIFT&&Math.abs(R[1]-L[1])<We.MAX_PATTERN_DRIFT)R=L,N=0;else{if(N>We.SKIPPED_ROW_COUNT_MAX)break;N++}}I-=N+1,p[2]=new Ie(R[0],I),p[3]=new Ie(R[1],I)}return I-a<We.BARCODE_MIN_HEIGHT&&$.fill(p,null),p}static findGuardPattern(e,n,r,a,l,c,p){$.fillWithin(p,0,p.length,0);let x=n,v=0;for(;e.get(x,r)&&x>0&&v++<We.MAX_PIXEL_DRIFT;)x--;let I=x,N=0,R=c.length;for(let L=l;I<a;I++)if(e.get(I,r)!==L)p[N]++;else{if(N===R-1){if(We.patternMatchVariance(p,c,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return new Int32Array([x,I]);x+=p[0]+p[1],j.arraycopy(p,2,p,0,N-1),p[N-1]=0,p[N]=0,N--}else N++;p[N]=1,L=!L}return N===R-1&&We.patternMatchVariance(p,c,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE?new Int32Array([x,I-1]):null}static patternMatchVariance(e,n,r){let a=e.length,l=0,c=0;for(let v=0;v<a;v++)l+=e[v],c+=n[v];if(l<c)return 1/0;let p=l/c;r*=p;let x=0;for(let v=0;v<a;v++){let I=e[v],N=n[v]*p,R=I>N?I-N:N-I;if(R>r)return 1/0;x+=R}return x/l}}We.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),We.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),We.MAX_AVG_VARIANCE=.42,We.MAX_INDIVIDUAL_VARIANCE=.8,We.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),We.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),We.MAX_PIXEL_DRIFT=3,We.MAX_PATTERN_DRIFT=5,We.SKIPPED_ROW_COUNT_MAX=25,We.ROW_STEP=5,We.BARCODE_MIN_HEIGHT=10;class dn{constructor(e,n){if(n.length===0)throw new T;this.field=e;let r=n.length;if(r>1&&n[0]===0){let a=1;for(;a<r&&n[a]===0;)a++;a===r?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(r-a),j.arraycopy(n,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=n}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let a=0;for(let l of this.coefficients)a=this.field.add(a,l);return a}let n=this.coefficients[0],r=this.coefficients.length;for(let a=1;a<r;a++)n=this.field.add(this.field.multiply(e,n),this.coefficients[a]);return n}add(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let n=this.coefficients,r=e.coefficients;if(n.length>r.length){let c=n;n=r,r=c}let a=new Int32Array(r.length),l=r.length-n.length;j.arraycopy(r,0,a,0,l);for(let c=l;c<r.length;c++)a[c]=this.field.add(n[c-l],r[c]);return new dn(this.field,a)}subtract(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof dn?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new T("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new dn(this.field,new Int32Array([0]));let n=this.coefficients,r=n.length,a=e.coefficients,l=a.length,c=new Int32Array(r+l-1);for(let p=0;p<r;p++){let x=n[p];for(let v=0;v<l;v++)c[p+v]=this.field.add(c[p+v],this.field.multiply(x,a[v]))}return new dn(this.field,c)}negative(){let e=this.coefficients.length,n=new Int32Array(e);for(let r=0;r<e;r++)n[r]=this.field.subtract(0,this.coefficients[r]);return new dn(this.field,n)}multiplyScalar(e){if(e===0)return new dn(this.field,new Int32Array([0]));if(e===1)return this;let n=this.coefficients.length,r=new Int32Array(n);for(let a=0;a<n;a++)r[a]=this.field.multiply(this.coefficients[a],e);return new dn(this.field,r)}multiplyByMonomial(e,n){if(e<0)throw new T;if(n===0)return new dn(this.field,new Int32Array([0]));let r=this.coefficients.length,a=new Int32Array(r+e);for(let l=0;l<r;l++)a[l]=this.field.multiply(this.coefficients[l],n);return new dn(this.field,a)}toString(){let e=new Ye;for(let n=this.getDegree();n>=0;n--){let r=this.getCoefficient(n);r!==0&&(r<0?(e.append(" - "),r=-r):e.length()>0&&e.append(" + "),(n===0||r!==1)&&e.append(r),n!==0&&(n===1?e.append("x"):(e.append("x^"),e.append(n))))}return e.toString()}}class La{add(e,n){return(e+n)%this.modulus}subtract(e,n){return(this.modulus+e-n)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new T;return this.logTable[e]}inverse(e){if(e===0)throw new qi;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,n){return e===0||n===0?0:this.expTable[(this.logTable[e]+this.logTable[n])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class Ci extends La{constructor(e,n){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let r=1;for(let a=0;a<e;a++)this.expTable[a]=r,r=r*n%e;for(let a=0;a<e-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new dn(this,new Int32Array([0])),this.one=new dn(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,n){if(e<0)throw new T;if(n===0)return this.zero;let r=new Int32Array(e+1);return r[0]=n,new dn(this,r)}}Ci.PDF417_GF=new Ci(Ue.NUMBER_OF_CODEWORDS,3);class Bo{constructor(){this.field=Ci.PDF417_GF}decode(e,n,r){let a=new dn(this.field,e),l=new Int32Array(n),c=!1;for(let U=n;U>0;U--){let V=a.evaluateAt(this.field.exp(U));l[n-U]=V,V!==0&&(c=!0)}if(!c)return 0;let p=this.field.getOne();if(r!=null)for(const U of r){let V=this.field.exp(e.length-1-U),Y=new dn(this.field,new Int32Array([this.field.subtract(0,V),1]));p=p.multiply(Y)}let x=new dn(this.field,l),v=this.runEuclideanAlgorithm(this.field.buildMonomial(n,1),x,n),I=v[0],N=v[1],R=this.findErrorLocations(I),L=this.findErrorMagnitudes(N,I,R);for(let U=0;U<R.length;U++){let V=e.length-1-this.field.log(R[U]);if(V<0)throw B.getChecksumInstance();e[V]=this.field.subtract(e[V],L[U])}return R.length}runEuclideanAlgorithm(e,n,r){if(e.getDegree()<n.getDegree()){let R=e;e=n,n=R}let a=e,l=n,c=this.field.getZero(),p=this.field.getOne();for(;l.getDegree()>=Math.round(r/2);){let R=a,L=c;if(a=l,c=p,a.isZero())throw B.getChecksumInstance();l=R;let U=this.field.getZero(),V=a.getCoefficient(a.getDegree()),Y=this.field.inverse(V);for(;l.getDegree()>=a.getDegree()&&!l.isZero();){let ee=l.getDegree()-a.getDegree(),ge=this.field.multiply(l.getCoefficient(l.getDegree()),Y);U=U.add(this.field.buildMonomial(ee,ge)),l=l.subtract(a.multiplyByMonomial(ee,ge))}p=U.multiply(c).subtract(L).negative()}let x=p.getCoefficient(0);if(x===0)throw B.getChecksumInstance();let v=this.field.inverse(x),I=p.multiply(v),N=l.multiply(v);return[I,N]}findErrorLocations(e){let n=e.getDegree(),r=new Int32Array(n),a=0;for(let l=1;l<this.field.getSize()&&a<n;l++)e.evaluateAt(l)===0&&(r[a]=this.field.inverse(l),a++);if(a!==n)throw B.getChecksumInstance();return r}findErrorMagnitudes(e,n,r){let a=n.getDegree(),l=new Int32Array(a);for(let v=1;v<=a;v++)l[a-v]=this.field.multiply(v,n.getCoefficient(v));let c=new dn(this.field,l),p=r.length,x=new Int32Array(p);for(let v=0;v<p;v++){let I=this.field.inverse(r[v]),N=this.field.subtract(0,e.evaluateAt(I)),R=this.field.inverse(c.evaluateAt(I));x[v]=this.field.multiply(N,R)}return x}}class Jr{constructor(e,n,r,a,l){e instanceof Jr?this.constructor_2(e):this.constructor_1(e,n,r,a,l)}constructor_1(e,n,r,a,l){const c=n==null||r==null,p=a==null||l==null;if(c&&p)throw new re;c?(n=new Ie(0,a.getY()),r=new Ie(0,l.getY())):p&&(a=new Ie(e.getWidth()-1,n.getY()),l=new Ie(e.getWidth()-1,r.getY())),this.image=e,this.topLeft=n,this.bottomLeft=r,this.topRight=a,this.bottomRight=l,this.minX=Math.trunc(Math.min(n.getX(),r.getX())),this.maxX=Math.trunc(Math.max(a.getX(),l.getX())),this.minY=Math.trunc(Math.min(n.getY(),a.getY())),this.maxY=Math.trunc(Math.max(r.getY(),l.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,n){return e==null?n:n==null?e:new Jr(e.image,e.topLeft,e.bottomLeft,n.topRight,n.bottomRight)}addMissingRows(e,n,r){let a=this.topLeft,l=this.bottomLeft,c=this.topRight,p=this.bottomRight;if(e>0){let x=r?this.topLeft:this.topRight,v=Math.trunc(x.getY()-e);v<0&&(v=0);let I=new Ie(x.getX(),v);r?a=I:c=I}if(n>0){let x=r?this.bottomLeft:this.bottomRight,v=Math.trunc(x.getY()+n);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let I=new Ie(x.getX(),v);r?l=I:p=I}return new Jr(this.image,a,l,c,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ts{constructor(e,n,r,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=n,this.rowCountLowerPart=r,this.rowCount=n+r}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class br{constructor(){this.buffer=""}static form(e,n){let r=-1;function a(c,p,x,v,I,N){if(c==="%%")return"%";if(n[++r]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let R=I?parseInt(I.substr(1)):void 0,L;switch(N){case"s":L=n[r];break;case"c":L=n[r][0];break;case"f":L=parseFloat(n[r]).toFixed(c);break;case"p":L=parseFloat(n[r]).toPrecision(c);break;case"e":L=parseFloat(n[r]).toExponential(c);break;case"x":L=parseInt(n[r]).toString(R||16);break;case"d":L=parseFloat(parseInt(n[r],R||10).toPrecision(c)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(R);let U=parseInt(x),V=x&&x[0]+""=="0"?"0":" ";for(;L.length<U;)L=p!==void 0?L+V:V+L;return L}let l=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(l,a)}format(e,...n){this.buffer+=br.form(e,n)}toString(){return this.buffer}}class wr{constructor(e){this.boundingBox=new Jr(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let n=this.getCodeword(e);if(n!=null)return n;for(let r=1;r<wr.MAX_NEARBY_DISTANCE;r++){let a=this.imageRowToCodewordIndex(e)-r;if(a>=0&&(n=this.codewords[a],n!=null)||(a=this.imageRowToCodewordIndex(e)+r,a<this.codewords.length&&(n=this.codewords[a],n!=null)))return n}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,n){this.codewords[this.imageRowToCodewordIndex(e)]=n}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new br;let n=0;for(const r of this.codewords){if(r==null){e.format("%3d:    |   %n",n++);continue}e.format("%3d: %3d|%3d%n",n++,r.getRowNumber(),r.getValue())}return e.toString()}}wr.MAX_NEARBY_DISTANCE=5;class Vr{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let n=this.values.get(e);n==null&&(n=0),n++,this.values.set(e,n)}getValue(){let e=-1,n=new Array;for(const[r,a]of this.values.entries()){const l={getKey:()=>r,getValue:()=>a};l.getValue()>e?(e=l.getValue(),n=[],n.push(l.getKey())):l.getValue()===e&&n.push(l.getKey())}return Ue.toIntArray(n)}getConfidence(e){return this.values.get(e)}}class Pa extends wr{constructor(e,n){super(e),this._isLeft=n}setRowNumbers(){for(let e of this.getCodewords())e?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,e);let r=this.getBoundingBox(),a=this._isLeft?r.getTopLeft():r.getTopRight(),l=this._isLeft?r.getBottomLeft():r.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(l.getY())),x=-1,v=1,I=0;for(let N=c;N<p;N++){if(n[N]==null)continue;let R=n[N],L=R.getRowNumber()-x;if(L===0)I++;else if(L===1)v=Math.max(v,I),I=1,x=R.getRowNumber();else if(L<0||R.getRowNumber()>=e.getRowCount()||L>N)n[N]=null;else{let U;v>2?U=(v-2)*L:U=L;let V=U>=N;for(let Y=1;Y<=U&&!V;Y++)V=n[N-Y]!=null;V?n[N]=null:(x=R.getRowNumber(),I=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let n=new Int32Array(e.getRowCount());for(let r of this.getCodewords())if(r!=null){let a=r.getRowNumber();if(a>=n.length)continue;n[a]++}return n}adjustIncompleteIndicatorColumnRowNumbers(e){let n=this.getBoundingBox(),r=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),l=this.imageRowToCodewordIndex(Math.trunc(r.getY())),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.getCodewords(),x=-1;for(let v=l;v<c;v++){if(p[v]==null)continue;let I=p[v];I.setRowNumberAsRowIndicatorColumn();let N=I.getRowNumber()-x;N===0||(N===1?x=I.getRowNumber():I.getRowNumber()>=e.getRowCount()?p[v]=null:x=I.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),n=new Vr,r=new Vr,a=new Vr,l=new Vr;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let x=p.getValue()%30,v=p.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:r.setValue(x*3+1);break;case 1:l.setValue(x/3),a.setValue(x%3);break;case 2:n.setValue(x+1);break}}if(n.getValue().length===0||r.getValue().length===0||a.getValue().length===0||l.getValue().length===0||n.getValue()[0]<1||r.getValue()[0]+a.getValue()[0]<Ue.MIN_ROWS_IN_BARCODE||r.getValue()[0]+a.getValue()[0]>Ue.MAX_ROWS_IN_BARCODE)return null;let c=new ts(n.getValue()[0],r.getValue()[0],a.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(e,c),c}removeIncorrectCodewords(e,n){for(let r=0;r<e.length;r++){let a=e[r];if(e[r]==null)continue;let l=a.getValue()%30,c=a.getRowNumber();if(c>n.getRowCount()){e[r]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:l*3+1!==n.getRowCountUpperPart()&&(e[r]=null);break;case 1:(Math.trunc(l/3)!==n.getErrorCorrectionLevel()||l%3!==n.getRowCountLowerPart())&&(e[r]=null);break;case 2:l+1!==n.getColumnCount()&&(e[r]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ns{constructor(e,n){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=n,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=Ue.MAX_CODEWORDS_IN_BARCODE,n;do n=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<n);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let n=1;n<this.barcodeColumnCount+1;n++){let r=this.detectionResultColumns[n].getCodewords();for(let a=0;a<r.length;a++)r[a]!=null&&(r[a].hasValidRowNumber()||this.adjustRowNumbers(n,a,r))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<e.length;r++)if(e[r]!=null&&n[r]!=null&&e[r].getRowNumber()===n[r].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let l=this.detectionResultColumns[a].getCodewords()[r];l!=null&&(l.setRowNumber(e[r].getRowNumber()),l.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[r]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,n=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let a=n[r].getRowNumber(),l=0;for(let c=this.barcodeColumnCount+1;c>0&&l<this.ADJUST_ROW_NUMBER_SKIP;c--){let p=this.detectionResultColumns[c].getCodewords()[r];p!=null&&(l=ns.adjustRowNumberIfValid(a,l,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,n=this.detectionResultColumns[0].getCodewords();for(let r=0;r<n.length;r++){if(n[r]==null)continue;let a=n[r].getRowNumber(),l=0;for(let c=1;c<this.barcodeColumnCount+1&&l<this.ADJUST_ROW_NUMBER_SKIP;c++){let p=this.detectionResultColumns[c].getCodewords()[r];p!=null&&(l=ns.adjustRowNumberIfValid(a,l,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,n,r){return r==null||r.hasValidRowNumber()||(r.isValidRowNumber(e)?(r.setRowNumber(e),n=0):++n),n}adjustRowNumbers(e,n,r){if(!this.detectionResultColumns[e-1])return;let a=r[n],l=this.detectionResultColumns[e-1].getCodewords(),c=l;this.detectionResultColumns[e+1]!=null&&(c=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=l[n],p[3]=c[n],n>0&&(p[0]=r[n-1],p[4]=l[n-1],p[5]=c[n-1]),n>1&&(p[8]=r[n-2],p[10]=l[n-2],p[11]=c[n-2]),n<r.length-1&&(p[1]=r[n+1],p[6]=l[n+1],p[7]=c[n+1]),n<r.length-2&&(p[9]=r[n+2],p[12]=l[n+2],p[13]=c[n+2]);for(let x of p)if(ns.adjustRowNumber(a,x))return}static adjustRowNumber(e,n){return n==null?!1:n.hasValidRowNumber()&&n.getBucket()===e.getBucket()?(e.setRowNumber(n.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,n){this.detectionResultColumns[e]=n}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let n=new br;for(let r=0;r<e.getCodewords().length;r++){n.format("CW %3d:",r);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){n.format("    |   ");continue}let l=this.detectionResultColumns[a].getCodewords()[r];if(l==null){n.format("    |   ");continue}n.format(" %3d|%3d",l.getRowNumber(),l.getValue())}n.format("%n")}return n.toString()}}class ei{constructor(e,n,r,a){this.rowNumber=ei.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(n),this.bucket=Math.trunc(r),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==ei.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}ei.BARCODE_ROW_UNKNOWN=-1;class hn{static initialize(){for(let e=0;e<Ue.SYMBOL_TABLE.length;e++){let n=Ue.SYMBOL_TABLE[e],r=n&1;for(let a=0;a<Ue.BARS_IN_MODULE;a++){let l=0;for(;(n&1)===r;)l+=1,n>>=1;r=n&1,hn.RATIOS_TABLE[e]||(hn.RATIOS_TABLE[e]=new Array(Ue.BARS_IN_MODULE)),hn.RATIOS_TABLE[e][Ue.BARS_IN_MODULE-a-1]=Math.fround(l/Ue.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let n=hn.getDecodedCodewordValue(hn.sampleBitCounts(e));return n!==-1?n:hn.getClosestDecodedValue(e)}static sampleBitCounts(e){let n=nt.sum(e),r=new Int32Array(Ue.BARS_IN_MODULE),a=0,l=0;for(let c=0;c<Ue.MODULES_IN_CODEWORD;c++){let p=n/(2*Ue.MODULES_IN_CODEWORD)+c*n/Ue.MODULES_IN_CODEWORD;l+e[a]<=p&&(l+=e[a],a++),r[a]++}return r}static getDecodedCodewordValue(e){let n=hn.getBitValue(e);return Ue.getCodeword(n)===-1?-1:n}static getBitValue(e){let n=0;for(let r=0;r<e.length;r++)for(let a=0;a<e[r];a++)n=n<<1|(r%2===0?1:0);return Math.trunc(n)}static getClosestDecodedValue(e){let n=nt.sum(e),r=new Array(Ue.BARS_IN_MODULE);if(n>1)for(let c=0;c<r.length;c++)r[c]=Math.fround(e[c]/n);let a=Fr.MAX_VALUE,l=-1;this.bSymbolTableReady||hn.initialize();for(let c=0;c<hn.RATIOS_TABLE.length;c++){let p=0,x=hn.RATIOS_TABLE[c];for(let v=0;v<Ue.BARS_IN_MODULE;v++){let I=Math.fround(x[v]-r[v]);if(p+=Math.fround(I*I),p>=a)break}p<a&&(a=p,l=Ue.SYMBOL_TABLE[c])}return l}}hn.bSymbolTableReady=!1,hn.RATIOS_TABLE=new Array(Ue.SYMBOL_TABLE.length).map(b=>new Array(Ue.BARS_IN_MODULE));class js{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class jo{static parseLong(e,n=void 0){return parseInt(e,n)}}class Nr extends w{}Nr.kind="NullPointerException";class Fo{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,n,r){if(e==null)throw new Nr;if(n<0||n>e.length||r<0||n+r>e.length||n+r<0)throw new F;if(r===0)return;for(let a=0;a<r;a++)this.write(e[n+a])}flush(){}close(){}}class Fs extends w{}class Ba extends Fo{constructor(e=32){if(super(),this.count=0,e<0)throw new T("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let r=this.buf.length<<1;if(r-e<0&&(r=e),r<0){if(e<0)throw new Fs;r=W.MAX_VALUE}this.buf=$.copyOfUint8Array(this.buf,r)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,n,r){if(n<0||n>e.length||r<0||n+r-e.length>0)throw new F;this.ensureCapacity(this.count+r),j.arraycopy(e,n,this.buf,this.count,r),this.count+=r}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return $.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var dt;(function(b){b[b.ALPHA=0]="ALPHA",b[b.LOWER=1]="LOWER",b[b.MIXED=2]="MIXED",b[b.PUNCT=3]="PUNCT",b[b.ALPHA_SHIFT=4]="ALPHA_SHIFT",b[b.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(dt||(dt={}));function rs(){if(typeof window<"u")return window.BigInt||null;if(typeof Dl<"u")return Dl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let is;function Vt(b){if(typeof is>"u"&&(is=rs()),is===null)throw new Error("BigInt is not supported!");return is(b)}function Ai(){let b=[];b[0]=Vt(1);let e=Vt(900);b[1]=e;for(let n=2;n<16;n++)b[n]=b[n-1]*e;return b}class te{static decode(e,n){let r=new Ye(""),a=oe.ISO8859_1;r.enableDecoding(a);let l=1,c=e[l++],p=new js;for(;l<e[0];){switch(c){case te.TEXT_COMPACTION_MODE_LATCH:l=te.textCompaction(e,l,r);break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:l=te.byteCompaction(c,e,a,l,r);break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:r.append(e[l++]);break;case te.NUMERIC_COMPACTION_MODE_LATCH:l=te.numericCompaction(e,l,r);break;case te.ECI_CHARSET:oe.getCharacterSetECIByValue(e[l++]);break;case te.ECI_GENERAL_PURPOSE:l+=2;break;case te.ECI_USER_DEFINED:l++;break;case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:l=te.decodeMacroBlock(e,l,p);break;case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:throw new K;default:l--,l=te.textCompaction(e,l,r);break}if(l<e.length)c=e[l++];else throw K.getFormatInstance()}if(r.length()===0)throw K.getFormatInstance();let x=new xt(null,r.toString(),null,n);return x.setOther(p),x}static decodeMacroBlock(e,n,r){if(n+te.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw K.getFormatInstance();let a=new Int32Array(te.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<te.NUMBER_OF_SEQUENCE_CODEWORDS;p++,n++)a[p]=e[n];r.setSegmentIndex(W.parseInt(te.decodeBase900toBase10(a,te.NUMBER_OF_SEQUENCE_CODEWORDS)));let l=new Ye;n=te.textCompaction(e,n,l),r.setFileId(l.toString());let c=-1;for(e[n]===te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=n+1);n<e[0];)switch(e[n]){case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(n++,e[n]){case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new Ye;n=te.textCompaction(e,n+1,p),r.setFileName(p.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new Ye;n=te.textCompaction(e,n+1,x),r.setSender(x.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new Ye;n=te.textCompaction(e,n+1,v),r.setAddressee(v.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let I=new Ye;n=te.numericCompaction(e,n+1,I),r.setSegmentCount(W.parseInt(I.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new Ye;n=te.numericCompaction(e,n+1,N),r.setTimestamp(jo.parseLong(N.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new Ye;n=te.numericCompaction(e,n+1,R),r.setChecksum(W.parseInt(R.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new Ye;n=te.numericCompaction(e,n+1,L),r.setFileSize(jo.parseLong(L.toString()));break;default:throw K.getFormatInstance()}break;case te.MACRO_PDF417_TERMINATOR:n++,r.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(c!==-1){let p=n-c;r.isLastSegment()&&p--,r.setOptionalData($.copyOfRange(e,c,c+p))}return n}static textCompaction(e,n,r){let a=new Int32Array((e[0]-n)*2),l=new Int32Array((e[0]-n)*2),c=0,p=!1;for(;n<e[0]&&!p;){let x=e[n++];if(x<te.TEXT_COMPACTION_MODE_LATCH)a[c]=x/30,a[c+1]=x%30,c+=2;else switch(x){case te.TEXT_COMPACTION_MODE_LATCH:a[c++]=te.TEXT_COMPACTION_MODE_LATCH;break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:n--,p=!0;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[c]=te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=e[n++],l[c]=x,c++;break}}return te.decodeTextCompaction(a,l,c,r),n}static decodeTextCompaction(e,n,r,a){let l=dt.ALPHA,c=dt.ALPHA,p=0;for(;p<r;){let x=e[p],v="";switch(l){case dt.ALPHA:if(x<26)v=String.fromCharCode(65+x);else switch(x){case 26:v=" ";break;case te.LL:l=dt.LOWER;break;case te.ML:l=dt.MIXED;break;case te.PS:c=l,l=dt.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break;case dt.LOWER:if(x<26)v=String.fromCharCode(97+x);else switch(x){case 26:v=" ";break;case te.AS:c=l,l=dt.ALPHA_SHIFT;break;case te.ML:l=dt.MIXED;break;case te.PS:c=l,l=dt.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break;case dt.MIXED:if(x<te.PL)v=te.MIXED_CHARS[x];else switch(x){case te.PL:l=dt.PUNCT;break;case 26:v=" ";break;case te.LL:l=dt.LOWER;break;case te.AL:l=dt.ALPHA;break;case te.PS:c=l,l=dt.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break;case dt.PUNCT:if(x<te.PAL)v=te.PUNCT_CHARS[x];else switch(x){case te.PAL:l=dt.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break;case dt.ALPHA_SHIFT:if(l=c,x<26)v=String.fromCharCode(65+x);else switch(x){case 26:v=" ";break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break;case dt.PUNCT_SHIFT:if(l=c,x<te.PAL)v=te.PUNCT_CHARS[x];else switch(x){case te.PAL:l=dt.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(n[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:l=dt.ALPHA;break}break}v!==""&&a.append(v),p++}}static byteCompaction(e,n,r,a,l){let c=new Ba,p=0,x=0,v=!1;switch(e){case te.BYTE_COMPACTION_MODE_LATCH:let I=new Int32Array(6),N=n[a++];for(;a<n[0]&&!v;)switch(I[p++]=N,x=900*x+N,N=n[a++],N){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:a--,v=!0;break;default:if(p%5===0&&p>0){for(let R=0;R<6;++R)c.write(Number(Vt(x)>>Vt(8*(5-R))));x=0,p=0}break}a===n[0]&&N<te.TEXT_COMPACTION_MODE_LATCH&&(I[p++]=N);for(let R=0;R<p;R++)c.write(I[R]);break;case te.BYTE_COMPACTION_MODE_LATCH_6:for(;a<n[0]&&!v;){let R=n[a++];if(R<te.TEXT_COMPACTION_MODE_LATCH)p++,x=900*x+R;else switch(R){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:a--,v=!0;break}if(p%5===0&&p>0){for(let L=0;L<6;++L)c.write(Number(Vt(x)>>Vt(8*(5-L))));x=0,p=0}}break}return l.append(ut.decode(c.toByteArray(),r)),a}static numericCompaction(e,n,r){let a=0,l=!1,c=new Int32Array(te.MAX_NUMERIC_CODEWORDS);for(;n<e[0]&&!l;){let p=e[n++];if(n===e[0]&&(l=!0),p<te.TEXT_COMPACTION_MODE_LATCH)c[a]=p,a++;else switch(p){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:n--,l=!0;break}(a%te.MAX_NUMERIC_CODEWORDS===0||p===te.NUMERIC_COMPACTION_MODE_LATCH||l)&&a>0&&(r.append(te.decodeBase900toBase10(c,a)),a=0)}return n}static decodeBase900toBase10(e,n){let r=Vt(0);for(let l=0;l<n;l++)r+=te.EXP900[n-l-1]*Vt(e[l]);let a=r.toString();if(a.charAt(0)!=="1")throw new K;return a.substring(1)}}te.TEXT_COMPACTION_MODE_LATCH=900,te.BYTE_COMPACTION_MODE_LATCH=901,te.NUMERIC_COMPACTION_MODE_LATCH=902,te.BYTE_COMPACTION_MODE_LATCH_6=924,te.ECI_USER_DEFINED=925,te.ECI_GENERAL_PURPOSE=926,te.ECI_CHARSET=927,te.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,te.MACRO_PDF417_TERMINATOR=922,te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,te.MAX_NUMERIC_CODEWORDS=15,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,te.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,te.PL=25,te.LL=27,te.AS=27,te.ML=28,te.AL=28,te.PS=29,te.PAL=29,te.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,te.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",te.EXP900=rs()?Ai():[],te.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Xe{constructor(){}static decode(e,n,r,a,l,c,p){let x=new Jr(e,n,r,a,l),v=null,I=null,N;for(let U=!0;;U=!1){if(n!=null&&(v=Xe.getRowIndicatorColumn(e,x,n,!0,c,p)),a!=null&&(I=Xe.getRowIndicatorColumn(e,x,a,!1,c,p)),N=Xe.merge(v,I),N==null)throw re.getNotFoundInstance();let V=N.getBoundingBox();if(U&&V!=null&&(V.getMinY()<x.getMinY()||V.getMaxY()>x.getMaxY()))x=V;else break}N.setBoundingBox(x);let R=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,v),N.setDetectionResultColumn(R,I);let L=v!=null;for(let U=1;U<=R;U++){let V=L?U:R-U;if(N.getDetectionResultColumn(V)!==void 0)continue;let Y;V===0||V===R?Y=new Pa(x,V===0):Y=new wr(x),N.setDetectionResultColumn(V,Y);let ee=-1,ge=ee;for(let pe=x.getMinY();pe<=x.getMaxY();pe++){if(ee=Xe.getStartColumn(N,V,pe,L),ee<0||ee>x.getMaxX()){if(ge===-1)continue;ee=ge}let ue=Xe.detectCodeword(e,x.getMinX(),x.getMaxX(),L,ee,pe,c,p);ue!=null&&(Y.setCodeword(pe,ue),ge=ee,c=Math.min(c,ue.getWidth()),p=Math.max(p,ue.getWidth()))}}return Xe.createDecoderResult(N)}static merge(e,n){if(e==null&&n==null)return null;let r=Xe.getBarcodeMetadata(e,n);if(r==null)return null;let a=Jr.merge(Xe.adjustBoundingBox(e),Xe.adjustBoundingBox(n));return new ns(r,a)}static adjustBoundingBox(e){if(e==null)return null;let n=e.getRowHeights();if(n==null)return null;let r=Xe.getMax(n),a=0;for(let p of n)if(a+=r-p,p>0)break;let l=e.getCodewords();for(let p=0;a>0&&l[p]==null;p++)a--;let c=0;for(let p=n.length-1;p>=0&&(c+=r-n[p],!(n[p]>0));p--);for(let p=l.length-1;c>0&&l[p]==null;p--)c--;return e.getBoundingBox().addMissingRows(a,c,e.isLeft())}static getMax(e){let n=-1;for(let r of e)n=Math.max(n,r);return n}static getBarcodeMetadata(e,n){let r;if(e==null||(r=e.getBarcodeMetadata())==null)return n==null?null:n.getBarcodeMetadata();let a;return n==null||(a=n.getBarcodeMetadata())==null?r:r.getColumnCount()!==a.getColumnCount()&&r.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&r.getRowCount()!==a.getRowCount()?null:r}static getRowIndicatorColumn(e,n,r,a,l,c){let p=new Pa(n,a);for(let x=0;x<2;x++){let v=x===0?1:-1,I=Math.trunc(Math.trunc(r.getX()));for(let N=Math.trunc(Math.trunc(r.getY()));N<=n.getMaxY()&&N>=n.getMinY();N+=v){let R=Xe.detectCodeword(e,0,e.getWidth(),a,I,N,l,c);R!=null&&(p.setCodeword(N,R),a?I=R.getStartX():I=R.getEndX())}}return p}static adjustCodewordCount(e,n){let r=n[0][1],a=r.getValue(),l=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Xe.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(l<1||l>Ue.MAX_CODEWORDS_IN_BARCODE)throw re.getNotFoundInstance();r.setValue(l)}else a[0]!==l&&r.setValue(l)}static createDecoderResult(e){let n=Xe.createBarcodeMatrix(e);Xe.adjustCodewordCount(e,n);let r=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),l=[],c=new Array;for(let x=0;x<e.getBarcodeRowCount();x++)for(let v=0;v<e.getBarcodeColumnCount();v++){let I=n[x][v+1].getValue(),N=x*e.getBarcodeColumnCount()+v;I.length===0?r.push(N):I.length===1?a[N]=I[0]:(c.push(N),l.push(I))}let p=new Array(l.length);for(let x=0;x<p.length;x++)p[x]=l[x];return Xe.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,Ue.toIntArray(r),Ue.toIntArray(c),p)}static createDecoderResultFromAmbiguousValues(e,n,r,a,l){let c=new Int32Array(a.length),p=100;for(;p-- >0;){for(let x=0;x<c.length;x++)n[a[x]]=l[x][c[x]];try{return Xe.decodeCodewords(n,e,r)}catch(x){if(!(x instanceof B))throw x}if(c.length===0)throw B.getChecksumInstance();for(let x=0;x<c.length;x++)if(c[x]<l[x].length-1){c[x]++;break}else if(c[x]=0,x===c.length-1)throw B.getChecksumInstance()}throw B.getChecksumInstance()}static createBarcodeMatrix(e){let n=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let a=0;a<n.length;a++)for(let l=0;l<n[a].length;l++)n[a][l]=new Vr;let r=0;for(let a of e.getDetectionResultColumns()){if(a!=null){for(let l of a.getCodewords())if(l!=null){let c=l.getRowNumber();if(c>=0){if(c>=n.length)continue;n[c][r].setValue(l.getValue())}}}r++}return n}static isValidBarcodeColumn(e,n){return n>=0&&n<=e.getBarcodeColumnCount()+1}static getStartColumn(e,n,r,a){let l=a?1:-1,c=null;if(Xe.isValidBarcodeColumn(e,n-l)&&(c=e.getDetectionResultColumn(n-l).getCodeword(r)),c!=null)return a?c.getEndX():c.getStartX();if(c=e.getDetectionResultColumn(n).getCodewordNearby(r),c!=null)return a?c.getStartX():c.getEndX();if(Xe.isValidBarcodeColumn(e,n-l)&&(c=e.getDetectionResultColumn(n-l).getCodewordNearby(r)),c!=null)return a?c.getEndX():c.getStartX();let p=0;for(;Xe.isValidBarcodeColumn(e,n-l);){n-=l;for(let x of e.getDetectionResultColumn(n).getCodewords())if(x!=null)return(a?x.getEndX():x.getStartX())+l*p*(x.getEndX()-x.getStartX());p++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,n,r,a,l,c,p,x){l=Xe.adjustCodewordStartColumn(e,n,r,a,l,c);let v=Xe.getModuleBitCount(e,n,r,a,l,c);if(v==null)return null;let I,N=nt.sum(v);if(a)I=l+N;else{for(let U=0;U<v.length/2;U++){let V=v[U];v[U]=v[v.length-1-U],v[v.length-1-U]=V}I=l,l=I-N}if(!Xe.checkCodewordSkew(N,p,x))return null;let R=hn.getDecodedValue(v),L=Ue.getCodeword(R);return L===-1?null:new ei(l,I,Xe.getCodewordBucketNumber(R),L)}static getModuleBitCount(e,n,r,a,l,c){let p=l,x=new Int32Array(8),v=0,I=a?1:-1,N=a;for(;(a?p<r:p>=n)&&v<x.length;)e.get(p,c)===N?(x[v]++,p+=I):(v++,N=!N);return v===x.length||p===(a?r:n)&&v===x.length-1?x:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,n,r,a,l,c){let p=l,x=a?-1:1;for(let v=0;v<2;v++){for(;(a?p>=n:p<r)&&a===e.get(p,c);){if(Math.abs(l-p)>Xe.CODEWORD_SKEW_SIZE)return l;p+=x}x=-x,a=!a}return p}static checkCodewordSkew(e,n,r){return n-Xe.CODEWORD_SKEW_SIZE<=e&&e<=r+Xe.CODEWORD_SKEW_SIZE}static decodeCodewords(e,n,r){if(e.length===0)throw K.getFormatInstance();let a=1<<n+1,l=Xe.correctErrors(e,r,a);Xe.verifyCodewordCount(e,a);let c=te.decode(e,""+n);return c.setErrorsCorrected(l),c.setErasures(r.length),c}static correctErrors(e,n,r){if(n!=null&&n.length>r/2+Xe.MAX_ERRORS||r<0||r>Xe.MAX_EC_CODEWORDS)throw B.getChecksumInstance();return Xe.errorCorrection.decode(e,r,n)}static verifyCodewordCount(e,n){if(e.length<4)throw K.getFormatInstance();let r=e[0];if(r>e.length)throw K.getFormatInstance();if(r===0)if(n<e.length)e[0]=e.length-n;else throw K.getFormatInstance()}static getBitCountForCodeword(e){let n=new Int32Array(8),r=0,a=n.length-1;for(;!((e&1)!==r&&(r=e&1,a--,a<0));)n[a]++,e>>=1;return n}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Xe.getCodewordBucketNumber(Xe.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let n=new br;for(let r=0;r<e.length;r++){n.format("Row %2d: ",r);for(let a=0;a<e[r].length;a++){let l=e[r][a];l.getValue().length===0?n.format("        ",null):n.format("%4d(%2d)",l.getValue()[0],l.getConfidence(l.getValue()[0]))}n.format("%n")}return n.toString()}}Xe.CODEWORD_SKEW_SIZE=2,Xe.MAX_ERRORS=3,Xe.MAX_EC_CODEWORDS=512,Xe.errorCorrection=new Bo;class fn{decode(e,n=null){let r=fn.decode(e,n,!1);if(r==null||r.length===0||r[0]==null)throw re.getNotFoundInstance();return r[0]}decodeMultiple(e,n=null){try{return fn.decode(e,n,!0)}catch(r){throw r instanceof K||r instanceof B?re.getNotFoundInstance():r}}static decode(e,n,r){const a=new Array,l=We.detectMultiple(e,n,r);for(const c of l.getPoints()){const p=Xe.decode(l.getBits(),c[4],c[5],c[6],c[7],fn.getMinCodewordWidth(c),fn.getMaxCodewordWidth(c)),x=new Pe(p.getText(),p.getRawBytes(),void 0,c,xe.PDF_417);x.putMetadata(He.ERROR_CORRECTION_LEVEL,p.getECLevel());const v=p.getOther();v!=null&&x.putMetadata(He.PDF417_EXTRA_METADATA,v),a.push(x)}return a.map(c=>c)}static getMaxWidth(e,n){return e==null||n==null?0:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMinWidth(e,n){return e==null||n==null?W.MAX_VALUE:Math.trunc(Math.abs(e.getX()-n.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(fn.getMaxWidth(e[0],e[4]),fn.getMaxWidth(e[6],e[2])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN),Math.max(fn.getMaxWidth(e[1],e[5]),fn.getMaxWidth(e[7],e[3])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(fn.getMinWidth(e[0],e[4]),fn.getMinWidth(e[6],e[2])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN),Math.min(fn.getMinWidth(e[1],e[5]),fn.getMinWidth(e[7],e[3])*Ue.MODULES_IN_CODEWORD/Ue.MODULES_IN_STOP_PATTERN)))}reset(){}}class Si extends w{}Si.kind="ReaderException";class Us{constructor(e,n){this.verbose=e===!0,n&&this.setHints(n)}decode(e,n){return n&&this.setHints(n),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const n=!h(e)&&e.get(he.TRY_HARDER)===!0,r=h(e)?null:e.get(he.POSSIBLE_FORMATS),a=new Array;if(!h(r)){const l=r.some(c=>c===xe.UPC_A||c===xe.UPC_E||c===xe.EAN_13||c===xe.EAN_8||c===xe.CODABAR||c===xe.CODE_39||c===xe.CODE_93||c===xe.CODE_128||c===xe.ITF||c===xe.RSS_14||c===xe.RSS_EXPANDED);l&&!n&&a.push(new yi(e,this.verbose)),r.includes(xe.QR_CODE)&&a.push(new _n),r.includes(xe.DATA_MATRIX)&&a.push(new rr),r.includes(xe.AZTEC)&&a.push(new Ur),r.includes(xe.PDF_417)&&a.push(new fn),l&&n&&a.push(new yi(e,this.verbose))}a.length===0&&(n||a.push(new yi(e,this.verbose)),a.push(new _n),a.push(new rr),a.push(new Ur),a.push(new fn),n&&a.push(new yi(e,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Si("No readers where selected, nothing can be read.");for(const n of this.readers)try{return n.decode(e,this.hints)}catch(r){if(r instanceof Si)continue}throw new re("No MultiFormat Readers were able to detect the code.")}}class ss extends ze{constructor(e=null,n=500){const r=new Us;r.setHints(e),super(r,n)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class zs extends ze{constructor(e=500){super(new fn,e)}}class ja extends ze{constructor(e=500){super(new _n,e)}}var Uo;(function(b){b[b.ERROR_CORRECTION=0]="ERROR_CORRECTION",b[b.CHARACTER_SET=1]="CHARACTER_SET",b[b.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",b[b.MIN_SIZE=3]="MIN_SIZE",b[b.MAX_SIZE=4]="MAX_SIZE",b[b.MARGIN=5]="MARGIN",b[b.PDF417_COMPACT=6]="PDF417_COMPACT",b[b.PDF417_COMPACTION=7]="PDF417_COMPACTION",b[b.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",b[b.AZTEC_LAYERS=9]="AZTEC_LAYERS",b[b.QR_VERSION=10]="QR_VERSION"})(Uo||(Uo={}));var Kt=Uo;class zo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ln(e,Int32Array.from([1])))}buildGenerator(e){const n=this.cachedGenerators;if(e>=n.length){let r=n[n.length-1];const a=this.field;for(let l=n.length;l<=e;l++){const c=r.multiply(new ln(a,Int32Array.from([1,a.exp(l-1+a.getGeneratorBase())])));n.push(c),r=c}}return n[e]}encode(e,n){if(n===0)throw new T("No error correction bytes");const r=e.length-n;if(r<=0)throw new T("No data bytes provided");const a=this.buildGenerator(n),l=new Int32Array(r);j.arraycopy(e,0,l,0,r);let c=new ln(this.field,l);c=c.multiplyByMonomial(n,1);const x=c.divide(a)[1].getCoefficients(),v=n-x.length;for(let I=0;I<v;I++)e[r+I]=0;j.arraycopy(x,0,e,r+v,x.length)}}class Ot{constructor(){}static applyMaskPenaltyRule1(e){return Ot.applyMaskPenaltyRule1Internal(e,!0)+Ot.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let n=0;const r=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let c=0;c<l-1;c++){const p=r[c];for(let x=0;x<a-1;x++){const v=p[x];v===p[x+1]&&v===r[c+1][x]&&v===r[c+1][x+1]&&n++}}return Ot.N2*n}static applyMaskPenaltyRule3(e){let n=0;const r=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let c=0;c<l;c++)for(let p=0;p<a;p++){const x=r[c];p+6<a&&x[p]===1&&x[p+1]===0&&x[p+2]===1&&x[p+3]===1&&x[p+4]===1&&x[p+5]===0&&x[p+6]===1&&(Ot.isWhiteHorizontal(x,p-4,p)||Ot.isWhiteHorizontal(x,p+7,p+11))&&n++,c+6<l&&r[c][p]===1&&r[c+1][p]===0&&r[c+2][p]===1&&r[c+3][p]===1&&r[c+4][p]===1&&r[c+5][p]===0&&r[c+6][p]===1&&(Ot.isWhiteVertical(r,p,c-4,c)||Ot.isWhiteVertical(r,p,c+7,c+11))&&n++}return n*Ot.N3}static isWhiteHorizontal(e,n,r){n=Math.max(n,0),r=Math.min(r,e.length);for(let a=n;a<r;a++)if(e[a]===1)return!1;return!0}static isWhiteVertical(e,n,r,a){r=Math.max(r,0),a=Math.min(a,e.length);for(let l=r;l<a;l++)if(e[l][n]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let n=0;const r=e.getArray(),a=e.getWidth(),l=e.getHeight();for(let x=0;x<l;x++){const v=r[x];for(let I=0;I<a;I++)v[I]===1&&n++}const c=e.getHeight()*e.getWidth();return Math.floor(Math.abs(n*2-c)*10/c)*Ot.N4}static getDataMaskBit(e,n,r){let a,l;switch(e){case 0:a=r+n&1;break;case 1:a=r&1;break;case 2:a=n%3;break;case 3:a=(r+n)%3;break;case 4:a=Math.floor(r/2)+Math.floor(n/3)&1;break;case 5:l=r*n,a=(l&1)+l%3;break;case 6:l=r*n,a=(l&1)+l%3&1;break;case 7:l=r*n,a=l%3+(r+n&1)&1;break;default:throw new T("Invalid mask pattern: "+e)}return a===0}static applyMaskPenaltyRule1Internal(e,n){let r=0;const a=n?e.getHeight():e.getWidth(),l=n?e.getWidth():e.getHeight(),c=e.getArray();for(let p=0;p<a;p++){let x=0,v=-1;for(let I=0;I<l;I++){const N=n?c[p][I]:c[I][p];N===v?x++:(x>=5&&(r+=Ot.N1+(x-5)),x=1,v=N)}x>=5&&(r+=Ot.N1+(x-5))}return r}}Ot.N1=3,Ot.N2=3,Ot.N3=40,Ot.N4=10;class Hs{constructor(e,n){this.width=e,this.height=n;const r=new Array(n);for(let a=0;a!==n;a++)r[a]=new Uint8Array(e);this.bytes=r}getHeight(){return this.height}getWidth(){return this.width}get(e,n){return this.bytes[n][e]}getArray(){return this.bytes}setNumber(e,n,r){this.bytes[n][e]=r}setBoolean(e,n,r){this.bytes[n][e]=r?1:0}clear(e){for(const n of this.bytes)$.fill(n,e)}equals(e){if(!(e instanceof Hs))return!1;const n=e;if(this.width!==n.width||this.height!==n.height)return!1;for(let r=0,a=this.height;r<a;++r){const l=this.bytes[r],c=n.bytes[r];for(let p=0,x=this.width;p<x;++p)if(l[p]!==c[p])return!1}return!0}toString(){const e=new Ye;for(let n=0,r=this.height;n<r;++n){const a=this.bytes[n];for(let l=0,c=this.width;l<c;++l)switch(a[l]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ti{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new Ye;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ti.NUM_MASK_PATTERNS}}ti.NUM_MASK_PATTERNS=8;class Ct extends w{}Ct.kind="WriterException";class Be{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,n,r,a,l){Be.clearMatrix(l),Be.embedBasicPatterns(r,l),Be.embedTypeInfo(n,a,l),Be.maybeEmbedVersionInfo(r,l),Be.embedDataBits(e,a,l)}static embedBasicPatterns(e,n){Be.embedPositionDetectionPatternsAndSeparators(n),Be.embedDarkDotAtLeftBottomCorner(n),Be.maybeEmbedPositionAdjustmentPatterns(e,n),Be.embedTimingPatterns(n)}static embedTypeInfo(e,n,r){const a=new J;Be.makeTypeInfoBits(e,n,a);for(let l=0,c=a.getSize();l<c;++l){const p=a.get(a.getSize()-1-l),x=Be.TYPE_INFO_COORDINATES[l],v=x[0],I=x[1];if(r.setBoolean(v,I,p),l<8){const N=r.getWidth()-l-1;r.setBoolean(N,8,p)}else{const R=r.getHeight()-7+(l-8);r.setBoolean(8,R,p)}}}static maybeEmbedVersionInfo(e,n){if(e.getVersionNumber()<7)return;const r=new J;Be.makeVersionInfoBits(e,r);let a=17;for(let l=0;l<6;++l)for(let c=0;c<3;++c){const p=r.get(a);a--,n.setBoolean(l,n.getHeight()-11+c,p),n.setBoolean(n.getHeight()-11+c,l,p)}}static embedDataBits(e,n,r){let a=0,l=-1,c=r.getWidth()-1,p=r.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);p>=0&&p<r.getHeight();){for(let x=0;x<2;++x){const v=c-x;if(!Be.isEmpty(r.get(v,p)))continue;let I;a<e.getSize()?(I=e.get(a),++a):I=!1,n!==255&&Ot.getDataMaskBit(n,v,p)&&(I=!I),r.setBoolean(v,p,I)}p+=l}l=-l,p+=l,c-=2}if(a!==e.getSize())throw new Ct("Not all bits consumed: "+a+"/"+e.getSize())}static findMSBSet(e){return 32-W.numberOfLeadingZeros(e)}static calculateBCHCode(e,n){if(n===0)throw new T("0 polynomial");const r=Be.findMSBSet(n);for(e<<=r-1;Be.findMSBSet(e)>=r;)e^=n<<Be.findMSBSet(e)-r;return e}static makeTypeInfoBits(e,n,r){if(!ti.isValidMaskPattern(n))throw new Ct("Invalid mask pattern");const a=e.getBits()<<3|n;r.appendBits(a,5);const l=Be.calculateBCHCode(a,Be.TYPE_INFO_POLY);r.appendBits(l,10);const c=new J;if(c.appendBits(Be.TYPE_INFO_MASK_PATTERN,15),r.xor(c),r.getSize()!==15)throw new Ct("should not happen but we got: "+r.getSize())}static makeVersionInfoBits(e,n){n.appendBits(e.getVersionNumber(),6);const r=Be.calculateBCHCode(e.getVersionNumber(),Be.VERSION_INFO_POLY);if(n.appendBits(r,12),n.getSize()!==18)throw new Ct("should not happen but we got: "+n.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let n=8;n<e.getWidth()-8;++n){const r=(n+1)%2;Be.isEmpty(e.get(n,6))&&e.setNumber(n,6,r),Be.isEmpty(e.get(6,n))&&e.setNumber(6,n,r)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new Ct;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,n,r){for(let a=0;a<8;++a){if(!Be.isEmpty(r.get(e+a,n)))throw new Ct;r.setNumber(e+a,n,0)}}static embedVerticalSeparationPattern(e,n,r){for(let a=0;a<7;++a){if(!Be.isEmpty(r.get(e,n+a)))throw new Ct;r.setNumber(e,n+a,0)}}static embedPositionAdjustmentPattern(e,n,r){for(let a=0;a<5;++a){const l=Be.POSITION_ADJUSTMENT_PATTERN[a];for(let c=0;c<5;++c)r.setNumber(e+c,n+a,l[c])}}static embedPositionDetectionPattern(e,n,r){for(let a=0;a<7;++a){const l=Be.POSITION_DETECTION_PATTERN[a];for(let c=0;c<7;++c)r.setNumber(e+c,n+a,l[c])}}static embedPositionDetectionPatternsAndSeparators(e){const n=Be.POSITION_DETECTION_PATTERN[0].length;Be.embedPositionDetectionPattern(0,0,e),Be.embedPositionDetectionPattern(e.getWidth()-n,0,e),Be.embedPositionDetectionPattern(0,e.getWidth()-n,e);const r=8;Be.embedHorizontalSeparationPattern(0,r-1,e),Be.embedHorizontalSeparationPattern(e.getWidth()-r,r-1,e),Be.embedHorizontalSeparationPattern(0,e.getWidth()-r,e);const a=7;Be.embedVerticalSeparationPattern(a,0,e),Be.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),Be.embedVerticalSeparationPattern(a,e.getHeight()-a,e)}static maybeEmbedPositionAdjustmentPatterns(e,n){if(e.getVersionNumber()<2)return;const r=e.getVersionNumber()-1,a=Be.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[r];for(let l=0,c=a.length;l!==c;l++){const p=a[l];if(p>=0)for(let x=0;x!==c;x++){const v=a[x];v>=0&&Be.isEmpty(n.get(v,p))&&Be.embedPositionAdjustmentPattern(v-2,p-2,n)}}}}Be.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Be.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Be.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Be.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Be.VERSION_INFO_POLY=7973,Be.TYPE_INFO_POLY=1335,Be.TYPE_INFO_MASK_PATTERN=21522;class Zl{constructor(e,n){this.dataBytes=e,this.errorCorrectionBytes=n}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class St{constructor(){}static calculateMaskPenalty(e){return Ot.applyMaskPenaltyRule1(e)+Ot.applyMaskPenaltyRule2(e)+Ot.applyMaskPenaltyRule3(e)+Ot.applyMaskPenaltyRule4(e)}static encode(e,n,r=null){let a=St.DEFAULT_BYTE_MODE_ENCODING;const l=r!==null&&r.get(Kt.CHARACTER_SET)!==void 0;l&&(a=r.get(Kt.CHARACTER_SET).toString());const c=this.chooseMode(e,a),p=new J;if(c===Le.BYTE&&(l||St.DEFAULT_BYTE_MODE_ENCODING!==a)){const pe=oe.getCharacterSetECIByName(a);pe!==void 0&&this.appendECI(pe,p)}this.appendModeInfo(c,p);const x=new J;this.appendBytes(e,c,x,a);let v;if(r!==null&&r.get(Kt.QR_VERSION)!==void 0){const pe=Number.parseInt(r.get(Kt.QR_VERSION).toString(),10);v=De.getVersionForNumber(pe);const ue=this.calculateBitsNeeded(c,p,x,v);if(!this.willFit(ue,v,n))throw new Ct("Data too big for requested version")}else v=this.recommendVersion(n,c,p,x);const I=new J;I.appendBitArray(p);const N=c===Le.BYTE?x.getSizeInBytes():e.length;this.appendLengthInfo(N,v,c,I),I.appendBitArray(x);const R=v.getECBlocksForLevel(n),L=v.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(L,I);const U=this.interleaveWithECBytes(I,v.getTotalCodewords(),L,R.getNumBlocks()),V=new ti;V.setECLevel(n),V.setMode(c),V.setVersion(v);const Y=v.getDimensionForVersion(),ee=new Hs(Y,Y),ge=this.chooseMaskPattern(U,n,v,ee);return V.setMaskPattern(ge),Be.buildMatrix(U,n,v,ge,ee),V.setMatrix(ee),V}static recommendVersion(e,n,r,a){const l=this.calculateBitsNeeded(n,r,a,De.getVersionForNumber(1)),c=this.chooseVersion(l,e),p=this.calculateBitsNeeded(n,r,a,c);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,n,r,a){return n.getSize()+e.getCharacterCountBits(a)+r.getSize()}static getAlphanumericCode(e){return e<St.ALPHANUMERIC_TABLE.length?St.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,n=null){if(oe.SJIS.getName()===n&&this.isOnlyDoubleByteKanji(e))return Le.KANJI;let r=!1,a=!1;for(let l=0,c=e.length;l<c;++l){const p=e.charAt(l);if(St.isDigit(p))r=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)a=!0;else return Le.BYTE}return a?Le.ALPHANUMERIC:r?Le.NUMERIC:Le.BYTE}static isOnlyDoubleByteKanji(e){let n;try{n=ut.encode(e,oe.SJIS)}catch{return!1}const r=n.length;if(r%2!==0)return!1;for(let a=0;a<r;a+=2){const l=n[a]&255;if((l<129||l>159)&&(l<224||l>235))return!1}return!0}static chooseMaskPattern(e,n,r,a){let l=Number.MAX_SAFE_INTEGER,c=-1;for(let p=0;p<ti.NUM_MASK_PATTERNS;p++){Be.buildMatrix(e,n,r,p,a);let x=this.calculateMaskPenalty(a);x<l&&(l=x,c=p)}return c}static chooseVersion(e,n){for(let r=1;r<=40;r++){const a=De.getVersionForNumber(r);if(St.willFit(e,a,n))return a}throw new Ct("Data too big")}static willFit(e,n,r){const a=n.getTotalCodewords(),c=n.getECBlocksForLevel(r).getTotalECCodewords(),p=a-c,x=(e+7)/8;return p>=x}static terminateBits(e,n){const r=e*8;if(n.getSize()>r)throw new Ct("data bits cannot fit in the QR Code"+n.getSize()+" > "+r);for(let c=0;c<4&&n.getSize()<r;++c)n.appendBit(!1);const a=n.getSize()&7;if(a>0)for(let c=a;c<8;c++)n.appendBit(!1);const l=e-n.getSizeInBytes();for(let c=0;c<l;++c)n.appendBits((c&1)===0?236:17,8);if(n.getSize()!==r)throw new Ct("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,n,r,a,l,c){if(a>=r)throw new Ct("Block ID too large");const p=e%r,x=r-p,v=Math.floor(e/r),I=v+1,N=Math.floor(n/r),R=N+1,L=v-N,U=I-R;if(L!==U)throw new Ct("EC bytes mismatch");if(r!==x+p)throw new Ct("RS blocks mismatch");if(e!==(N+L)*x+(R+U)*p)throw new Ct("Total bytes mismatch");a<x?(l[0]=N,c[0]=L):(l[0]=R,c[0]=U)}static interleaveWithECBytes(e,n,r,a){if(e.getSizeInBytes()!==r)throw new Ct("Number of bits and data bytes does not match");let l=0,c=0,p=0;const x=new Array;for(let I=0;I<a;++I){const N=new Int32Array(1),R=new Int32Array(1);St.getNumDataBytesAndNumECBytesForBlockID(n,r,a,I,N,R);const L=N[0],U=new Uint8Array(L);e.toBytes(8*l,U,0,L);const V=St.generateECBytes(U,R[0]);x.push(new Zl(U,V)),c=Math.max(c,L),p=Math.max(p,V.length),l+=N[0]}if(r!==l)throw new Ct("Data bytes does not match offset");const v=new J;for(let I=0;I<c;++I)for(const N of x){const R=N.getDataBytes();I<R.length&&v.appendBits(R[I],8)}for(let I=0;I<p;++I)for(const N of x){const R=N.getErrorCorrectionBytes();I<R.length&&v.appendBits(R[I],8)}if(n!==v.getSizeInBytes())throw new Ct("Interleaving error: "+n+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(e,n){const r=e.length,a=new Int32Array(r+n);for(let c=0;c<r;c++)a[c]=e[c]&255;new zo(at.QR_CODE_FIELD_256).encode(a,n);const l=new Uint8Array(n);for(let c=0;c<n;c++)l[c]=a[r+c];return l}static appendModeInfo(e,n){n.appendBits(e.getBits(),4)}static appendLengthInfo(e,n,r,a){const l=r.getCharacterCountBits(n);if(e>=1<<l)throw new Ct(e+" is bigger than "+((1<<l)-1));a.appendBits(e,l)}static appendBytes(e,n,r,a){switch(n){case Le.NUMERIC:St.appendNumericBytes(e,r);break;case Le.ALPHANUMERIC:St.appendAlphanumericBytes(e,r);break;case Le.BYTE:St.append8BitBytes(e,r,a);break;case Le.KANJI:St.appendKanjiBytes(e,r);break;default:throw new Ct("Invalid mode: "+n)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const n=St.getDigit(e);return n>=0&&n<=9}static appendNumericBytes(e,n){const r=e.length;let a=0;for(;a<r;){const l=St.getDigit(e.charAt(a));if(a+2<r){const c=St.getDigit(e.charAt(a+1)),p=St.getDigit(e.charAt(a+2));n.appendBits(l*100+c*10+p,10),a+=3}else if(a+1<r){const c=St.getDigit(e.charAt(a+1));n.appendBits(l*10+c,7),a+=2}else n.appendBits(l,4),a++}}static appendAlphanumericBytes(e,n){const r=e.length;let a=0;for(;a<r;){const l=St.getAlphanumericCode(e.charCodeAt(a));if(l===-1)throw new Ct;if(a+1<r){const c=St.getAlphanumericCode(e.charCodeAt(a+1));if(c===-1)throw new Ct;n.appendBits(l*45+c,11),a+=2}else n.appendBits(l,6),a++}}static append8BitBytes(e,n,r){let a;try{a=ut.encode(e,r)}catch(l){throw new Ct(l)}for(let l=0,c=a.length;l!==c;l++){const p=a[l];n.appendBits(p,8)}}static appendKanjiBytes(e,n){let r;try{r=ut.encode(e,oe.SJIS)}catch(l){throw new Ct(l)}const a=r.length;for(let l=0;l<a;l+=2){const c=r[l]&255,p=r[l+1]&255,x=c<<8&4294967295|p;let v=-1;if(x>=33088&&x<=40956?v=x-33088:x>=57408&&x<=60351&&(v=x-49472),v===-1)throw new Ct("Invalid byte sequence");const I=(v>>8)*192+(v&255);n.appendBits(I,13)}}static appendECI(e,n){n.appendBits(Le.ECI.getBits(),4),n.appendBits(e.getValue(),8)}}St.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),St.DEFAULT_BYTE_MODE_ENCODING=oe.UTF8.getName();class ni{write(e,n,r,a=null){if(e.length===0)throw new T("Found empty contents");if(n<0||r<0)throw new T("Requested dimensions are too small: "+n+"x"+r);let l=yt.L,c=ni.QUIET_ZONE_SIZE;a!==null&&(a.get(Kt.ERROR_CORRECTION)!==void 0&&(l=yt.fromString(a.get(Kt.ERROR_CORRECTION).toString())),a.get(Kt.MARGIN)!==void 0&&(c=Number.parseInt(a.get(Kt.MARGIN).toString(),10)));const p=St.encode(e,l,a);return this.renderResult(p,n,r,c)}writeToDom(e,n,r,a,l=null){typeof e=="string"&&(e=document.querySelector(e));const c=this.write(n,r,a,l);e&&e.appendChild(c)}renderResult(e,n,r,a){const l=e.getMatrix();if(l===null)throw new Zn;const c=l.getWidth(),p=l.getHeight(),x=c+a*2,v=p+a*2,I=Math.max(n,x),N=Math.max(r,v),R=Math.min(Math.floor(I/x),Math.floor(N/v)),L=Math.floor((I-c*R)/2),U=Math.floor((N-p*R)/2),V=this.createSVGElement(I,N);for(let Y=0,ee=U;Y<p;Y++,ee+=R)for(let ge=0,pe=L;ge<c;ge++,pe+=R)if(l.get(ge,Y)===1){const ue=this.createSvgRectElement(pe,ee,R,R);V.appendChild(ue)}return V}createSVGElement(e,n){const r=document.createElementNS(ni.SVG_NS,"svg");return r.setAttributeNS(null,"height",e.toString()),r.setAttributeNS(null,"width",n.toString()),r}createSvgRectElement(e,n,r,a){const l=document.createElementNS(ni.SVG_NS,"rect");return l.setAttributeNS(null,"x",e.toString()),l.setAttributeNS(null,"y",n.toString()),l.setAttributeNS(null,"height",r.toString()),l.setAttributeNS(null,"width",a.toString()),l.setAttributeNS(null,"fill","#000000"),l}}ni.QUIET_ZONE_SIZE=4,ni.SVG_NS="http://www.w3.org/2000/svg";class _i{encode(e,n,r,a,l){if(e.length===0)throw new T("Found empty contents");if(n!==xe.QR_CODE)throw new T("Can only encode QR_CODE, but got "+n);if(r<0||a<0)throw new T(`Requested dimensions are too small: ${r}x${a}`);let c=yt.L,p=_i.QUIET_ZONE_SIZE;l!==null&&(l.get(Kt.ERROR_CORRECTION)!==void 0&&(c=yt.fromString(l.get(Kt.ERROR_CORRECTION).toString())),l.get(Kt.MARGIN)!==void 0&&(p=Number.parseInt(l.get(Kt.MARGIN).toString(),10)));const x=St.encode(e,c,l);return _i.renderResult(x,r,a,p)}static renderResult(e,n,r,a){const l=e.getMatrix();if(l===null)throw new Zn;const c=l.getWidth(),p=l.getHeight(),x=c+a*2,v=p+a*2,I=Math.max(n,x),N=Math.max(r,v),R=Math.min(Math.floor(I/x),Math.floor(N/v)),L=Math.floor((I-c*R)/2),U=Math.floor((N-p*R)/2),V=new Ze(I,N);for(let Y=0,ee=U;Y<p;Y++,ee+=R)for(let ge=0,pe=L;ge<c;ge++,pe+=R)l.get(ge,Y)===1&&V.setRegion(pe,ee,R,R);return V}}_i.QUIET_ZONE_SIZE=4;class Jl{encode(e,n,r,a,l){let c;switch(n){case xe.QR_CODE:c=new _i;break;default:throw new T("No encoder available for format "+n)}return c.encode(e,n,r,a,l)}}class yr extends ye{constructor(e,n,r,a,l,c,p,x){if(super(c,p),this.yuvData=e,this.dataWidth=n,this.dataHeight=r,this.left=a,this.top=l,a+c>n||l+p>r)throw new T("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(c,p)}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const a=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.yuvData,a,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.yuvData;const r=e*n,a=new Uint8ClampedArray(r);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.yuvData,l,a,0,r),a;for(let c=0;c<n;c++){const p=c*e;j.arraycopy(this.yuvData,l,a,p,e),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,n,r,a){return new yr(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+n,r,a,!1)}renderThumbnail(){const e=this.getWidth()/yr.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/yr.THUMBNAIL_SCALE_FACTOR,r=new Int32Array(e*n),a=this.yuvData;let l=this.top*this.dataWidth+this.left;for(let c=0;c<n;c++){const p=c*e;for(let x=0;x<e;x++){const v=a[l+x*yr.THUMBNAIL_SCALE_FACTOR]&255;r[p+x]=4278190080|v*65793}l+=this.dataWidth*yr.THUMBNAIL_SCALE_FACTOR}return r}getThumbnailWidth(){return this.getWidth()/yr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/yr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,n){const r=this.yuvData;for(let a=0,l=this.top*this.dataWidth+this.left;a<n;a++,l+=this.dataWidth){const c=l+e/2;for(let p=l,x=l+e-1;p<c;p++,x--){const v=r[p];r[p]=r[x],r[x]=v}}}invert(){return new Re(this)}}yr.THUMBNAIL_SCALE_FACTOR=2;class os extends ye{constructor(e,n,r,a,l,c,p){if(super(n,r),this.dataWidth=a,this.dataHeight=l,this.left=c,this.top=p,e.BYTES_PER_ELEMENT===4){const x=n*r,v=new Uint8ClampedArray(x);for(let I=0;I<x;I++){const N=e[I],R=N>>16&255,L=N>>7&510,U=N&255;v[I]=(R+L+U)/4&255}this.luminances=v}else this.luminances=e;if(a===void 0&&(this.dataWidth=n),l===void 0&&(this.dataHeight=r),c===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+n>this.dataWidth||this.top+r>this.dataHeight)throw new T("Crop rectangle does not fit within image data.")}getRow(e,n){if(e<0||e>=this.getHeight())throw new T("Requested row is outside the image: "+e);const r=this.getWidth();(n==null||n.length<r)&&(n=new Uint8ClampedArray(r));const a=(e+this.top)*this.dataWidth+this.left;return j.arraycopy(this.luminances,a,n,0,r),n}getMatrix(){const e=this.getWidth(),n=this.getHeight();if(e===this.dataWidth&&n===this.dataHeight)return this.luminances;const r=e*n,a=new Uint8ClampedArray(r);let l=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return j.arraycopy(this.luminances,l,a,0,r),a;for(let c=0;c<n;c++){const p=c*e;j.arraycopy(this.luminances,l,a,p,e),l+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,n,r,a){return new os(this.luminances,r,a,this.dataWidth,this.dataHeight,this.left+e,this.top+n)}invert(){return new Re(this)}}class Fa extends oe{static forName(e){return this.getCharacterSetECIByName(e)}}class Ho{}Ho.ISO_8859_1=oe.ISO8859_1;class Ua{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Vo{static singletonList(e){return[e]}static min(e,n){return e.sort(n)[0]}}class ec{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ii extends ec{constructor(e,n,r){super(e),this.value=n,this.bitCount=r}appendTo(e,n){e.appendBits(this.value,this.bitCount)}add(e,n){return new Ii(this,e,n)}addBinaryShift(e,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ii(this,e,n)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+W.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Wo extends Ii{constructor(e,n,r){super(e,0,0),this.binaryShiftStart=n,this.binaryShiftByteCount=r}appendTo(e,n){for(let r=0;r<this.binaryShiftByteCount;r++)(r===0||r===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):r===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(n[this.binaryShiftStart+r],8)}addBinaryShift(e,n){return new Wo(this,e,n)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function tc(b,e,n){return new Wo(b,e,n)}function as(b,e,n){return new Ii(b,e,n)}const nc=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Wr=0,Ti=1,yn=2,za=3,sr=4,Ha=new Ii(null,0,0),Vs=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Va(b){for(let e of b)$.fill(e,-1);return b[Wr][sr]=0,b[Ti][sr]=0,b[Ti][Wr]=28,b[za][sr]=0,b[yn][sr]=0,b[yn][Wr]=15,b}const Go=Va($.createInt32Array(6,6));class In{constructor(e,n,r,a){this.token=e,this.mode=n,this.binaryShiftByteCount=r,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,n){let r=this.bitCount,a=this.token;if(e!==this.mode){let c=Vs[this.mode][e];a=as(a,c&65535,c>>16),r+=c>>16}let l=e===yn?4:5;return a=as(a,n,l),new In(a,e,0,r+l)}shiftAndAppend(e,n){let r=this.token,a=this.mode===yn?4:5;return r=as(r,Go[this.mode][e],a),r=as(r,n,5),new In(r,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(e){let n=this.token,r=this.mode,a=this.bitCount;if(this.mode===sr||this.mode===yn){let p=Vs[r][Wr];n=as(n,p&65535,p>>16),a+=p>>16,r=Wr}let l=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new In(n,r,this.binaryShiftByteCount+1,a+l);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(e+1)),c}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let n=this.token;return n=tc(n,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new In(n,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let n=this.bitCount+(Vs[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?n+=In.calculateBinaryShiftCost(e)-In.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(n+=10),n<=e.bitCount}toBitArray(e){let n=[];for(let a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())n.unshift(a);let r=new J;for(const a of n)a.appendTo(r,e);return r}toString(){return ke.format("%s bits=%d bytes=%d",nc[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}In.INITIAL_STATE=new In(Ha,Wr,0,0);function rc(b){const e=ke.getCharCode(" "),n=ke.getCharCode("."),r=ke.getCharCode(",");b[Wr][e]=1;const a=ke.getCharCode("Z"),l=ke.getCharCode("A");for(let R=l;R<=a;R++)b[Wr][R]=R-l+2;b[Ti][e]=1;const c=ke.getCharCode("z"),p=ke.getCharCode("a");for(let R=p;R<=c;R++)b[Ti][R]=R-p+2;b[yn][e]=1;const x=ke.getCharCode("9"),v=ke.getCharCode("0");for(let R=v;R<=x;R++)b[yn][R]=R-v+2;b[yn][r]=12,b[yn][n]=13;const I=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<I.length;R++)b[za][ke.getCharCode(I[R])]=R;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<N.length;R++)ke.getCharCode(N[R])>0&&(b[sr][ke.getCharCode(N[R])]=R);return b}const Yo=rc($.createInt32Array(5,256));class ls{constructor(e){this.text=e}encode(){const e=ke.getCharCode(" "),n=ke.getCharCode(`
`);let r=Vo.singletonList(In.INITIAL_STATE);for(let l=0;l<this.text.length;l++){let c,p=l+1<this.text.length?this.text[l+1]:0;switch(this.text[l]){case ke.getCharCode("\r"):c=p===n?2:0;break;case ke.getCharCode("."):c=p===e?3:0;break;case ke.getCharCode(","):c=p===e?4:0;break;case ke.getCharCode(":"):c=p===e?5:0;break;default:c=0}c>0?(r=ls.updateStateListForPair(r,l,c),l++):r=this.updateStateListForChar(r,l)}return Vo.min(r,(l,c)=>l.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,n){const r=[];for(let a of e)this.updateStateForChar(a,n,r);return ls.simplifyStates(r)}updateStateForChar(e,n,r){let a=this.text[n]&255,l=Yo[e.getMode()][a]>0,c=null;for(let p=0;p<=sr;p++){let x=Yo[p][a];if(x>0){if(c==null&&(c=e.endBinaryShift(n)),!l||p===e.getMode()||p===yn){const v=c.latchAndAppend(p,x);r.push(v)}if(!l&&Go[e.getMode()][p]>=0){const v=c.shiftAndAppend(p,x);r.push(v)}}}if(e.getBinaryShiftByteCount()>0||Yo[e.getMode()][a]===0){let p=e.addBinaryShiftChar(n);r.push(p)}}static updateStateListForPair(e,n,r){const a=[];for(let l of e)this.updateStateForPair(l,n,r,a);return this.simplifyStates(a)}static updateStateForPair(e,n,r,a){let l=e.endBinaryShift(n);if(a.push(l.latchAndAppend(sr,r)),e.getMode()!==sr&&a.push(l.shiftAndAppend(sr,r)),r===3||r===4){let c=l.latchAndAppend(yn,16-r).latchAndAppend(yn,1);a.push(c)}if(e.getBinaryShiftByteCount()>0){let c=e.addBinaryShiftChar(n).addBinaryShiftChar(n+1);a.push(c)}}static simplifyStates(e){let n=[];for(const r of e){let a=!0;for(const l of n){if(l.isBetterThanOrEqualTo(r)){a=!1;break}r.isBetterThanOrEqualTo(l)&&(n=n.filter(c=>c!==l))}a&&n.push(r)}return n}}class lt{constructor(){}static encodeBytes(e){return lt.encode(e,lt.DEFAULT_EC_PERCENT,lt.DEFAULT_AZTEC_LAYERS)}static encode(e,n,r){let a=new ls(e).encode(),l=W.truncDivision(a.getSize()*n,100)+11,c=a.getSize()+l,p,x,v,I,N;if(r!==lt.DEFAULT_AZTEC_LAYERS){if(p=r<0,x=Math.abs(r),x>(p?lt.MAX_NB_BITS_COMPACT:lt.MAX_NB_BITS))throw new T(ke.format("Illegal value %s for layers",r));v=lt.totalBitsInLayer(x,p),I=lt.WORD_SIZE[x];let ue=v-v%I;if(N=lt.stuffBits(a,I),N.getSize()+l>ue)throw new T("Data to large for user specified layer");if(p&&N.getSize()>I*64)throw new T("Data to large for user specified layer")}else{I=0,N=null;for(let ue=0;;ue++){if(ue>lt.MAX_NB_BITS)throw new T("Data too large for an Aztec code");if(p=ue<=3,x=p?ue+1:ue,v=lt.totalBitsInLayer(x,p),c>v)continue;(N==null||I!==lt.WORD_SIZE[x])&&(I=lt.WORD_SIZE[x],N=lt.stuffBits(a,I));let Ke=v-v%I;if(!(p&&N.getSize()>I*64)&&N.getSize()+l<=Ke)break}}let R=lt.generateCheckWords(N,v,I),L=N.getSize()/I,U=lt.generateModeMessage(p,x,L),V=(p?11:14)+x*4,Y=new Int32Array(V),ee;if(p){ee=V;for(let ue=0;ue<Y.length;ue++)Y[ue]=ue}else{ee=V+1+2*W.truncDivision(W.truncDivision(V,2)-1,15);let ue=W.truncDivision(V,2),Ke=W.truncDivision(ee,2);for(let Ge=0;Ge<ue;Ge++){let kn=Ge+W.truncDivision(Ge,15);Y[ue-Ge-1]=Ke-kn-1,Y[ue+Ge]=Ke+kn+1}}let ge=new Ze(ee);for(let ue=0,Ke=0;ue<x;ue++){let Ge=(x-ue)*4+(p?9:12);for(let kn=0;kn<Ge;kn++){let or=kn*2;for(let Zt=0;Zt<2;Zt++)R.get(Ke+or+Zt)&&ge.set(Y[ue*2+Zt],Y[ue*2+kn]),R.get(Ke+Ge*2+or+Zt)&&ge.set(Y[ue*2+kn],Y[V-1-ue*2-Zt]),R.get(Ke+Ge*4+or+Zt)&&ge.set(Y[V-1-ue*2-Zt],Y[V-1-ue*2-kn]),R.get(Ke+Ge*6+or+Zt)&&ge.set(Y[V-1-ue*2-kn],Y[ue*2+Zt])}Ke+=Ge*8}if(lt.drawModeMessage(ge,p,ee,U),p)lt.drawBullsEye(ge,W.truncDivision(ee,2),5);else{lt.drawBullsEye(ge,W.truncDivision(ee,2),7);for(let ue=0,Ke=0;ue<W.truncDivision(V,2)-1;ue+=15,Ke+=16)for(let Ge=W.truncDivision(ee,2)&1;Ge<ee;Ge+=2)ge.set(W.truncDivision(ee,2)-Ke,Ge),ge.set(W.truncDivision(ee,2)+Ke,Ge),ge.set(Ge,W.truncDivision(ee,2)-Ke),ge.set(Ge,W.truncDivision(ee,2)+Ke)}let pe=new Ua;return pe.setCompact(p),pe.setSize(ee),pe.setLayers(x),pe.setCodeWords(L),pe.setMatrix(ge),pe}static drawBullsEye(e,n,r){for(let a=0;a<r;a+=2)for(let l=n-a;l<=n+a;l++)e.set(l,n-a),e.set(l,n+a),e.set(n-a,l),e.set(n+a,l);e.set(n-r,n-r),e.set(n-r+1,n-r),e.set(n-r,n-r+1),e.set(n+r,n-r),e.set(n+r,n-r+1),e.set(n+r,n+r-1)}static generateModeMessage(e,n,r){let a=new J;return e?(a.appendBits(n-1,2),a.appendBits(r-1,6),a=lt.generateCheckWords(a,28,4)):(a.appendBits(n-1,5),a.appendBits(r-1,11),a=lt.generateCheckWords(a,40,4)),a}static drawModeMessage(e,n,r,a){let l=W.truncDivision(r,2);if(n)for(let c=0;c<7;c++){let p=l-3+c;a.get(c)&&e.set(p,l-5),a.get(c+7)&&e.set(l+5,p),a.get(20-c)&&e.set(p,l+5),a.get(27-c)&&e.set(l-5,p)}else for(let c=0;c<10;c++){let p=l-5+c+W.truncDivision(c,5);a.get(c)&&e.set(p,l-7),a.get(c+10)&&e.set(l+7,p),a.get(29-c)&&e.set(p,l+7),a.get(39-c)&&e.set(l-7,p)}}static generateCheckWords(e,n,r){let a=e.getSize()/r,l=new zo(lt.getGF(r)),c=W.truncDivision(n,r),p=lt.bitsToWords(e,r,c);l.encode(p,c-a);let x=n%r,v=new J;v.appendBits(0,x);for(const I of Array.from(p))v.appendBits(I,r);return v}static bitsToWords(e,n,r){let a=new Int32Array(r),l,c;for(l=0,c=e.getSize()/n;l<c;l++){let p=0;for(let x=0;x<n;x++)p|=e.get(l*n+x)?1<<n-x-1:0;a[l]=p}return a}static getGF(e){switch(e){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new T("Unsupported word size "+e)}}static stuffBits(e,n){let r=new J,a=e.getSize(),l=(1<<n)-2;for(let c=0;c<a;c+=n){let p=0;for(let x=0;x<n;x++)(c+x>=a||e.get(c+x))&&(p|=1<<n-1-x);(p&l)===l?(r.appendBits(p&l,n),c--):(p&l)===0?(r.appendBits(p|1,n),c--):r.appendBits(p,n)}return r}static totalBitsInLayer(e,n){return((n?88:112)+16*e)*e}}lt.DEFAULT_EC_PERCENT=33,lt.DEFAULT_AZTEC_LAYERS=0,lt.MAX_NB_BITS=32,lt.MAX_NB_BITS_COMPACT=4,lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class cs{encode(e,n,r,a){return this.encodeWithHints(e,n,r,a,null)}encodeWithHints(e,n,r,a,l){let c=Ho.ISO_8859_1,p=lt.DEFAULT_EC_PERCENT,x=lt.DEFAULT_AZTEC_LAYERS;return l!=null&&(l.has(Kt.CHARACTER_SET)&&(c=Fa.forName(l.get(Kt.CHARACTER_SET).toString())),l.has(Kt.ERROR_CORRECTION)&&(p=W.parseInt(l.get(Kt.ERROR_CORRECTION).toString())),l.has(Kt.AZTEC_LAYERS)&&(x=W.parseInt(l.get(Kt.AZTEC_LAYERS).toString()))),cs.encodeLayers(e,n,r,a,c,p,x)}static encodeLayers(e,n,r,a,l,c,p){if(n!==xe.AZTEC)throw new T("Can only encode AZTEC, but got "+n);let x=lt.encode(ke.getBytes(e,l),c,p);return cs.renderResult(x,r,a)}static renderResult(e,n,r){let a=e.getMatrix();if(a==null)throw new Zn;let l=a.getWidth(),c=a.getHeight(),p=Math.max(n,l),x=Math.max(r,c),v=Math.min(p/l,x/c),I=(p-l*v)/2,N=(x-c*v)/2,R=new Ze(p,x);for(let L=0,U=N;L<c;L++,U+=v)for(let V=0,Y=I;V<l;V++,Y+=v)a.get(V,L)&&R.setRegion(Y,U,v,v);return R}}o.AbstractExpandedDecoder=Ro,o.ArgumentException=A,o.ArithmeticException=qi,o.AztecCode=Ua,o.AztecCodeReader=Ur,o.AztecCodeWriter=cs,o.AztecDecoder=Et,o.AztecDetector=xi,o.AztecDetectorResult=Io,o.AztecEncoder=lt,o.AztecHighLevelEncoder=ls,o.AztecPoint=xn,o.BarcodeFormat=xe,o.Binarizer=z,o.BinaryBitmap=k,o.BitArray=J,o.BitMatrix=Ze,o.BitSource=Do,o.BrowserAztecCodeReader=ql,o.BrowserBarcodeReader=Ma,o.BrowserCodeReader=ze,o.BrowserDatamatrixCodeReader=Kl,o.BrowserMultiFormatReader=ss,o.BrowserPDF417Reader=zs,o.BrowserQRCodeReader=ja,o.BrowserQRCodeSvgWriter=ni,o.CharacterSetECI=oe,o.ChecksumException=B,o.Code128Reader=we,o.Code39Reader=Qt,o.DataMatrixDecodedBitStreamParser=nr,o.DataMatrixReader=rr,o.DecodeHintType=he,o.DecoderResult=xt,o.DefaultGridSampler=ks,o.DetectorResult=mi,o.EAN13Reader=Hn,o.EncodeHintType=Kt,o.Exception=w,o.FormatException=K,o.GenericGF=at,o.GenericGFPoly=ln,o.GlobalHistogramBinarizer=st,o.GridSampler=Ms,o.GridSamplerInstance=Jn,o.HTMLCanvasElementLuminanceSource=ve,o.HybridBinarizer=_e,o.ITFReader=gt,o.IllegalArgumentException=T,o.IllegalStateException=Zn,o.InvertedLuminanceSource=Re,o.LuminanceSource=ye,o.MathUtils=nt,o.MultiFormatOneDReader=yi,o.MultiFormatReader=Us,o.MultiFormatWriter=Jl,o.NotFoundException=re,o.OneDReader=jt,o.PDF417DecodedBitStreamParser=te,o.PDF417DecoderErrorCorrection=Bo,o.PDF417Reader=fn,o.PDF417ResultMetadata=js,o.PerspectiveTransform=zn,o.PlanarYUVLuminanceSource=yr,o.QRCodeByteMatrix=Hs,o.QRCodeDataMask=qe,o.QRCodeDecodedBitStreamParser=Nt,o.QRCodeDecoderErrorCorrectionLevel=yt,o.QRCodeDecoderFormatInformation=un,o.QRCodeEncoder=St,o.QRCodeEncoderQRCode=ti,o.QRCodeMaskUtil=Ot,o.QRCodeMatrixUtil=Be,o.QRCodeMode=Le,o.QRCodeReader=_n,o.QRCodeVersion=De,o.QRCodeWriter=_i,o.RGBLuminanceSource=os,o.RSS14Reader=_t,o.RSSExpandedReader=ae,o.ReaderException=Si,o.ReedSolomonDecoder=pi,o.ReedSolomonEncoder=zo,o.ReedSolomonException=jr,o.Result=Pe,o.ResultMetadataType=He,o.ResultPoint=Ie,o.StringUtils=ke,o.UnsupportedOperationException=vt,o.VideoInputDevice=X,o.WhiteRectangleDetector=gr,o.WriterException=Ct,o.ZXingArrays=$,o.ZXingCharset=Fa,o.ZXingInteger=W,o.ZXingStandardCharsets=Ho,o.ZXingStringBuilder=Ye,o.ZXingStringEncoding=ut,o.ZXingSystem=j,o.createAbstractExpandedDecoder=Oa,Object.defineProperty(o,"__esModule",{value:!0})}))})(xa,xa.exports)),xa.exports}var Lt=C2();const A2=Yl(Lt),S2=o0({__proto__:null,default:A2},[Lt]);var Wf=(function(){function d(s,o,h){if(this.formatMap=new Map([[Te.QR_CODE,Lt.BarcodeFormat.QR_CODE],[Te.AZTEC,Lt.BarcodeFormat.AZTEC],[Te.CODABAR,Lt.BarcodeFormat.CODABAR],[Te.CODE_39,Lt.BarcodeFormat.CODE_39],[Te.CODE_93,Lt.BarcodeFormat.CODE_93],[Te.CODE_128,Lt.BarcodeFormat.CODE_128],[Te.DATA_MATRIX,Lt.BarcodeFormat.DATA_MATRIX],[Te.MAXICODE,Lt.BarcodeFormat.MAXICODE],[Te.ITF,Lt.BarcodeFormat.ITF],[Te.EAN_13,Lt.BarcodeFormat.EAN_13],[Te.EAN_8,Lt.BarcodeFormat.EAN_8],[Te.PDF_417,Lt.BarcodeFormat.PDF_417],[Te.RSS_14,Lt.BarcodeFormat.RSS_14],[Te.RSS_EXPANDED,Lt.BarcodeFormat.RSS_EXPANDED],[Te.UPC_A,Lt.BarcodeFormat.UPC_A],[Te.UPC_E,Lt.BarcodeFormat.UPC_E],[Te.UPC_EAN_EXTENSION,Lt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!S2)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=o,this.logger=h;var g=this.createZXingFormats(s),f=new Map;f.set(Lt.DecodeHintType.POSSIBLE_FORMATS,g),f.set(Lt.DecodeHintType.TRY_HARDER,!1),this.hints=f}return d.prototype.decodeAsync=function(s){var o=this;return new Promise(function(h,g){try{h(o.decode(s))}catch(f){g(f)}})},d.prototype.decode=function(s){var o=new Lt.MultiFormatReader(this.verbose,this.hints),h=new Lt.HTMLCanvasElementLuminanceSource(s),g=new Lt.BinaryBitmap(new Lt.HybridBinarizer(h)),f=o.decode(g);return{text:f.text,format:V0.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},d.prototype.createReverseFormatMap=function(){var s=new Map;return this.formatMap.forEach(function(o,h,g){s.set(o,h)}),s},d.prototype.toHtml5QrcodeSupportedFormats=function(s){if(!this.reverseFormatMap.has(s))throw"reverseFormatMap doesn't have ".concat(s);return this.reverseFormatMap.get(s)},d.prototype.createZXingFormats=function(s){for(var o=[],h=0,g=s;h<g.length;h++){var f=g[h];this.formatMap.has(f)?o.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return o},d.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},d})(),_2=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},I2=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Gf=(function(){function d(s,o,h){if(this.formatMap=new Map([[Te.QR_CODE,"qr_code"],[Te.AZTEC,"aztec"],[Te.CODABAR,"codabar"],[Te.CODE_39,"code_39"],[Te.CODE_93,"code_93"],[Te.CODE_128,"code_128"],[Te.DATA_MATRIX,"data_matrix"],[Te.ITF,"itf"],[Te.EAN_13,"ean_13"],[Te.EAN_8,"ean_8"],[Te.PDF_417,"pdf417"],[Te.UPC_A,"upc_a"],[Te.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!d.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=o,this.logger=h;var g=this.createBarcodeDetectorFormats(s);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return d.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var s=new BarcodeDetector({formats:["qr_code"]});return typeof s<"u"},d.prototype.decodeAsync=function(s){return _2(this,void 0,void 0,function(){var o,h;return I2(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(s)];case 1:if(o=g.sent(),!o||o.length===0)throw"No barcode or QR code detected.";return h=this.selectLargestBarcode(o),[2,{text:h.rawValue,format:V0.create(this.toHtml5QrcodeSupportedFormats(h.format)),debugData:this.createDebugData()}]}})})},d.prototype.selectLargestBarcode=function(s){for(var o=null,h=0,g=0,f=s;g<f.length;g++){var y=f[g],_=y.boundingBox.width*y.boundingBox.height;_>h&&(h=_,o=y)}if(!o)throw"No largest barcode found";return o},d.prototype.createBarcodeDetectorFormats=function(s){for(var o=[],h=0,g=s;h<g.length;h++){var f=g[h];this.formatMap.has(f)?o.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:o}},d.prototype.toHtml5QrcodeSupportedFormats=function(s){if(!this.reverseFormatMap.has(s))throw"reverseFormatMap doesn't have ".concat(s);return this.reverseFormatMap.get(s)},d.prototype.createReverseFormatMap=function(){var s=new Map;return this.formatMap.forEach(function(o,h,g){s.set(o,h)}),s},d.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},d})(),Yf=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},Xf=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},T2=(function(){function d(s,o,h,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=h,o&&Gf.isSupported()?(this.primaryDecoder=new Gf(s,h,g),this.secondaryDecoder=new Wf(s,h,g)):this.primaryDecoder=new Wf(s,h,g)}return d.prototype.decodeAsync=function(s){return Yf(this,void 0,void 0,function(){var o;return Xf(this,function(h){switch(h.label){case 0:o=performance.now(),h.label=1;case 1:return h.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(s)];case 2:return[2,h.sent()];case 3:return this.possiblyLogPerformance(o),[7];case 4:return[2]}})})},d.prototype.decodeRobustlyAsync=function(s){return Yf(this,void 0,void 0,function(){var o,h;return Xf(this,function(g){switch(g.label){case 0:o=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(s)];case 2:return[2,g.sent()];case 3:if(h=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(s)];throw h;case 4:return this.possiblyLogPerformance(o),[7];case 5:return[2]}})})},d.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},d.prototype.possiblyLogPerformance=function(s){if(this.verbose){var o=performance.now()-s;this.executionResults.push(o),this.executions++,this.possiblyFlushPerformanceReport()}},d.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var s=0,o=0,h=this.executionResults;o<h.length;o++){var g=h[o];s+=g}var f=s/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},d})(),nd=(function(){var d=function(s,o){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(h[f]=g[f])},d(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");d(s,o);function h(){this.constructor=s}s.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}})(),Vl=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},Wl=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},X0=(function(){function d(s,o){this.name=s,this.track=o}return d.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},d.prototype.apply=function(s){var o={};o[this.name]=s;var h={advanced:[o]};return this.track.applyConstraints(h)},d.prototype.value=function(){var s=this.track.getSettings();if(this.name in s){var o=s[this.name];return o}return null},d})(),b2=(function(d){nd(s,d);function s(o,h){return d.call(this,o,h)||this}return s.prototype.min=function(){return this.getCapabilities().min},s.prototype.max=function(){return this.getCapabilities().max},s.prototype.step=function(){return this.getCapabilities().step},s.prototype.apply=function(o){var h={};h[this.name]=o;var g={advanced:[h]};return this.track.applyConstraints(g)},s.prototype.getCapabilities=function(){this.failIfNotSupported();var o=this.track.getCapabilities(),h=o[this.name];return{min:h.min,max:h.max,step:h.step}},s.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},s})(X0),N2=(function(d){nd(s,d);function s(o){return d.call(this,"zoom",o)||this}return s})(b2),O2=(function(d){nd(s,d);function s(o){return d.call(this,"torch",o)||this}return s})(X0),R2=(function(){function d(s){this.track=s}return d.prototype.zoomFeature=function(){return new N2(this.track)},d.prototype.torchFeature=function(){return new O2(this.track)},d})(),M2=(function(){function d(s,o,h){this.isClosed=!1,this.parentElement=s,this.mediaStream=o,this.callbacks=h,this.surface=this.createVideoElement(this.parentElement.clientWidth),s.append(this.surface)}return d.prototype.createVideoElement=function(s){var o=document.createElement("video");return o.style.width="".concat(s,"px"),o.style.display="block",o.muted=!0,o.setAttribute("muted","true"),o.playsInline=!0,o},d.prototype.setupSurface=function(){var s=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var o=function(){var h=s.surface.clientWidth,g=s.surface.clientHeight;s.callbacks.onRenderSurfaceReady(h,g),s.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.srcObject=this.mediaStream,this.surface.play()},d.create=function(s,o,h,g){return Vl(this,void 0,void 0,function(){var f,y;return Wl(this,function(_){switch(_.label){case 0:return f=new d(s,o,g),h.aspectRatio?(y={aspectRatio:h.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(y)]):[3,2];case 1:_.sent(),_.label=2;case 2:return f.setupSurface(),[2,f]}})})},d.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},d.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},d.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},d.prototype.resume=function(s){this.failIfClosed();var o=this,h=function(){setTimeout(s,200),o.surface.removeEventListener("playing",h)};this.surface.addEventListener("playing",h),this.surface.play()},d.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},d.prototype.getSurface=function(){return this.failIfClosed(),this.surface},d.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},d.prototype.applyVideoConstraints=function(s){return Vl(this,void 0,void 0,function(){return Wl(this,function(o){if("aspectRatio"in s)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(s)]})})},d.prototype.close=function(){if(this.isClosed)return Promise.resolve();var s=this;return new Promise(function(o,h){var g=s.mediaStream.getVideoTracks(),f=g.length,y=0;s.mediaStream.getVideoTracks().forEach(function(_){s.mediaStream.removeTrack(_),_.stop(),++y,y>=f&&(s.isClosed=!0,s.parentElement.removeChild(s.surface),o())})})},d.prototype.getCapabilities=function(){return new R2(this.getFirstTrackOrFail())},d})(),k2=(function(){function d(s){this.mediaStream=s}return d.prototype.render=function(s,o,h){return Vl(this,void 0,void 0,function(){return Wl(this,function(g){return[2,M2.create(s,this.mediaStream,o,h)]})})},d.create=function(s){return Vl(this,void 0,void 0,function(){var o,h;return Wl(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return o={audio:!1,video:s},[4,navigator.mediaDevices.getUserMedia(o)];case 1:return h=g.sent(),[2,new d(h)]}})})},d})(),$f=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},Qf=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},D2=(function(){function d(){}return d.failIfNotSupported=function(){return $f(this,void 0,void 0,function(){return Qf(this,function(s){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new d]})})},d.prototype.create=function(s){return $f(this,void 0,void 0,function(){return Qf(this,function(o){return[2,k2.create(s)]})})},d})(),L2=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},P2=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},B2=(function(){function d(){}return d.retrieve=function(){if(navigator.mediaDevices)return d.getCamerasFromMediaDevices();var s=MediaStreamTrack;return MediaStreamTrack&&s.getSources?d.getCamerasFromMediaStreamTrack():d.rejectWithError()},d.rejectWithError=function(){var s=Eo.unableToQuerySupportedDevices();return d.isHttpsOrLocalhost()||(s=Eo.insecureContextCameraQueryError()),Promise.reject(s)},d.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var s=location.host.split(":")[0];return s==="127.0.0.1"||s==="localhost"},d.getCamerasFromMediaDevices=function(){return L2(this,void 0,void 0,function(){var s,o,h,g,f,y,_;return P2(this,function(C){switch(C.label){case 0:return s=function(w){for(var A=w.getVideoTracks(),T=0,k=A;T<k.length;T++){var B=k[T];B.enabled=!1,B.stop(),w.removeTrack(B)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return o=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(h=C.sent(),g=[],f=0,y=h;f<y.length;f++)_=y[f],_.kind==="videoinput"&&g.push({id:_.deviceId,label:_.label});return s(o),[2,g]}})})},d.getCamerasFromMediaStreamTrack=function(){return new Promise(function(s,o){var h=function(f){for(var y=[],_=0,C=f;_<C.length;_++){var w=C[_];w.kind==="video"&&y.push({id:w.id,label:w.label})}s(y)},g=MediaStreamTrack;g.getSources(h)})},d})(),Yt;(function(d){d[d.UNKNOWN=0]="UNKNOWN",d[d.NOT_STARTED=1]="NOT_STARTED",d[d.SCANNING=2]="SCANNING",d[d.PAUSED=3]="PAUSED"})(Yt||(Yt={}));var j2=(function(){function d(){this.state=Yt.NOT_STARTED,this.onGoingTransactionNewState=Yt.UNKNOWN}return d.prototype.directTransition=function(s){this.failIfTransitionOngoing(),this.validateTransition(s),this.state=s},d.prototype.startTransition=function(s){return this.failIfTransitionOngoing(),this.validateTransition(s),this.onGoingTransactionNewState=s,this},d.prototype.execute=function(){if(this.onGoingTransactionNewState===Yt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var s=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Yt.UNKNOWN,this.directTransition(s)},d.prototype.cancel=function(){if(this.onGoingTransactionNewState===Yt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Yt.UNKNOWN},d.prototype.getState=function(){return this.state},d.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Yt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},d.prototype.validateTransition=function(s){switch(this.state){case Yt.UNKNOWN:throw"Transition from unknown is not allowed";case Yt.NOT_STARTED:this.failIfNewStateIs(s,[Yt.PAUSED]);break;case Yt.SCANNING:break;case Yt.PAUSED:break}},d.prototype.failIfNewStateIs=function(s,o){for(var h=0,g=o;h<g.length;h++){var f=g[h];if(s===f)throw"Cannot transition from ".concat(this.state," to ").concat(s)}},d})(),F2=(function(){function d(s){this.stateManager=s}return d.prototype.startTransition=function(s){return this.stateManager.startTransition(s)},d.prototype.directTransition=function(s){this.stateManager.directTransition(s)},d.prototype.getState=function(){return this.stateManager.getState()},d.prototype.canScanFile=function(){return this.stateManager.getState()===Yt.NOT_STARTED},d.prototype.isScanning=function(){return this.stateManager.getState()!==Yt.NOT_STARTED},d.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Yt.SCANNING},d.prototype.isPaused=function(){return this.stateManager.getState()===Yt.PAUSED},d})(),U2=(function(){function d(){}return d.create=function(){return new F2(new j2)},d})(),z2=(function(){var d=function(s,o){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,g){h.__proto__=g}||function(h,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(h[f]=g[f])},d(s,o)};return function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");d(s,o);function h(){this.constructor=s}s.prototype=o===null?Object.create(o):(h.prototype=o.prototype,new h)}})(),ur=(function(d){z2(s,d);function s(){return d!==null&&d.apply(this,arguments)||this}return s.DEFAULT_WIDTH=300,s.DEFAULT_WIDTH_OFFSET=2,s.FILE_SCAN_MIN_HEIGHT=300,s.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,s.MIN_QR_BOX_SIZE=50,s.SHADED_LEFT=1,s.SHADED_RIGHT=2,s.SHADED_TOP=3,s.SHADED_BOTTOM=4,s.SHADED_REGION_ELEMENT_ID="qr-shaded-region",s.VERBOSE=!1,s.BORDER_SHADER_DEFAULT_COLOR="#ffffff",s.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",s})(Br),H2=(function(){function d(s,o){this.logger=o,this.fps=ur.SCAN_DEFAULT_FPS,s?(s.fps&&(this.fps=s.fps),this.disableFlip=s.disableFlip===!0,this.qrbox=s.qrbox,this.aspectRatio=s.aspectRatio,this.videoConstraints=s.videoConstraints):this.disableFlip=ur.DEFAULT_DISABLE_FLIP}return d.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Y0.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},d.prototype.isShadedBoxEnabled=function(){return!Kr(this.qrbox)},d.create=function(s,o){return new d(s,o)},d})(),qf=(function(){function d(s,o){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(s))throw"HTML Element with id=".concat(s," not found");this.elementId=s,this.verbose=!1;var h;typeof o=="boolean"?this.verbose=o===!0:o&&(h=o,this.verbose=h.verbose===!0,h.experimentalFeatures),this.logger=new G0(this.verbose),this.qrcode=new T2(this.getSupportedFormats(o),this.getUseBarCodeDetectorIfSupported(h),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=U2.create()}return d.prototype.start=function(s,o,h,g){var f=this;if(!s)throw"cameraIdOrConfig is required";if(!h||typeof h!="function")throw"qrCodeSuccessCallback is required and should be a function.";var y;g?y=g:y=this.verbose?this.logger.log:function(){};var _=H2.create(o,this.logger);this.clearElement();var C=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var w=C,A=document.getElementById(this.elementId);A.clientWidth?A.clientWidth:ur.DEFAULT_WIDTH,A.style.position="relative",this.shouldScan=!0,this.element=A;var T=this,k=this.stateManagerProxy.startTransition(Yt.SCANNING);return new Promise(function(B,z){var j=w?_.videoConstraints:T.createVideoConstraints(s);if(!j){k.cancel(),z("videoConstraints should be defined");return}var F={};(!w||_.aspectRatio)&&(F.aspectRatio=_.aspectRatio);var ie={onRenderSurfaceReady:function($,W){T.setupUi($,W,_),T.isScanning=!0,T.foreverScan(_,h,y)}};D2.failIfNotSupported().then(function($){$.create(j).then(function(W){return W.render(f.element,F,ie).then(function(J){T.renderedCamera=J,k.execute(),B(null)}).catch(function(J){k.cancel(),z(J)})}).catch(function(W){k.cancel(),z(Eo.errorGettingUserMedia(W))})}).catch(function($){k.cancel(),z(Eo.cameraStreamingNotSupported())})})},d.prototype.pause=function(s){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Yt.PAUSED),this.showPausedState(),(Kr(s)||s!==!0)&&(s=!1),s&&this.renderedCamera&&this.renderedCamera.pause()},d.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var s=this,o=function(){s.stateManagerProxy.directTransition(Yt.SCANNING),s.hidePausedState()};if(!this.renderedCamera.isPaused()){o();return}this.renderedCamera.resume(function(){o()})},d.prototype.getState=function(){return this.stateManagerProxy.getState()},d.prototype.stop=function(){var s=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var o=this.stateManagerProxy.startTransition(Yt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var h=function(){if(s.element){var f=document.getElementById(ur.SHADED_REGION_ELEMENT_ID);f&&s.element.removeChild(f)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),h(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),o.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},d.prototype.scanFile=function(s,o){return this.scanFileV2(s,o).then(function(h){return h.decodedText})},d.prototype.scanFileV2=function(s,o){var h=this;if(!s||!(s instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Kr(o)&&(o=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,f){h.possiblyCloseLastScanImageFile(),h.clearElement(),h.lastScanImageFile=URL.createObjectURL(s);var y=new Image;y.onload=function(){var _=y.width,C=y.height,w=document.getElementById(h.elementId),A=w.clientWidth?w.clientWidth:ur.DEFAULT_WIDTH,T=Math.max(w.clientHeight?w.clientHeight:C,ur.FILE_SCAN_MIN_HEIGHT),k=h.computeCanvasDrawConfig(_,C,A,T);if(o){var B=h.createCanvasElement(A,T,"qr-canvas-visible");B.style.display="inline-block",w.appendChild(B);var z=B.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=A,z.canvas.height=T,z.drawImage(y,0,0,_,C,k.x,k.y,k.width,k.height)}var j=ur.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(y.width,k.width),ie=Math.max(y.height,k.height),$=F+2*j,W=ie+2*j,J=h.createCanvasElement($,W);w.appendChild(J);var Ce=J.getContext("2d");if(!Ce)throw"Unable to get 2d context from canvas";Ce.canvas.width=$,Ce.canvas.height=W,Ce.drawImage(y,0,0,_,C,j,j,F,ie);try{h.qrcode.decodeRobustlyAsync(J).then(function(he){g(zf.createFromQrcodeResult(he))}).catch(f)}catch(he){f("QR code parse error, error = ".concat(he))}},y.onerror=f,y.onabort=f,y.onstalled=f,y.onsuspend=f,y.src=URL.createObjectURL(s)})},d.prototype.clear=function(){this.clearElement()},d.getCameras=function(){return B2.retrieve()},d.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},d.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},d.prototype.applyVideoConstraints=function(s){if(s){if(!Y0.isMediaStreamConstraintsValid(s,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(s)},d.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},d.prototype.getSupportedFormats=function(s){var o=[Te.QR_CODE,Te.AZTEC,Te.CODABAR,Te.CODE_39,Te.CODE_93,Te.CODE_128,Te.DATA_MATRIX,Te.MAXICODE,Te.ITF,Te.EAN_13,Te.EAN_8,Te.PDF_417,Te.RSS_14,Te.RSS_EXPANDED,Te.UPC_A,Te.UPC_E,Te.UPC_EAN_EXTENSION];if(!s||typeof s=="boolean"||!s.formatsToSupport)return o;if(!Array.isArray(s.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(s.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var h=[],g=0,f=s.formatsToSupport;g<f.length;g++){var y=f[g];y2(y)?h.push(y):this.logger.warn("Invalid format: ".concat(y," passed in config, ignoring."))}if(h.length===0)throw"None of formatsToSupport match supported values.";return h},d.prototype.getUseBarCodeDetectorIfSupported=function(s){if(Kr(s))return!0;if(!Kr(s.useBarCodeDetectorIfSupported))return s.useBarCodeDetectorIfSupported!==!1;if(Kr(s.experimentalFeatures))return!0;var o=s.experimentalFeatures;return Kr(o.useBarCodeDetectorIfSupported)?!0:o.useBarCodeDetectorIfSupported!==!1},d.prototype.validateQrboxSize=function(s,o,h){var g=this,f=h.qrbox;this.validateQrboxConfig(f);var y=this.toQrdimensions(s,o,f),_=function(w){if(w<ur.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(ur.MIN_QR_BOX_SIZE,"px.")},C=function(w){return w>s&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),w=s),w};_(y.width),_(y.height),y.width=C(y.width)},d.prototype.validateQrboxConfig=function(s){if(typeof s!="number"&&typeof s!="function"&&(s.width===void 0||s.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},d.prototype.toQrdimensions=function(s,o,h){if(typeof h=="number")return{width:h,height:h};if(typeof h=="function")try{return h(s,o)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return h},d.prototype.setupUi=function(s,o,h){h.isShadedBoxEnabled()&&this.validateQrboxSize(s,o,h);var g=Kr(h.qrbox)?{width:s,height:o}:h.qrbox;this.validateQrboxConfig(g);var f=this.toQrdimensions(s,o,g);f.height>o&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var y=h.isShadedBoxEnabled()&&f.height<=o,_={x:0,y:0,width:s,height:o},C=y?this.getShadedRegionBounds(s,o,f):_,w=this.createCanvasElement(C.width,C.height),A={willReadFrequently:!0},T=w.getContext("2d",A);T.canvas.width=C.width,T.canvas.height=C.height,this.element.append(w),y&&this.possiblyInsertShadingElement(this.element,s,o,f),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=T,this.canvasElement=w},d.prototype.createScannerPausedUiElement=function(s){var o=document.createElement("div");o.innerText=Eo.scannerPaused(),o.style.display="none",o.style.position="absolute",o.style.top="0px",o.style.zIndex="1",o.style.background="rgba(9, 9, 9, 0.46)",o.style.color="#FFECEC",o.style.textAlign="center",o.style.width="100%",s.appendChild(o),this.scannerPausedUiElement=o},d.prototype.scanContext=function(s,o){var h=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return s(g.text,zf.createFromQrcodeResult(g)),h.possiblyUpdateShaders(!0),!0}).catch(function(g){h.possiblyUpdateShaders(!1);var f=Eo.codeParseError(g);return o(f,W0.createFrom(f)),!1})},d.prototype.foreverScan=function(s,o,h){var g=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),y=f.videoWidth/f.clientWidth,_=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*y,w=this.qrRegion.height*_,A=this.qrRegion.x*y,T=this.qrRegion.y*_;this.context.drawImage(f,A,T,C,w,0,0,this.qrRegion.width,this.qrRegion.height);var k=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(s,o,h)},g.getTimeoutFps(s.fps))};this.scanContext(o,h).then(function(B){!B&&s.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(o,h).finally(function(){k()})):k()}).catch(function(B){g.logger.logError("Error happend while scanning context",B),k()})}},d.prototype.createVideoConstraints=function(s){if(typeof s=="string")return{deviceId:{exact:s}};if(typeof s=="object"){var o="facingMode",h="deviceId",g={user:!0,environment:!0},f="exact",y=function(z){if(z in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(z,"'")},_=Object.keys(s);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var C=Object.keys(s)[0];if(C!==o&&C!==h)throw"Only '".concat(o,"' and '").concat(h,"' ")+" are supported for 'cameraIdOrConfig'";if(C===o){var w=s.facingMode;if(typeof w=="string"){if(y(w))return{facingMode:w}}else if(typeof w=="object")if(f in w){if(y(w["".concat(f)]))return{facingMode:{exact:w["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var A=typeof w;throw"Invalid type of 'facingMode' = ".concat(A)}}else{var T=s.deviceId;if(typeof T=="string")return{deviceId:T};if(typeof T=="object"){if(f in T)return{deviceId:{exact:T["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var k=typeof T;throw"Invalid type of 'deviceId' = ".concat(k)}}}var B=typeof s;throw"Invalid type of 'cameraIdOrConfig' = ".concat(B)},d.prototype.computeCanvasDrawConfig=function(s,o,h,g){if(s<=h&&o<=g){var f=(h-s)/2,y=(g-o)/2;return{x:f,y,width:s,height:o}}else{var _=s,C=o;return s>h&&(o=h/s*o,s=h),o>g&&(s=g/o*s,o=g),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(C)+" to ".concat(s,"X").concat(o,".")),this.computeCanvasDrawConfig(s,o,h,g)}},d.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var s=document.getElementById(this.elementId);s&&(s.innerHTML="")},d.prototype.possiblyUpdateShaders=function(s){this.qrMatch!==s&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(o){o.style.backgroundColor=s?ur.BORDER_SHADER_MATCH_COLOR:ur.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=s)},d.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},d.prototype.createCanvasElement=function(s,o,h){var g=s,f=o,y=document.createElement("canvas");return y.style.width="".concat(g,"px"),y.style.height="".concat(f,"px"),y.style.display="none",y.id=Kr(h)?"qr-canvas":h,y},d.prototype.getShadedRegionBounds=function(s,o,h){if(h.width>s||h.height>o)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(s-h.width)/2,y:(o-h.height)/2,width:h.width,height:h.height}},d.prototype.possiblyInsertShadingElement=function(s,o,h,g){if(!(o-g.width<1||h-g.height<1)){var f=document.createElement("div");f.style.position="absolute";var y=(o-g.width)/2,_=(h-g.height)/2;if(f.style.borderLeft="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(y,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(ur.SHADED_REGION_ELEMENT_ID),o-g.width<11||h-g.height<11)this.hasBorderShaders=!1;else{var C=5,w=40;this.insertShaderBorders(f,w,C,-C,null,0,!0),this.insertShaderBorders(f,w,C,-C,null,0,!1),this.insertShaderBorders(f,w,C,null,-C,0,!0),this.insertShaderBorders(f,w,C,null,-C,0,!1),this.insertShaderBorders(f,C,w+C,-C,null,-C,!0),this.insertShaderBorders(f,C,w+C,null,-C,-C,!0),this.insertShaderBorders(f,C,w+C,-C,null,-C,!1),this.insertShaderBorders(f,C,w+C,null,-C,-C,!1),this.hasBorderShaders=!0}s.append(f)}},d.prototype.insertShaderBorders=function(s,o,h,g,f,y,_){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=ur.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(o,"px"),C.style.height="".concat(h,"px"),g!==null&&(C.style.top="".concat(g,"px")),f!==null&&(C.style.bottom="".concat(f,"px")),_?C.style.left="".concat(y,"px"):C.style.right="".concat(y,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),s.appendChild(C)},d.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},d.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},d.prototype.getTimeoutFps=function(s){return 1e3/s},d})(),rd="data:image/svg+xml;base64,",V2=rd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",W2=rd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Kf=rd+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",G2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Zf=(function(){function d(){}return d.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},d})(),Y2=(function(){function d(){this.data=Zf.createDefault();var s=localStorage.getItem(d.LOCAL_STORAGE_KEY);s?this.data=JSON.parse(s):this.reset()}return d.prototype.hasCameraPermissions=function(){return this.data.hasPermission},d.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},d.prototype.setHasPermission=function(s){this.data.hasPermission=s,this.flush()},d.prototype.setLastUsedCameraId=function(s){this.data.lastUsedCameraId=s,this.flush()},d.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},d.prototype.reset=function(){this.data=Zf.createDefault(),this.flush()},d.prototype.flush=function(){localStorage.setItem(d.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},d.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",d})(),X2=(function(){function d(){this.infoDiv=document.createElement("div")}return d.prototype.renderInto=function(s){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Hf.poweredBy();var o=document.createElement("a");o.innerText="ScanApp",o.href="https://scanapp.org",o.target="new",o.style.color="white",this.infoDiv.appendChild(o);var h=document.createElement("br"),g=document.createElement("br");this.infoDiv.appendChild(h),this.infoDiv.appendChild(g);var f=document.createElement("a");f.innerText=Hf.reportIssues(),f.href="https://github.com/mebjas/html5-qrcode/issues",f.target="new",f.style.color="white",this.infoDiv.appendChild(f),s.appendChild(this.infoDiv)},d.prototype.show=function(){this.infoDiv.style.display="block"},d.prototype.hide=function(){this.infoDiv.style.display="none"},d})(),$2=(function(){function d(s,o){this.isShowingInfoIcon=!0,this.onTapIn=s,this.onTapOut=o,this.infoIcon=document.createElement("img")}return d.prototype.renderInto=function(s){var o=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Kf,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(h){return o.onHoverIn()},this.infoIcon.onmouseout=function(h){return o.onHoverOut()},this.infoIcon.onclick=function(h){return o.onClick()},s.appendChild(this.infoIcon)},d.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},d.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},d.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=G2,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Kf,this.infoIcon.style.opacity="0.6")},d})(),Q2=(function(){function d(){var s=this;this.infoDiv=new X2,this.infoIcon=new $2(function(){s.infoDiv.show()},function(){s.infoDiv.hide()})}return d.prototype.renderInto=function(s){this.infoDiv.renderInto(s),this.infoIcon.renderInto(s)},d})(),q2=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},K2=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},Jf=(function(){function d(){}return d.hasPermissions=function(){return q2(this,void 0,void 0,function(){var s,o,h,g;return K2(this,function(f){switch(f.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(s=f.sent(),o=0,h=s;o<h.length;o++)if(g=h[o],g.kind==="videoinput"&&g.label)return[2,!0];return[2,!1]}})})},d})(),Wi=(function(){function d(s){this.supportedScanTypes=this.validateAndReturnScanTypes(s)}return d.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},d.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},d.prototype.isCameraScanRequired=function(){for(var s=0,o=this.supportedScanTypes;s<o.length;s++){var h=o[s];if(d.isCameraScanType(h))return!0}return!1},d.isCameraScanType=function(s){return s===$i.SCAN_TYPE_CAMERA},d.isFileScanType=function(s){return s===$i.SCAN_TYPE_FILE},d.prototype.validateAndReturnScanTypes=function(s){if(!s||s.length===0)return Br.DEFAULT_SUPPORTED_SCAN_TYPE;var o=Br.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(s.length>o)throw"Max ".concat(o," values expected for ")+"supportedScanTypes";for(var h=0,g=s;h<g.length;h++){var f=g[h];if(!Br.DEFAULT_SUPPORTED_SCAN_TYPE.includes(f))throw"Unsupported scan type ".concat(f)}return s},d})(),hr=(function(){function d(){}return d.ALL_ELEMENT_CLASS="html5-qrcode-element",d.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",d.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",d.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",d.TORCH_BUTTON_ID="html5-qrcode-button-torch",d.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",d.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",d.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",d.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",d.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",d.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",d})(),gi=(function(){function d(){}return d.createElement=function(s,o){var h=document.createElement(s);return h.id=o,h.classList.add(hr.ALL_ELEMENT_CLASS),s==="button"&&h.setAttribute("type","button"),h},d})(),$0=function(d,s,o,h){function g(f){return f instanceof o?f:new o(function(y){y(f)})}return new(o||(o=Promise))(function(f,y){function _(A){try{w(h.next(A))}catch(T){y(T)}}function C(A){try{w(h.throw(A))}catch(T){y(T)}}function w(A){A.done?f(A.value):g(A.value).then(_,C)}w((h=h.apply(d,s||[])).next())})},Q0=function(d,s){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},h,g,f,y;return y={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(y[Symbol.iterator]=function(){return this}),y;function _(w){return function(A){return C([w,A])}}function C(w){if(h)throw new TypeError("Generator is already executing.");for(;y&&(y=0,w[0]&&(o=0)),o;)try{if(h=1,g&&(f=w[0]&2?g.return:w[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,w[1])).done)return f;switch(g=0,f&&(w=[w[0]&2,f.value]),w[0]){case 0:case 1:f=w;break;case 4:return o.label++,{value:w[1],done:!1};case 5:o.label++,g=w[1],w=[0];continue;case 7:w=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(w[0]===6||w[0]===2)){o=0;continue}if(w[0]===3&&(!f||w[1]>f[0]&&w[1]<f[3])){o.label=w[1];break}if(w[0]===6&&o.label<f[1]){o.label=f[1],f=w;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(w);break}f[2]&&o.ops.pop(),o.trys.pop();continue}w=s.call(d,o)}catch(A){w=[6,A],g=0}finally{h=f=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}},e0=(function(){function d(s,o,h){this.isTorchOn=!1,this.torchCapability=s,this.buttonController=o,this.onTorchActionFailureCallback=h}return d.prototype.isTorchEnabled=function(){return this.isTorchOn},d.prototype.flipState=function(){return $0(this,void 0,void 0,function(){var s,o;return Q0(this,function(h){switch(h.label){case 0:this.buttonController.disable(),s=!this.isTorchOn,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,this.torchCapability.apply(s)];case 2:return h.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),s),[3,4];case 3:return o=h.sent(),this.propagateFailure(s,o),this.buttonController.enable(),[3,4];case 4:return[2]}})})},d.prototype.updateUiBasedOnLatestSettings=function(s,o){s===o?(this.buttonController.setText(o?At.torchOffButton():At.torchOnButton()),this.isTorchOn=o):this.propagateFailure(o),this.buttonController.enable()},d.prototype.propagateFailure=function(s,o){var h=s?At.torchOnFailedMessage():At.torchOffFailedMessage();o&&(h+="; Error = "+o),this.onTorchActionFailureCallback(h)},d.prototype.reset=function(){this.isTorchOn=!1},d})(),Z2=(function(){function d(s,o){this.onTorchActionFailureCallback=o,this.torchButton=gi.createElement("button",hr.TORCH_BUTTON_ID),this.torchController=new e0(s,this,o)}return d.prototype.render=function(s,o){var h=this;this.torchButton.innerText=At.torchOnButton(),this.torchButton.style.display=o.display,this.torchButton.style.marginLeft=o.marginLeft;var g=this;this.torchButton.addEventListener("click",function(f){return $0(h,void 0,void 0,function(){return Q0(this,function(y){switch(y.label){case 0:return[4,g.torchController.flipState()];case 1:return y.sent(),g.torchController.isTorchEnabled()?(g.torchButton.classList.remove(hr.TORCH_BUTTON_CLASS_TORCH_OFF),g.torchButton.classList.add(hr.TORCH_BUTTON_CLASS_TORCH_ON)):(g.torchButton.classList.remove(hr.TORCH_BUTTON_CLASS_TORCH_ON),g.torchButton.classList.add(hr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),s.appendChild(this.torchButton)},d.prototype.updateTorchCapability=function(s){this.torchController=new e0(s,this,this.onTorchActionFailureCallback)},d.prototype.getTorchButton=function(){return this.torchButton},d.prototype.hide=function(){this.torchButton.style.display="none"},d.prototype.show=function(){this.torchButton.style.display="inline-block"},d.prototype.disable=function(){this.torchButton.disabled=!0},d.prototype.enable=function(){this.torchButton.disabled=!1},d.prototype.setText=function(s){this.torchButton.innerText=s},d.prototype.reset=function(){this.torchButton.innerText=At.torchOnButton(),this.torchController.reset()},d.create=function(s,o,h,g){var f=new d(o,g);return f.render(s,h),f},d})(),J2=(function(){function d(s,o,h){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=o?"block":"none",s.appendChild(this.fileBasedScanRegion);var g=document.createElement("label");g.setAttribute("for",this.getFileScanInputId()),g.style.display="inline-block",this.fileBasedScanRegion.appendChild(g),this.fileSelectionButton=gi.createElement("button",hr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){g.click()}),g.append(this.fileSelectionButton),this.fileScanInput=gi.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",g.appendChild(this.fileScanInput);var f=this;this.fileScanInput.addEventListener("change",function(_){if(!(_==null||_.target==null)){var C=_.target;if(!(C.files&&C.files.length===0)){var w=C.files,A=w[0],T=A.name;f.setImageNameToButton(T),h(A)}}});var y=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(y),this.fileBasedScanRegion.addEventListener("dragenter",function(_){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){f.fileBasedScanRegion.style.border=f.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),f.fileBasedScanRegion.style.border=f.fileBasedScanRegionDefaultBorder();var C=_.dataTransfer;if(C){var w=C.files;if(!w||w.length===0)return;for(var A=!1,T=0;T<w.length;++T){var k=w.item(T);if(k){var B=/image.*/;if(k.type.match(B)){A=!0;var z=k.name;f.setImageNameToButton(z),h(k),y.innerText=At.dragAndDropMessage();break}}}A||(y.innerText=At.dragAndDropMessageOnlyImages())}})}return d.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},d.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},d.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},d.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},d.prototype.createFileBasedScanRegion=function(){var s=document.createElement("div");return s.style.textAlign="center",s.style.margin="auto",s.style.width="80%",s.style.maxWidth="600px",s.style.border=this.fileBasedScanRegionDefaultBorder(),s.style.padding="10px",s.style.marginBottom="10px",s},d.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},d.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},d.prototype.createDragAndDropMessage=function(){var s=document.createElement("div");return s.innerText=At.dragAndDropMessage(),s.style.fontWeight="400",s},d.prototype.setImageNameToButton=function(s){var o=20;if(s.length>o){var h=s.substring(0,8),g=s.length,f=s.substring(g-8,g);s="".concat(h,"....").concat(f)}var y=At.fileSelectionChooseAnother()+" - "+s;this.fileSelectionButton.innerText=y},d.prototype.setInitialValueToButton=function(){var s=At.fileSelectionChooseImage()+" - "+At.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=s},d.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},d.create=function(s,o,h){var g=new d(s,o,h);return g},d})(),ex=(function(){function d(s){this.selectElement=gi.createElement("select",hr.CAMERA_SELECTION_SELECT_ID),this.cameras=s,this.options=[]}return d.prototype.render=function(s){var o=document.createElement("span");o.style.marginRight="10px";var h=this.cameras.length;if(h===0)throw new Error("No cameras found");if(h===1)o.style.display="none";else{var g=At.selectCamera();o.innerText="".concat(g," (").concat(this.cameras.length,")  ")}for(var f=1,y=0,_=this.cameras;y<_.length;y++){var C=_[y],w=C.id,A=C.label==null?w:C.label;(!A||A==="")&&(A=[At.anonymousCameraPrefix(),f++].join(" "));var T=document.createElement("option");T.value=w,T.innerText=A,this.options.push(T),this.selectElement.appendChild(T)}o.appendChild(this.selectElement),s.appendChild(o)},d.prototype.disable=function(){this.selectElement.disabled=!0},d.prototype.isDisabled=function(){return this.selectElement.disabled===!0},d.prototype.enable=function(){this.selectElement.disabled=!1},d.prototype.getValue=function(){return this.selectElement.value},d.prototype.hasValue=function(s){for(var o=0,h=this.options;o<h.length;o++){var g=h[o];if(g.value===s)return!0}return!1},d.prototype.setValue=function(s){if(!this.hasValue(s))throw new Error("".concat(s," is not present in the camera list."));this.selectElement.value=s},d.prototype.hasSingleItem=function(){return this.cameras.length===1},d.prototype.numCameras=function(){return this.cameras.length},d.create=function(s,o){var h=new d(o);return h.render(s),h},d})(),tx=(function(){function d(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=gi.createElement("input",hr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return d.prototype.render=function(s,o){this.zoomElementContainer.style.display=o?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",s.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var h=At.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(h),this.rangeText.style.marginRight="10px";var g=this;this.rangeInput.addEventListener("input",function(){return g.onValueChange()}),this.rangeInput.addEventListener("change",function(){return g.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},d.prototype.onValueChange=function(){var s=At.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(s),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},d.prototype.setValues=function(s,o,h,g){this.rangeInput.min=s.toString(),this.rangeInput.max=o.toString(),this.rangeInput.step=g.toString(),this.rangeInput.value=h.toString(),this.onValueChange()},d.prototype.show=function(){this.zoomElementContainer.style.display="block"},d.prototype.hide=function(){this.zoomElementContainer.style.display="none"},d.prototype.setOnCameraZoomValueChangeCallback=function(s){this.onChangeCallback=s},d.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},d.create=function(s,o){var h=new d;return h.render(s,o),h},d})(),dr;(function(d){d[d.STATUS_DEFAULT=0]="STATUS_DEFAULT",d[d.STATUS_SUCCESS=1]="STATUS_SUCCESS",d[d.STATUS_WARNING=2]="STATUS_WARNING",d[d.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(dr||(dr={}));function nx(d){return{fps:d.fps,qrbox:d.qrbox,aspectRatio:d.aspectRatio,disableFlip:d.disableFlip,videoConstraints:d.videoConstraints}}function rx(d,s){return{formatsToSupport:d.formatsToSupport,useBarCodeDetectorIfSupported:d.useBarCodeDetectorIfSupported,experimentalFeatures:d.experimentalFeatures,verbose:s}}var ix=(function(){function d(s,o,h){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=s,this.config=this.createConfig(o),this.verbose=h===!0,!document.getElementById(s))throw"HTML Element with id=".concat(s," not found");this.scanTypeSelector=new Wi(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new G0(this.verbose),this.persistedDataManager=new Y2,o.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return d.prototype.render=function(s,o){var h=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(f,y){if(s)s(f,y);else{if(h.lastMatchFound===f)return;h.lastMatchFound=f,h.setHeaderMessage(At.lastMatch(f),dr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(f,y){o&&o(f,y)};var g=document.getElementById(this.elementId);if(!g)throw"HTML Element with id=".concat(this.elementId," not found");g.innerHTML="",this.createBasicLayout(g),this.html5Qrcode=new qf(this.getScanRegionId(),rx(this.config,this.verbose))},d.prototype.pause=function(s){(Kr(s)||s!==!0)&&(s=!1),this.getHtml5QrcodeOrFail().pause(s)},d.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},d.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},d.prototype.clear=function(){var s=this,o=function(){var h=document.getElementById(s.elementId);h&&(h.innerHTML="",s.resetBasicLayout(h))};return this.html5Qrcode?new Promise(function(h,g){if(!s.html5Qrcode){h();return}s.html5Qrcode.isScanning?s.html5Qrcode.stop().then(function(f){if(!s.html5Qrcode){h();return}s.html5Qrcode.clear(),o(),h()}).catch(function(f){s.verbose&&s.logger.logError("Unable to stop qrcode scanner",f),g(f)}):(s.html5Qrcode.clear(),o(),h())}):Promise.resolve()},d.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},d.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},d.prototype.applyVideoConstraints=function(s){return this.getHtml5QrcodeOrFail().applyVideoConstraints(s)},d.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},d.prototype.createConfig=function(s){return s?(s.fps||(s.fps=Br.SCAN_DEFAULT_FPS),s.rememberLastUsedCamera!==!Br.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(s.rememberLastUsedCamera=Br.DEFAULT_REMEMBER_LAST_CAMERA_USED),s.supportedScanTypes||(s.supportedScanTypes=Br.DEFAULT_SUPPORTED_SCAN_TYPE),s):{fps:Br.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Br.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Br.DEFAULT_SUPPORTED_SCAN_TYPE}},d.prototype.createBasicLayout=function(s){s.style.position="relative",s.style.padding="0px",s.style.border="1px solid silver",this.createHeader(s);var o=document.createElement("div"),h=this.getScanRegionId();o.id=h,o.style.width="100%",o.style.minHeight="100px",o.style.textAlign="center",s.appendChild(o),Wi.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var g=document.createElement("div"),f=this.getDashboardId();g.id=f,g.style.width="100%",s.appendChild(g),this.setupInitialDashboard(g)},d.prototype.resetBasicLayout=function(s){s.style.border="none"},d.prototype.setupInitialDashboard=function(s){this.createSection(s),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},d.prototype.createHeader=function(s){var o=document.createElement("div");o.style.textAlign="left",o.style.margin="0px",s.appendChild(o);var h=new Q2;h.renderInto(o);var g=document.createElement("div");g.id=this.getHeaderMessageContainerId(),g.style.display="none",g.style.textAlign="center",g.style.fontSize="14px",g.style.padding="2px 10px",g.style.margin="4px",g.style.borderTop="1px solid #f6f6f6",o.appendChild(g)},d.prototype.createSection=function(s){var o=document.createElement("div");o.id=this.getDashboardSectionId(),o.style.width="100%",o.style.padding="10px 0px 10px 0px",o.style.textAlign="left",s.appendChild(o)},d.prototype.createCameraListUi=function(s,o,h){var g=this;g.showHideScanTypeSwapLink(!1),g.setHeaderMessage(At.cameraPermissionRequesting());var f=function(){h||g.createPermissionButton(s,o)};qf.getCameras().then(function(y){g.persistedDataManager.setHasPermission(!0),g.showHideScanTypeSwapLink(!0),g.resetHeaderMessage(),y&&y.length>0?(s.removeChild(o),g.renderCameraSelection(y)):(g.setHeaderMessage(At.noCameraFound(),dr.STATUS_WARNING),f())}).catch(function(y){g.persistedDataManager.setHasPermission(!1),h?h.disabled=!1:f(),g.setHeaderMessage(y,dr.STATUS_WARNING),g.showHideScanTypeSwapLink(!0)})},d.prototype.createPermissionButton=function(s,o){var h=this,g=gi.createElement("button",this.getCameraPermissionButtonId());g.innerText=At.cameraPermissionTitle(),g.addEventListener("click",function(){g.disabled=!0,h.createCameraListUi(s,o,g)}),o.appendChild(g)},d.prototype.createPermissionsUi=function(s,o){var h=this;if(Wi.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Jf.hasPermissions().then(function(g){g?h.createCameraListUi(s,o):(h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(s,o))}).catch(function(g){h.persistedDataManager.setHasPermission(!1),h.createPermissionButton(s,o)});return}this.createPermissionButton(s,o)},d.prototype.createSectionControlPanel=function(){var s=document.getElementById(this.getDashboardSectionId()),o=document.createElement("div");s.appendChild(o);var h=document.createElement("div");h.id=this.getDashboardSectionCameraScanRegionId(),h.style.display=Wi.isCameraScanType(this.currentScanType)?"block":"none",o.appendChild(h);var g=document.createElement("div");g.style.textAlign="center",h.appendChild(g),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(h,g),this.renderFileScanUi(o)},d.prototype.renderFileScanUi=function(s){var o=Wi.isFileScanType(this.currentScanType),h=this,g=function(f){if(!h.html5Qrcode)throw"html5Qrcode not defined";Wi.isFileScanType(h.currentScanType)&&(h.setHeaderMessage(At.loadingImage()),h.html5Qrcode.scanFileV2(f,!0).then(function(y){h.resetHeaderMessage(),h.qrCodeSuccessCallback(y.decodedText,y)}).catch(function(y){h.setHeaderMessage(y,dr.STATUS_WARNING),h.qrCodeErrorCallback(y,W0.createFrom(y))}))};this.fileSelectionUi=J2.create(s,o,g)},d.prototype.renderCameraSelection=function(s){var o=this,h=this,g=document.getElementById(this.getDashboardSectionCameraScanRegionId());g.style.textAlign="center";var f=tx.create(g,!1),y=function(j){var F=j.zoomFeature();if(F.isSupported()){f.setOnCameraZoomValueChangeCallback(function($){F.apply($)});var ie=1;o.config.defaultZoomValueIfSupported&&(ie=o.config.defaultZoomValueIfSupported),ie=v2(ie,F.min(),F.max()),f.setValues(F.min(),F.max(),ie,F.step()),f.show()}},_=ex.create(g,s),C=document.createElement("span"),w=gi.createElement("button",hr.CAMERA_START_BUTTON_ID);w.innerText=At.scanButtonStartScanningText(),C.appendChild(w);var A=gi.createElement("button",hr.CAMERA_STOP_BUTTON_ID);A.innerText=At.scanButtonStopScanningText(),A.style.display="none",A.disabled=!0,C.appendChild(A);var T,k=function(j){if(!j.torchFeature().isSupported()){T&&T.hide();return}T?T.updateTorchCapability(j.torchFeature()):T=Z2.create(C,j.torchFeature(),{display:"none",marginLeft:"5px"},function(F){h.setHeaderMessage(F,dr.STATUS_WARNING)}),T.show()};g.appendChild(C);var B=function(j){j||(w.style.display="none"),w.innerText=At.scanButtonStartScanningText(),w.style.opacity="1",w.disabled=!1,j&&(w.style.display="inline-block")};if(w.addEventListener("click",function(j){w.innerText=At.scanButtonScanningStarting(),_.disable(),w.disabled=!0,w.style.opacity="0.5",o.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!1),h.resetHeaderMessage();var F=_.getValue();h.persistedDataManager.setLastUsedCameraId(F),h.html5Qrcode.start(F,nx(h.config),h.qrCodeSuccessCallback,h.qrCodeErrorCallback).then(function(ie){A.disabled=!1,A.style.display="inline-block",B(!1);var $=h.html5Qrcode.getRunningTrackCameraCapabilities();o.config.showTorchButtonIfSupported===!0&&k($),o.config.showZoomSliderIfSupported===!0&&y($)}).catch(function(ie){h.showHideScanTypeSwapLink(!0),_.enable(),B(!0),h.setHeaderMessage(ie,dr.STATUS_WARNING)})}),_.hasSingleItem()&&w.click(),A.addEventListener("click",function(j){if(!h.html5Qrcode)throw"html5Qrcode not defined";A.disabled=!0,h.html5Qrcode.stop().then(function(F){o.scanTypeSelector.hasMoreThanOneScanType()&&h.showHideScanTypeSwapLink(!0),_.enable(),w.disabled=!1,A.style.display="none",w.style.display="inline-block",T&&(T.reset(),T.hide()),f.removeOnCameraZoomValueChangeCallback(),f.hide(),h.insertCameraScanImageToScanRegion()}).catch(function(F){A.disabled=!1,h.setHeaderMessage(F,dr.STATUS_WARNING)})}),h.persistedDataManager.getLastUsedCameraId()){var z=h.persistedDataManager.getLastUsedCameraId();_.hasValue(z)?(_.setValue(z),w.click()):h.persistedDataManager.resetLastUsedCameraId()}},d.prototype.createSectionSwap=function(){var s=this,o=At.textIfCameraScanSelected(),h=At.textIfFileScanSelected(),g=document.getElementById(this.getDashboardSectionId()),f=document.createElement("div");f.style.textAlign="center";var y=gi.createElement("span",this.getDashboardSectionSwapLinkId());y.style.textDecoration="underline",y.style.cursor="pointer",y.innerText=Wi.isCameraScanType(this.currentScanType)?o:h,y.addEventListener("click",function(){if(!s.sectionSwapAllowed){s.verbose&&s.logger.logError("Section swap called when not allowed");return}s.resetHeaderMessage(),s.fileSelectionUi.resetValue(),s.sectionSwapAllowed=!1,Wi.isCameraScanType(s.currentScanType)?(s.clearScanRegion(),s.getCameraScanRegion().style.display="none",s.fileSelectionUi.show(),y.innerText=h,s.currentScanType=$i.SCAN_TYPE_FILE,s.insertFileScanImageToScanRegion()):(s.clearScanRegion(),s.getCameraScanRegion().style.display="block",s.fileSelectionUi.hide(),y.innerText=o,s.currentScanType=$i.SCAN_TYPE_CAMERA,s.insertCameraScanImageToScanRegion(),s.startCameraScanIfPermissionExistsOnSwap()),s.sectionSwapAllowed=!0}),f.appendChild(y),g.appendChild(f)},d.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var s=this,o=this;if(this.persistedDataManager.hasCameraPermissions()){Jf.hasPermissions().then(function(h){if(h){var g=document.getElementById(o.getCameraPermissionButtonId());if(!g)throw s.logger.logError("Permission button not found, fail;"),"Permission button not found";g.click()}else o.persistedDataManager.setHasPermission(!1)}).catch(function(h){o.persistedDataManager.setHasPermission(!1)});return}},d.prototype.resetHeaderMessage=function(){var s=document.getElementById(this.getHeaderMessageContainerId());s.style.display="none"},d.prototype.setHeaderMessage=function(s,o){o||(o=dr.STATUS_DEFAULT);var h=this.getHeaderMessageDiv();switch(h.innerText=s,h.style.display="block",o){case dr.STATUS_SUCCESS:h.style.background="rgba(106, 175, 80, 0.26)",h.style.color="#477735";break;case dr.STATUS_WARNING:h.style.background="rgba(203, 36, 49, 0.14)",h.style.color="#cb2431";break;case dr.STATUS_DEFAULT:default:h.style.background="rgba(0, 0, 0, 0)",h.style.color="rgb(17, 17, 17)";break}},d.prototype.showHideScanTypeSwapLink=function(s){this.scanTypeSelector.hasMoreThanOneScanType()&&(s!==!0&&(s=!1),this.sectionSwapAllowed=s,this.getDashboardSectionSwapLink().style.display=s?"inline-block":"none")},d.prototype.insertCameraScanImageToScanRegion=function(){var s=this,o=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){o.innerHTML="<br>",o.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(h){o.innerHTML="<br>",o.appendChild(s.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=V2,this.cameraScanImage.alt=At.cameraScanAltText()},d.prototype.insertFileScanImageToScanRegion=function(){var s=this,o=document.getElementById(this.getScanRegionId());if(this.fileScanImage){o.innerHTML="<br>",o.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(h){o.innerHTML="<br>",o.appendChild(s.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=W2,this.fileScanImage.alt=At.fileScanAltText()},d.prototype.clearScanRegion=function(){var s=document.getElementById(this.getScanRegionId());s.innerHTML=""},d.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},d.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},d.prototype.getDashboardSectionSwapLinkId=function(){return hr.SCAN_TYPE_CHANGE_ANCHOR_ID},d.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},d.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},d.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},d.prototype.getCameraPermissionButtonId=function(){return hr.CAMERA_PERMISSION_BUTTON_ID},d.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},d.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},d.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},d})();const sx=({onScan:d,isArrival:s})=>{const[o,h]=le.useState(null),[g,f]=le.useState(!1),[y,_]=le.useState(null),[C,w]=le.useState(null);le.useEffect(()=>()=>{o&&o.clear()},[o]);const A=()=>{const k=new ix("qr-reader",{fps:10,qrbox:{width:400,height:400},rememberLastUsedCamera:!0,aspectRatio:1},!1),B=z=>{f(!1),_(z),k.clear(),d(z)};k.render(B,z=>{w(errorMessage),console.error("QR scan error:",z)}),h(k),f(!0)},T=()=>{o&&(o.clear(),h(null),f(!1))};return M.jsx("div",{className:"flex flex-col items-center",children:M.jsxs("div",{className:"w-full max-w-2xl bg-white rounded-lg shadow-md p-6",children:[M.jsx("h2",{className:"text-xl font-semibold text-center mb-4",children:s?"Scan QR to Check In":"Scan QR to Check Out"}),g?M.jsx(sn,{onClick:T,variant:"danger",fullWidth:!0,children:"Stop Scanner"}):M.jsx(sn,{onClick:A,variant:s?"success":"primary",fullWidth:!0,children:s?"Start Check-In Scanner":"Start Check-Out Scanner"}),M.jsx("div",{id:"qr-reader",className:"mt-4 w-full",style:{height:"500px"}}),y&&M.jsxs("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:[M.jsx("p",{className:"text-sm text-gray-600",children:"Last Scanned QR Code:"}),M.jsx("p",{className:"font-mono text-xs break-all",children:y})]})]})})},ox=()=>{const[d,s]=le.useState(!0),[o,h]=le.useState(null),{recordAttendance:g}=_o(),f=async y=>{try{const _=await g(y,d);h(_)}catch(_){h({success:!1,message:"Failed to record attendance",student:null,record:null}),console.error(_)}};return M.jsxs("div",{children:[M.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Attendance Scanner"}),M.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Scan student QR codes to record attendance"}),M.jsx("div",{className:"mt-6 flex justify-center",children:M.jsxs("div",{className:"inline-flex rounded-md shadow-sm",role:"group",children:[M.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-l-lg ${d?"bg-green-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,onClick:()=>s(!0),children:"Check In"}),M.jsx("button",{type:"button",className:`px-4 py-2 text-sm font-medium rounded-r-lg ${d?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":"bg-blue-600 text-white"}`,onClick:()=>s(!1),children:"Check Out"})]})}),M.jsx("div",{className:"mt-6",children:M.jsx(sx,{onScan:f,isArrival:d})}),o&&M.jsx("div",{className:"mt-8",children:M.jsx("div",{className:`rounded-md p-4 ${o.success?d?"bg-green-50":"bg-blue-50":"bg-red-50"}`,children:M.jsxs("div",{className:"flex",children:[M.jsx("div",{className:"flex-shrink-0",children:o.success?d?M.jsx("span",{className:"text-green-400",children:""}):M.jsx("span",{className:"text-blue-400",children:""}):M.jsx("span",{className:"text-red-400",children:""})}),M.jsxs("div",{className:"ml-3",children:[M.jsx("h3",{className:`text-sm font-medium ${o.success?d?"text-green-800":"text-blue-800":"text-red-800"}`,children:o.success?d?"Check-In Successful":"Check-Out Successful":o.message}),M.jsxs("div",{className:`mt-2 text-sm ${o.success?d?"text-green-700":"text-blue-700":"text-red-700"}`,children:[M.jsxs("p",{children:["Student: ",o.student?.name||"Unknown"]}),M.jsxs("p",{children:["Time:"," ",d?o.record?.time_in||"N/A":o.record?.time_out||"N/A"]}),M.jsxs("p",{children:["Date: ",o.record?.date||"N/A"]})]}),M.jsx("div",{className:"mt-4",children:M.jsx(sn,{size:"sm",onClick:()=>h(null),variant:"outline",children:"Scan Another"})})]})]})})})]})};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=d=>d.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),q0=(...d)=>d.filter((s,o,h)=>!!s&&h.indexOf(s)===o).join(" ");/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lx={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cx=le.forwardRef(({color:d="currentColor",size:s=24,strokeWidth:o=2,absoluteStrokeWidth:h,className:g="",children:f,iconNode:y,..._},C)=>le.createElement("svg",{ref:C,...lx,width:s,height:s,stroke:d,strokeWidth:h?Number(o)*24/Number(s):o,className:q0("lucide",g),..._},[...y.map(([w,A])=>le.createElement(w,A)),...Array.isArray(f)?f:[f]]));/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=(d,s)=>{const o=le.forwardRef(({className:h,...g},f)=>le.createElement(cx,{ref:f,iconNode:s,className:q0(`lucide-${ax(d)}`,h),...g}));return o.displayName=`${d}`,o};/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t0=fr("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ux=fr("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dx=fr("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=fr("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r0=fr("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hx=fr("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fx=fr("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gx=fr("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const px=fr("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mx=fr("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xx=fr("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i0=fr("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wx=fr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),yx=()=>{const{currentUser:d}=Ns(),{getAttendanceByDateRange:s,getAttendanceByClass:o,classes:h,students:g}=_o(),[f,y]=le.useState(()=>{const ie=new Date;return ie.setDate(ie.getDate()-7),ie.toISOString().split("T")[0]}),[_,C]=le.useState(()=>new Date().toISOString().split("T")[0]),[w,A]=le.useState(""),[T,k]=le.useState([]),[B,z]=le.useState(!1);le.useRef();const j=()=>{let ie;if(d.role==="admin")ie=s(f,_,w?parseInt(w):null);else{console.log("Current User Class Name: ",d.class_name);const $=h.find(W=>W.name===d.class_name);console.log("The Teacher's class name is: ",d.class_name),console.log("Class ID:",$.id),ie=s(f,_,$?.id)}k(ie),z(!0)},F=()=>{if(T.length===0)return;const ie=T.map(K=>{const Ee=g.find(vt=>vt.id===K.student_id),oe=h.find(vt=>vt.id===Ee?.class_id)?.name||"Unknown";return console.log("Classes found: ",oe),console.log("Student found: ",Ee),{Date:K.date,Student:Ee?.name||"Unknown",Class:oe,"Check In":K.time_in,"Check Out":K.time_out||"Not checked out",Status:K.time_out?"Complete":"In Progress"}}),$=Object.keys(ie[0]),W=[$.join(","),...ie.map(K=>$.map(Ee=>`"${K[Ee]||""}"`).join(","))].join(`
`),J=new Blob([W],{type:"text/csv;charset=utf-8;"}),Ce=URL.createObjectURL(J),he=document.createElement("a");he.setAttribute("href",Ce),he.setAttribute("download",`attendance_report_${f}_to_${_}.csv`),document.body.appendChild(he),he.click(),document.body.removeChild(he)};return M.jsxs("div",{children:[M.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Attendance Reports"}),M.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Generate and export attendance reports"}),M.jsx("div",{className:"mt-6 bg-white shadow overflow-hidden sm:rounded-lg",children:M.jsxs("div",{className:"px-4 py-5 sm:p-6",children:[M.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Filter Options"}),M.jsxs("div",{className:"mt-4 grid grid-cols-1 gap-y-4 sm:grid-cols-2 sm:gap-x-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"start-date",className:"block text-sm font-medium text-gray-700",children:"Start Date"}),M.jsx("input",{type:"date",id:"start-date",name:"start-date",value:f,onChange:ie=>y(ie.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"end-date",className:"block text-sm font-medium text-gray-700",children:"End Date"}),M.jsx("input",{type:"date",id:"end-date",name:"end-date",value:_,onChange:ie=>C(ie.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),d.role==="admin"&&M.jsxs("div",{className:"sm:col-span-2",children:[M.jsx("label",{htmlFor:"class",className:"block text-sm font-medium text-gray-700",children:"Class (Optional)"}),M.jsxs("select",{id:"class",name:"class",value:w,onChange:ie=>A(ie.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[M.jsx("option",{value:"",children:"All Classes"}),h.map(ie=>M.jsx("option",{value:ie.id,children:ie.name},ie.id))]})]})]}),M.jsx("div",{className:"mt-6 flex justify-end",children:M.jsxs(sn,{onClick:j,variant:"primary",children:[M.jsx(dx,{className:"w-4 h-4 mr-1"})," Generate Report"]})})]})}),B&&M.jsxs("div",{className:"mt-8",children:[M.jsxs("div",{className:"flex justify-between items-center mb-4",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Attendance Records"}),T.length>0&&M.jsxs(sn,{onClick:F,variant:"outline",size:"sm",children:[M.jsx(ux,{className:"w-4 h-4 mr-1"})," Export to CSV"]})]}),M.jsx(H0,{records:T,showClass:d.role==="admin"}),T.length===0&&M.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:M.jsxs("div",{className:"flex",children:[M.jsx("div",{className:"flex-shrink-0",children:M.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:M.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),M.jsxs("div",{className:"ml-3",children:[M.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"No Records Found"}),M.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:M.jsx("p",{children:"No attendance records found for the selected date range and filters."})})]})]})})]})]})};var vx=Object.defineProperty,Gl=Object.getOwnPropertySymbols,K0=Object.prototype.hasOwnProperty,Z0=Object.prototype.propertyIsEnumerable,s0=(d,s,o)=>s in d?vx(d,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[s]=o,Gu=(d,s)=>{for(var o in s||(s={}))K0.call(s,o)&&s0(d,o,s[o]);if(Gl)for(var o of Gl(s))Z0.call(s,o)&&s0(d,o,s[o]);return d},Yu=(d,s)=>{var o={};for(var h in d)K0.call(d,h)&&s.indexOf(h)<0&&(o[h]=d[h]);if(d!=null&&Gl)for(var h of Gl(d))s.indexOf(h)<0&&Z0.call(d,h)&&(o[h]=d[h]);return o};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Ts;(d=>{const s=class it{constructor(C,w,A,T){if(this.version=C,this.errorCorrectionLevel=w,this.modules=[],this.isFunction=[],C<it.MIN_VERSION||C>it.MAX_VERSION)throw new RangeError("Version value out of range");if(T<-1||T>7)throw new RangeError("Mask value out of range");this.size=C*4+17;let k=[];for(let z=0;z<this.size;z++)k.push(!1);for(let z=0;z<this.size;z++)this.modules.push(k.slice()),this.isFunction.push(k.slice());this.drawFunctionPatterns();const B=this.addEccAndInterleave(A);if(this.drawCodewords(B),T==-1){let z=1e9;for(let j=0;j<8;j++){this.applyMask(j),this.drawFormatBits(j);const F=this.getPenaltyScore();F<z&&(T=j,z=F),this.applyMask(j)}}g(0<=T&&T<=7),this.mask=T,this.applyMask(T),this.drawFormatBits(T),this.isFunction=[]}static encodeText(C,w){const A=d.QrSegment.makeSegments(C);return it.encodeSegments(A,w)}static encodeBinary(C,w){const A=d.QrSegment.makeBytes(C);return it.encodeSegments([A],w)}static encodeSegments(C,w,A=1,T=40,k=-1,B=!0){if(!(it.MIN_VERSION<=A&&A<=T&&T<=it.MAX_VERSION)||k<-1||k>7)throw new RangeError("Invalid value");let z,j;for(z=A;;z++){const W=it.getNumDataCodewords(z,w)*8,J=y.getTotalBits(C,z);if(J<=W){j=J;break}if(z>=T)throw new RangeError("Data too long")}for(const W of[it.Ecc.MEDIUM,it.Ecc.QUARTILE,it.Ecc.HIGH])B&&j<=it.getNumDataCodewords(z,W)*8&&(w=W);let F=[];for(const W of C){o(W.mode.modeBits,4,F),o(W.numChars,W.mode.numCharCountBits(z),F);for(const J of W.getData())F.push(J)}g(F.length==j);const ie=it.getNumDataCodewords(z,w)*8;g(F.length<=ie),o(0,Math.min(4,ie-F.length),F),o(0,(8-F.length%8)%8,F),g(F.length%8==0);for(let W=236;F.length<ie;W^=253)o(W,8,F);let $=[];for(;$.length*8<F.length;)$.push(0);return F.forEach((W,J)=>$[J>>>3]|=W<<7-(J&7)),new it(z,w,$,k)}getModule(C,w){return 0<=C&&C<this.size&&0<=w&&w<this.size&&this.modules[w][C]}getModules(){return this.modules}drawFunctionPatterns(){for(let A=0;A<this.size;A++)this.setFunctionModule(6,A,A%2==0),this.setFunctionModule(A,6,A%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const C=this.getAlignmentPatternPositions(),w=C.length;for(let A=0;A<w;A++)for(let T=0;T<w;T++)A==0&&T==0||A==0&&T==w-1||A==w-1&&T==0||this.drawAlignmentPattern(C[A],C[T]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(C){const w=this.errorCorrectionLevel.formatBits<<3|C;let A=w;for(let k=0;k<10;k++)A=A<<1^(A>>>9)*1335;const T=(w<<10|A)^21522;g(T>>>15==0);for(let k=0;k<=5;k++)this.setFunctionModule(8,k,h(T,k));this.setFunctionModule(8,7,h(T,6)),this.setFunctionModule(8,8,h(T,7)),this.setFunctionModule(7,8,h(T,8));for(let k=9;k<15;k++)this.setFunctionModule(14-k,8,h(T,k));for(let k=0;k<8;k++)this.setFunctionModule(this.size-1-k,8,h(T,k));for(let k=8;k<15;k++)this.setFunctionModule(8,this.size-15+k,h(T,k));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let C=this.version;for(let A=0;A<12;A++)C=C<<1^(C>>>11)*7973;const w=this.version<<12|C;g(w>>>18==0);for(let A=0;A<18;A++){const T=h(w,A),k=this.size-11+A%3,B=Math.floor(A/3);this.setFunctionModule(k,B,T),this.setFunctionModule(B,k,T)}}drawFinderPattern(C,w){for(let A=-4;A<=4;A++)for(let T=-4;T<=4;T++){const k=Math.max(Math.abs(T),Math.abs(A)),B=C+T,z=w+A;0<=B&&B<this.size&&0<=z&&z<this.size&&this.setFunctionModule(B,z,k!=2&&k!=4)}}drawAlignmentPattern(C,w){for(let A=-2;A<=2;A++)for(let T=-2;T<=2;T++)this.setFunctionModule(C+T,w+A,Math.max(Math.abs(T),Math.abs(A))!=1)}setFunctionModule(C,w,A){this.modules[w][C]=A,this.isFunction[w][C]=!0}addEccAndInterleave(C){const w=this.version,A=this.errorCorrectionLevel;if(C.length!=it.getNumDataCodewords(w,A))throw new RangeError("Invalid argument");const T=it.NUM_ERROR_CORRECTION_BLOCKS[A.ordinal][w],k=it.ECC_CODEWORDS_PER_BLOCK[A.ordinal][w],B=Math.floor(it.getNumRawDataModules(w)/8),z=T-B%T,j=Math.floor(B/T);let F=[];const ie=it.reedSolomonComputeDivisor(k);for(let W=0,J=0;W<T;W++){let Ce=C.slice(J,J+j-k+(W<z?0:1));J+=Ce.length;const he=it.reedSolomonComputeRemainder(Ce,ie);W<z&&Ce.push(0),F.push(Ce.concat(he))}let $=[];for(let W=0;W<F[0].length;W++)F.forEach((J,Ce)=>{(W!=j-k||Ce>=z)&&$.push(J[W])});return g($.length==B),$}drawCodewords(C){if(C.length!=Math.floor(it.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let w=0;for(let A=this.size-1;A>=1;A-=2){A==6&&(A=5);for(let T=0;T<this.size;T++)for(let k=0;k<2;k++){const B=A-k,j=(A+1&2)==0?this.size-1-T:T;!this.isFunction[j][B]&&w<C.length*8&&(this.modules[j][B]=h(C[w>>>3],7-(w&7)),w++)}}g(w==C.length*8)}applyMask(C){if(C<0||C>7)throw new RangeError("Mask value out of range");for(let w=0;w<this.size;w++)for(let A=0;A<this.size;A++){let T;switch(C){case 0:T=(A+w)%2==0;break;case 1:T=w%2==0;break;case 2:T=A%3==0;break;case 3:T=(A+w)%3==0;break;case 4:T=(Math.floor(A/3)+Math.floor(w/2))%2==0;break;case 5:T=A*w%2+A*w%3==0;break;case 6:T=(A*w%2+A*w%3)%2==0;break;case 7:T=((A+w)%2+A*w%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[w][A]&&T&&(this.modules[w][A]=!this.modules[w][A])}}getPenaltyScore(){let C=0;for(let k=0;k<this.size;k++){let B=!1,z=0,j=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[k][F]==B?(z++,z==5?C+=it.PENALTY_N1:z>5&&C++):(this.finderPenaltyAddHistory(z,j),B||(C+=this.finderPenaltyCountPatterns(j)*it.PENALTY_N3),B=this.modules[k][F],z=1);C+=this.finderPenaltyTerminateAndCount(B,z,j)*it.PENALTY_N3}for(let k=0;k<this.size;k++){let B=!1,z=0,j=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][k]==B?(z++,z==5?C+=it.PENALTY_N1:z>5&&C++):(this.finderPenaltyAddHistory(z,j),B||(C+=this.finderPenaltyCountPatterns(j)*it.PENALTY_N3),B=this.modules[F][k],z=1);C+=this.finderPenaltyTerminateAndCount(B,z,j)*it.PENALTY_N3}for(let k=0;k<this.size-1;k++)for(let B=0;B<this.size-1;B++){const z=this.modules[k][B];z==this.modules[k][B+1]&&z==this.modules[k+1][B]&&z==this.modules[k+1][B+1]&&(C+=it.PENALTY_N2)}let w=0;for(const k of this.modules)w=k.reduce((B,z)=>B+(z?1:0),w);const A=this.size*this.size,T=Math.ceil(Math.abs(w*20-A*10)/A)-1;return g(0<=T&&T<=9),C+=T*it.PENALTY_N4,g(0<=C&&C<=2568888),C}getAlignmentPatternPositions(){if(this.version==1)return[];{const C=Math.floor(this.version/7)+2,w=this.version==32?26:Math.ceil((this.version*4+4)/(C*2-2))*2;let A=[6];for(let T=this.size-7;A.length<C;T-=w)A.splice(1,0,T);return A}}static getNumRawDataModules(C){if(C<it.MIN_VERSION||C>it.MAX_VERSION)throw new RangeError("Version number out of range");let w=(16*C+128)*C+64;if(C>=2){const A=Math.floor(C/7)+2;w-=(25*A-10)*A-55,C>=7&&(w-=36)}return g(208<=w&&w<=29648),w}static getNumDataCodewords(C,w){return Math.floor(it.getNumRawDataModules(C)/8)-it.ECC_CODEWORDS_PER_BLOCK[w.ordinal][C]*it.NUM_ERROR_CORRECTION_BLOCKS[w.ordinal][C]}static reedSolomonComputeDivisor(C){if(C<1||C>255)throw new RangeError("Degree out of range");let w=[];for(let T=0;T<C-1;T++)w.push(0);w.push(1);let A=1;for(let T=0;T<C;T++){for(let k=0;k<w.length;k++)w[k]=it.reedSolomonMultiply(w[k],A),k+1<w.length&&(w[k]^=w[k+1]);A=it.reedSolomonMultiply(A,2)}return w}static reedSolomonComputeRemainder(C,w){let A=w.map(T=>0);for(const T of C){const k=T^A.shift();A.push(0),w.forEach((B,z)=>A[z]^=it.reedSolomonMultiply(B,k))}return A}static reedSolomonMultiply(C,w){if(C>>>8||w>>>8)throw new RangeError("Byte out of range");let A=0;for(let T=7;T>=0;T--)A=A<<1^(A>>>7)*285,A^=(w>>>T&1)*C;return g(A>>>8==0),A}finderPenaltyCountPatterns(C){const w=C[1];g(w<=this.size*3);const A=w>0&&C[2]==w&&C[3]==w*3&&C[4]==w&&C[5]==w;return(A&&C[0]>=w*4&&C[6]>=w?1:0)+(A&&C[6]>=w*4&&C[0]>=w?1:0)}finderPenaltyTerminateAndCount(C,w,A){return C&&(this.finderPenaltyAddHistory(w,A),w=0),w+=this.size,this.finderPenaltyAddHistory(w,A),this.finderPenaltyCountPatterns(A)}finderPenaltyAddHistory(C,w){w[0]==0&&(C+=this.size),w.pop(),w.unshift(C)}};s.MIN_VERSION=1,s.MAX_VERSION=40,s.PENALTY_N1=3,s.PENALTY_N2=3,s.PENALTY_N3=40,s.PENALTY_N4=10,s.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],s.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],d.QrCode=s;function o(_,C,w){if(C<0||C>31||_>>>C)throw new RangeError("Value out of range");for(let A=C-1;A>=0;A--)w.push(_>>>A&1)}function h(_,C){return(_>>>C&1)!=0}function g(_){if(!_)throw new Error("Assertion error")}const f=class Gt{constructor(C,w,A){if(this.mode=C,this.numChars=w,this.bitData=A,w<0)throw new RangeError("Invalid argument");this.bitData=A.slice()}static makeBytes(C){let w=[];for(const A of C)o(A,8,w);return new Gt(Gt.Mode.BYTE,C.length,w)}static makeNumeric(C){if(!Gt.isNumeric(C))throw new RangeError("String contains non-numeric characters");let w=[];for(let A=0;A<C.length;){const T=Math.min(C.length-A,3);o(parseInt(C.substring(A,A+T),10),T*3+1,w),A+=T}return new Gt(Gt.Mode.NUMERIC,C.length,w)}static makeAlphanumeric(C){if(!Gt.isAlphanumeric(C))throw new RangeError("String contains unencodable characters in alphanumeric mode");let w=[],A;for(A=0;A+2<=C.length;A+=2){let T=Gt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(A))*45;T+=Gt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(A+1)),o(T,11,w)}return A<C.length&&o(Gt.ALPHANUMERIC_CHARSET.indexOf(C.charAt(A)),6,w),new Gt(Gt.Mode.ALPHANUMERIC,C.length,w)}static makeSegments(C){return C==""?[]:Gt.isNumeric(C)?[Gt.makeNumeric(C)]:Gt.isAlphanumeric(C)?[Gt.makeAlphanumeric(C)]:[Gt.makeBytes(Gt.toUtf8ByteArray(C))]}static makeEci(C){let w=[];if(C<0)throw new RangeError("ECI assignment value out of range");if(C<128)o(C,8,w);else if(C<16384)o(2,2,w),o(C,14,w);else if(C<1e6)o(6,3,w),o(C,21,w);else throw new RangeError("ECI assignment value out of range");return new Gt(Gt.Mode.ECI,0,w)}static isNumeric(C){return Gt.NUMERIC_REGEX.test(C)}static isAlphanumeric(C){return Gt.ALPHANUMERIC_REGEX.test(C)}getData(){return this.bitData.slice()}static getTotalBits(C,w){let A=0;for(const T of C){const k=T.mode.numCharCountBits(w);if(T.numChars>=1<<k)return 1/0;A+=4+k+T.bitData.length}return A}static toUtf8ByteArray(C){C=encodeURI(C);let w=[];for(let A=0;A<C.length;A++)C.charAt(A)!="%"?w.push(C.charCodeAt(A)):(w.push(parseInt(C.substring(A+1,A+3),16)),A+=2);return w}};f.NUMERIC_REGEX=/^[0-9]*$/,f.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,f.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let y=f;d.QrSegment=f})(Ts||(Ts={}));(d=>{(s=>{const o=class{constructor(g,f){this.ordinal=g,this.formatBits=f}};o.LOW=new o(0,1),o.MEDIUM=new o(1,0),o.QUARTILE=new o(2,3),o.HIGH=new o(3,2),s.Ecc=o})(d.QrCode||(d.QrCode={}))})(Ts||(Ts={}));(d=>{(s=>{const o=class{constructor(g,f){this.modeBits=g,this.numBitsCharCount=f}numCharCountBits(g){return this.numBitsCharCount[Math.floor((g+7)/17)]}};o.NUMERIC=new o(1,[10,12,14]),o.ALPHANUMERIC=new o(2,[9,11,13]),o.BYTE=new o(4,[8,16,16]),o.KANJI=new o(8,[8,10,12]),o.ECI=new o(7,[0,0,0]),s.Mode=o})(d.QrSegment||(d.QrSegment={}))})(Ts||(Ts={}));var Co=Ts;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var Ex={L:Co.QrCode.Ecc.LOW,M:Co.QrCode.Ecc.MEDIUM,Q:Co.QrCode.Ecc.QUARTILE,H:Co.QrCode.Ecc.HIGH},J0=128,e1="L",t1="#FFFFFF",n1="#000000",r1=!1,i1=1,Cx=4,Ax=0,Sx=.1;function s1(d,s=0){const o=[];return d.forEach(function(h,g){let f=null;h.forEach(function(y,_){if(!y&&f!==null){o.push(`M${f+s} ${g+s}h${_-f}v1H${f+s}z`),f=null;return}if(_===h.length-1){if(!y)return;f===null?o.push(`M${_+s},${g+s} h1v1H${_+s}z`):o.push(`M${f+s},${g+s} h${_+1-f}v1H${f+s}z`);return}y&&f===null&&(f=_)})}),o.join("")}function o1(d,s){return d.slice().map((o,h)=>h<s.y||h>=s.y+s.h?o:o.map((g,f)=>f<s.x||f>=s.x+s.w?g:!1))}function _x(d,s,o,h){if(h==null)return null;const g=d.length+o*2,f=Math.floor(s*Sx),y=g/s,_=(h.width||f)*y,C=(h.height||f)*y,w=h.x==null?d.length/2-_/2:h.x*y,A=h.y==null?d.length/2-C/2:h.y*y,T=h.opacity==null?1:h.opacity;let k=null;if(h.excavate){let z=Math.floor(w),j=Math.floor(A),F=Math.ceil(_+w-z),ie=Math.ceil(C+A-j);k={x:z,y:j,w:F,h:ie}}const B=h.crossOrigin;return{x:w,y:A,h:C,w:_,excavation:k,opacity:T,crossOrigin:B}}function Ix(d,s){return s!=null?Math.max(Math.floor(s),0):d?Cx:Ax}function a1({value:d,level:s,minVersion:o,includeMargin:h,marginSize:g,imageSettings:f,size:y,boostLevel:_}){let C=rn.useMemo(()=>{const z=(Array.isArray(d)?d:[d]).reduce((j,F)=>(j.push(...Co.QrSegment.makeSegments(F)),j),[]);return Co.QrCode.encodeSegments(z,Ex[s],o,void 0,void 0,_)},[d,s,o,_]);const{cells:w,margin:A,numCells:T,calculatedImageSettings:k}=rn.useMemo(()=>{let B=C.getModules();const z=Ix(h,g),j=B.length+z*2,F=_x(B,y,z,f);return{cells:B,margin:z,numCells:j,calculatedImageSettings:F}},[C,y,f,h,g]);return{qrcode:C,margin:A,cells:w,numCells:T,calculatedImageSettings:k}}var Tx=(function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0})(),l1=rn.forwardRef(function(s,o){const h=s,{value:g,size:f=J0,level:y=e1,bgColor:_=t1,fgColor:C=n1,includeMargin:w=r1,minVersion:A=i1,boostLevel:T,marginSize:k,imageSettings:B}=h,j=Yu(h,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:F}=j,ie=Yu(j,["style"]),$=B?.src,W=rn.useRef(null),J=rn.useRef(null),Ce=rn.useCallback(Ze=>{W.current=Ze,typeof o=="function"?o(Ze):o&&(o.current=Ze)},[o]),[he,K]=rn.useState(!1),{margin:Ee,cells:oe,numCells:vt,calculatedImageSettings:ut}=a1({value:g,level:y,minVersion:A,boostLevel:T,includeMargin:w,marginSize:k,imageSettings:B,size:f});rn.useEffect(()=>{if(W.current!=null){const Ze=W.current,re=Ze.getContext("2d");if(!re)return;let st=oe;const _e=J.current,ye=ut!=null&&_e!==null&&_e.complete&&_e.naturalHeight!==0&&_e.naturalWidth!==0;ye&&ut.excavation!=null&&(st=o1(oe,ut.excavation));const Re=window.devicePixelRatio||1;Ze.height=Ze.width=f*Re;const ve=f/vt*Re;re.scale(ve,ve),re.fillStyle=_,re.fillRect(0,0,vt,vt),re.fillStyle=C,Tx?re.fill(new Path2D(s1(st,Ee))):oe.forEach(function(X,se){X.forEach(function(ze,Pe){ze&&re.fillRect(Pe+Ee,se+Ee,1,1)})}),ut&&(re.globalAlpha=ut.opacity),ye&&re.drawImage(_e,ut.x+Ee,ut.y+Ee,ut.w,ut.h)}}),rn.useEffect(()=>{K(!1)},[$]);const ke=Gu({height:f,width:f},F);let Ye=null;return $!=null&&(Ye=rn.createElement("img",{src:$,key:$,style:{display:"none"},onLoad:()=>{K(!0)},ref:J,crossOrigin:ut?.crossOrigin})),rn.createElement(rn.Fragment,null,rn.createElement("canvas",Gu({style:ke,height:f,width:f,ref:Ce,role:"img"},ie)),Ye)});l1.displayName="QRCodeCanvas";var bx=rn.forwardRef(function(s,o){const h=s,{value:g,size:f=J0,level:y=e1,bgColor:_=t1,fgColor:C=n1,includeMargin:w=r1,minVersion:A=i1,boostLevel:T,title:k,marginSize:B,imageSettings:z}=h,j=Yu(h,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:F,cells:ie,numCells:$,calculatedImageSettings:W}=a1({value:g,level:y,minVersion:A,boostLevel:T,includeMargin:w,marginSize:B,imageSettings:z,size:f});let J=ie,Ce=null;z!=null&&W!=null&&(W.excavation!=null&&(J=o1(ie,W.excavation)),Ce=rn.createElement("image",{href:z.src,height:W.h,width:W.w,x:W.x+F,y:W.y+F,preserveAspectRatio:"none",opacity:W.opacity,crossOrigin:W.crossOrigin}));const he=s1(J,F);return rn.createElement("svg",Gu({height:f,width:f,viewBox:`0 0 ${$} ${$}`,ref:o,role:"img"},j),!!k&&rn.createElement("title",null,k),rn.createElement("path",{fill:_,d:`M0,0 h${$}v${$}H0z`,shapeRendering:"crispEdges"}),rn.createElement("path",{fill:C,d:he,shapeRendering:"crispEdges"}),Ce)});bx.displayName="QRCodeSVG";const Nx=({studentId:d,qrCode:s,name:o,onRegenerate:h})=>{const g=()=>{const f=document.getElementById(`qr-${d}`);if(console.log(f),!!f&&f){const y=f.toDataURL("image/png").replace("image/png","image/octet-stream"),_=document.createElement("a");_.href=y,_.download=`${o.replace(/\s+/g,"-")}-qr-code.png`,document.body.appendChild(_),_.click(),document.body.removeChild(_)}};return M.jsxs("div",{className:"flex flex-col items-center p-4 border rounded-lg shadow-sm bg-white",children:[M.jsx(l1,{id:`qr-${d}`,value:s,size:180,level:"H",includeMargin:!0}),M.jsxs("div",{className:"mt-3 text-center",children:[M.jsx("p",{className:"text-lg font-medium text-gray-900",children:o}),M.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",d]})]}),M.jsxs("div",{className:"mt-4 flex space-x-2",children:[M.jsx(sn,{onClick:g,variant:"secondary",size:"sm",children:"Download QR"}),M.jsx(sn,{onClick:()=>h(d),variant:"outline",size:"sm",children:"Regenerate"})]})]})},Ox=({onSubmit:d,initialData:s=null,onCancel:o})=>{const{classes:h}=_o(),[g,f]=le.useState({name:"",classId:""});le.useEffect(()=>{s&&f({name:s.name||"",classId:s.classId||""})},[s]);const y=C=>{const{name:w,value:A}=C.target;f({...g,[w]:w==="classId"?parseInt(A):A})},_=C=>{C.preventDefault(),d(g)};return M.jsxs("form",{onSubmit:_,className:"space-y-4",children:[M.jsxs("div",{children:[M.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Student Name"}),M.jsx("input",{type:"text",id:"name",name:"name",value:g.name,onChange:y,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),M.jsxs("div",{children:[M.jsx("label",{htmlFor:"classId",className:"block text-sm font-medium text-gray-700",children:"Class"}),M.jsxs("select",{id:"classId",name:"classId",value:g.classId,onChange:y,required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[M.jsx("option",{value:"",children:"Select a class"}),h.map(C=>M.jsx("option",{value:C.id,children:C.name},C.id))]})]}),M.jsxs("div",{className:"flex space-x-3",children:[M.jsx(sn,{type:"submit",variant:"primary",children:s?"Update Student":"Add Student"}),o&&M.jsx(sn,{type:"button",variant:"secondary",onClick:o,children:"Cancel"})]})]})},Rx=({placeholder:d="Search...",onSearch:s})=>{const[o,h]=le.useState(""),g=f=>{const y=f.target.value;h(y),s&&s(y)};return M.jsxs("div",{className:"relative w-full max-w-sm",children:[M.jsx("input",{type:"text",value:o,onChange:g,placeholder:d,className:"w-full rounded-2xl border border-gray-300 bg-white px-4 py-2 pl-10 text-sm shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:outline-none"}),M.jsx(mx,{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400"})]})},Mx=()=>{const[d,s]=le.useState([]),[o,h]=le.useState([]),[g,f]=le.useState(!1),[y,_]=le.useState(null),[C,w]=le.useState(null),[A,T]=le.useState("");le.useEffect(()=>{(async()=>{const{data:W,error:J}=await Xt.from("students").select("*");J?console.error(J):s(W);const{data:Ce,error:he}=await Xt.from("classes").select("*");he?console.error(he):h(Ce)})()},[]);const k=async $=>{const{data:W,error:J}=await Xt.from("students").insert([{name:$.name,class_id:$.classId,qr_code:`student-${crypto.randomUUID()}`}]).select();J?console.error(J):(s([...d,W[0]]),f(!1))},B=async $=>{const{data:W,error:J}=await Xt.from("students").update({name:$.name,class_id:$.classId}).eq("id",y.id).select();J?console.error(J):(s(d.map(Ce=>Ce.id===y.id?W[0]:Ce)),_(null))},z=async $=>{if(!window.confirm("Are you sure you want to delete this student?"))return;const{error:W}=await Xt.from("students").delete().eq("id",$);W?console.error(W):s(d.filter(J=>J.id!==$))},j=async $=>{try{const W=`student-${crypto.randomUUID()}`,{data:J,error:Ce}=await Xt.from("students").update({qr_code:W}).eq("id",$).select();if(Ce)throw Ce;s(he=>he.map(K=>K.id===$?J[0]:K)),C?.id===$&&w(J[0]),alert("QR Code regenerated successfully!")}catch(W){console.error(W),alert("Failed to regenerate QR code")}},F=$=>{const W=o.find(J=>J.id===$);return W?W.name:"Unknown Class"},ie=d.filter($=>$.name.toLowerCase().includes(A.toLowerCase()));return M.jsxs("div",{children:[M.jsxs("div",{className:"flex justify-between items-center gap-4",children:[M.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Manage Students"}),M.jsx(Rx,{placeholder:"Search students...",onSearch:$=>T($)}),M.jsxs(sn,{onClick:()=>f(!0),variant:"primary",size:"sm",children:[M.jsx(gx,{className:"w-4 h-4 mr-1"})," Add Student"]})]}),(g||y)&&M.jsxs("div",{className:"mt-6 bg-white p-6 shadow rounded-lg",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:y?"Edit Student":"Add New Student"}),M.jsx(Ox,{onSubmit:y?B:k,initialData:y,onCancel:()=>{f(!1),_(null)}})]}),C&&M.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:M.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full",children:[M.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Student QR Code"}),M.jsx(Nx,{studentId:C.id,qrCode:C.qr_code,name:C.name,onRegenerate:j}),M.jsx("div",{className:"mt-4 flex justify-end",children:M.jsx(sn,{onClick:()=>w(null),variant:"secondary",children:"Close"})})]})}),M.jsx("div",{className:"mt-6 bg-white shadow overflow-hidden rounded-md",children:M.jsx("ul",{className:"divide-y divide-gray-200",children:ie.length>0?ie.map($=>M.jsx("li",{className:"px-6 py-4",children:M.jsxs("div",{className:"flex items-center justify-between",children:[M.jsxs("div",{children:[M.jsx("h3",{className:"text-sm font-medium text-gray-900",children:$.name}),M.jsxs("p",{className:"text-sm text-gray-500",children:["Class: ",F($.class_id)]})]}),M.jsxs("div",{className:"flex space-x-2",children:[M.jsx(sn,{onClick:()=>w($),variant:"outline",size:"sm",children:"View QR"}),M.jsx(sn,{onClick:()=>_($),variant:"secondary",size:"sm",children:M.jsx(fx,{className:"w-4 h-4"})}),M.jsx(sn,{onClick:()=>z($.id),variant:"danger",size:"sm",children:M.jsx(xx,{className:"w-4 h-4"})})]})]})},$.id)):M.jsx("li",{className:"px-6 py-4 text-center text-gray-500",children:"No students found."})})})]})},pa=({children:d})=>{const{currentUser:s,logout:o}=Ns(),h=td(),g=Ql(),[f,y]=le.useState(!1),_=()=>{o(),h("/login")},C=s?.role==="admin"?[{path:"/admin",label:"Dashboard",icon:M.jsx(n0,{className:"w-5 h-5"})},{path:"/manage-students",label:"Manage Students",icon:M.jsx(i0,{className:"w-5 h-5"})},{path:"/attendance-scanner",label:"Scan Attendance",icon:M.jsx(px,{className:"w-5 h-5"})},{path:"/reports",label:"Reports",icon:M.jsx(t0,{className:"w-5 h-5"})}]:[{path:"/teacher",label:"Dashboard",icon:M.jsx(n0,{className:"w-5 h-5"})},{path:"/reports",label:"Reports",icon:M.jsx(t0,{className:"w-5 h-5"})}];return M.jsxs("div",{className:"flex h-screen bg-gray-100 overflow-hidden",children:[M.jsx("div",{className:"hidden md:flex md:w-64 md:flex-col md:fixed md:inset-y-0",children:M.jsxs("div",{className:"flex flex-col flex-grow bg-gray-800 pt-5 overflow-y-auto",children:[M.jsx("div",{className:"flex items-center flex-shrink-0 px-4",children:M.jsx("h1",{className:"text-white font-bold text-xl truncate",children:"Attendance System"})}),M.jsx("div",{className:"mt-5 flex-grow flex flex-col",children:M.jsx("nav",{className:"flex-1 px-2 pb-4 space-y-1",children:C.map(w=>M.jsxs("a",{href:w.path,onClick:A=>{A.preventDefault(),h(w.path),y(!1)},className:`${g.pathname===w.path?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} group flex items-center px-2 py-2 text-sm font-medium rounded-md truncate`,children:[M.jsx("div",{className:"mr-3 flex-shrink-0",children:w.icon}),M.jsx("span",{className:"truncate",children:w.label})]},w.path))})}),M.jsxs("div",{className:"flex flex-col items-center p-4",children:[M.jsxs("button",{onClick:_,className:"text-gray-300 hover:bg-gray-700 hover:text-white group flex justify-center items-center px-2 py-2 text-sm font-medium rounded-md w-full mb-4",children:[M.jsx(r0,{className:"mr-2 w-5 h-5"}),"Logout"]}),M.jsxs("div",{className:"flex items-center space-x-3",children:[s?.profileImg?M.jsx("img",{src:s.profileImg,alt:s.username,className:"w-10 h-10 border-2 border-white rounded-full object-cover"}):M.jsx(i0,{className:"w-10 h-10 text-gray-600 border-2 border-white rounded-full"}),M.jsxs("div",{className:"flex flex-col truncate",children:[M.jsx("p",{className:"text-sm font-medium text-white truncate",children:s.name}),M.jsx("p",{className:"text-xs font-medium text-blue-200 capitalize truncate",children:s.username})]})]})]})]})}),f&&M.jsxs("div",{className:"fixed inset-0 flex z-40 md:hidden",children:[M.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50",onClick:()=>y(!1)}),M.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-gray-800",children:[M.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:M.jsx("button",{onClick:()=>y(!1),className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",children:M.jsx(wx,{className:"h-6 w-6 text-white"})})}),M.jsxs("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[M.jsx("div",{className:"flex items-center px-4",children:M.jsx("h1",{className:"text-white font-bold text-xl truncate",children:"Attendance System"})}),M.jsxs("nav",{className:"mt-5 px-2 space-y-1",children:[C.map(w=>M.jsxs("a",{href:w.path,onClick:A=>{A.preventDefault(),h(w.path),y(!1)},className:`${g.pathname===w.path?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"} group flex items-center px-2 py-2 text-base font-medium rounded-md truncate`,children:[M.jsx("div",{className:"mr-3 flex-shrink-0",children:w.icon}),M.jsx("span",{className:"truncate",children:w.label})]},w.path)),M.jsxs("button",{onClick:_,className:"text-gray-300 hover:bg-gray-700 hover:text-white group flex items-center px-2 py-2 text-base font-medium rounded-md w-full",children:[M.jsx(r0,{className:"mr-3 w-5 h-5"}),"Logout"]})]})]})]})]}),M.jsxs("div",{className:"flex-1 flex flex-col md:pl-64 overflow-x-hidden",children:[M.jsxs("div",{className:"sticky top-0 z-10 md:hidden flex items-center justify-between bg-gray-100 px-4 py-2 shadow w-full",children:[M.jsx("button",{type:"button",onClick:()=>y(!0),className:"text-gray-500 hover:text-gray-900 focus:outline-none",children:M.jsx(hx,{className:"h-6 w-6"})}),M.jsx("h2",{className:"text-lg font-bold truncate w-3/4",children:"Attendance System"})]}),M.jsx("main",{className:"flex-1 overflow-y-auto focus:outline-none",children:M.jsx("div",{className:"py-6",children:M.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 w-full",children:d})})})]})]})},wo=({children:d,allowedRoles:s})=>{const{currentUser:o,loading:h}=Ns();return h?M.jsx("div",{className:"w-full h-screen flex items-center justify-center text-xl",children:"Loading..."}):o?s&&!s.includes(o.role)?M.jsx(Hl,{to:o.role==="admin"?"/admin":"/teacher",replace:!0}):d:M.jsx(Hl,{to:"/login",replace:!0})};function kx(){const{currentUser:d,loading:s}=Ns();return s?M.jsx("div",{className:"w-full h-screen flex items-center justify-center text-xl",children:"Loading..."}):M.jsx(p2,{children:M.jsxs(h2,{children:[M.jsx(hi,{path:"/login",element:M.jsx(m2,{})}),M.jsx(hi,{path:"/",element:M.jsx(wo,{children:M.jsx(Hl,{to:d?.role==="admin"?"/admin":"/teacher",replace:!0})})}),M.jsx(hi,{path:"/admin",element:M.jsx(wo,{allowedRoles:["admin"],children:M.jsx(pa,{children:M.jsx(x2,{})})})}),M.jsx(hi,{path:"/teacher",element:M.jsx(wo,{allowedRoles:["teacher"],children:M.jsx(pa,{children:M.jsx(w2,{})})})}),M.jsx(hi,{path:"/attendance-scanner",element:M.jsx(wo,{allowedRoles:["admin","teacher"],children:M.jsx(pa,{children:M.jsx(ox,{})})})}),M.jsx(hi,{path:"/reports",element:M.jsx(wo,{allowedRoles:["admin","teacher"],children:M.jsx(pa,{children:M.jsx(yx,{})})})}),M.jsx(hi,{path:"/manage-students",element:M.jsx(wo,{allowedRoles:["admin"],children:M.jsx(pa,{children:M.jsx(Mx,{})})})}),M.jsx(hi,{path:"*",element:M.jsx(Hl,{to:"/",replace:!0})})]})})}const Dx=()=>M.jsx(b0,{children:M.jsx(Cm,{children:M.jsx("div",{className:"w-full min-h-screen bg-gray-50",children:M.jsx(kx,{})})})}),Lx=ug.createRoot(document.getElementById("root"));Lx.render(M.jsx(b0,{children:M.jsx(Dx,{})}));
